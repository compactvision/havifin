import{r as i,j as e}from"./app-DvaUKoe-.js";import{L as x,I as p,B as g}from"./label-DYhpUyB5.js";import{t as n}from"./index-pL9mTvwW.js";import{c,m as f}from"./createLucideIcon-WQ6Op3ka.js";import{C as u}from"./circle-alert-239gpoRP.js";/* empty css            */const w=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],v=c("Lock",w);const y=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],j=c("LogIn",y);const N=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],k=c("Mail",N);function E(){const[a,d]=i.useState({email:"",password:""}),[t,m]=i.useState(!1),[o,h]=i.useState({}),b=async r=>{r.preventDefault(),m(!0),h({});try{const l=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(a)}),s=await l.json();if(!l.ok){s.errors?h(s.errors):s.message&&n.error(s.message);return}n.success("Connexion réussie!"),s.role==="manager"?window.location.href="/manager":s.role==="cashier"?window.location.href="/cashier":(s.role,window.location.href="/clientform")}catch(l){console.error("Login error:",l),n.error("Une erreur est survenue lors de la connexion")}finally{m(!1)}};return e.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[e.jsxs("div",{className:"fixed inset-0 z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/images/background1.png)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-900/20 to-slate-900/40"})]}),e.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center px-4 py-6",children:e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:[e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("div",{className:"group relative mx-auto mb-8 inline-block",children:[e.jsx("div",{className:"absolute -inset-12 rounded-full bg-gradient-to-tr from-cyan-400/30 via-purple-500/30 to-pink-500/30 opacity-60 blur-3xl transition-all duration-700 group-hover:scale-110 group-hover:opacity-100"}),e.jsx("div",{className:"relative flex h-48 w-48 items-center justify-center rounded-[40px] border border-white/30 bg-white/70 p-6 shadow-2xl shadow-purple-500/20 backdrop-blur-2xl transition-all duration-500 group-hover:scale-110 group-hover:rotate-3 group-hover:border-white/50 group-hover:bg-white/20",children:e.jsx("img",{src:"/logo-color.png",alt:"Havifin",className:"h-full w-full object-contain drop-shadow-2xl"})})]})}),e.jsxs("div",{className:"rounded-[32px] border border-white/20 bg-white/60 p-6 shadow-2xl shadow-purple-500/20 backdrop-blur-2xl",children:[e.jsx("p",{className:"bg-gradient-to-r from-cyan-300 via-blue-300 to-purple-300 bg-clip-text text-transparent",children:"Connexion"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"ml-2 font-bold text-slate-800",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-slate-500"}),e.jsx(p,{type:"email",value:a.email,onChange:r=>d({...a,email:r.target.value}),placeholder:"admin@havifin.com",className:"h-14 rounded-2xl border-2 border-white/30 bg-white/10 pl-12 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-500 focus:border-cyan-500/50 focus:bg-white/40 focus:ring-4 focus:ring-cyan-500/20",disabled:t})]}),o.email&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:[e.jsx(u,{className:"h-4 w-4"}),o.email]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"ml-2 font-bold text-slate-800",children:"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-slate-500"}),e.jsx(p,{type:"password",value:a.password,onChange:r=>d({...a,password:r.target.value}),placeholder:"••••••••",className:"h-14 rounded-2xl border-2 border-white/30 bg-white/10 pl-12 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-500 focus:border-cyan-500/50 focus:bg-white/40 focus:ring-4 focus:ring-cyan-500/20",disabled:t})]}),o.password&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:[e.jsx(u,{className:"h-4 w-4"}),o.password]})]}),e.jsx(g,{type:"submit",disabled:t,className:"h-14 w-full rounded-2xl border border-white/30 bg-gradient-to-r from-cyan-500 via-blue-600 to-purple-600 text-lg font-bold text-white shadow-2xl shadow-cyan-500/30 backdrop-blur-xl transition-all hover:scale-[1.02] hover:border-white/50 hover:shadow-cyan-500/50 active:scale-[0.98]",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Connexion en cours..."]}):e.jsxs(e.Fragment,{children:["Se connecter",e.jsx(j,{className:"ml-2 h-5 w-5"})]})})]}),e.jsxs("div",{className:"mt-6 rounded-xl border border-cyan-500/30 bg-cyan-500/10 p-4 text-center text-sm text-cyan-900",children:[e.jsx("p",{className:"font-medium",children:"Comptes de test"}),e.jsx("p",{className:"mt-1 text-xs text-cyan-800/80",children:"Manager: admin@havifin.com / password"}),e.jsx("p",{className:"text-xs text-cyan-800/80",children:"Cashier: cashier@havifin.com / password"}),e.jsx("p",{className:"text-xs text-cyan-800/80",children:"Client: client@havifin.com / password"})]})]})]})})]})}export{E as default};
