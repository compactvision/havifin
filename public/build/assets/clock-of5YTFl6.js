import{r as s,j as E}from"./app-6bs8d8QB.js";import{M as _,i as b,u as z,P as A,a as D,d as H,L as K,c as U}from"./createLucideIcon-dTi0n6Eb.js";function $(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function B(...e){return o=>{let t=!1;const i=e.map(c=>{const n=$(c,o);return!t&&typeof n=="function"&&(t=!0),n});if(t)return()=>{for(let c=0;c<i.length;c++){const n=i[c];typeof n=="function"?n():$(e[c],null)}}}}function F(...e){return s.useCallback(B(...e),e)}class G extends s.Component{getSnapshotBeforeUpdate(o){const t=this.props.childRef.current;if(t&&o.isPresent&&!this.props.isPresent){const i=t.offsetParent,c=b(i)&&i.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=c-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function N({children:e,isPresent:o,anchorX:t,root:i}){const c=s.useId(),n=s.useRef(null),h=s.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:g}=s.useContext(_),P=e.props?.ref??e?.ref,u=F(n,P);return s.useInsertionEffect(()=>{const{width:y,height:f,top:l,left:a,right:m}=h.current;if(o||!n.current||!y||!f)return;const C=t==="left"?`left: ${a}`:`right: ${m}`;n.current.dataset.motionPopId=c;const d=document.createElement("style");g&&(d.nonce=g);const w=i??document.head;return w.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${f}px !important;
            ${C}px !important;
            top: ${l}px !important;
          }
        `),()=>{w.contains(d)&&w.removeChild(d)}},[o]),E.jsx(G,{isPresent:o,childRef:n,sizeRef:h,children:s.cloneElement(e,{ref:u})})}const V=({children:e,initial:o,isPresent:t,onExitComplete:i,custom:c,presenceAffectsLayout:n,mode:h,anchorX:g,root:P})=>{const u=z(X),y=s.useId();let f=!0,l=s.useMemo(()=>(f=!1,{id:y,initial:o,isPresent:t,custom:c,onExitComplete:a=>{u.set(a,!0);for(const m of u.values())if(!m)return;i&&i()},register:a=>(u.set(a,!1),()=>u.delete(a))}),[t,u,i]);return n&&f&&(l={...l}),s.useMemo(()=>{u.forEach((a,m)=>u.set(m,!1))},[t]),s.useEffect(()=>{!t&&!u.size&&i&&i()},[t]),h==="popLayout"&&(e=E.jsx(N,{isPresent:t,anchorX:g,root:P,children:e})),E.jsx(A.Provider,{value:l,children:e})};function X(){return new Map}const M=e=>e.key||"";function I(e){const o=[];return s.Children.forEach(e,t=>{s.isValidElement(t)&&o.push(t)}),o}const Q=({children:e,custom:o,initial:t=!0,onExitComplete:i,presenceAffectsLayout:c=!0,mode:n="sync",propagate:h=!1,anchorX:g="left",root:P})=>{const[u,y]=D(h),f=s.useMemo(()=>I(e),[e]),l=h&&!u?[]:f.map(M),a=s.useRef(!0),m=s.useRef(f),C=z(()=>new Map),d=s.useRef(new Set),[w,S]=s.useState(f),[x,v]=s.useState(f);H(()=>{a.current=!1,m.current=f;for(let p=0;p<x.length;p++){const r=M(x[p]);l.includes(r)?(C.delete(r),d.current.delete(r)):C.get(r)!==!0&&C.set(r,!1)}},[x,l.length,l.join("-")]);const k=[];if(f!==w){let p=[...f];for(let r=0;r<x.length;r++){const R=x[r],j=M(R);l.includes(j)||(p.splice(r,0,R),k.push(R))}return n==="wait"&&k.length&&(p=k),v(I(p)),S(f),null}const{forceRender:T}=s.useContext(K);return E.jsx(E.Fragment,{children:x.map(p=>{const r=M(p),R=h&&!u?!1:f===x||l.includes(r),j=()=>{if(d.current.has(r))return;if(d.current.add(r),C.has(r))C.set(r,!0);else return;let L=!0;C.forEach(W=>{W||(L=!1)}),L&&(T?.(),v(m.current),h&&y?.(),i&&i())};return E.jsx(V,{isPresent:R,initial:!a.current||t?void 0:!1,custom:o,presenceAffectsLayout:c,mode:n,root:P,onExitComplete:R?void 0:j,anchorX:g,children:p},r)})})};const q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Y=U("Clock",q);export{Q as A,Y as C};
