import{c as ee,j as e,r as B,L as Is,u as Be,R as Ts,b as xs,a as rs,H as Ls}from"./app-pbanxzkV.js";import{b as Q}from"./base44Client-79Pkw9ID.js";import{B as Z}from"./badge-CRwmEF2P.js";import{b as _e,c as qe}from"./card-B0xdMnt7.js";import{u as oe,A as Ye,U as Le}from"./users-DA9SA4A4.js";import{h as X}from"./moment-B-YVwB4U.js";import{T as Ps,f as Os,C as Ys,R as zs,P as Hs,g as Bs,O as Ks,c as ys,d as Vs,b as ks,e as Gs,a as _s,D as Ss}from"./dialog-DcVD7lGJ.js";import{c as pe,a as G,m as ue}from"./createLucideIcon-Ds7Ig1I2.js";import{X as Ke,U as $e,a as os,S as Je,A as Qs,b as ps}from"./app-main-q-9un8_Z.js";import{C as Ue}from"./clock-DhbgHvtU.js";import{A as Cs,a as Ds,C as ts,H as Js,S as Ge,T as fs}from"./TransactionsTable-atC4BjRX.js";import{T as Se}from"./trending-up-6ZHgFs7r.js";import{H as Xs}from"./history-BfQUlDU2.js";import{C as ms,T as gs,A as Ee}from"./trending-down-rkO8kYmT.js";import{T as Pe,a as me,b as Ms,c as he,d as Fs,e as As}from"./table-CIlypQPg.js";import{B as qs}from"./banknote-CPXxQO2J.js";import{B as $,t as K}from"./index-TiLAn61d.js";import{S as Ae}from"./skeleton-DEY2Nd8B.js";import{P as Ws}from"./phone-BLy_DPN8.js";import{E as as}from"./eye-Dx6F7heZ.js";import{L as ae,I as ce}from"./label-Dzmu9PQf.js";import{S as Xe,a as We,b as Ze,c as es,d as Ne}from"./select-0LJ1QN5h.js";import{c as Ie}from"./axios-Y0uNCsH3.js";import{u as de}from"./useMutation-C748SIgB.js";import{L as ze,R as He}from"./refresh-cw-CmhU5sm1.js";import{B as cs}from"./building-2-fO2CIZqq.js";import{C as bs}from"./circle-check-CcA95Yts.js";import{P as Re}from"./plus-BSed6RQx.js";import{T as ss}from"./trash-2-BtDlikzZ.js";import{G as js,C as Zs}from"./globe-B23kGaPW.js";import{S as et,a as Oe}from"./smartphone-DF9n6IBJ.js";import{L as Rs}from"./loader-circle-BgTvunI_.js";import{T as st}from"./textarea-CGzbXU8R.js";import{D as tt}from"./dollar-sign-BmiDAv8J.js";import{L as at}from"./lock-open-gTa-xTvP.js";import{C as lt}from"./circle-alert-EzgSswlN.js";import{S as it,a as nt}from"./ShopManager-Csn4g6IH.js";/* empty css            */import"./index-NnemM8oa.js";import"./check-BFPVaMJ8.js";import"./ManagerModal-DjIMOgjY.js";const rt=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],hs=pe("Activity",rt);const ct=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Ns=pe("ChartPie",ct);const ot=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],us=pe("CircleStop",ot);const dt=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],xt=pe("Download",dt);const mt=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],ht=pe("Filter",mt);const ut=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],pt=pe("LayoutGrid",ut);const ft=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],gt=pe("List",ft);const bt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],jt=pe("Pencil",bt);const Nt=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],ls=pe("Play",Nt);const vt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$s=pe("Save",vt);const wt=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ds=pe("Settings",wt);const yt=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],kt=pe("Shield",yt);function _t(t){const s=ee.c(4);let a;s[0]!==t?({...a}=t,s[0]=t,s[1]=a):a=s[1];let l;return s[2]!==a?(l=e.jsx(zs,{"data-slot":"sheet",...a}),s[2]=a,s[3]=l):l=s[3],l}function St(t){const s=ee.c(4);let a;s[0]!==t?({...a}=t,s[0]=t,s[1]=a):a=s[1];let l;return s[2]!==a?(l=e.jsx(Hs,{"data-slot":"sheet-portal",...a}),s[2]=a,s[3]=l):l=s[3],l}function Ct(t){const s=ee.c(8);let a,l;s[0]!==t?({className:a,...l}=t,s[0]=t,s[1]=a,s[2]=l):(a=s[1],l=s[2]);let n;s[3]!==a?(n=G("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==l||s[6]!==n?(i=e.jsx(Ks,{"data-slot":"sheet-overlay",className:n,...l}),s[5]=l,s[6]=n,s[7]=i):i=s[7],i}function Dt(t){const s=ee.c(17);let a,l,n,i;s[0]!==t?({className:l,children:a,side:i,...n}=t,s[0]=t,s[1]=a,s[2]=l,s[3]=n,s[4]=i):(a=s[1],l=s[2],n=s[3],i=s[4]);const c=i===void 0?"right":i;let x;s[5]===Symbol.for("react.memo_cache_sentinel")?(x=e.jsx(Ct,{}),s[5]=x):x=s[5];const h=c==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",_=c==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",d=c==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",r=c==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t";let p;s[6]!==l||s[7]!==h||s[8]!==_||s[9]!==d||s[10]!==r?(p=G("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",h,_,d,r,l),s[6]=l,s[7]=h,s[8]=_,s[9]=d,s[10]=r,s[11]=p):p=s[11];let b;s[12]===Symbol.for("react.memo_cache_sentinel")?(b=e.jsxs(Bs,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(Ke,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),s[12]=b):b=s[12];let v;return s[13]!==a||s[14]!==n||s[15]!==p?(v=e.jsxs(St,{children:[x,e.jsxs(Ys,{"data-slot":"sheet-content",className:p,...n,children:[a,b]})]}),s[13]=a,s[14]=n,s[15]=p,s[16]=v):v=s[16],v}function Mt(t){const s=ee.c(8);let a,l;s[0]!==t?({className:a,...l}=t,s[0]=t,s[1]=a,s[2]=l):(a=s[1],l=s[2]);let n;s[3]!==a?(n=G("flex flex-col gap-1.5 p-4",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==l||s[6]!==n?(i=e.jsx("div",{"data-slot":"sheet-header",className:n,...l}),s[5]=l,s[6]=n,s[7]=i):i=s[7],i}function Ft(t){const s=ee.c(8);let a,l;s[0]!==t?({className:a,...l}=t,s[0]=t,s[1]=a,s[2]=l):(a=s[1],l=s[2]);let n;s[3]!==a?(n=G("text-foreground font-semibold",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==l||s[6]!==n?(i=e.jsx(Ps,{"data-slot":"sheet-title",className:n,...l}),s[5]=l,s[6]=n,s[7]=i):i=s[7],i}function At(t){const s=ee.c(8);let a,l;s[0]!==t?({className:a,...l}=t,s[0]=t,s[1]=a,s[2]=l):(a=s[1],l=s[2]);let n;s[3]!==a?(n=G("text-muted-foreground text-sm",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==l||s[6]!==n?(i=e.jsx(Os,{"data-slot":"sheet-description",className:n,...l}),s[5]=l,s[6]=n,s[7]=i):i=s[7],i}function qt(t){const s=ee.c(78),{user:a,isOpen:l,onClose:n}=t;if(!a)return null;const i=a.detailed_stats;let c;s[0]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsx("div",{className:"h-2 w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),s[0]=c):c=s[0];let x;s[1]!==a.cashier_name?(x=a.cashier_name.charAt(0),s[1]=a.cashier_name,s[2]=x):x=s[2];let h;s[3]!==x?(h=e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-[2rem] bg-indigo-600 text-3xl font-black text-white shadow-xl shadow-indigo-200",children:x}),s[3]=x,s[4]=h):h=s[4];let _;s[5]!==a.cashier_name?(_=e.jsx(Ft,{className:"mb-1 text-3xl leading-none font-black text-slate-900",children:a.cashier_name}),s[5]=a.cashier_name,s[6]=_):_=s[6];let d;s[7]!==a.cashier_email?(d=e.jsx(At,{className:"text-xs font-bold tracking-widest text-indigo-500 uppercase",children:a.cashier_email}),s[7]=a.cashier_email,s[8]=d):d=s[8];let r;s[9]===Symbol.for("react.memo_cache_sentinel")?(r=e.jsx(Ue,{className:"mr-1.5 h-3 w-3"}),s[9]=r):r=s[9];const p=a.connection_time||"--:--";let b;s[10]!==p?(b=e.jsx("div",{className:"mt-4 flex items-center gap-2",children:e.jsxs(Z,{variant:"outline",className:"rounded-xl border-emerald-100 bg-emerald-50 font-bold text-emerald-600",children:[r,"Connecté à"," ",p]})}),s[10]=p,s[11]=b):b=s[11];let v;s[12]!==_||s[13]!==d||s[14]!==b?(v=e.jsxs("div",{children:[_,d,b]}),s[12]=_,s[13]=d,s[14]=b,s[15]=v):v=s[15];let S;s[16]!==h||s[17]!==v?(S=e.jsx(Mt,{className:"mb-10",children:e.jsxs("div",{className:"mb-4 flex items-center gap-6",children:[h,v]})}),s[16]=h,s[17]=v,s[18]=S):S=s[18];let U;s[19]===Symbol.for("react.memo_cache_sentinel")?(U=e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("div",{className:"rounded-xl bg-emerald-50 p-2",children:e.jsx(Cs,{className:"h-5 w-5 text-emerald-600"})}),e.jsx("span",{className:"text-[10px] font-black tracking-wider text-emerald-600 uppercase",children:"Dépôts"})]}),s[19]=U):U=s[19];let u;s[20]!==i.deposits?(u=e.jsx("h4",{className:"text-2xl font-black text-slate-900",children:i.deposits}),s[20]=i.deposits,s[21]=u):u=s[21];let A;s[22]===Symbol.for("react.memo_cache_sentinel")?(A=e.jsx("p",{className:"mt-1 text-[10px] font-bold text-slate-400 uppercase",children:"Actions aujourd'hui"}),s[22]=A):A=s[22];let k;s[23]!==u?(k=e.jsx(_e,{className:"overflow-hidden rounded-3xl border-none bg-white shadow-sm",children:e.jsxs(qe,{className:"p-6",children:[U,u,A]})}),s[23]=u,s[24]=k):k=s[24];let j;s[25]===Symbol.for("react.memo_cache_sentinel")?(j=e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("div",{className:"rounded-xl bg-rose-50 p-2",children:e.jsx(Ds,{className:"h-5 w-5 text-rose-600"})}),e.jsx("span",{className:"text-[10px] font-black tracking-wider text-rose-600 uppercase",children:"Retraits"})]}),s[25]=j):j=s[25];let D;s[26]!==i.withdrawals?(D=e.jsx("h4",{className:"text-2xl font-black text-slate-900",children:i.withdrawals}),s[26]=i.withdrawals,s[27]=D):D=s[27];let m;s[28]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsx("p",{className:"mt-1 text-[10px] font-bold text-slate-400 uppercase",children:"Actions aujourd'hui"}),s[28]=m):m=s[28];let w;s[29]!==D?(w=e.jsx(_e,{className:"overflow-hidden rounded-3xl border-none bg-white shadow-sm",children:e.jsxs(qe,{className:"p-6",children:[j,D,m]})}),s[29]=D,s[30]=w):w=s[30];let M;s[31]===Symbol.for("react.memo_cache_sentinel")?(M=e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("div",{className:"rounded-xl bg-amber-50 p-2",children:e.jsx(Se,{className:"h-5 w-5 text-amber-600"})}),e.jsx("span",{className:"text-[10px] font-black tracking-wider text-amber-600 uppercase",children:"Changes"})]}),s[31]=M):M=s[31];let g;s[32]!==i.exchanges?(g=e.jsx("h4",{className:"text-2xl font-black text-slate-900",children:i.exchanges}),s[32]=i.exchanges,s[33]=g):g=s[33];let F;s[34]===Symbol.for("react.memo_cache_sentinel")?(F=e.jsx("p",{className:"mt-1 text-[10px] font-bold text-slate-400 uppercase",children:"Opérations"}),s[34]=F):F=s[34];let f;s[35]!==g?(f=e.jsx(_e,{className:"overflow-hidden rounded-3xl border-none bg-white shadow-sm",children:e.jsxs(qe,{className:"p-6",children:[M,g,F]})}),s[35]=g,s[36]=f):f=s[36];let q;s[37]===Symbol.for("react.memo_cache_sentinel")?(q=e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("div",{className:"rounded-xl bg-indigo-50 p-2",children:e.jsx(Xs,{className:"h-5 w-5 text-indigo-600"})}),e.jsx("span",{className:"text-[10px] font-black tracking-wider text-indigo-600 uppercase",children:"Mouvements"})]}),s[37]=q):q=s[37];const y=i.adjustments_in+i.adjustments_out;let C;s[38]!==y?(C=e.jsx("h4",{className:"text-2xl font-black text-slate-900",children:y}),s[38]=y,s[39]=C):C=s[39];let I;s[40]===Symbol.for("react.memo_cache_sentinel")?(I=e.jsx("p",{className:"mt-1 text-[10px] font-bold text-slate-400 uppercase",children:"Manuels (In/Out)"}),s[40]=I):I=s[40];let T;s[41]!==C?(T=e.jsx(_e,{className:"overflow-hidden rounded-3xl border-none bg-white shadow-sm",children:e.jsxs(qe,{className:"p-6",children:[q,C,I]})}),s[41]=C,s[42]=T):T=s[42];let R;s[43]!==k||s[44]!==w||s[45]!==f||s[46]!==T?(R=e.jsxs("div",{className:"mb-10 grid grid-cols-2 gap-4",children:[k,w,f,T]}),s[43]=k,s[44]=w,s[45]=f,s[46]=T,s[47]=R):R=s[47];let P;s[48]===Symbol.for("react.memo_cache_sentinel")?(P=e.jsx("p",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Volume Traité (USD)"}),s[48]=P):P=s[48];let z;s[49]!==i.total_amount_usd?(z=i.total_amount_usd.toLocaleString(),s[49]=i.total_amount_usd,s[50]=z):z=s[50];let O;s[51]!==z?(O=e.jsxs("div",{children:[P,e.jsxs("h3",{className:"text-2xl font-black",children:["$ ",z]})]}),s[51]=z,s[52]=O):O=s[52];let V,H;s[53]===Symbol.for("react.memo_cache_sentinel")?(V=e.jsx("div",{className:"h-10 w-[1px] bg-slate-800"}),H=e.jsx("p",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Volume Traité (CDF)"}),s[53]=V,s[54]=H):(V=s[53],H=s[54]);let N;s[55]!==i.total_amount_cdf?(N=i.total_amount_cdf.toLocaleString(),s[55]=i.total_amount_cdf,s[56]=N):N=s[56];let L;s[57]!==N?(L=e.jsxs("div",{children:[H,e.jsxs("h3",{className:"text-2xl font-black",children:[N," FC"]})]}),s[57]=N,s[58]=L):L=s[58];let Y;s[59]!==O||s[60]!==L?(Y=e.jsx("div",{className:"mb-10 space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between rounded-2xl bg-slate-900 p-6 text-white shadow-xl",children:[O,V,L]})}),s[59]=O,s[60]=L,s[61]=Y):Y=s[61];let ie;s[62]===Symbol.for("react.memo_cache_sentinel")?(ie=e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hs,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h4",{className:"text-lg font-black tracking-tight text-slate-800",children:"Dernières Activités"})]}),s[62]=ie):ie=s[62];let le;if(s[63]!==a.recent_activities){let ne;s[65]!==a.recent_activities.length?(ne=(te,fe)=>e.jsxs("div",{className:"relative flex gap-4",children:[fe!==a.recent_activities.length-1&&e.jsx("div",{className:"absolute top-10 left-[19px] h-full w-[2px] bg-slate-100"}),e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl border border-slate-100 bg-white text-[10px] font-black text-slate-400 shadow-sm",children:te.time}),e.jsxs("div",{className:"flex-1 rounded-2xl border border-slate-100 bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"mb-1 text-xs font-bold tracking-wider text-indigo-500 uppercase",children:te.type}),e.jsx("p",{className:"text-sm leading-snug font-medium text-slate-600",children:te.description})]})]},te.id),s[65]=a.recent_activities.length,s[66]=ne):ne=s[66],le=a.recent_activities.map(ne),s[63]=a.recent_activities,s[64]=le}else le=s[64];let W;s[67]!==le?(W=e.jsxs("div",{className:"space-y-6",children:[ie,e.jsx("div",{className:"space-y-4",children:le})]}),s[67]=le,s[68]=W):W=s[68];let se;s[69]!==S||s[70]!==R||s[71]!==Y||s[72]!==W?(se=e.jsxs(Dt,{className:"overflow-y-auto border-none bg-slate-50 p-0 sm:max-w-[600px]",children:[c,e.jsxs("div",{className:"px-8 py-10",children:[S,R,Y,W]})]}),s[69]=S,s[70]=R,s[71]=Y,s[72]=W,s[73]=se):se=s[73];let re;return s[74]!==l||s[75]!==n||s[76]!==se?(re=e.jsx(_t,{open:l,onOpenChange:n,children:se}),s[74]=l,s[75]=n,s[76]=se,s[77]=re):re=s[77],re}function Rt(t){const s=ee.c(30),{selectedDate:a}=t,[l,n]=B.useState(null);let i;s[0]!==a?(i={queryKey:["cashier-stats",a],queryFn:()=>Q.entities.CashierActivity.stats({date:a})},s[0]=a,s[1]=i):i=s[1];const{data:c,isLoading:x}=oe(i);let h;s[2]!==c?(h=c===void 0?[]:c,s[2]=c,s[3]=h):h=s[3];const _=h;let d;s[4]!==a?(d={queryKey:["cashier-activities",a],queryFn:()=>Q.entities.CashierActivity.list({date:a})},s[4]=a,s[5]=d):d=s[5];const{data:r,isLoading:p}=oe(d);let b;s[6]!==r?(b=r===void 0?[]:r,s[6]=r,s[7]=b):b=s[7];const v=b,S=$t;if(x||p){let f;return s[8]===Symbol.for("react.memo_cache_sentinel")?(f=e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-indigo-600 border-t-transparent"}),e.jsx("p",{className:"mt-4 text-xs font-black tracking-widest text-slate-400 uppercase",children:"Calcul des performances..."})]}),s[8]=f):f=s[8],f}let U;s[9]===Symbol.for("react.memo_cache_sentinel")?(U=e.jsx("h3",{className:"mb-2 text-2xl font-black tracking-tight text-slate-800",children:"Journal d'activité"}),s[9]=U):U=s[9];let u;s[10]!==a?(u=X(a).format("DD/MM/YYYY"),s[10]=a,s[11]=u):u=s[11];let A;s[12]!==u?(A=e.jsxs("div",{children:[U,e.jsxs("p",{className:"text-sm font-medium text-slate-400",children:["Performance et mouvements des utilisateurs pour le"," ",u]})]}),s[12]=u,s[13]=A):A=s[13];let k;s[14]!==_?(k=_.length>0?_.map(f=>e.jsx(_e,{onClick:()=>n(f),className:"group cursor-pointer rounded-3xl border-slate-100 bg-white shadow-sm transition-all hover:border-indigo-500 hover:shadow-xl hover:shadow-indigo-500/10 active:scale-95",children:e.jsxs(qe,{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-indigo-50 text-xl font-black text-indigo-600 transition-colors group-hover:bg-indigo-600 group-hover:text-white",children:f.cashier_name.charAt(0)}),e.jsx(ms,{className:"h-5 w-5 text-slate-300 transition-all group-hover:translate-x-1 group-hover:text-indigo-600"})]}),e.jsx("h4",{className:"mb-1 text-lg font-black text-slate-900",children:f.cashier_name}),e.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"border-emerald-100 text-[10px] font-bold text-emerald-600",children:f.connection_time?`À ${f.connection_time}`:"Non connecté"}),e.jsxs(Z,{variant:"outline",className:"text-[10px] font-bold",children:[f.transactions_completed," Opérations"]})]}),e.jsx("div",{className:"space-y-2 border-t border-slate-50 pt-4",children:e.jsxs("div",{className:"flex justify-between text-[10px] font-bold tracking-wider text-slate-400 uppercase",children:[e.jsx("span",{children:"Volume USD"}),e.jsxs("span",{className:"font-black text-slate-900",children:["$"," ",f.detailed_stats.total_amount_usd.toLocaleString()]})]})})]})},f.cashier_id)):e.jsxs("div",{className:"col-span-full rounded-[2.5rem] border-2 border-dashed border-slate-100 py-10 text-center",children:[e.jsx($e,{className:"mx-auto mb-3 h-12 w-12 text-slate-200"}),e.jsx("p",{className:"text-xs font-black tracking-widest text-slate-300 uppercase",children:"Aucun utilisateur actif ce jour"})]}),s[14]=_,s[15]=k):k=s[15];let j;s[16]!==k?(j=e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:k}),s[16]=k,s[17]=j):j=s[17];let D;s[18]===Symbol.for("react.memo_cache_sentinel")?(D=e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h4",{className:"text-xl font-black tracking-tight text-slate-800",children:"Derniers Événements"})}),s[18]=D):D=s[18];let m;s[19]!==v?(m=e.jsxs("div",{className:"space-y-6 border-t border-slate-100 pt-10",children:[D,v.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-40",children:[e.jsx(hs,{className:"mb-4 h-16 w-16 text-slate-200"}),e.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucun événement enregistré"})]}):e.jsx("div",{className:"relative space-y-4",children:v.map((f,q)=>e.jsxs("div",{className:"relative flex gap-4",children:[q!==v.length-1&&e.jsx("div",{className:"absolute top-10 left-[19px] h-full w-[2px] bg-slate-100"}),e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-2 border-slate-100 bg-white",children:e.jsx(Ue,{className:"h-4 w-4 text-slate-400"})}),e.jsxs("div",{className:"flex-1 rounded-2xl border border-slate-100 bg-white/50 p-5 shadow-sm transition-all hover:bg-white",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-black text-slate-900",children:X(f.created_at).format("HH:mm:ss")}),S(f.activity_type,f.description)]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-400 uppercase",children:[e.jsx($e,{className:"h-3 w-3"}),f.cashier?.name||f.cashier_name||"Système"]})]}),e.jsx("p",{className:"text-sm leading-relaxed font-medium text-slate-600",children:f.description})]})]},f.id))})]}),s[19]=v,s[20]=m):m=s[20];const w=!!l;let M;s[21]===Symbol.for("react.memo_cache_sentinel")?(M=()=>n(null),s[21]=M):M=s[21];let g;s[22]!==l||s[23]!==w?(g=e.jsx(qt,{user:l,isOpen:w,onClose:M}),s[22]=l,s[23]=w,s[24]=g):g=s[24];let F;return s[25]!==j||s[26]!==m||s[27]!==g||s[28]!==A?(F=e.jsxs("div",{className:"space-y-10",children:[A,j,m,g]}),s[25]=j,s[26]=m,s[27]=g,s[28]=A,s[29]=F):F=s[29],F}function $t(t,s){const a=s?.toLowerCase()||"";if(t==="complete_transaction")return a.includes("taux")?e.jsx(Z,{className:"border-none bg-amber-100 text-amber-600",children:"TAUX"}):a.includes("boutique")?e.jsx(Z,{className:"border-none bg-purple-100 text-purple-600",children:"BOUTIQUE"}):a.includes("utilisateur")?e.jsx(Z,{className:"border-none bg-blue-100 text-blue-600",children:"USER"}):a.includes("partenaire")?e.jsx(Z,{className:"border-none bg-pink-100 text-pink-600",children:"PARTENAIRE"}):a.includes("publicité")?e.jsx(Z,{className:"border-none bg-rose-100 text-rose-600",children:"PUB"}):a.includes("guichet")?e.jsx(Z,{className:"border-none bg-cyan-100 text-cyan-600",children:"GUICHET"}):e.jsx(Z,{className:"border-none bg-indigo-100 text-indigo-600",children:"OPÉRATION"});switch(t){case"login":return e.jsx(Z,{className:"border-none bg-emerald-100 text-emerald-600",children:"CONNEXION"});case"logout":return e.jsx(Z,{className:"border-none bg-slate-100 text-slate-600",children:"DÉCONNEXION"});default:return e.jsx(Z,{className:"border-none bg-slate-100 text-slate-500",children:t.toUpperCase()})}}function vs(t){const s=ee.c(6),{movements:a}=t;if(a.length===0){let c;return s[0]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsxs("div",{className:"flex h-48 flex-col items-center justify-center rounded-3xl border-2 border-dashed border-slate-100 bg-slate-50/50",children:[e.jsx(qs,{className:"mb-2 h-8 w-8 text-slate-200"}),e.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucun mouvement manuel aujourd'hui"})]}),s[0]=c):c=s[0],c}let l;s[1]===Symbol.for("react.memo_cache_sentinel")?(l=e.jsx(Ms,{children:e.jsxs(Pe,{className:"border-b border-slate-50 bg-slate-50/50 hover:bg-slate-50/50",children:[e.jsx(he,{className:"w-[120px] text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Heure"}),e.jsx(he,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Type"}),e.jsx(he,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Montant"}),e.jsx(he,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Motif / Description"}),e.jsx(he,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Caissier"}),e.jsx(he,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Boutique"})]})}),s[1]=l):l=s[1];let n;s[2]!==a?(n=a.map(Ut),s[2]=a,s[3]=n):n=s[3];let i;return s[4]!==n?(i=e.jsx("div",{className:"overflow-hidden rounded-3xl border border-slate-100 bg-white shadow-sm",children:e.jsxs(Fs,{children:[l,e.jsx(As,{children:n})]})}),s[4]=n,s[5]=i):i=s[5],i}function Ut(t,s){const a=t.amount>0;return e.jsxs(Pe,{className:"group transition-colors hover:bg-slate-50/50",children:[e.jsx(me,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-400",children:[e.jsx(ts,{className:"h-3 w-3"}),X(t.created_at).format("HH:mm")]})}),e.jsx(me,{children:e.jsxs("div",{className:`inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-[10px] font-black tracking-widest uppercase ${a?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[a?e.jsx(Ds,{className:"h-3 w-3"}):e.jsx(Cs,{className:"h-3 w-3"}),a?"Entrée":"Sortie"]})}),e.jsx(me,{children:e.jsxs("div",{className:`text-sm font-black ${a?"text-emerald-600":"text-rose-600"}`,children:[a?"+":"",parseFloat(t.amount).toLocaleString()," ",e.jsx("span",{className:"text-[10px] opacity-70",children:t.currency})]})}),e.jsx(me,{children:e.jsx("div",{className:"max-w-[200px] truncate text-xs font-bold text-slate-600",children:t.description})}),e.jsx(me,{children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-slate-100",children:e.jsx($e,{className:"h-3 w-3 text-slate-400"})}),t.user?.name||"Inconnu"]})}),e.jsx(me,{children:e.jsx("div",{className:"text-[10px] font-black tracking-wider text-slate-400 uppercase",children:t.session?.register?.shop?.name||"-"})})]},t.id)}function Et(t){const s=ee.c(7),{clients:a,isLoading:l}=t;if(l){let x;return s[0]===Symbol.for("react.memo_cache_sentinel")?(x=e.jsx("div",{className:"space-y-3",children:[...Array(5)].map(Tt)}),s[0]=x):x=s[0],x}if(a.length===0){let x;return s[1]===Symbol.for("react.memo_cache_sentinel")?(x=e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border-2 border-dashed border-slate-200 bg-slate-50/50 p-20",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-2xl border border-slate-100 bg-white shadow-sm",children:e.jsx($e,{className:"h-8 w-8 text-slate-300"})}),e.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucun client trouvé"})]}),s[1]=x):x=s[1],x}let n;s[2]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx("thead",{children:e.jsxs("tr",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[e.jsx("th",{className:"px-6 py-4 font-black",children:"Client"}),e.jsx("th",{className:"px-6 py-4 font-black",children:"Numéro de téléphone"}),e.jsx("th",{className:"px-6 py-4 text-center font-black",children:"Statut"}),e.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Inscrit le"}),e.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Actions"})]})}),s[2]=n):n=s[2];let i;s[3]!==a?(i=a.map(It),s[3]=a,s[4]=i):i=s[4];let c;return s[5]!==i?(c=e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-separate border-spacing-y-3 text-left",children:[n,e.jsx("tbody",{children:i})]})}),s[5]=i,s[6]=c):c=s[6],c}function It(t){return e.jsxs("tr",{className:"group rounded-2xl border border-slate-100 bg-white transition-all duration-300 hover:bg-slate-50",children:[e.jsx("td",{className:"rounded-l-2xl border-y border-l border-slate-100 px-6 py-5 group-hover:border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-slate-900 shadow-lg shadow-slate-900/10 transition-transform group-hover:scale-110",children:e.jsx($e,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex min-w-0 flex-col",children:[e.jsx("span",{className:"truncate text-sm font-black text-slate-900",children:t.full_name||`${t.first_name||""} ${t.last_name||""}`.trim()||"Client sans nom"}),e.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold tracking-tight text-slate-400 uppercase",children:[e.jsx(Js,{className:"h-2.5 w-2.5"})," ID-",t.id]})]})]})}),e.jsx("td",{className:"border-y border-slate-100 px-6 py-5 group-hover:border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-3.5 w-3.5 text-slate-400"}),e.jsx("span",{className:"text-sm font-bold text-slate-600",children:t.phone})]})}),e.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-center group-hover:border-indigo-100",children:e.jsx("div",{className:G("inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-[10px] font-black tracking-widest uppercase",t.is_registered?"bg-emerald-50 text-emerald-600":"bg-amber-50 text-amber-600"),children:t.is_registered?"Inscrit":"Temporaire"})}),e.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:e.jsx("span",{className:"text-sm font-black text-slate-700",children:X(t.created_date).format("DD/MM/YYYY")})}),e.jsx("td",{className:"rounded-r-2xl border-y border-r border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:e.jsx(Is,{href:`/manager/clients/${t.id}`,children:e.jsxs($,{variant:"outline",size:"sm",className:"h-9 rounded-xl border-slate-200 text-xs font-black tracking-widest uppercase hover:border-indigo-500 hover:text-indigo-600",children:[e.jsx(as,{className:"mr-2 h-3.5 w-3.5"}),"Détails"]})})})]},t.id)}function Tt(t,s){return e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-100 bg-white p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ae,{className:"h-10 w-10 rounded-xl"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ae,{className:"h-4 w-32"}),e.jsx(Ae,{className:"h-3 w-20"})]})]}),e.jsx(Ae,{className:"h-4 w-24"}),e.jsx(Ae,{className:"h-6 w-20 rounded-full"}),e.jsx(Ae,{className:"h-4 w-10"})]},s)}function Lt(){const t=ee.c(50),s=Be(),[a,l]=B.useState(!1),[n,i]=B.useState(null),[c,x]=B.useState(null),[h,_]=B.useState("all");let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={name:"",type:"bank",code:"",logo:null},t[0]=d):d=t[0];const[r,p]=B.useState(d),[b,v]=B.useState(""),[S,U]=B.useState("depot");let u;t[1]===Symbol.for("react.memo_cache_sentinel")?(u={queryKey:["institutions"],queryFn:Wt},t[1]=u):u=t[1];const{data:A,isLoading:k}=oe(u),j=A===void 0?[]:A;let D;t[2]!==h?(D=o=>h==="all"?!0:o.type===h,t[2]=h,t[3]=D):D=t[3];const m=j.filter(D),w=de({mutationFn:Xt,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),f(),K.success("Institution ajoutée avec succès")},onError:Jt}),M=de({mutationFn:Qt,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),f(),K.success("Institution mise à jour avec succès")},onError:Gt});let g;t[4]!==s?(g={mutationFn:Vt,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),K.success("Configuration mise à jour")}},t[4]=s,t[5]=g):g=t[5];const F=de(g),f=()=>{p({name:"",type:"bank",code:"",logo:null}),i(null),l(!1)};let q;t[6]===Symbol.for("react.memo_cache_sentinel")?(q=o=>{p({name:o.name,type:o.type,code:o.code,logo:null}),i(o.id),l(!0)},t[6]=q):q=t[6];const y=q;let C;t[7]!==s?(C={mutationFn:Kt,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),K.success("Institution supprimée")}},t[7]=s,t[8]=C):C=t[8];const I=de(C);let T;t[9]!==s?(T={mutationFn:Bt,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),K.success("Statut mis à jour")}},t[9]=s,t[10]=T):T=t[10];const R=de(T);let P;t[11]!==s?(P={mutationFn:Ht,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),v(""),U("depot"),K.success("Champ ajouté")},onError:zt},t[11]=s,t[12]=P):P=t[12];const z=de(P);let O;t[13]!==s?(O={mutationFn:Yt,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),K.success("Champ supprimé")}},t[13]=s,t[14]=O):O=t[14];const V=de(O);let H;t[15]!==s?(H={mutationFn:Ot,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),K.success("Infos agent mises à jour")}},t[15]=s,t[16]=H):H=t[16];const N=de(H);let L,Y;t[17]===Symbol.for("react.memo_cache_sentinel")?(L=e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600 shadow-lg shadow-indigo-600/20",children:e.jsx(cs,{className:"h-5 w-5 text-white"})}),Y=e.jsx("h4",{className:"text-sm font-black tracking-tight text-slate-800 uppercase",children:"Partenaires & Institutions"}),t[17]=L,t[18]=Y):(L=t[17],Y=t[18]);let ie;t[19]!==a?(ie=()=>l(!a),t[19]=a,t[20]=ie):ie=t[20];const le=a?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 hover:bg-indigo-700";let W;t[21]!==le?(W=G("h-11 rounded-xl px-6 text-xs font-black tracking-widest uppercase transition-all",le),t[21]=le,t[22]=W):W=t[22];let se;t[23]!==a?(se=a?e.jsx(Ke,{className:"mr-2 h-4 w-4"}):e.jsx(Re,{className:"mr-2 h-4 w-4"}),t[23]=a,t[24]=se):se=t[24];const re=a?"Fermer":"Nouvelle Institution";let ne;t[25]!==ie||t[26]!==W||t[27]!==se||t[28]!==re?(ne=e.jsxs($,{onClick:ie,className:W,children:[se,re]}),t[25]=ie,t[26]=W,t[27]=se,t[28]=re,t[29]=ne):ne=t[29];let te;t[30]!==w||t[31]!==n||t[32]!==r||t[33]!==f||t[34]!==a||t[35]!==M?(te=a&&e.jsx(ue.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"relative rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[e.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-64 w-64 bg-indigo-500/10 blur-[100px]"}),e.jsxs("h5",{className:"mb-8 flex items-center gap-3 text-xl font-black tracking-tight",children:[e.jsx(ze,{className:"h-6 w-6 text-indigo-400"}),n?"Modifier l'institution":"Configurer un nouveau partenaire"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Nom de l'institution"}),e.jsx(ce,{placeholder:"ex: Bank of Africa",value:r.name,onChange:o=>p({...r,name:o.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Type de service"}),e.jsxs(Xe,{value:r.type,onValueChange:o=>p({...r,type:o}),children:[e.jsx(We,{className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500",children:e.jsx(Ze,{})}),e.jsxs(es,{className:"border-slate-800 bg-slate-900 text-white",children:[e.jsx(Ne,{value:"bank",className:"focus:bg-slate-800",children:"Banque Classique"}),e.jsx(Ne,{value:"mobile_money",className:"focus:bg-slate-800",children:"Mobile Money"}),e.jsx(Ne,{value:"payment",className:"focus:bg-slate-800",children:"Service de Paiement"}),e.jsx(Ne,{value:"other",className:"focus:bg-slate-800",children:"Autre Service (MoneyGram, etc.)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Code Identifiant"}),e.jsx(ce,{placeholder:"ex: BOA-CD",value:r.code,onChange:o=>p({...r,code:o.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 font-mono font-black text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx(ae,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Logo de l'institution (Optionnel)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative flex h-16 w-16 items-center justify-center overflow-hidden rounded-xl border border-white/10 bg-white/5",children:r.logo?e.jsx("img",{src:URL.createObjectURL(r.logo),alt:"Preview",className:"h-full w-full object-cover"}):e.jsx(cs,{className:"h-6 w-6 text-white/20"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ce,{type:"file",accept:"image/*",onChange:o=>{o.target.files&&o.target.files[0]&&p({...r,logo:o.target.files[0]})},className:"h-12 w-full cursor-pointer rounded-xl border-white/10 bg-white/5 pt-2 text-sm font-bold text-white file:mr-4 file:rounded-lg file:border-0 file:bg-indigo-600 file:px-4 file:py-1 file:text-xs file:font-bold file:text-white hover:file:bg-indigo-700"}),e.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Format recommandé: PNG ou JPG, fond transparent. Max 2MB."})]})]})]}),e.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[e.jsx($,{variant:"ghost",onClick:f,className:"h-12 rounded-xl px-8 text-xs font-black tracking-widest text-slate-400 uppercase hover:bg-white/5 hover:text-white",children:"Annuler"}),e.jsx($,{onClick:()=>{n?M.mutate({id:n,data:r}):w.mutate(r)},disabled:w.isPending||M.isPending||!r.name||!r.code,className:"h-12 rounded-xl bg-white px-10 text-xs font-black tracking-widest text-slate-900 uppercase transition-all hover:bg-slate-100",children:w.isPending?e.jsx(He,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx($s,{className:"mr-2 h-4 w-4"}),n?"Mettre à jour":"Enregistrer Partenaire"]})})]})]})}),t[30]=w,t[31]=n,t[32]=r,t[33]=f,t[34]=a,t[35]=M,t[36]=te):te=t[36];let fe;t[37]!==te?(fe=e.jsx(Ye,{children:te}),t[37]=te,t[38]=fe):fe=t[38];let ge;t[39]===Symbol.for("react.memo_cache_sentinel")?(ge=[{id:"all",label:"Tout"},{id:"bank",label:"Banques"},{id:"mobile_money",label:"Mobile Money"},{id:"payment",label:"Paiement"},{id:"other",label:"Autres"}],t[39]=ge):ge=t[39];let we;t[40]!==h?(we=e.jsx("div",{className:"flex gap-2",children:ge.map(o=>e.jsx("button",{onClick:()=>_(o.id),className:G("rounded-xl px-4 py-2 text-xs font-black tracking-widest uppercase transition-all",h===o.id?"bg-slate-900 text-white shadow-lg shadow-slate-900/10":"bg-white text-slate-400 hover:bg-slate-50 hover:text-slate-600"),children:o.label},o.id))}),t[40]=h,t[41]=we):we=t[41];let be;t[42]!==I||t[43]!==R?(be=o=>e.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative overflow-hidden rounded-[2rem] border-2 border-slate-50 bg-white p-6 shadow-xl shadow-slate-200/50 transition-all duration-300 hover:border-indigo-100",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("div",{className:G("flex h-14 w-14 items-center justify-center rounded-2xl shadow-lg transition-transform group-hover:rotate-6",o.type==="bank"?"bg-slate-900 text-white shadow-slate-900/10":o.type==="payment"?"bg-indigo-500 text-white shadow-indigo-500/10":o.type==="other"?"bg-amber-500 text-white shadow-amber-500/10":"bg-emerald-500 text-white shadow-emerald-500/10"),children:o.logo_url?e.jsx("img",{src:o.logo_url,alt:o.name,className:"h-9 w-9 object-contain"}):o.type==="bank"?e.jsx(cs,{className:"h-7 w-7"}):o.type==="payment"?e.jsx(js,{className:"h-7 w-7"}):o.type==="other"?e.jsx(js,{className:"h-7 w-7"}):e.jsx(et,{className:"h-7 w-7"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{variant:"ghost",size:"icon",onClick:()=>R.mutate({id:o.id,is_active:!o.is_active}),className:G("h-10 w-10 rounded-xl transition-all",o.is_active?"bg-emerald-50 text-emerald-500":"bg-slate-50 text-slate-300"),children:e.jsx(os,{className:"h-5 w-5"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>I.mutate(o.id),className:"h-10 w-10 rounded-xl text-slate-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500",children:e.jsx(ss,{className:"h-5 w-5"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>x(o.id),className:"h-10 w-10 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-emerald-50 hover:text-emerald-600",children:e.jsx(ds,{className:"h-5 w-5"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>y(o),className:"h-10 w-10 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-indigo-50 hover:text-indigo-600",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-black tracking-tight text-slate-900",children:o.name}),!o.is_active&&e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[8px] font-black tracking-widest text-slate-400 uppercase",children:"Inactif"}),o.settings?.required_fields&&o.settings.required_fields.length>0&&e.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[8px] font-black tracking-widest text-emerald-600 uppercase",children:[e.jsx(bs,{className:"h-2 w-2"}),"Configuré"]})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:o.code}),e.jsx("span",{className:"h-1 w-1 rounded-full bg-slate-200"}),e.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase",children:o.type==="bank"?"Banque":o.type==="payment"?"Service de Paiement":o.type==="other"?"Autre Service":"Mobile Money"})]})]}),e.jsx("div",{className:G("absolute -right-6 -bottom-6 h-24 w-24 rounded-full opacity-[0.03] transition-transform group-hover:scale-150",o.type==="bank"?"bg-slate-900":"bg-emerald-500")})]},o.id),t[42]=I,t[43]=R,t[44]=be):be=t[44];let ye;t[45]!==k?(ye=k&&e.jsx("div",{className:"flex justify-center p-20",children:e.jsx(Rs,{className:"h-10 w-10 animate-spin text-indigo-600"})}),t[45]=k,t[46]=ye):ye=t[46];const ke=Ye,ve=c&&e.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 p-4 backdrop-blur-sm",onClick:()=>x(null),children:e.jsxs(ue.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"w-full max-w-md overflow-hidden rounded-[2.5rem] bg-white shadow-2xl",onClick:Pt,children:[e.jsxs("div",{className:"relative bg-slate-900 p-8 text-white",children:[e.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 bg-indigo-500/10 blur-3xl"}),e.jsxs("h3",{className:"flex items-center gap-3 text-xl font-black tracking-tight",children:[e.jsx(ds,{className:"h-6 w-6 text-indigo-400"}),"Champs Requis"]}),e.jsxs("p",{className:"mt-2 text-xs font-medium text-slate-400",children:["Configurez les informations obligatoires pour"," ",e.jsx("span",{className:"text-white",children:j.find(o=>o.id===c)?.name})]})]}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"space-y-3",children:[{id:"account_number",label:"Numéro de Compte"},{id:"beneficiary",label:"Nom du Bénéficiaire"},{id:"beneficiary_number",label:"Numéro du Bénéficiaire"},{id:"reason",label:"Motif / Raison"}].map(o=>{const J=j.find(Te=>Te.id===c),xe=(J?.settings?.required_fields||[]).includes(o.id);return e.jsxs("button",{onClick:()=>F.mutate({institution:J,field:o.id}),className:G("flex w-full items-center justify-between rounded-2xl border-2 p-5 transition-all",xe?"border-indigo-100 bg-indigo-50/50 text-indigo-900 shadow-sm":"border-slate-100 bg-slate-50/50 text-slate-500 hover:border-slate-200"),children:[e.jsx("span",{className:"text-sm font-black tracking-tight",children:o.label}),xe?e.jsx(bs,{className:"h-6 w-6 text-indigo-600"}):e.jsx("div",{className:"h-6 w-6 rounded-full border-2 border-slate-200 bg-white"})]},o.id)})}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[e.jsx(Re,{className:"h-3 w-3"}),"Ajouter un champ personnalisé"]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{placeholder:"ex: Code Agence...",value:b,onChange:o=>v(o.target.value),className:"h-12 rounded-xl border-slate-200"}),e.jsxs(Xe,{value:S,onValueChange:o=>U(o),children:[e.jsx(We,{className:"h-12 w-32 rounded-xl border-slate-200",children:e.jsx(Ze,{})}),e.jsxs(es,{className:"bg-white",children:[e.jsx(Ne,{value:"depot",children:"Dépôt"}),e.jsx(Ne,{value:"retrait",children:"Retrait"}),e.jsx(Ne,{value:"both",children:"Les deux"})]})]}),e.jsx($,{onClick:()=>{if(b.trim()){const o=j.find(J=>J.id===c);z.mutate({institution:o,label:b,operation_type:S})}},disabled:!b.trim()||z.isPending,className:"h-12 rounded-xl bg-indigo-600 px-4 text-white hover:bg-indigo-700",children:z.isPending?e.jsx(He,{className:"h-4 w-4 animate-spin"}):e.jsx(Re,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"space-y-2",children:(j.find(o=>o.id===c)?.settings?.custom_fields||[]).map(o=>e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-100 bg-slate-50 p-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:o.label}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:o.operation_type==="depot"?"Dépôt":o.operation_type==="retrait"?"Retrait":"Les deux"})]}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>{const J=j.find(xe=>xe.id===c);V.mutate({institution:J,fieldId:o.id})},className:"h-8 w-8 text-slate-400 hover:text-red-500",children:e.jsx(ss,{className:"h-4 w-4"})})]},o.id))})]}),e.jsxs("div",{className:"mt-8 space-y-4 border-t border-slate-100 pt-6",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[e.jsx(os,{className:"h-3 w-3"}),"Infos Agent (Retrait)"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(ae,{className:"ml-1 text-[10px] font-bold text-slate-500",children:"Nom de l'Agent"}),e.jsx(ce,{placeholder:"ex: HAVIFIN BOUTIQUE",defaultValue:j.find(o=>o.id===c)?.settings?.withdrawal_agent_name||"",onBlur:o=>{const J=j.find(xe=>xe.id===c);J&&o.target.value!==(J.settings?.withdrawal_agent_name||"")&&N.mutate({institution:J,name:o.target.value,number:J.settings?.withdrawal_agent_number||""})},className:"h-10 rounded-xl border-slate-200 text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(ae,{className:"ml-1 text-[10px] font-bold text-slate-500",children:"Numéro de l'Agent"}),e.jsx(ce,{placeholder:"ex: 123456",defaultValue:j.find(o=>o.id===c)?.settings?.withdrawal_agent_number||"",onBlur:o=>{const J=j.find(xe=>xe.id===c);J&&o.target.value!==(J.settings?.withdrawal_agent_number||"")&&N.mutate({institution:J,name:J.settings?.withdrawal_agent_name||"",number:o.target.value})},className:"h-10 rounded-xl border-slate-200 text-sm"})]})]})]}),e.jsx($,{onClick:()=>x(null),className:"mt-8 h-14 w-full rounded-2xl bg-slate-900 text-sm font-black tracking-widest text-white uppercase transition-all hover:bg-slate-800",children:"Terminer"})]})]})});let je;return t[47]!==ke||t[48]!==ve?(je=e.jsx(ke,{children:ve}),t[47]=ke,t[48]=ve,t[49]=je):je=t[49],e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-[1.5rem] border border-slate-100 bg-slate-100/50 p-4",children:[e.jsxs("div",{className:"ml-2 flex items-center gap-3",children:[L,e.jsxs("div",{children:[Y,e.jsxs("p",{className:"text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:[j.length," Entités Enregistrées"]})]})]}),ne]}),fe,we,e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:[m.map(be),j.length===0&&!k&&e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-slate-200 bg-slate-50/50 py-20",children:[e.jsx(ze,{className:"mb-4 h-16 w-16 text-slate-200"}),e.jsx("p",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Aucune institution configurée"})]})]}),ye,je]})}function Pt(t){return t.stopPropagation()}function Ot(t){const{institution:s,name:a,number:l}=t,n=s.settings||{required_fields:[]};return Ie.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...n,withdrawal_agent_name:a,withdrawal_agent_number:l}})}function Yt(t){const{institution:s,fieldId:a}=t,l=s.settings||{required_fields:[]},i=(l.custom_fields||[]).filter(c=>c.id!==a);return Ie.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...l,custom_fields:i}})}function zt(t){return K.error(typeof t=="string"?t:"Erreur lors de l’ajout")}function Ht(t){const{institution:s,label:a,operation_type:l}=t,n=s.settings||{required_fields:[]},i=n.custom_fields||[],c=a.toLowerCase().replace(/\s+/g,"_").replace(/[^\w]/g,"");if(i.find(h=>h.id===c))return Promise.reject("Ce champ existe déjà");const x=[...i,{id:c,label:a,type:"text",operation_type:l}];return Ie.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...n,custom_fields:x}})}function Bt(t){const{id:s,is_active:a}=t;return Q.entities.Institution.update(s,{is_active:a})}function Kt(t){return Q.entities.Institution.delete(t)}function Vt(t){const{institution:s,field:a}=t,l=s.settings||{required_fields:[]},n=l.required_fields||[],i=n.includes(a)?n.filter(c=>c!==a):[...n,a];return Ie.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...l,required_fields:i}})}function Gt(){return K.error("Erreur lors de la mise à jour")}function Qt(t){const{id:s,data:a}=t,l=new FormData;return l.append("_method","PUT"),l.append("name",a.name),l.append("type",a.type),l.append("code",a.code),a.logo&&l.append("logo",a.logo),Ie.post(`/api/institutions/${s}`,l,{headers:{"Content-Type":"multipart/form-data"}})}function Jt(){return K.error("Erreur lors de l'ajout de l'institution")}function Xt(t){const s=new FormData;return s.append("name",t.name),s.append("type",t.type),s.append("code",t.code),t.logo&&s.append("logo",t.logo),Ie.post("/api/institutions",s,{headers:{"Content-Type":"multipart/form-data"}})}function Wt(){return Q.entities.Institution.list()}const ws=[{id:"USD_CDF",label:"USD → CDF",from:"USD",to:"CDF"},{id:"EUR_CDF",label:"EUR → CDF",from:"EUR",to:"CDF"},{id:"EUR_USD",label:"EUR → USD",from:"EUR",to:"USD"},{id:"CDF_USD",label:"CDF → USD",from:"CDF",to:"USD"}];function Zt(){const t=ee.c(56),s=Be();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={currency_pair:"",buy_rate:"",sell_rate:""},t[0]=a):a=t[0];const[l,n]=B.useState(a),[i,c]=B.useState(!1);let x;t[1]===Symbol.for("react.memo_cache_sentinel")?(x={queryKey:["rates"],queryFn:ia},t[1]=x):x=t[1];const{data:h,isLoading:_}=oe(x);let d;t[2]!==h?(d=h===void 0?[]:h,t[2]=h,t[3]=d):d=t[3];const r=d;let p;t[4]!==s?(p={mutationFn:la,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),K.success("Taux mis à jour")}},t[4]=s,t[5]=p):p=t[5];const b=de(p);let v;t[6]!==s?(v={mutationFn:aa,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),n({currency_pair:"",buy_rate:"",sell_rate:""}),c(!1),K.success("Nouveau taux de change configuré")},onError:ta},t[6]=s,t[7]=v):v=t[7];const S=de(v);let U;t[8]!==s?(U={mutationFn:sa,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),K.success("Configuration supprimée")}},t[8]=s,t[9]=U):U=t[9];const u=de(U);let A;t[10]!==b?(A=(V,H,N)=>{N&&b.mutate({id:V.id,data:{[H]:parseFloat(N)}})},t[10]=b,t[11]=A):A=t[11];const k=A;let j,D;t[12]===Symbol.for("react.memo_cache_sentinel")?(j=e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600 shadow-lg shadow-indigo-600/20",children:e.jsx(Ee,{className:"h-5 w-5 text-white"})}),D=e.jsx("h4",{className:"text-sm font-black tracking-tight text-slate-800 uppercase",children:"Marché des Devises"}),t[12]=j,t[13]=D):(j=t[12],D=t[13]);let m;t[14]!==r.length?(m=e.jsxs("div",{className:"ml-2 flex items-center gap-3",children:[j,e.jsxs("div",{children:[D,e.jsxs("p",{className:"text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:[r.length," Paires Actives"]})]})]}),t[14]=r.length,t[15]=m):m=t[15];let w;t[16]!==i?(w=()=>c(!i),t[16]=i,t[17]=w):w=t[17];const M=i?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 hover:bg-indigo-700";let g;t[18]!==M?(g=G("h-11 rounded-xl px-6 text-xs font-black tracking-widest uppercase transition-all",M),t[18]=M,t[19]=g):g=t[19];let F;t[20]!==i?(F=i?e.jsx(Ke,{className:"mr-2 h-4 w-4"}):e.jsx(Re,{className:"mr-2 h-4 w-4"}),t[20]=i,t[21]=F):F=t[21];const f=i?"Fermer":"Ajouter une Paire";let q;t[22]!==w||t[23]!==g||t[24]!==F||t[25]!==f?(q=e.jsxs($,{onClick:w,className:g,children:[F,f]}),t[22]=w,t[23]=g,t[24]=F,t[25]=f,t[26]=q):q=t[26];let y;t[27]!==m||t[28]!==q?(y=e.jsxs("div",{className:"flex items-center justify-between rounded-[1.5rem] border border-slate-100 bg-slate-100/50 p-4",children:[m,q]}),t[27]=m,t[28]=q,t[29]=y):y=t[29];let C;t[30]!==S||t[31]!==l||t[32]!==i?(C=i&&e.jsx(ue.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"relative rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[e.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-64 w-64 bg-indigo-500/10 blur-[100px]"}),e.jsxs("h5",{className:"mb-8 flex items-center gap-3 text-xl font-black tracking-tight",children:[e.jsx(Re,{className:"h-6 w-6 text-indigo-400"}),"Nouvelle Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Paire de devises"}),e.jsxs(Xe,{value:l.currency_pair,onValueChange:V=>n({...l,currency_pair:V}),children:[e.jsx(We,{className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500",children:e.jsx(Ze,{placeholder:"Choisir une paire"})}),e.jsx(es,{className:"border-slate-800 bg-slate-900 text-white",children:ws.map(ea)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:["Taux d'Achat (Le client donne"," ",l.currency_pair==="CDF_USD"?"CDF":"USD",", 1"," ",l.currency_pair==="CDF_USD"?"USD":l.currency_pair.split("_")[0]||"Unité"," ","=)"]}),e.jsxs("div",{className:"relative",children:[e.jsx(gs,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-emerald-400"}),e.jsx(ce,{type:"number",placeholder:"0.00",value:l.buy_rate,onChange:V=>n({...l,buy_rate:V.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 pl-11 font-mono font-black text-white"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:["Taux de Vente (Le bureau donne"," ",l.currency_pair==="CDF_USD"?"CDF":"USD",", 1"," ",l.currency_pair==="CDF_USD"?"USD":l.currency_pair.split("_")[0]||"Unité"," ","=)"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-blue-400"}),e.jsx(ce,{type:"number",placeholder:"0.00",value:l.sell_rate,onChange:V=>n({...l,sell_rate:V.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 pl-11 font-mono font-black text-white"})]})]})]}),e.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[e.jsx($,{variant:"ghost",onClick:()=>c(!1),className:"h-12 rounded-xl px-8 text-xs font-black tracking-widest text-slate-400 uppercase hover:bg-white/5 hover:text-white",children:"Annuler"}),e.jsx($,{onClick:()=>S.mutate(l),disabled:S.isPending||!l.currency_pair,className:"h-12 rounded-xl bg-white px-10 text-xs font-black tracking-widest text-slate-900 uppercase transition-all hover:bg-slate-100",children:S.isPending?e.jsx(He,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx($s,{className:"mr-2 h-4 w-4"}),"Activer le Taux"]})})]})]})}),t[30]=S,t[31]=l,t[32]=i,t[33]=C):C=t[33];let I;t[34]!==C?(I=e.jsx(Ye,{children:C}),t[34]=C,t[35]=I):I=t[35];let T;if(t[36]!==u||t[37]!==k||t[38]!==r){let V;t[40]!==u||t[41]!==k?(V=H=>{const N=ws.find(L=>L.id===H.currency_pair);return e.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group rounded-[2rem] border-2 border-slate-50 bg-white p-8 shadow-xl shadow-slate-200/50 transition-all duration-300 hover:border-indigo-100",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-900 shadow-lg shadow-slate-900/10 transition-transform group-hover:rotate-6",children:e.jsx("span",{className:"text-sm font-black text-white",children:N?.from||H.currency_pair.split("_")[0]})}),e.jsx(Se,{className:"h-4 w-4 text-slate-300"}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl border border-indigo-100 bg-indigo-50",children:e.jsx("span",{className:"text-sm font-black text-indigo-600",children:N?.to||H.currency_pair.split("_")[1]})})]}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>u.mutate(H.id),className:"h-10 w-10 rounded-xl text-slate-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500",children:e.jsx(ss,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("span",{className:"text-[9px] font-black tracking-widest text-slate-400 uppercase",children:["Achat (1"," ",H.currency_pair.split("_")[0]," ","=)"]}),e.jsx(gs,{className:"h-3 w-3 text-emerald-500"})]}),e.jsx("div",{className:"relative",children:e.jsx(ce,{type:"number",value:H.buy_rate,onChange:L=>k(H,"buy_rate",L.target.value),className:"h-14 rounded-2xl border-transparent bg-slate-50 font-mono text-xl font-black text-slate-900 focus:border-indigo-500 focus:bg-white"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("span",{className:"text-[9px] font-black tracking-widest text-slate-400 uppercase",children:["Vente (1"," ",H.currency_pair.split("_")[0]," ","=)"]}),e.jsx(Se,{className:"h-3 w-3 text-blue-500"})]}),e.jsx("div",{className:"relative",children:e.jsx(ce,{type:"number",value:H.sell_rate,onChange:L=>k(H,"sell_rate",L.target.value),className:"h-14 rounded-2xl border-transparent bg-slate-50 font-mono text-xl font-black text-slate-900 focus:border-indigo-500 focus:bg-white"})})]})]})]},H.id)},t[40]=u,t[41]=k,t[42]=V):V=t[42],T=r.map(V),t[36]=u,t[37]=k,t[38]=r,t[39]=T}else T=t[39];let R;t[43]!==_||t[44]!==r.length?(R=r.length===0&&!_&&e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-slate-200 bg-slate-50/50 py-20",children:[e.jsx(Ee,{className:"mb-4 h-16 w-16 text-slate-200"}),e.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Aucun taux configuré"})]}),t[43]=_,t[44]=r.length,t[45]=R):R=t[45];let P;t[46]!==T||t[47]!==R?(P=e.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[T,R]}),t[46]=T,t[47]=R,t[48]=P):P=t[48];let z;t[49]!==_?(z=_&&e.jsx("div",{className:"flex justify-center p-20",children:e.jsx(Rs,{className:"h-10 w-10 animate-spin text-indigo-600"})}),t[49]=_,t[50]=z):z=t[50];let O;return t[51]!==y||t[52]!==I||t[53]!==P||t[54]!==z?(O=e.jsxs("div",{className:"space-y-8",children:[y,I,P,z]}),t[51]=y,t[52]=I,t[53]=P,t[54]=z,t[55]=O):O=t[55],O}function ea(t){return e.jsx(Ne,{value:t.id,className:"hover:bg-slate-800 focus:bg-slate-800",children:t.label},t.id)}async function sa(t){await Q.entities.ExchangeRate.delete(t)}function ta(){return K.error("Erreur lors de la création du taux")}async function aa(t){await Q.entities.ExchangeRate.create({...t,buy_rate:parseFloat(t.buy_rate),sell_rate:parseFloat(t.sell_rate),is_active:!0})}async function la(t){const{id:s,data:a}=t;await Q.entities.ExchangeRate.update(s,a)}function ia(){return Q.entities.ExchangeRate.filter({is_active:!0})}const na=["USD","CDF","EUR"];function ra(t){const s=ee.c(43),{isOpen:a,onClose:l,onConfirm:n,shopName:i,isLoading:c}=t;let x;s[0]===Symbol.for("react.memo_cache_sentinel")?(x={USD:"0",CDF:"0",EUR:"0"},s[0]=x):x=s[0];const[h,_]=B.useState(x),[d,r]=B.useState("");let p;s[1]!==h||s[2]!==d||s[3]!==n?(p=R=>{R.preventDefault(),n({notes:d,globalAmounts:h})},s[1]=h,s[2]=d,s[3]=n,s[4]=p):p=s[4];const b=p;let v;s[5]===Symbol.for("react.memo_cache_sentinel")?(v=e.jsx(Je,{className:"h-6 w-6 text-indigo-600"}),s[5]=v):v=s[5];let S;s[6]!==i?(S=e.jsxs(ys,{className:"flex items-center gap-2 text-2xl font-black",children:[v,"Ouvrir la Boutique : ",i]}),s[6]=i,s[7]=S):S=s[7];let U;s[8]===Symbol.for("react.memo_cache_sentinel")?(U=e.jsx(Vs,{children:"Initialisez la session de travail et le fond de caisse global."}),s[8]=U):U=s[8];let u;s[9]!==S?(u=e.jsxs(ks,{children:[S,U]}),s[9]=S,s[10]=u):u=s[10];let A;s[11]===Symbol.for("react.memo_cache_sentinel")?(A=e.jsx(ae,{htmlFor:"notes",className:"font-bold text-slate-700",children:"Note d'ouverture"}),s[11]=A):A=s[11];let k;s[12]===Symbol.for("react.memo_cache_sentinel")?(k=R=>r(R.target.value),s[12]=k):k=s[12];let j;s[13]!==d?(j=e.jsxs("div",{className:"space-y-2",children:[A,e.jsx(st,{id:"notes",value:d,onChange:k,placeholder:"Ex: Équipe du jour...",className:"rounded-xl bg-slate-50"})]}),s[13]=d,s[14]=j):j=s[14];let D;s[15]===Symbol.for("react.memo_cache_sentinel")?(D=e.jsxs("h4",{className:"flex items-center gap-2 text-lg font-black text-slate-900",children:[e.jsx(tt,{className:"h-5 w-5 text-emerald-600"}),"Fond de Caisse (Global)"]}),s[15]=D):D=s[15];let m;s[16]!==h?(m=na.map(R=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(ae,{className:"text-xs font-bold text-slate-400",children:R}),e.jsx(ce,{type:"number",min:"0",value:h[R],onChange:P=>_(z=>({...z,[R]:P.target.value})),className:"h-9 text-sm font-bold"})]},R)),s[16]=h,s[17]=m):m=s[17];let w;s[18]!==m?(w=e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsx("div",{className:"grid grid-cols-3 gap-3",children:m})}),s[18]=m,s[19]=w):w=s[19];let M;s[20]===Symbol.for("react.memo_cache_sentinel")?(M=e.jsx("p",{className:"text-xs text-slate-500",children:"Ce montant sera disponible pour tous les guichets de la boutique."}),s[20]=M):M=s[20];let g;s[21]!==w?(g=e.jsxs("div",{className:"space-y-4",children:[D,w,M]}),s[21]=w,s[22]=g):g=s[22];let F;s[23]!==l?(F=e.jsx($,{type:"button",variant:"outline",onClick:l,children:"Annuler"}),s[23]=l,s[24]=F):F=s[24];const f=c?"Ouverture...":"Ouvrir la Session";let q;s[25]!==c||s[26]!==f?(q=e.jsx($,{type:"submit",disabled:c,className:"bg-indigo-600 font-bold hover:bg-indigo-700",children:f}),s[25]=c,s[26]=f,s[27]=q):q=s[27];let y;s[28]!==F||s[29]!==q?(y=e.jsxs(Gs,{children:[F,q]}),s[28]=F,s[29]=q,s[30]=y):y=s[30];let C;s[31]!==b||s[32]!==g||s[33]!==y||s[34]!==j?(C=e.jsxs("form",{onSubmit:b,className:"space-y-6 py-4",children:[j,g,y]}),s[31]=b,s[32]=g,s[33]=y,s[34]=j,s[35]=C):C=s[35];let I;s[36]!==C||s[37]!==u?(I=e.jsxs(_s,{className:"sm:max-w-[500px]",children:[u,C]}),s[36]=C,s[37]=u,s[38]=I):I=s[38];let T;return s[39]!==a||s[40]!==l||s[41]!==I?(T=e.jsx(Ss,{open:a,onOpenChange:l,children:I}),s[39]=a,s[40]=l,s[41]=I,s[42]=T):T=s[42],T}function ca(){const t=Be(),[s,a]=B.useState("grid"),[l,n]=B.useState(null),[i,c]=B.useState(!1),[x,h]=B.useState(!1),[_,d]=B.useState(!1),[r,p]=B.useState(1),[b,v]=B.useState("all"),[S,U]=B.useState(""),[u,A]=B.useState(null),[k,j]=B.useState(""),{data:D=[]}=oe({queryKey:["manager-shops"],queryFn:()=>Q.entities.Shop.list()});Ts.useEffect(()=>{D.length>0&&!u&&A(D[0].id)},[D,u]);const{data:m,isLoading:w}=oe({queryKey:["sessions",u,r,b,S],queryFn:()=>Q.entities.Session.list({shop_id:u?.toString(),status:b==="all"?void 0:b,date:S||void 0,page:r.toString()}),enabled:!!u}),{data:M}=oe({queryKey:["counters",u],queryFn:()=>Q.entities.Counter.list(u),enabled:!!u}),g=m?.data||[],F=m,{data:f,isLoading:q}=oe({queryKey:["session-report",l],queryFn:()=>Q.entities.Session.report(l),enabled:!!l}),y=g.find(N=>N.status==="open"),[C,I]=B.useState(!1),{data:T}=oe({queryKey:["registers",u],queryFn:()=>rs.get(`/api/cash/registers?shop_id=${u}`).then(N=>N.data),enabled:!!u&&C}),R=async N=>{if(u){c(!0);try{await Q.entities.Session.create({session_date:X().format("YYYY-MM-DD"),shop_id:u,notes:N.notes});let L=T?.[0]?.id;if(!L)try{K.info("Configuration automatique de la caisse principale..."),L=(await rs.post("/api/cash/registers",{shop_id:u,name:"Caisse Principale"})).data.id,K.success("Caisse principale créée avec succès"),t.invalidateQueries({queryKey:["registers",u]})}catch(Y){console.error("Failed to auto-create register",Y),K.error("Impossible de créer la caisse automatique.")}if(L)try{await rs.post("/api/cash/sessions",{cash_register_id:L,opening_amounts:N.globalAmounts,notes:"Session Caisse Globale"}),K.success("Session ouverte avec succès (Globale)")}catch(Y){console.error("Failed to open global cash session",Y),K.error("Erreur ouverture caisse globale")}else K.warning("Attention: Aucune caisse n’a pu être configurée. Seule la session administrative est ouverte.");t.invalidateQueries({queryKey:["sessions"]}),I(!1),j("")}catch(L){const Y=L.response?.data?.error||L.response?.data?.message||"Erreur lors de l’ouverture";K.error(Y)}finally{c(!1)}}},P=async N=>{h(!0);try{await Q.entities.Session.close(N),K.success("Session fermée avec succès"),t.invalidateQueries({queryKey:["sessions"]})}catch(L){const Y=L.response?.data?.error||L.response?.data?.message||"Erreur lors de la fermeture";K.error(Y)}finally{h(!1)}},z=async N=>{try{await Q.entities.Session.reopen(N),K.success("Session réouverte avec succès"),t.invalidateQueries({queryKey:["sessions"]})}catch(L){const Y=L.response?.data?.error||L.response?.data?.message||"Erreur lors de la réouverture de la session";K.error(Y)}},O=D.find(N=>N.id===u),{auth:V}=xs().props,H=V.user;return e.jsxs("div",{className:"animate-in space-y-8 pb-10 font-sans duration-500 fade-in slide-in-from-bottom-4",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-6 md:flex-row md:items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-3xl font-black tracking-tighter text-slate-900 uppercase",children:["Console"," ",e.jsx("span",{className:"text-indigo-600",children:"Sessions"})]}),e.jsx("p",{className:"mt-1 text-sm font-medium text-slate-400",children:"Pilotez l'activité journalière de vos guichets."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[D.length>1&&e.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 bg-white p-1 shadow-sm",children:[e.jsx("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-2",children:e.jsx(Je,{className:"h-4 w-4 text-slate-500"})}),e.jsx("select",{className:"cursor-pointer border-none bg-transparent pr-10 text-sm font-black text-slate-700 uppercase focus:ring-0",value:u||"",onChange:N=>A(Number(N.target.value)),children:D.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))})]}),e.jsxs("div",{className:"flex rounded-2xl border border-slate-200 bg-slate-100 p-1 shadow-inner",children:[e.jsxs("button",{onClick:()=>a("grid"),className:G("flex items-center gap-2 rounded-xl p-2 px-4 text-[10px] font-black tracking-widest uppercase transition-all duration-300",s==="grid"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"),children:[e.jsx(pt,{className:"h-4 w-4"})," Grille"]}),e.jsxs("button",{onClick:()=>a("list"),className:G("flex items-center gap-2 rounded-xl p-2 px-4 text-[10px] font-black tracking-widest uppercase transition-all duration-300",s==="list"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"),children:[e.jsx(gt,{className:"h-4 w-4"})," Liste"]})]})]})]}),e.jsxs(_e,{className:"relative overflow-hidden rounded-[3rem] border-none bg-white shadow-2xl",children:[e.jsx("div",{className:G("absolute inset-0 z-0 opacity-[0.04]",y?"bg-emerald-500":"bg-indigo-600")}),e.jsx(qe,{className:"relative z-10 p-10",children:y?e.jsxs("div",{className:"flex flex-col items-center justify-between gap-12 lg:flex-row",children:[e.jsx("div",{className:"flex-1 space-y-8",children:e.jsxs("div",{className:"inline-flex items-center gap-6 rounded-[2.5rem] border border-slate-100 bg-slate-50 p-8 shadow-sm",children:[e.jsx("div",{className:"rounded-3xl bg-emerald-500 p-5 shadow-xl shadow-emerald-500/30",children:e.jsx(at,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-[9px] font-bold tracking-tighter text-emerald-600 uppercase",children:"Session Active"}),e.jsxs("span",{className:"text-[9px] font-bold tracking-widest text-slate-400 uppercase",children:["• ",O?.name]})]}),e.jsx("div",{className:"text-4xl font-black tracking-tighter text-slate-900",children:X(y.session_date).format("DD MMMM YYYY")}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm font-bold text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Ue,{className:"h-4 w-4 text-indigo-500"})," ",X(y.opened_at).format("HH:mm")]}),e.jsx("span",{className:"h-4 w-[1px] bg-slate-200"}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Le,{className:"h-4 w-4 text-indigo-500"})," ",y.opened_by," ","(Opérateur)"]})]})]})]})}),e.jsxs("div",{className:"flex w-full flex-col items-center gap-4 lg:w-96",children:[e.jsxs($,{onClick:()=>P(y.id),disabled:x,className:"flex h-24 w-full flex-col items-center justify-center gap-2 rounded-[2.5rem] bg-slate-900 text-sm font-black tracking-widest text-white uppercase shadow-2xl transition-all hover:bg-black active:scale-95",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(us,{className:G("h-7 w-7 text-red-500",x&&"animate-pulse")}),"Fermer la Boutique"]}),e.jsx("span",{className:"text-[9px] font-bold opacity-40",children:"Arrêter le flux de transactions"})]}),e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsxs($,{variant:"outline",onClick:()=>d(!0),className:"h-14 flex-1 rounded-2xl border-slate-200 bg-white font-black tracking-widest text-slate-900 uppercase shadow-sm transition-all hover:border-indigo-500 hover:text-indigo-600",children:[e.jsx(Ee,{className:"mr-2 h-4 w-4 text-indigo-500"}),"Ajustement"]}),e.jsxs($,{variant:"outline",onClick:()=>n(y.id),className:"h-14 flex-1 rounded-2xl border-slate-200 bg-white font-black tracking-widest text-slate-900 uppercase shadow-sm transition-all hover:border-indigo-500 hover:text-indigo-600",children:[e.jsx(as,{className:"mr-2 h-4 w-4 text-indigo-500"}),"Stats"]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-between gap-12 lg:flex-row",children:[e.jsxs("div",{className:"flex-1 space-y-8",children:[e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"rounded-[2rem] border border-slate-100 bg-slate-50 p-6",children:e.jsx(lt,{className:"h-10 w-10 text-slate-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2 text-3xl font-black tracking-tight text-slate-900",children:"Prêt pour l'ouverture ?"}),e.jsxs("p",{className:"max-w-lg leading-relaxed font-medium text-slate-500",children:["Aucune session n'est ouverte pour"," ",e.jsx("span",{className:"font-bold text-indigo-600",children:O?.name})," ","aujourd'hui. Ouvrez une session pour autoriser les caissiers à traiter les tickets."]})]})]}),e.jsxs("div",{className:"max-w-xl space-y-4",children:[e.jsx(ae,{className:"ml-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Commentaire d'ouverture"}),e.jsx(ce,{value:k,onChange:N=>j(N.target.value),placeholder:"Ex: Fond de caisse, équipe du jour...",className:"h-16 rounded-3xl border-slate-200 bg-slate-50 px-8 font-bold text-slate-700 transition-colors focus:bg-white"})]})]}),e.jsxs("div",{className:"group relative w-full overflow-hidden rounded-[3rem] bg-indigo-600 p-8 text-white shadow-2xl shadow-indigo-600/20 lg:w-96",children:[e.jsx("div",{className:"absolute top-0 right-0 h-40 w-40 translate-x-1/2 -translate-y-1/2 bg-white/10 blur-[60px]"}),e.jsxs("div",{className:"relative z-10 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-2xl bg-white/20 p-4",children:e.jsx(ts,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] leading-none font-black tracking-widest uppercase opacity-60",children:"Session du"}),e.jsx("div",{className:"text-2xl font-black",children:X().format("DD/MM/YYYY")})]})]}),e.jsxs($,{onClick:()=>I(!0),disabled:i||!u,className:"flex h-20 w-full items-center justify-center gap-3 rounded-[2rem] bg-white text-xs font-black tracking-[0.2em] text-indigo-600 uppercase shadow-xl transition-all hover:bg-slate-50 active:scale-95",children:[i?e.jsx(Ue,{className:"h-5 w-5 animate-spin"}):e.jsx(ls,{className:"h-5 w-5 fill-indigo-600"}),"Ouvrir Session"]}),e.jsx("p",{className:"text-center text-[9px] font-black tracking-widest uppercase opacity-60",children:"Active le terminal client immédiatement"})]})]})]})}),e.jsx(ra,{isOpen:C,onClose:()=>I(!1),onConfirm:R,shopName:O?.name||"Boutique",counters:M||[],isLoading:i})]}),e.jsxs("div",{className:"space-y-8 pt-10",children:[e.jsxs("div",{className:"flex flex-col items-end justify-between gap-6 border-b border-slate-100 pb-8 lg:flex-row",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-1.5 rounded-full bg-indigo-500 shadow-[0_0_15px_rgba(79,70,229,0.5)]"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-black tracking-tight text-slate-900 uppercase",children:"Registre Historique"}),e.jsxs("p",{className:"mt-0.5 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:[F?.total||0," sessions enregistrées au total"]})]})]}),e.jsxs("div",{className:"flex w-full flex-wrap items-center gap-4 lg:w-auto",children:[e.jsxs("div",{className:"flex h-14 flex-1 items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 shadow-sm transition-all focus-within:border-indigo-500 lg:min-w-[200px] lg:flex-none",children:[e.jsx(Oe,{className:"h-4 w-4 text-slate-400"}),e.jsx("input",{type:"date",value:S,onChange:N=>{U(N.target.value),p(1)},className:"w-full border-none bg-transparent text-xs font-bold text-slate-600 focus:ring-0"})]}),e.jsxs("div",{className:"flex h-14 flex-1 items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 shadow-sm transition-all focus-within:border-indigo-500 lg:min-w-[200px] lg:flex-none",children:[e.jsx(ht,{className:"h-4 w-4 text-slate-400"}),e.jsxs("select",{value:b,onChange:N=>{v(N.target.value),p(1)},className:"w-full border-none bg-transparent text-xs font-bold text-slate-600 uppercase focus:ring-0",children:[e.jsx("option",{value:"all",children:"Tous les Statuts"}),e.jsx("option",{value:"open",children:"En Cours"}),e.jsx("option",{value:"closed",children:"Clôturées"})]})]}),(S||b!=="all")&&e.jsx($,{variant:"ghost",size:"icon",onClick:()=>{U(""),v("all")},className:"h-14 w-14 rounded-2xl text-red-500 hover:bg-red-50 hover:text-red-600",children:e.jsx(Ke,{className:"h-5 w-5"})})]})]}),e.jsx(Ye,{mode:"wait",children:w?e.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex h-96 flex-col items-center justify-center space-y-6",children:[e.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-indigo-100 border-t-indigo-600"}),e.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Chargement du registre..."})]},"loading"):g.length===0?e.jsxs(ue.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex h-96 flex-col items-center justify-center space-y-4 rounded-[3rem] border-2 border-dashed border-slate-100",children:[e.jsx("div",{className:"rounded-full bg-slate-50 p-6 text-slate-300",children:e.jsx(Oe,{className:"h-12 w-12"})}),e.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucune session trouvée"})]},"empty"):e.jsx(ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:s==="grid"?e.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3",children:g.map(N=>e.jsx(oa,{session:N,userRole:H?.role,onView:()=>n(N.id),onClose:()=>P(N.id),onReopen:()=>z(N.id)},N.id))}):e.jsx(da,{sessions:g,userRole:H?.role,onView:N=>n(N),onClose:N=>P(N),onReopen:N=>z(N)})},s)}),F&&F.last_page>1&&e.jsxs("div",{className:"mt-12 flex items-center justify-center gap-4 self-center rounded-3xl border border-white bg-white/50 p-4 backdrop-blur-sm",children:[e.jsx($,{variant:"ghost",disabled:r===1,onClick:()=>p(r-1),className:"h-12 w-12 rounded-2xl border border-slate-100 hover:bg-white",children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[Array.from({length:Math.min(F.last_page,5)}).map((N,L)=>{const Y=L+1;return e.jsx("button",{onClick:()=>p(Y),className:G("h-12 w-12 rounded-2xl text-xs font-black transition-all",r===Y?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"text-slate-400 hover:bg-white hover:text-slate-600"),children:Y},Y)}),F.last_page>5&&e.jsx("span",{className:"mx-2 text-slate-300",children:"•••"})]}),e.jsx($,{variant:"ghost",disabled:r===F.last_page,onClick:()=>p(r+1),className:"h-12 w-12 rounded-2xl border border-slate-100 hover:bg-white",children:e.jsx(ms,{className:"h-5 w-5"})})]})]}),e.jsx(Ye,{children:l&&f&&e.jsx(xa,{session:f?.session,stats:f?.statistics,clients:f?.clients,transactions:f?.transactions,activities:f?.activities,loading:q,onClose:()=>n(null)})})]})}function oa(t){const s=ee.c(61),{session:a,userRole:l,onView:n,onClose:i,onReopen:c}=t;let x;s[0]!==a.session_date?(x=X(a.session_date).isSame(X(),"day"),s[0]=a.session_date,s[1]=x):x=s[1];const h=x,_=a.status==="open"?"animate-pulse bg-emerald-500":"bg-slate-200";let d;s[2]!==_?(d=G("absolute top-0 right-0 h-2 w-full",_),s[2]=_,s[3]=d):d=s[3];let r;s[4]!==d?(r=e.jsx("div",{className:d}),s[4]=d,s[5]=r):r=s[5];let p;s[6]===Symbol.for("react.memo_cache_sentinel")?(p=e.jsx("div",{className:"rounded-2xl bg-slate-50 p-4 transition-colors duration-500 group-hover:bg-indigo-50",children:e.jsx(ts,{className:"h-7 w-7 text-slate-400 group-hover:text-indigo-500"})}),s[6]=p):p=s[6];const b=a.status==="open"?"border border-emerald-500/20 bg-emerald-500/10 text-emerald-600":"border border-slate-200 bg-slate-100 text-slate-500";let v;s[7]!==b?(v=G("flex items-center gap-1.5 rounded-full px-4 py-1.5 text-[10px] font-black tracking-widest uppercase",b),s[7]=b,s[8]=v):v=s[8];let S;s[9]!==a.status?(S=a.status==="open"?e.jsx("div",{className:"h-1.5 w-1.5 animate-ping rounded-full bg-emerald-500"}):null,s[9]=a.status,s[10]=S):S=s[10];const U=a.status==="open"?"En cours":"Terminé";let u;s[11]!==v||s[12]!==S||s[13]!==U?(u=e.jsxs("div",{className:"mb-8 flex items-start justify-between",children:[p,e.jsxs("div",{className:v,children:[S,U]})]}),s[11]=v,s[12]=S,s[13]=U,s[14]=u):u=s[14];let A;s[15]!==a.session_date?(A=X(a.session_date).format("DD MMMM YYYY"),s[15]=a.session_date,s[16]=A):A=s[16];let k;s[17]!==A?(k=e.jsx("div",{className:"mb-1 text-2xl font-black tracking-tight text-slate-900",children:A}),s[17]=A,s[18]=k):k=s[18];let j;s[19]!==h?(j=h&&e.jsx("p",{className:"text-[10px] leading-none font-black tracking-widest text-indigo-500 uppercase",children:"Aujourd'hui"}),s[19]=h,s[20]=j):j=s[20];let D;s[21]!==k||s[22]!==j?(D=e.jsxs("div",{children:[k,j]}),s[21]=k,s[22]=j,s[23]=D):D=s[23];let m;s[24]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] uppercase opacity-60",children:"Ouverture"}),s[24]=m):m=s[24];let w;s[25]===Symbol.for("react.memo_cache_sentinel")?(w=e.jsx(Ue,{className:"h-3 w-3"}),s[25]=w):w=s[25];let M;s[26]!==a.opened_at?(M=X(a.opened_at).format("HH:mm"),s[26]=a.opened_at,s[27]=M):M=s[27];let g;s[28]!==M?(g=e.jsxs("div",{className:"flex flex-col gap-1",children:[m,e.jsxs("span",{className:"flex items-center gap-1.5 text-slate-700",children:[w,M]})]}),s[28]=M,s[29]=g):g=s[29];let F;s[30]===Symbol.for("react.memo_cache_sentinel")?(F=e.jsx("div",{className:"h-8 w-[1px] bg-slate-200"}),s[30]=F):F=s[30];let f;s[31]===Symbol.for("react.memo_cache_sentinel")?(f=e.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] uppercase opacity-60",children:"Clôture"}),s[31]=f):f=s[31];let q;s[32]!==a.closed_at?(q=a.closed_at?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-3 w-3"}),X(a.closed_at).format("HH:mm")]}):"--:--",s[32]=a.closed_at,s[33]=q):q=s[33];let y;s[34]!==q?(y=e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[f,e.jsx("span",{className:"flex items-center gap-1.5 text-slate-700",children:q})]}),s[34]=q,s[35]=y):y=s[35];let C;s[36]!==g||s[37]!==y?(C=e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-50 bg-slate-50/50 p-4 text-xs font-bold text-slate-400",children:[g,F,y]}),s[36]=g,s[37]=y,s[38]=C):C=s[38];let I;s[39]===Symbol.for("react.memo_cache_sentinel")?(I=e.jsx(as,{className:"mr-2 h-4 w-4"}),s[39]=I):I=s[39];let T;s[40]!==n?(T=e.jsxs($,{onClick:n,className:"h-14 flex-1 rounded-2xl bg-indigo-600 text-[10px] font-black tracking-widest text-white uppercase shadow-lg shadow-indigo-600/20 transition-all hover:scale-105 hover:bg-indigo-700 active:scale-95",children:[I," Rapport"]}),s[40]=n,s[41]=T):T=s[41];let R;s[42]!==i||s[43]!==a.status?(R=a.status==="open"&&e.jsx($,{onClick:i,variant:"outline",className:"h-14 w-14 rounded-2xl border-slate-200 text-red-500 transition-all hover:border-red-100 hover:bg-red-50 active:scale-95",children:e.jsx(us,{className:"h-5 w-5"})}),s[42]=i,s[43]=a.status,s[44]=R):R=s[44];let P;s[45]!==c||s[46]!==a.status||s[47]!==l?(P=a.status==="closed"&&l==="super-admin"&&e.jsx($,{onClick:c,variant:"outline",className:"h-14 w-14 rounded-2xl border-indigo-200 text-indigo-500 transition-all hover:bg-indigo-50 active:scale-95",title:"Réouvrir la session",children:e.jsx(ls,{className:"h-5 w-5"})}),s[45]=c,s[46]=a.status,s[47]=l,s[48]=P):P=s[48];let z;s[49]!==T||s[50]!==R||s[51]!==P?(z=e.jsxs("div",{className:"flex gap-3 pt-4",children:[T,R,P]}),s[49]=T,s[50]=R,s[51]=P,s[52]=z):z=s[52];let O;s[53]!==D||s[54]!==C||s[55]!==z?(O=e.jsxs("div",{className:"space-y-6",children:[D,C,z]}),s[53]=D,s[54]=C,s[55]=z,s[56]=O):O=s[56];let V;return s[57]!==u||s[58]!==O||s[59]!==r?(V=e.jsxs(_e,{className:"group hover:shadow-3xl relative overflow-hidden rounded-[2.5rem] border border-none border-transparent bg-white p-8 shadow-xl shadow-slate-200/50 transition-all duration-500 hover:-translate-y-2 hover:border-indigo-100",children:[r,u,O]}),s[57]=u,s[58]=O,s[59]=r,s[60]=V):V=s[60],V}function da(t){const s=ee.c(14),{sessions:a,userRole:l,onView:n,onClose:i,onReopen:c}=t;let x;s[0]===Symbol.for("react.memo_cache_sentinel")?(x=e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[e.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase first:rounded-tl-[2.5rem]",children:"Date"}),e.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Boutique / Guichet"}),e.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Statut"}),e.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Horaire"}),e.jsx("th",{className:"p-8 text-right text-[11px] font-black tracking-widest text-slate-400 uppercase last:rounded-tr-[2.5rem]",children:"Actions"})]})}),s[0]=x):x=s[0];let h;if(s[1]!==i||s[2]!==c||s[3]!==n||s[4]!==a||s[5]!==l){let d;s[7]!==i||s[8]!==c||s[9]!==n||s[10]!==l?(d=r=>e.jsxs("tr",{className:"group transition-colors hover:bg-slate-50/50",children:[e.jsx("td",{className:"p-8 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-100 text-slate-400 transition-colors group-hover:bg-indigo-100 group-hover:text-indigo-600",children:e.jsx(ts,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-sm font-black tracking-tight text-slate-700",children:X(r.session_date).format("DD/MM/YYYY")})]})}),e.jsx("td",{className:"p-8",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700",children:r.shop?.name||"Agence Centrale"}),e.jsxs("span",{className:"mt-0.5 text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:["ID: ",r.shop_id]})]})}),e.jsx("td",{className:"p-8",children:e.jsx("span",{className:G("rounded-full px-4 py-1.5 text-[9px] font-black tracking-widest uppercase",r.status==="open"?"border border-emerald-100 bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-400"),children:r.status==="open"?"En Cours":"Clôturé"})}),e.jsx("td",{className:"p-8",children:e.jsxs("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"mb-0.5 text-[9px] uppercase opacity-50",children:"Ouvert"}),e.jsx("span",{className:"text-slate-600",children:X(r.opened_at).format("HH:mm")})]}),e.jsx(Ee,{className:"h-3 w-3 opacity-20"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"mb-0.5 text-[9px] uppercase opacity-50",children:"Fermé"}),e.jsx("span",{className:"text-slate-600",children:r.closed_at?X(r.closed_at).format("HH:mm"):"--:--"})]})]})}),e.jsx("td",{className:"p-8 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs($,{onClick:()=>n(r.id),className:"h-10 rounded-xl bg-indigo-50 px-4 text-[10px] font-black tracking-widest text-indigo-600 uppercase shadow-none transition-all hover:bg-indigo-600 hover:text-white",children:[e.jsx(as,{className:"mr-2 h-3.5 w-3.5"})," ","Rapport"]}),r.status==="open"&&e.jsx($,{onClick:()=>i(r.id),size:"icon",className:"h-10 w-10 rounded-xl bg-red-50 text-red-500 shadow-none transition-all hover:bg-red-500 hover:text-white",children:e.jsx(us,{className:"h-4 w-4"})}),r.status==="closed"&&l==="super-admin"&&e.jsx($,{onClick:()=>c(r.id),size:"icon",className:"h-10 w-10 rounded-xl bg-indigo-50 text-indigo-500 shadow-none transition-all hover:bg-indigo-500 hover:text-white",title:"Réouvrir la session",children:e.jsx(ls,{className:"h-4 w-4"})})]})})]},r.id),s[7]=i,s[8]=c,s[9]=n,s[10]=l,s[11]=d):d=s[11],h=a.map(d),s[1]=i,s[2]=c,s[3]=n,s[4]=a,s[5]=l,s[6]=h}else h=s[6];let _;return s[12]!==h?(_=e.jsx("div",{className:"w-full overflow-hidden rounded-[2.5rem] border border-slate-100 bg-white shadow-xl shadow-slate-200/30",children:e.jsxs("table",{className:"w-full border-collapse text-left",children:[x,e.jsx("tbody",{className:"divide-y divide-slate-100",children:h})]})}),s[12]=h,s[13]=_):_=s[13],_}function xa(t){const s=ee.c(47),{session:a,stats:l,transactions:n,loading:i,onClose:c}=t;let x,h,_;s[0]===Symbol.for("react.memo_cache_sentinel")?(x={opacity:0},h={opacity:1},_={opacity:0},s[0]=x,s[1]=h,s[2]=_):(x=s[0],h=s[1],_=s[2]);let d;s[3]!==c?(d=e.jsx(ue.div,{initial:x,animate:h,exit:_,onClick:c,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-xl"}),s[3]=c,s[4]=d):d=s[4];let r,p,b;s[5]===Symbol.for("react.memo_cache_sentinel")?(r={opacity:0,scale:.9,y:30},p={opacity:1,scale:1,y:0},b={opacity:0,scale:.9,y:30},s[5]=r,s[6]=p,s[7]=b):(r=s[5],p=s[6],b=s[7]);let v;s[8]===Symbol.for("react.memo_cache_sentinel")?(v=e.jsx("div",{className:"rounded-[2rem] bg-indigo-600 p-5 shadow-xl shadow-indigo-600/30",children:e.jsx(Se,{className:"h-10 w-10 text-white"})}),s[8]=v):v=s[8];let S;s[9]===Symbol.for("react.memo_cache_sentinel")?(S=e.jsx("h3",{className:"text-3xl font-black tracking-tighter text-slate-900 uppercase",children:"Rapport de Session"}),s[9]=S):S=s[9];const U=a?.status==="open"?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-500";let u;s[10]!==U?(u=G("rounded-full px-4 py-1.5 text-[10px] font-black tracking-widest uppercase",U),s[10]=U,s[11]=u):u=s[11];const A=a?.status==="open"?"Live":"Archivé";let k;s[12]!==u||s[13]!==A?(k=e.jsxs("div",{className:"mb-1 flex items-center gap-3",children:[S,e.jsx("span",{className:u,children:A})]}),s[12]=u,s[13]=A,s[14]=k):k=s[14];let j;s[15]!==a?(j=a?X(a.session_date).format("dddd DD MMMM YYYY"):"Chargement...",s[15]=a,s[16]=j):j=s[16];const D=a?.shop?.name;let m;s[17]!==j||s[18]!==D?(m=e.jsxs("p",{className:"text-sm font-bold text-slate-400",children:[j," ","• Guichet ",D]}),s[17]=j,s[18]=D,s[19]=m):m=s[19];let w;s[20]!==k||s[21]!==m?(w=e.jsxs("div",{className:"flex items-center gap-6",children:[v,e.jsxs("div",{children:[k,m]})]}),s[20]=k,s[21]=m,s[22]=w):w=s[22];let M;s[23]===Symbol.for("react.memo_cache_sentinel")?(M=e.jsx(Ke,{className:"h-8 w-8"}),s[23]=M):M=s[23];let g;s[24]!==c?(g=e.jsx($,{onClick:c,variant:"ghost",className:"h-16 w-16 rounded-[2rem] bg-slate-50 text-slate-400 transition-all hover:bg-red-50 hover:text-red-500",children:M}),s[24]=c,s[25]=g):g=s[25];let F;s[26]!==w||s[27]!==g?(F=e.jsxs("div",{className:"flex shrink-0 items-center justify-between border-b border-slate-100 bg-white p-8 md:p-12",children:[w,g]}),s[26]=w,s[27]=g,s[28]=F):F=s[28];let f;s[29]!==i||s[30]!==l?.cashier_stats||s[31]!==l?.total_clients||s[32]!==l?.total_transactions||s[33]!==l?.volume_cdf||s[34]!==l?.volume_usd||s[35]!==n?(f=e.jsx("div",{className:"flex-1 space-y-12 overflow-y-auto p-8 md:p-12",children:i?e.jsxs("div",{className:"flex h-96 flex-col items-center justify-center space-y-6",children:[e.jsx("div",{className:"h-20 w-20 animate-spin rounded-full border-4 border-indigo-100 border-t-indigo-600"}),e.jsx("p",{className:"animate-pulse text-sm font-black tracking-widest text-slate-400 uppercase",children:"Synthèse des données..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(Qe,{title:"Clients",value:l?.total_clients,icon:Le,color:"blue"}),e.jsx(Qe,{title:"Transactions",value:l?.total_transactions,icon:Ee,color:"emerald"}),e.jsx(Qe,{title:"Volume USD",value:`$ ${l?.volume_usd?.toLocaleString()}`,icon:Se,color:"indigo"}),e.jsx(Qe,{title:"Volume CDF",value:`${l?.volume_cdf?.toLocaleString()} FC`,icon:ze,color:"amber"})]}),e.jsxs("div",{className:"space-y-12",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-10 w-1 rounded-full bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.5)]"}),e.jsx("h5",{className:"text-xl font-black tracking-tight text-slate-900 uppercase",children:"Flux Financier"})]}),e.jsx("div",{className:"overflow-hidden rounded-[2.5rem] border border-slate-100 bg-white shadow-xl shadow-slate-200/20",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/50",children:[e.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Heure"}),e.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Opération"}),e.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Montant Envoyé"}),e.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Montant Reçu"}),e.jsx("th",{className:"p-6 text-right text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Commission"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[n?.map(ha),n?.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-12 text-center text-xs font-black tracking-widest text-slate-300 uppercase",children:"Aucune transaction"})})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-10 w-1 rounded-full bg-indigo-500"}),e.jsx("h5",{className:"text-xl font-black tracking-tight text-slate-900 uppercase",children:"Performance Opérateurs"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:l?.cashier_stats?.map(ma)})]})]})]})}),s[29]=i,s[30]=l?.cashier_stats,s[31]=l?.total_clients,s[32]=l?.total_transactions,s[33]=l?.volume_cdf,s[34]=l?.volume_usd,s[35]=n,s[36]=f):f=s[36];let q;s[37]===Symbol.for("react.memo_cache_sentinel")?(q=e.jsxs("div",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:["Document généré le ",X().format("DD/MM/YYYY HH:mm")]}),s[37]=q):q=s[37];let y;s[38]!==c?(y=e.jsxs("div",{className:"flex shrink-0 items-center justify-between border-t border-slate-100 bg-white p-8 md:p-12",children:[q,e.jsx($,{onClick:c,className:"h-14 rounded-2xl bg-slate-900 px-10 text-xs font-black tracking-widest text-white uppercase",children:"Fermer le Rapport"})]}),s[38]=c,s[39]=y):y=s[39];let C;s[40]!==F||s[41]!==f||s[42]!==y?(C=e.jsxs(ue.div,{initial:r,animate:p,exit:b,className:"relative flex max-h-[90vh] w-full max-w-6xl flex-col overflow-hidden rounded-[3.5rem] border border-white/20 bg-[#f8fafc] shadow-[0_40px_100px_rgba(0,0,0,0.5)]",children:[F,f,y]}),s[40]=F,s[41]=f,s[42]=y,s[43]=C):C=s[43];let I;return s[44]!==C||s[45]!==d?(I=e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 font-sans md:p-12",children:[d,C]}),s[44]=C,s[45]=d,s[46]=I):I=s[46],I}function ma(t,s){return e.jsxs("div",{className:"group rounded-[2rem] border border-slate-100 bg-white p-8 shadow-lg shadow-slate-200/30 transition-all hover:border-indigo-200",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-indigo-50 text-xl font-black text-indigo-600 transition-all group-hover:bg-indigo-600 group-hover:text-white",children:t.cashier.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-black tracking-tighter text-slate-800",children:t.cashier}),e.jsx("div",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Opérateur"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-xl bg-slate-50 p-4",children:[e.jsx("div",{className:"mb-1 text-[9px] font-black text-slate-400 uppercase",children:"Appels"}),e.jsx("div",{className:"text-xl font-black text-slate-700",children:t.clients_called})]}),e.jsxs("div",{className:"rounded-xl bg-slate-50 p-4",children:[e.jsx("div",{className:"mb-1 text-[9px] font-black text-slate-400 uppercase",children:"Succès"}),e.jsx("div",{className:"text-xl font-black text-emerald-600",children:t.transactions_completed})]})]})]},s)}function ha(t){return e.jsxs("tr",{className:"transition-colors hover:bg-slate-50/30",children:[e.jsx("td",{className:"p-6 text-xs font-bold text-slate-500",children:X(t.created_at).format("HH:mm:ss")}),e.jsx("td",{className:"p-6",children:e.jsx("span",{className:"text-xs font-black tracking-tighter text-slate-800 uppercase",children:t.operation_type})}),e.jsx("td",{className:"p-6",children:e.jsxs("span",{className:"text-sm font-black text-emerald-600",children:[t.amount_from?.toLocaleString()," ",t.currency_from]})}),e.jsx("td",{className:"p-6",children:e.jsxs("span",{className:"text-sm font-black text-slate-600",children:[t.amount_to?.toLocaleString()," ",t.currency_to]})}),e.jsx("td",{className:"p-6 text-right",children:e.jsxs("span",{className:"text-xs font-black text-indigo-600",children:["$"," ",t.commission]})})]},t.id)}function Qe(t){const s=ee.c(21),{title:a,value:l,icon:n,color:i}=t;let c,x,h,_;if(s[0]!==n||s[1]!==i){const S={blue:"bg-blue-500 text-blue-500 border-blue-100 shadow-blue-500/20",emerald:"bg-emerald-500 text-emerald-500 border-emerald-100 shadow-emerald-500/20",indigo:"bg-indigo-500 text-indigo-500 border-indigo-100 shadow-indigo-500/20",amber:"bg-amber-500 text-amber-500 border-amber-100 shadow-amber-500/20"};_="flex flex-col items-center rounded-[2.5rem] border border-slate-100 bg-white p-8 text-center shadow-xl shadow-slate-200/30",h=G("mb-6 rounded-2xl p-5 shadow-xl",S[i].split(" ")[0],"bg-opacity-10"),c=n,x=G("h-8 w-8",S[i].split(" ")[1]),s[0]=n,s[1]=i,s[2]=c,s[3]=x,s[4]=h,s[5]=_}else c=s[2],x=s[3],h=s[4],_=s[5];let d;s[6]!==c||s[7]!==x?(d=e.jsx(c,{className:x}),s[6]=c,s[7]=x,s[8]=d):d=s[8];let r;s[9]!==h||s[10]!==d?(r=e.jsx("div",{className:h,children:d}),s[9]=h,s[10]=d,s[11]=r):r=s[11];let p;s[12]!==a?(p=e.jsx("div",{className:"mb-2 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:a}),s[12]=a,s[13]=p):p=s[13];let b;s[14]!==l?(b=e.jsx("div",{className:"text-3xl leading-none font-black tracking-tighter text-slate-900",children:l}),s[14]=l,s[15]=b):b=s[15];let v;return s[16]!==_||s[17]!==r||s[18]!==p||s[19]!==b?(v=e.jsxs("div",{className:_,children:[r,p,b]}),s[16]=_,s[17]=r,s[18]=p,s[19]=b,s[20]=v):v=s[20],v}function ua(){const t=ee.c(96),{auth:s}=xs().props,a=s.user?.role==="super-admin",[l,n]=B.useState(!1),[i,c]=B.useState(null),x=Be(),h=a?"manager":"cashier";let _;t[0]===Symbol.for("react.memo_cache_sentinel")?(_=[],t[0]=_):_=t[0];let d;t[1]!==h?(d={name:"",email:"",password:"",role:h,is_active:!0,shop_ids:_},t[1]=h,t[2]=d):d=t[2];const[r,p]=B.useState(d);let b;t[3]===Symbol.for("react.memo_cache_sentinel")?(b=["shops"],t[3]=b):b=t[3];let v;t[4]!==a?(v={queryKey:b,queryFn:Q.entities.Shop.list,enabled:a},t[4]=a,t[5]=v):v=t[5];const{data:S}=oe(v);let U;t[6]===Symbol.for("react.memo_cache_sentinel")?(U={queryKey:["users"],queryFn:Q.entities.User.list},t[6]=U):U=t[6];const{data:u,isLoading:A}=oe(U);let k;t[7]!==x?(k={mutationFn:Q.entities.User.create,onSuccess:()=>{x.invalidateQueries({queryKey:["users"]}),n(!1),p({name:"",email:"",password:"",role:"cashier",is_active:!0}),K.success("Utilisateur créé avec succès")},onError:va},t[7]=x,t[8]=k):k=t[8];const j=de(k);let D;t[9]!==x?(D={mutationFn:Na,onSuccess:()=>{x.invalidateQueries({queryKey:["users"]}),c(null),p({name:"",email:"",password:"",role:"cashier",is_active:!0}),K.success("Utilisateur mis à jour avec succès")},onError:ja},t[9]=x,t[10]=D):D=t[10];const m=de(D);let w;t[11]!==x?(w={mutationFn:ba,onSuccess:()=>{x.invalidateQueries({queryKey:["users"]}),K.success("Utilisateur supprimé avec succès")},onError:ga},t[11]=x,t[12]=w):w=t[12];const M=de(w);let g;t[13]!==j||t[14]!==i||t[15]!==r||t[16]!==m?(g=E=>{E.preventDefault(),i?m.mutate({id:i.id,data:r}):j.mutate(r)},t[13]=j,t[14]=i,t[15]=r,t[16]=m,t[17]=g):g=t[17];const F=g;let f;t[18]===Symbol.for("react.memo_cache_sentinel")?(f=E=>{c(E),p({name:E.name,email:E.email,role:E.role,is_active:E.is_active}),n(!0)},t[18]=f):f=t[18];const q=f;let y;t[19]!==M?(y=E=>{confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?")&&M.mutate(E)},t[19]=M,t[20]=y):y=t[20];const C=y,I=fa;let T;t[21]===Symbol.for("react.memo_cache_sentinel")?(T=e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Gestion des utilisateurs"}),e.jsx("p",{className:"text-slate-500",children:"Gérez les accès et les rôles des utilisateurs"})]}),t[21]=T):T=t[21];let R;t[22]!==a?(R=()=>{c(null),p({name:"",email:"",password:"",role:a?"manager":"cashier",is_active:!0}),n(!0)},t[22]=a,t[23]=R):R=t[23];let P;t[24]===Symbol.for("react.memo_cache_sentinel")?(P=e.jsx(Re,{className:"mr-2 h-4 w-4"}),t[24]=P):P=t[24];const z=a?"Nouvel utilisateur":"Nouveau Caissier";let O;t[25]!==R||t[26]!==z?(O=e.jsxs("div",{className:"flex items-center justify-between",children:[T,e.jsxs($,{onClick:R,className:"bg-[#1f61e4] hover:bg-[#1f61e4]/90",children:[P,z]})]}),t[25]=R,t[26]=z,t[27]=O):O=t[27];let V;t[28]===Symbol.for("react.memo_cache_sentinel")?(V=e.jsx(Ms,{children:e.jsxs(Pe,{children:[e.jsx(he,{children:"Nom"}),e.jsx(he,{children:"Email"}),e.jsx(he,{children:"Boutique"}),e.jsx(he,{children:"Rôle"}),e.jsx(he,{children:"Statut"}),e.jsx(he,{className:"text-right",children:"Actions"})]})}),t[28]=V):V=t[28];let H;t[29]!==C||t[30]!==A||t[31]!==u?(H=A?e.jsx(Pe,{children:e.jsx(me,{colSpan:5,className:"h-24 text-center",children:"Chargement..."})}):u?.map(E=>e.jsxs(Pe,{children:[e.jsx(me,{className:"font-medium",children:E.name}),e.jsx(me,{children:E.email}),e.jsx(me,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:E.shops&&E.shops.length>0?E.shops.map(pa):e.jsx("span",{className:"text-[10px] text-slate-400 italic",children:"Aucune"})})}),e.jsx(me,{children:I(E.role)}),e.jsx(me,{children:e.jsx(Z,{variant:E.is_active?"default":"destructive",className:E.is_active?"bg-green-500 hover:bg-green-600":"",children:E.is_active?"Actif":"Inactif"})}),e.jsx(me,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{variant:"ghost",size:"icon",onClick:()=>q(E),className:"h-8 w-8 text-slate-500 hover:text-[#1f61e4]",children:e.jsx(it,{className:"h-4 w-4"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>C(E.id),className:"h-8 w-8 text-slate-500 hover:text-red-600",children:e.jsx(ss,{className:"h-4 w-4"})})]})})]},E.id)),t[29]=C,t[30]=A,t[31]=u,t[32]=H):H=t[32];let N;t[33]!==H?(N=e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:e.jsxs(Fs,{children:[V,e.jsx(As,{children:H})]})}),t[33]=H,t[34]=N):N=t[34];const L=i?"Modifier l'utilisateur":"Nouvel utilisateur";let Y;t[35]!==L?(Y=e.jsx(ks,{children:e.jsx(ys,{children:L})}),t[35]=L,t[36]=Y):Y=t[36];let ie;t[37]===Symbol.for("react.memo_cache_sentinel")?(ie=e.jsx(ae,{htmlFor:"name",children:"Nom complet"}),t[37]=ie):ie=t[37];let le;t[38]!==r?(le=E=>p({...r,name:E.target.value}),t[38]=r,t[39]=le):le=t[39];let W;t[40]!==r.name||t[41]!==le?(W=e.jsxs("div",{className:"space-y-2",children:[ie,e.jsx(ce,{id:"name",value:r.name,onChange:le,required:!0})]}),t[40]=r.name,t[41]=le,t[42]=W):W=t[42];let se;t[43]===Symbol.for("react.memo_cache_sentinel")?(se=e.jsx(ae,{htmlFor:"email",children:"Email"}),t[43]=se):se=t[43];let re;t[44]!==r?(re=E=>p({...r,email:E.target.value}),t[44]=r,t[45]=re):re=t[45];let ne;t[46]!==r.email||t[47]!==re?(ne=e.jsxs("div",{className:"space-y-2",children:[se,e.jsx(ce,{id:"email",type:"email",value:r.email,onChange:re,required:!0})]}),t[46]=r.email,t[47]=re,t[48]=ne):ne=t[48];let te;t[49]!==i||t[50]!==r?(te=!i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"password",children:"Mot de passe"}),e.jsx(ce,{id:"password",type:"password",value:r.password,onChange:E=>p({...r,password:E.target.value}),required:!i})]}),t[49]=i,t[50]=r,t[51]=te):te=t[51];let fe;t[52]===Symbol.for("react.memo_cache_sentinel")?(fe=e.jsx(ae,{htmlFor:"role",children:"Rôle"}),t[52]=fe):fe=t[52];let ge;t[53]!==r?(ge=E=>p({...r,role:E}),t[53]=r,t[54]=ge):ge=t[54];let we;t[55]===Symbol.for("react.memo_cache_sentinel")?(we=e.jsx(We,{children:e.jsx(Ze,{placeholder:"Sélectionner un rôle"})}),t[55]=we):we=t[55];let be;t[56]!==a?(be=a&&e.jsx(Ne,{value:"manager",children:"Manager"}),t[56]=a,t[57]=be):be=t[57];let ye,ke;t[58]===Symbol.for("react.memo_cache_sentinel")?(ye=e.jsx(Ne,{value:"cashier",children:"Caissier"}),ke=e.jsx(Ne,{value:"client",children:"Client"}),t[58]=ye,t[59]=ke):(ye=t[58],ke=t[59]);let ve;t[60]!==be?(ve=e.jsxs(es,{children:[be,ye,ke]}),t[60]=be,t[61]=ve):ve=t[61];let je;t[62]!==r.role||t[63]!==ge||t[64]!==ve?(je=e.jsxs("div",{className:"space-y-2",children:[fe,e.jsxs(Xe,{value:r.role,onValueChange:ge,disabled:!1,children:[we,ve]})]}),t[62]=r.role,t[63]=ge,t[64]=ve,t[65]=je):je=t[65];let o;t[66]!==S||t[67]!==r||t[68]!==a?(o=a&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Assigner aux Boutiques"}),e.jsx("div",{className:"grid max-h-32 grid-cols-2 gap-2 overflow-y-auto rounded-lg border p-1",children:S?.map(E=>e.jsxs("div",{onClick:()=>{const ns=r.shop_ids||[],Us=ns.includes(E.id)?ns.filter(Es=>Es!==E.id):[...ns,E.id];p({...r,shop_ids:Us})},className:`flex cursor-pointer items-center gap-2 rounded-md border p-2 transition-colors ${r.shop_ids?.includes(E.id)?"border-indigo-200 bg-indigo-50":"bg-white hover:bg-slate-50"}`,children:[e.jsx("div",{className:`h-3 w-3 rounded-sm border ${r.shop_ids?.includes(E.id)?"border-indigo-600 bg-indigo-600":"border-slate-300"}`}),e.jsx("span",{className:"text-xs font-bold",children:E.name})]},E.id))})]}),t[66]=S,t[67]=r,t[68]=a,t[69]=o):o=t[69];let J;t[70]!==i||t[71]!==r?(J=i&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:r.is_active,onChange:E=>p({...r,is_active:E.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),e.jsx(ae,{htmlFor:"is_active",children:"Compte actif"})]}),t[70]=i,t[71]=r,t[72]=J):J=t[72];let xe;t[73]===Symbol.for("react.memo_cache_sentinel")?(xe=e.jsx($,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Annuler"}),t[73]=xe):xe=t[73];const Te=j.isPending||m.isPending,is=j.isPending||m.isPending?"Enregistrement...":"Enregistrer";let Ce;t[74]!==Te||t[75]!==is?(Ce=e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[xe,e.jsx($,{type:"submit",className:"bg-[#1f61e4] hover:bg-[#1f61e4]/90",disabled:Te,children:is})]}),t[74]=Te,t[75]=is,t[76]=Ce):Ce=t[76];let De;t[77]!==F||t[78]!==W||t[79]!==ne||t[80]!==te||t[81]!==je||t[82]!==o||t[83]!==J||t[84]!==Ce?(De=e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[W,ne,te,je,o,J,Ce]}),t[77]=F,t[78]=W,t[79]=ne,t[80]=te,t[81]=je,t[82]=o,t[83]=J,t[84]=Ce,t[85]=De):De=t[85];let Me;t[86]!==Y||t[87]!==De?(Me=e.jsxs(_s,{children:[Y,De]}),t[86]=Y,t[87]=De,t[88]=Me):Me=t[88];let Fe;t[89]!==l||t[90]!==Me?(Fe=e.jsx(Ss,{open:l,onOpenChange:n,children:Me}),t[89]=l,t[90]=Me,t[91]=Fe):Fe=t[91];let Ve;return t[92]!==O||t[93]!==N||t[94]!==Fe?(Ve=e.jsxs("div",{className:"space-y-6",children:[O,N,Fe]}),t[92]=O,t[93]=N,t[94]=Fe,t[95]=Ve):Ve=t[95],Ve}function pa(t){return e.jsx(Z,{variant:"outline",className:"py-0 text-[10px]",children:t.name},t.id)}function fa(t){switch(t){case"manager":return e.jsxs(Z,{className:"bg-purple-500 hover:bg-purple-600",children:[e.jsx(os,{className:"mr-1 h-3 w-3"})," Manager"]});case"cashier":return e.jsxs(Z,{className:"bg-pink-500 hover:bg-pink-600",children:[e.jsx(kt,{className:"mr-1 h-3 w-3"})," Caissier"]});case"client":return e.jsxs(Z,{className:"bg-cyan-500 hover:bg-cyan-600",children:[e.jsx($e,{className:"mr-1 h-3 w-3"})," Client"]});default:return e.jsx(Z,{variant:"secondary",children:t})}}function ga(t){K.error(t.message||"Erreur lors de la suppression")}function ba(t){return Q.entities.User.delete(t)}function ja(t){K.error(t.message||"Erreur lors de la mise à jour")}function Na(t){const{id:s,data:a}=t;return Q.entities.User.update(s,a)}function va(t){K.error(t.message||"Erreur lors de la création")}function ol(){const{auth:t}=xs().props,a=t.user?.role==="super-admin",l=Be(),[n,i]=B.useState(a?"shops":"overview"),[c,x]=B.useState(X().format("YYYY-MM-DD")),[h,_]=B.useState(""),[d,r]=B.useState(null),{data:p=[]}=oe({queryKey:["manager-shops"],queryFn:()=>Q.entities.Shop.list()});B.useMemo(()=>{p.length>0&&!d&&r(p[0].id)},[p,d]);const{data:b=[],isLoading:v}=oe({queryKey:["all-clients",c,h,d],queryFn:()=>Q.entities.Client.list({sort:"-created_at",limit:500,date:n==="clients"?void 0:c,search:h,shop_id:d||void 0}),refetchInterval:3e4,enabled:!!d||a}),{data:S=[],isLoading:U}=oe({queryKey:["all-transactions",c,d],queryFn:()=>Q.entities.Transaction.list({sort:"-created_at",limit:500,date:c,shop_id:d||void 0}),refetchInterval:3e4,enabled:!!d||a}),{data:u=[],isLoading:A}=oe({queryKey:["all-cash-movements",c,d],queryFn:()=>Q.entities.CashSession.listMovements({date:c,shop_id:d||void 0}),refetchInterval:3e4,enabled:!!d||a}),k=B.useMemo(()=>{const w=X(c).startOf("day").isSame(X().startOf("day")),M=b,g=S,F=g.filter(y=>y.currency_from==="USD").reduce((y,C)=>y+(C.amount_from||0),0),f=g.filter(y=>y.currency_from==="CDF").reduce((y,C)=>y+(C.amount_from||0),0),q=g.reduce((y,C)=>y+(parseFloat(C.commission)||0),0);return{todayClients:M.length,waiting:M.filter(y=>y.status==="waiting").length,volumeUSD:F,volumeCDF:f,commissions:q,isCurrentDay:w}},[b,S,c]),j=B.useMemo(()=>{const m=new Map;return b.forEach(w=>{const M=w.phone;if(M)if(!m.has(M))m.set(M,w);else{const g=m.get(M);w.is_registered&&!g.is_registered&&m.set(M,w)}}),Array.from(m.values())},[b]),D=()=>{l.invalidateQueries({queryKey:["all-clients"]}),l.invalidateQueries({queryKey:["all-transactions"]}),l.invalidateQueries({queryKey:["all-cash-movements"]}),K.success("Tableau de bord actualisé")};return e.jsxs(Qs,{currentPageName:"Manager",children:[e.jsx(Ls,{title:"Manager"}),e.jsxs("div",{className:"flex flex-col overflow-hidden bg-[#f8fafc]",children:[e.jsxs("header",{className:"z-20 flex h-24 flex-shrink-0 items-center justify-between border-b border-slate-200 bg-white px-10 shadow-[0_1px_3px_rgba(0,0,0,0.02)]",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(ue.div,{whileHover:{scale:1.02},className:"relative flex h-16 w-38 items-center justify-center px-4",children:e.jsx("img",{src:"/logo-color.png",alt:"Havifin",className:"h-full w-full object-contain"})}),e.jsx("div",{className:"h-10 w-[1px] bg-slate-100"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("h1",{className:"text-2xl font-black tracking-tight text-slate-900 uppercase",children:["Console"," ",e.jsx("span",{className:"text-indigo-600",children:"Manager"})]}),e.jsx("span",{className:"rounded-full border border-emerald-500/20 bg-emerald-500/10 px-3 py-1 text-[10px] font-black tracking-widest text-emerald-600 uppercase",children:"Live"})]}),e.jsxs("p",{className:"mt-1 flex items-center gap-2 text-[10px] font-black tracking-[0.15em] text-slate-400 uppercase",children:[t.user.role," •"," ",a?"Supervision Globale":t.user.shop||"Boutique"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[p.length>0&&e.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 bg-white p-1 shadow-sm",children:[e.jsx("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-2",children:e.jsx(Je,{className:"h-4 w-4 text-slate-500"})}),e.jsx("select",{className:"cursor-pointer border-none bg-transparent pr-10 text-sm font-black text-slate-700 uppercase focus:ring-0",value:d||"",onChange:m=>r(Number(m.target.value)),children:p.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))})]}),e.jsxs("div",{className:"hidden items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-1.5 pr-5 xl:flex",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-slate-100 bg-white text-slate-400 shadow-sm",children:e.jsx(He,{className:G("h-5 w-5",(v||U)&&"animate-spin")})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-black tracking-wider text-slate-400 uppercase",children:"Dernier Sync"}),e.jsx("div",{className:"text-xs font-bold text-slate-600",children:"A l'instant"})]})]}),e.jsxs($,{variant:"outline",onClick:D,className:"h-12 rounded-2xl border-slate-200 bg-white px-6 text-xs font-black tracking-widest uppercase shadow-sm transition-all hover:border-indigo-500 hover:text-indigo-600",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Actualiser"]}),e.jsxs("div",{className:"flex h-12 items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 shadow-sm transition-all focus-within:border-indigo-500",children:[e.jsx(Oe,{className:"h-4 w-4 text-slate-400"}),e.jsx("input",{type:"date",value:c,onChange:m=>x(m.target.value),className:"border-none bg-transparent text-xs font-black tracking-widest text-slate-600 uppercase focus:ring-0"})]}),e.jsxs($,{className:"h-12 rounded-2xl bg-slate-900 px-6 text-xs font-black tracking-widest text-white uppercase shadow-xl shadow-slate-900/10 transition-all hover:bg-black active:scale-95",children:[e.jsx(xt,{className:"mr-2 h-4 w-4 text-emerald-400"}),"Exporter Rapport"]})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-[url('/grid.svg')] bg-[length:40px_40px] px-10 py-10",children:e.jsxs("div",{className:"w-full max-w-none space-y-10",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(Ge,{title:"Clients Aujourd'hui",value:k.todayClients,subtitle:`${k.waiting} en attente`,icon:Le,color:"blue"}),e.jsx(Ge,{title:"Volume USD",value:`$ ${k.volumeUSD.toLocaleString()}`,icon:Se,color:"emerald"}),e.jsx(Ge,{title:"Volume CDF",value:`${k.volumeCDF.toLocaleString()} FC`,icon:ze,color:"amber"}),e.jsx(Ge,{title:"Commissions Estimées",value:`$ ${k.commissions.toLocaleString()}`,icon:Ns,color:"indigo"})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[e.jsxs("div",{className:"col-span-12 space-y-4 lg:col-span-3",children:[e.jsxs("div",{className:"rounded-[2rem] border border-white bg-white/50 p-6 shadow-sm backdrop-blur-xl",children:[e.jsx("h3",{className:"mb-6 px-2 text-[11px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Navigation"}),e.jsx("nav",{className:"space-y-2",children:[{id:"overview",label:"Vue d'ensemble",icon:ps},{id:"transactions",label:"Flux Transactions",icon:Ee},{id:"movements",label:"Mouvements Manuels",icon:qs},{id:"rates",label:"Gestion Taux",icon:ds},{id:"users",label:"Utilisateurs",icon:Le},{id:"clients",label:"Base Clients",icon:Le},{id:"institutions",label:"Banques & Partenaires",icon:ze},{id:"logs",label:"Journal Activité",icon:hs},{id:"sessions",label:"Gestion Sessions",icon:ls},...a?[{id:"shops",label:"Gestion Boutiques",icon:Je}]:[]].map(m=>{const w=m.icon;return e.jsxs("button",{onClick:()=>i(m.id),className:G("flex w-full items-center justify-between rounded-2xl border p-4 text-sm font-bold transition-all duration-300",n===m.id?"border-indigo-600 bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"border-slate-100 bg-white/40 text-slate-500 hover:border-slate-200 hover:bg-white"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:G("h-5 w-5",n===m.id?"text-white":"text-slate-400")}),m.label]}),e.jsx(ms,{className:G("h-4 w-4 transition-transform",n===m.id?"translate-x-1":"opacity-0")})]},m.id)})})]}),e.jsxs("div",{className:"group relative overflow-hidden rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-1/2 -translate-y-1/2 bg-indigo-500/20 blur-[80px]"}),e.jsx("h4",{className:"relative z-10 mb-2 text-xl font-black",children:"Besoin d'aide ?"}),e.jsx("p",{className:"relative z-10 mb-6 text-xs font-medium text-slate-400",children:"Consultez la documentation technique du bureau de change."}),e.jsx($,{className:"relative z-10 w-full rounded-xl bg-white text-[10px] font-black tracking-widest text-slate-900 uppercase hover:bg-slate-100",children:"Guide Manager"})]})]}),e.jsx("div",{className:"col-span-12 lg:col-span-9",children:e.jsx("div",{className:"min-h-[600px] overflow-hidden rounded-[2.5rem] border border-white bg-white/80 shadow-xl shadow-slate-200/50 backdrop-blur-xl",children:e.jsxs("div",{className:"p-10",children:[n==="overview"&&e.jsxs("div",{className:"animate-in space-y-8 duration-500 fade-in slide-in-from-bottom-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:["Performances du"," ",X(c).format("DD/MM/YYYY")]}),e.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Aperçu des flux financiers et des clients."})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border border-slate-100 bg-slate-50 p-8 opacity-50",children:[e.jsx(Ns,{className:"mb-4 h-16 w-16 text-slate-300"}),e.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Graphique des Flux (Soon)"})]}),e.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border border-slate-100 bg-slate-50 p-8 opacity-50",children:[e.jsx(ps,{className:"mb-4 h-16 w-16 text-slate-300"}),e.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Volume par Guichet (Soon)"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h4",{className:"text-lg font-black tracking-tight text-slate-800",children:"Activités Récentes"}),e.jsx($,{variant:"ghost",className:"font-bold text-indigo-600 hover:bg-indigo-50",onClick:()=>i("transactions"),children:"Voir tout"})]}),e.jsx(fs,{transactions:S.slice(0,5)})]}),e.jsxs("div",{className:"border-t border-slate-100 pt-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h4",{className:"text-lg font-black tracking-tight text-slate-800",children:"Mouvements de Caisse Récents"}),e.jsx($,{variant:"ghost",className:"font-bold text-indigo-600 hover:bg-indigo-50",onClick:()=>i("movements"),children:"Voir tout"})]}),e.jsx(vs,{movements:u.slice(0,5)})]})]}),n==="transactions"&&e.jsxs("div",{className:"animate-in space-y-6 duration-300 fade-in",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Journal Complet"}),e.jsxs("div",{className:"relative w-72",children:[e.jsx(Oe,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-slate-400"}),e.jsx("input",{placeholder:"Filtrer...",className:"h-10 w-full rounded-xl border-slate-200 pr-4 pl-10 text-sm focus:ring-indigo-500"})]})]}),e.jsx(fs,{transactions:S})]}),n==="movements"&&e.jsxs("div",{className:"animate-in space-y-6 duration-300 fade-in",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Mouvements Manuels (Ajustements)"})}),e.jsx(vs,{movements:u})]}),n==="rates"&&e.jsx("div",{className:"animate-in duration-300 fade-in",children:e.jsx(Zt,{})}),n==="institutions"&&e.jsx("div",{className:"animate-in duration-300 fade-in",children:e.jsx(Lt,{})}),n==="users"&&e.jsx("div",{className:"animate-in duration-300 fade-in",children:e.jsx(ua,{})}),n==="shops"&&e.jsx("div",{className:"animate-in duration-300 fade-in",children:e.jsx(nt,{})}),n==="clients"&&e.jsxs("div",{className:"animate-in space-y-6 duration-300 fade-in",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Base de Données Clients"}),e.jsxs("div",{className:"relative w-72",children:[e.jsx(Oe,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-slate-400"}),e.jsx("input",{placeholder:"Rechercher un client...",className:"h-10 w-full rounded-xl border-slate-200 pr-4 pl-10 text-sm focus:ring-indigo-500",value:h,onChange:m=>_(m.target.value)})]})]}),e.jsx(Et,{clients:j,isLoading:v||p.length>0&&!d})]}),n==="sessions"&&e.jsx("div",{className:"animate-in duration-300 fade-in",children:e.jsx(ca,{})}),n==="logs"&&e.jsx(Rt,{selectedDate:c})]})})})]})]})})]})]})}export{ol as default};
