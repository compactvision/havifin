import{c as Ae,R as Qe,j as s,r as me,u as et}from"./app-ZCVcWHBw.js";import{A as qe,b as _e,u as Ee}from"./base44Client-BNl0UU2e.js";import{B as ot,D as tt,a as st,b as ct,c as lt,d as at}from"./index-gaBAzvHK.js";import{B as pe}from"./button-0-m3FkQp.js";import{c as Ne,a as Ce,m as Ve}from"./createLucideIcon-DMMdWEHt.js";import{h as Xe}from"./moment-B-YVwB4U.js";import{C as nt,R as it,A as dt}from"./refresh-cw-CSSoTBVY.js";import{L as mt}from"./landmark-Bv1ma-Bd.js";import{S as ht}from"./smartphone-QvlF3J57.js";import{A as We}from"./arrow-right-D_9x74ge.js";import{P as xt,C as rt,a as ut,b as ft,c as pt}from"./phone-U6sHrVS1.js";import{u as ze}from"./check-Bf4iBBJ-.js";import{t as Re}from"./index-ChCbcm14.js";import{C as bt}from"./circle-alert-CrihUmoR.js";import{I as Ue,L as Me}from"./label-DBNBirpG.js";import{S as Ie,a as He,b as Oe,c as Ke,d as ye}from"./select-ByTMFRn-.js";import{L as gt}from"./loader-circle-BQNw9mM2.js";import{L as yt,A as _t}from"./app-main-UKJC7V_L.js";import{U as jt}from"./users-Cgpd6jQx.js";import{S as vt}from"./search-BNeiIswJ.js";/* empty css            */const wt=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Nt=Ne("Calculator",wt);const Ct=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kt=Ne("CircleCheckBig",Ct);const St=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Pt=Ne("CircleUser",St);const Dt=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v2",key:"stiyo7"}],["path",{d:"M12 13h.01",key:"y0uutt"}]],Mt=Ne("MessageSquareWarning",Dt);const At=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]],Ye=Ne("PhoneCall",At);const Ft=[["polyline",{points:"18 2 22 6 18 10",key:"6vjanh"}],["line",{x1:"14",x2:"22",y1:"6",y2:"6",key:"1jsywh"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Rt=Ne("PhoneForwarded",Ft);const Lt=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$t=Ne("Send",Lt);const qt=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Et=Ne("TriangleAlert",qt);function Ge(t){const e=Ae.c(71),{client:a,onCall:c,onRecall:i,onProcess:d,onHelp:C,isProcessing:_}=t,[r,n]=Qe.useState(!1),l=a.status==="called",h=a.status==="completed",m=a.status==="waiting";let g,y;e[0]!==l?(g=()=>{l&&n(!0)},y=[l],e[0]=l,e[1]=g,e[2]=y):(g=e[1],y=e[2]),Qe.useEffect(g,y);let x,p,u;e[3]===Symbol.for("react.memo_cache_sentinel")?(x={opacity:0,scale:.98,y:5},p={opacity:1,scale:1,y:0},u={opacity:0,scale:.95,y:-5},e[3]=x,e[4]=p,e[5]=u):(x=e[3],p=e[4],u=e[5]);let b;e[6]!==l||e[7]!==r?(b=()=>!l&&n(!r),e[6]=l,e[7]=r,e[8]=b):b=e[8];const j=l?"rounded-[2rem] border-blue-500/30 bg-white p-5 shadow-xl ring-1 shadow-blue-500/5 ring-blue-50":h?"rounded-2xl border-slate-100 bg-slate-50/50 p-3 opacity-60 hover:opacity-100":"rounded-2xl border-slate-200 bg-white p-3 shadow-sm hover:border-blue-300 hover:shadow-md";let v;e[9]!==j?(v=Ce("group relative cursor-pointer overflow-hidden transition-all duration-300",j),e[9]=j,e[10]=v):v=e[10];const S=l?"h-14 w-14 rounded-2xl bg-blue-600 text-xl text-white shadow-lg shadow-blue-500/20":"h-10 w-10 rounded-xl bg-slate-900 text-sm text-white";let w;e[11]!==S?(w=Ce("flex flex-shrink-0 items-center justify-center font-black tracking-tighter transition-all",S),e[11]=S,e[12]=w):w=e[12];let N;e[13]!==a.ticket_number||e[14]!==w?(N=s.jsx("div",{className:w,children:a.ticket_number}),e[13]=a.ticket_number,e[14]=w,e[15]=N):N=e[15];const $=l?"text-lg":"text-sm";let E;e[16]!==$?(E=Ce("truncate leading-tight font-black tracking-tight text-slate-800",$),e[16]=$,e[17]=E):E=e[17];const U=a.first_name?`${a.first_name} ${a.last_name||""}`:a.phone;let R;e[18]!==E||e[19]!==U?(R=s.jsx("h4",{className:E,children:U}),e[18]=E,e[19]=U,e[20]=R):R=e[20];let q;e[21]!==a.created_date||e[22]!==a.service||e[23]!==l||e[24]!==r?(q=!l&&!r&&s.jsxs("p",{className:"truncate text-[10px] font-bold tracking-wider text-slate-400 uppercase",children:[a.service," •"," ",Xe(a.created_date).fromNow()]}),e[21]=a.created_date,e[22]=a.service,e[23]=l,e[24]=r,e[25]=q):q=e[25];let M;e[26]!==R||e[27]!==q?(M=s.jsxs("div",{className:"overflow-hidden",children:[R,q]}),e[26]=R,e[27]=q,e[28]=M):M=e[28];let K;e[29]!==N||e[30]!==M?(K=s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[N,M]}),e[29]=N,e[30]=M,e[31]=K):K=e[31];let f;e[32]!==a||e[33]!==r||e[34]!==_||e[35]!==m||e[36]!==c?(f=m&&!r&&s.jsx(pe,{size:"icon",variant:"secondary",onClick:I=>{I.stopPropagation(),c?.(a)},disabled:_,className:"h-10 w-10 rounded-xl bg-blue-50 text-blue-600 shadow-sm transition-all hover:bg-blue-600 hover:text-white",children:_?s.jsx(it,{className:"h-4 w-4 animate-spin"}):s.jsx(xt,{className:"h-4 w-4"})}),e[32]=a,e[33]=r,e[34]=_,e[35]=m,e[36]=c,e[37]=f):f=e[37];let z;e[38]!==a||e[39]!==l||e[40]!==C||e[41]!==i?(z=l&&s.jsxs("div",{className:"flex gap-1.5",onClick:Ut,children:[s.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>C?.(a),className:"h-9 w-9 rounded-xl border border-amber-100/50 bg-amber-50 text-amber-600 hover:bg-amber-100",children:s.jsx(Mt,{className:"h-4 w-4"})}),s.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>i?.(a),className:"h-9 w-9 rounded-xl border border-blue-100/50 bg-blue-50 text-blue-600 hover:bg-blue-100",children:s.jsx(Rt,{className:"h-4 w-4"})})]}),e[38]=a,e[39]=l,e[40]=C,e[41]=i,e[42]=z):z=e[42];let L;e[43]!==f||e[44]!==z?(L=s.jsxs("div",{className:"flex items-center gap-2",children:[f,z]}),e[43]=f,e[44]=z,e[45]=L):L=e[45];let T;e[46]!==K||e[47]!==L?(T=s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[K,L]}),e[46]=K,e[47]=L,e[48]=T):T=e[48];let P;e[49]!==a||e[50]!==l||e[51]!==r||e[52]!==_||e[53]!==m||e[54]!==c||e[55]!==d?(P=r&&s.jsx(Ve.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:s.jsxs("div",{className:Ce("mt-4 space-y-3",l?"":"border-t border-slate-100 pt-3"),children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-500",children:[s.jsx(nt,{className:"h-3.5 w-3.5"}),Xe(a.created_date).format("HH:mm")]}),s.jsx(ot,{variant:"outline",className:"h-5 py-0 text-[9px] font-black tracking-tighter uppercase",children:a.operation_type})]}),s.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-100/50 bg-slate-50 p-3",children:[s.jsx("div",{className:"rounded-lg bg-white p-1.5 shadow-sm",children:a.operation_type==="change"?s.jsx(mt,{className:"h-3.5 w-3.5 text-indigo-500"}):s.jsx(ht,{className:"h-3.5 w-3.5 text-amber-500"})}),s.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-600 uppercase",children:a.service})]}),a.amount&&s.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-blue-100/20 bg-blue-50/50 p-3",children:[s.jsx("span",{className:"text-[9px] font-black tracking-widest text-blue-600/60 uppercase",children:"Estimation"}),s.jsxs("span",{className:"font-mono text-sm font-black text-blue-700",children:[a.amount?.toLocaleString()," ",a.currency_to]})]}),s.jsxs("div",{className:"pt-2",children:[m&&s.jsxs(pe,{onClick:I=>{I.stopPropagation(),c?.(a)},disabled:_,className:"h-11 w-full rounded-xl bg-blue-600 text-sm font-black text-white shadow-lg shadow-blue-600/20",children:["Appeler Ticket",s.jsx(We,{className:"ml-2 h-4 w-4"})]}),l&&s.jsxs(pe,{onClick:I=>{I.stopPropagation(),d?.(a)},className:"h-12 w-full rounded-xl bg-slate-900 text-sm font-black text-white shadow-xl shadow-slate-900/10",children:["Démarrer le service",s.jsx(We,{className:"ml-2 h-4 w-4 text-[#00e2f6]"})]})]})]})}),e[49]=a,e[50]=l,e[51]=r,e[52]=_,e[53]=m,e[54]=c,e[55]=d,e[56]=P):P=e[56];let A;e[57]!==P?(A=s.jsx(qe,{children:P}),e[57]=P,e[58]=A):A=e[58];let D;e[59]!==h||e[60]!==r?(D=h&&!r&&s.jsxs("div",{className:"mt-2 flex items-center justify-center gap-1 text-[9px] font-black tracking-widest text-emerald-600 uppercase",children:[s.jsx(rt,{className:"h-3 w-3"}),"Terminé"]}),e[59]=h,e[60]=r,e[61]=D):D=e[61];let F;e[62]!==l?(F=l&&s.jsx("div",{className:"absolute -right-6 -bottom-6 h-16 w-16 rounded-full bg-blue-500/5 blur-2xl"}),e[62]=l,e[63]=F):F=e[63];let B;return e[64]!==T||e[65]!==A||e[66]!==D||e[67]!==F||e[68]!==b||e[69]!==v?(B=s.jsxs(Ve.div,{layout:!0,initial:x,animate:p,exit:u,onClick:b,className:v,children:[T,A,D,F]}),e[64]=T,e[65]=A,e[66]=D,e[67]=F,e[68]=b,e[69]=v,e[70]=B):B=e[70],B}function Ut(t){return t.stopPropagation()}const Je=me.forwardRef((t,e)=>{const a=Ae.c(9);let c,i;a[0]!==t?({className:c,...i}=t,a[0]=t,a[1]=c,a[2]=i):(c=a[1],i=a[2]);let d;a[3]!==c?(d=Ce("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",c),a[3]=c,a[4]=d):d=a[4];let C;return a[5]!==i||a[6]!==e||a[7]!==d?(C=s.jsx("textarea",{className:d,ref:e,...i}),a[5]=i,a[6]=e,a[7]=d,a[8]=C):C=a[8],C});Je.displayName="Textarea";function zt(t){const e=Ae.c(36),{isOpen:a,onClose:c,clientPhone:i}=t,[d,C]=Qe.useState("");let _;e[0]!==c?(_={mutationFn:It,onSuccess:()=>{Re.success("Demande d'aide envoyée au manager"),C(""),c()},onError:Tt},e[0]=c,e[1]=_):_=e[1];const r=ze(_);let n;e[2]!==i||e[3]!==d||e[4]!==r?(n=$=>{$.preventDefault(),d.trim()&&r.mutate({client_phone:i||"N/A",description:d})},e[2]=i,e[3]=d,e[4]=r,e[5]=n):n=e[5];const l=n;let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-1/2 -translate-y-1/2 bg-amber-500/10 blur-3xl"}),e[6]=h):h=e[6];let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsxs(tt,{className:"mb-6",children:[s.jsx("div",{className:"mb-4 flex h-14 w-14 items-center justify-center rounded-2xl border border-amber-500/30 bg-amber-500/20",children:s.jsx(Et,{className:"h-8 w-8 text-amber-500"})}),s.jsx(st,{className:"text-3xl font-black tracking-tight",children:"Besoin d'aide ?"}),s.jsx(ct,{className:"text-lg font-medium text-slate-400",children:"Expliquez brièvement le problème au manager."})]}),e[7]=m):m=e[7];let g;e[8]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx("label",{className:"ml-1 text-xs font-black tracking-widest text-slate-500 uppercase",children:"Message d'urgence"}),e[8]=g):g=e[8];let y;e[9]===Symbol.for("react.memo_cache_sentinel")?(y=$=>C($.target.value),e[9]=y):y=e[9];let x;e[10]!==d?(x=s.jsxs("div",{className:"space-y-2",children:[g,s.jsx(Je,{value:d,onChange:y,placeholder:"Ex: Problème de validation M-Pesa, client impatient...",className:"min-h-[120px] resize-none rounded-2xl border-white/10 bg-white/5 p-4 text-lg text-white placeholder:text-slate-600 focus:border-amber-500 focus:ring-amber-500"})]}),e[10]=d,e[11]=x):x=e[11];let p;e[12]!==i?(p=i&&s.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-white/5 bg-white/5 p-4",children:[s.jsx(bt,{className:"h-5 w-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black tracking-wider text-slate-500 uppercase",children:"Client associé"}),s.jsx("div",{className:"text-sm font-bold",children:i})]})]}),e[12]=i,e[13]=p):p=e[13];let u;e[14]!==c?(u=s.jsx(pe,{type:"button",variant:"ghost",onClick:c,className:"h-14 flex-1 rounded-2xl border border-white/5 font-bold text-slate-400 hover:bg-white/5",children:"Annuler"}),e[14]=c,e[15]=u):u=e[15];let b;e[16]!==d||e[17]!==r.isPending?(b=r.isPending||!d.trim(),e[16]=d,e[17]=r.isPending,e[18]=b):b=e[18];let j;e[19]!==r.isPending?(j=r.isPending?s.jsx(Ve.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},children:s.jsx(RefreshCw,{className:"h-6 w-6"})}):s.jsxs(s.Fragment,{children:["Envoyer Alerte",s.jsx($t,{className:"ml-2 h-5 w-5"})]}),e[19]=r.isPending,e[20]=j):j=e[20];let v;e[21]!==b||e[22]!==j?(v=s.jsx(pe,{type:"submit",disabled:b,className:"h-14 flex-[2] rounded-2xl bg-amber-500 text-lg font-black text-black shadow-lg shadow-amber-500/20 hover:bg-amber-600",children:j}),e[21]=b,e[22]=j,e[23]=v):v=e[23];let S;e[24]!==v||e[25]!==u?(S=s.jsxs("div",{className:"flex gap-4 pt-2",children:[u,v]}),e[24]=v,e[25]=u,e[26]=S):S=e[26];let w;e[27]!==l||e[28]!==S||e[29]!==x||e[30]!==p?(w=s.jsx(lt,{className:"overflow-hidden rounded-[32px] border-none bg-slate-900 p-0 text-white sm:max-w-[500px]",children:s.jsxs("div",{className:"relative p-8",children:[h,m,s.jsxs("form",{onSubmit:l,className:"space-y-6",children:[x,p,S]})]})}),e[27]=l,e[28]=S,e[29]=x,e[30]=p,e[31]=w):w=e[31];let N;return e[32]!==a||e[33]!==c||e[34]!==w?(N=s.jsx(at,{open:a,onOpenChange:c,children:w}),e[32]=a,e[33]=c,e[34]=w,e[35]=N):N=e[35],N}function Tt(){Re.error("Erreur lors de l'envoi de la demande")}async function It(t){return _e.entities.HelpRequest.create(t)}function Be(t){const e=Ae.c(28),{title:a,icon:c,count:i,color:d,children:C}=t;let _;e[0]!==d?(_=Ce("rounded-2xl border p-2.5 shadow-sm",d),e[0]=d,e[1]=_):_=e[1];let r;e[2]!==c?(r=s.jsx(c,{className:"h-5 w-5"}),e[2]=c,e[3]=r):r=e[3];let n;e[4]!==_||e[5]!==r?(n=s.jsx("div",{className:_,children:r}),e[4]=_,e[5]=r,e[6]=n):n=e[6];let l;e[7]!==a?(l=s.jsx("h3",{className:"text-xl leading-none font-black tracking-tight text-slate-800",children:a}),e[7]=a,e[8]=l):l=e[8];const h=i>1?"Clients":"Client";let m;e[9]!==i||e[10]!==h?(m=s.jsxs("p",{className:"mt-1.5 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[i," ",h]}),e[9]=i,e[10]=h,e[11]=m):m=e[11];let g;e[12]!==l||e[13]!==m?(g=s.jsxs("div",{children:[l,m]}),e[12]=l,e[13]=m,e[14]=g):g=e[14];let y;e[15]!==n||e[16]!==g?(y=s.jsxs("div",{className:"flex items-center gap-3",children:[n,g]}),e[15]=n,e[16]=g,e[17]=y):y=e[17];let x;e[18]!==i?(x=s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-slate-200 bg-slate-100 text-sm font-black text-slate-400 shadow-inner",children:i}),e[18]=i,e[19]=x):x=e[19];let p;e[20]!==y||e[21]!==x?(p=s.jsxs("div",{className:"mb-6 flex items-center justify-between px-1",children:[y,x]}),e[20]=y,e[21]=x,e[22]=p):p=e[22];let u;e[23]!==C?(u=s.jsx("div",{className:"scrollbar-none custom-kanban-scroll flex-1 overflow-y-auto pr-2",children:s.jsx("div",{className:"space-y-4 pb-12",children:C})}),e[23]=C,e[24]=u):u=e[24];let b;return e[25]!==p||e[26]!==u?(b=s.jsxs("div",{className:"flex h-full max-w-[450px] min-w-[320px] flex-1 flex-col",children:[p,u]}),e[25]=p,e[26]=u,e[27]=b):b=e[27],b}const Ze={depot:{label:"Dépôt",icon:pt,color:"text-green-500",action:"Déposer"},retrait:{label:"Retrait",icon:ft,color:"text-blue-500",action:"Retirer"},change:{label:"Change",icon:dt,color:"text-amber-500",action:"Changer"},transfert:{label:"Transfert",icon:We,color:"text-purple-500",action:"Transférer"},paiement:{label:"Paiement",icon:ut,color:"text-pink-500",action:"Payer"}};function Ht(t){const e=Ae.c(133),{client:a,open:c,onClose:i}=t,d=et(),C=a?.amount?String(a.amount):"",_=a?.currency_from||"USD",r=a?.currency_to||"CDF";let n;e[0]!==C||e[1]!==_||e[2]!==r?(n={amount_from:C,amount_given:"",currency_from:_,currency_to:r,exchange_rate:"",commission:"0",notes:""},e[0]=C,e[1]=_,e[2]=r,e[3]=n):n=e[3];const[l,h]=me.useState(n),[m,g]=me.useState(0);let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y={queryKey:["rates"],queryFn:Ot},e[4]=y):y=e[4];const{data:x}=Ee(y);let p;e[5]!==x?(p=x===void 0?[]:x,e[5]=x,e[6]=p):p=e[6];const u=p;let b,j;e[7]!==a?(b=()=>{a&&h(k=>({...k,amount_from:a.amount?String(a.amount):"",currency_from:a.currency_from||"USD",currency_to:a.currency_to||"CDF",amount_given:"",exchange_rate:"",commission:"0"}))},j=[a],e[7]=a,e[8]=b,e[9]=j):(b=e[8],j=e[9]),me.useEffect(b,j);let v;e[10]!==a?.operation_type||e[11]!==l.currency_from||e[12]!==l.currency_to||e[13]!==u?(v=()=>{if(a?.operation_type==="change"){const k=`${l.currency_from}_${l.currency_to}`,le=u.find(O=>O.currency_pair===k||O.currency_from===l.currency_from&&O.currency_to===l.currency_to);le&&h(O=>({...O,exchange_rate:String(le.buy_rate||le.rate)}))}},e[10]=a?.operation_type,e[11]=l.currency_from,e[12]=l.currency_to,e[13]=u,e[14]=v):v=e[14];const S=a?.operation_type;let w;e[15]!==l.currency_from||e[16]!==l.currency_to||e[17]!==u||e[18]!==S?(w=[l.currency_from,l.currency_to,u,S],e[15]=l.currency_from,e[16]=l.currency_to,e[17]=u,e[18]=S,e[19]=w):w=e[19],me.useEffect(v,w);let N;e[20]!==a?.operation_type||e[21]!==l.amount_from||e[22]!==l.amount_given||e[23]!==l.commission||e[24]!==l.exchange_rate?(N=()=>{if(!l.amount_from)return;const k=parseFloat(l.amount_from),le=parseFloat(l.amount_given)||0,O=parseFloat(l.exchange_rate)||1,ge=parseFloat(l.commission)||0;a?.operation_type==="change"?g(k*O-ge):["depot","transfert"].includes(a?.operation_type||"")&&le>0?g(le-k-ge):g(0)},e[20]=a?.operation_type,e[21]=l.amount_from,e[22]=l.amount_given,e[23]=l.commission,e[24]=l.exchange_rate,e[25]=N):N=e[25];const $=a?.operation_type;let E;e[26]!==l.amount_from||e[27]!==l.amount_given||e[28]!==l.commission||e[29]!==l.exchange_rate||e[30]!==$?(E=[l.amount_from,l.amount_given,l.exchange_rate,l.commission,$],e[26]=l.amount_from,e[27]=l.amount_given,e[28]=l.commission,e[29]=l.exchange_rate,e[30]=$,e[31]=E):E=e[31],me.useEffect(N,E);let U;e[32]!==m||e[33]!==a||e[34]!==l.amount_from||e[35]!==l.commission||e[36]!==l.currency_from||e[37]!==l.currency_to||e[38]!==l.exchange_rate||e[39]!==l.notes?(U=async()=>{a&&(await _e.entities.Transaction.create({client_id:a.id,ticket_number:a.ticket_number,operation_type:a.operation_type,service:a.service,currency_from:l.currency_from,currency_to:a.operation_type==="change"?l.currency_to:l.currency_from,amount_from:parseFloat(l.amount_from),amount_to:a.operation_type==="change"?m:parseFloat(l.amount_from),exchange_rate:a.operation_type==="change"?parseFloat(l.exchange_rate):1,commission:parseFloat(l.commission)||0,client_phone:a.phone}),await _e.entities.Client.update(a.id,{status:"completed",completed_at:new Date().toISOString(),notes:l.notes}))},e[32]=m,e[33]=a,e[34]=l.amount_from,e[35]=l.commission,e[36]=l.currency_from,e[37]=l.currency_to,e[38]=l.exchange_rate,e[39]=l.notes,e[40]=U):U=e[40];let R;e[41]!==i||e[42]!==d?(R=()=>{d.invalidateQueries({queryKey:["clients"]}),d.invalidateQueries({queryKey:["transactions"]}),i()},e[41]=i,e[42]=d,e[43]=R):R=e[43];let q;e[44]!==U||e[45]!==R?(q={mutationFn:U,onSuccess:R},e[44]=U,e[45]=R,e[46]=q):q=e[46];const M=ze(q);if(!a)return null;const K=a.operation_type,f=Ze[K]||Ze.depot,z=f.icon;let L;e[47]!==a.ticket_number?(L=s.jsx("span",{className:"text-2xl font-black text-slate-800",children:a.ticket_number}),e[47]=a.ticket_number,e[48]=L):L=e[48];const T=`flex items-center gap-1 rounded-md bg-slate-100 px-2 py-1 text-sm font-medium ${f.color}`;let P;e[49]!==z?(P=s.jsx(z,{className:"h-4 w-4"}),e[49]=z,e[50]=P):P=e[50];let A;e[51]!==f.label||e[52]!==T||e[53]!==P?(A=s.jsxs("span",{className:T,children:[P,f.label]}),e[51]=f.label,e[52]=T,e[53]=P,e[54]=A):A=e[54];let D;e[55]!==L||e[56]!==A?(D=s.jsxs("div",{className:"flex items-center gap-3",children:[L,A]}),e[55]=L,e[56]=A,e[57]=D):D=e[57];let F;e[58]!==a.phone?(F=s.jsx("span",{className:"text-sm font-normal text-slate-500",children:a.phone}),e[58]=a.phone,e[59]=F):F=e[59];let B;e[60]!==D||e[61]!==F?(B=s.jsx(tt,{children:s.jsxs(st,{className:"flex items-center justify-between",children:[D,F]})}),e[60]=D,e[61]=F,e[62]=B):B=e[62];let I;e[63]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx("div",{className:"text-xs font-semibold tracking-wider text-slate-500 uppercase",children:"Service"}),e[63]=I):I=e[63];const Fe=a.service==="bureau"?"Bureau de Change":a.service;let ae;e[64]!==Fe?(ae=s.jsxs("div",{children:[I,s.jsx("div",{className:"text-lg font-bold text-slate-800",children:Fe})]}),e[64]=Fe,e[65]=ae):ae=e[65];let he;e[66]!==a.operation_type||e[67]!==l.currency_from?(he=["depot","transfert","retrait"].includes(a.operation_type)&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs font-semibold tracking-wider text-slate-500 uppercase",children:"Devise"}),s.jsx("div",{className:"text-lg font-bold text-slate-800",children:l.currency_from})]}),e[66]=a.operation_type,e[67]=l.currency_from,e[68]=he):he=e[68];let ne;e[69]!==ae||e[70]!==he?(ne=s.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-slate-50 p-4",children:[ae,he]}),e[69]=ae,e[70]=he,e[71]=ne):ne=e[71];const je=a.operation_type==="retrait"?"Montant à retirer":"Montant de l'opération";let ie;e[72]!==je?(ie=s.jsx(Me,{children:je}),e[72]=je,e[73]=ie):ie=e[73];let re;e[74]!==l?(re=k=>h({...l,amount_from:k.target.value}),e[74]=l,e[75]=re):re=e[75];let oe;e[76]!==l.amount_from||e[77]!==re?(oe=s.jsx(Ue,{type:"number",value:l.amount_from,onChange:re,className:"text-lg font-bold"}),e[76]=l.amount_from,e[77]=re,e[78]=oe):oe=e[78];let Q;e[79]!==a.operation_type||e[80]!==l?(Q=["depot","transfert","retrait"].includes(a.operation_type)&&s.jsxs(Ie,{value:l.currency_from,onValueChange:k=>h({...l,currency_from:k}),children:[s.jsx(He,{className:"w-24",children:s.jsx(Oe,{})}),s.jsxs(Ke,{children:[s.jsx(ye,{value:"USD",children:"USD"}),s.jsx(ye,{value:"CDF",children:"CDF"}),s.jsx(ye,{value:"EUR",children:"EUR"})]})]}),e[79]=a.operation_type,e[80]=l,e[81]=Q):Q=e[81];let xe;e[82]!==oe||e[83]!==Q?(xe=s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[oe,Q]}),e[82]=oe,e[83]=Q,e[84]=xe):xe=e[84];let V;e[85]!==ie||e[86]!==xe?(V=s.jsxs("div",{children:[ie,xe]}),e[85]=ie,e[86]=xe,e[87]=V):V=e[87];let W;e[88]!==m||e[89]!==a.operation_type||e[90]!==l?(W=["depot","transfert"].includes(a.operation_type)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Me,{children:"Montant reçu du client"}),s.jsx(Ue,{type:"number",value:l.amount_given,onChange:k=>h({...l,amount_given:k.target.value}),className:"mt-1",placeholder:"Combien le client a donné ?"})]}),m>0&&s.jsxs("div",{className:"rounded-xl border border-yellow-200 bg-yellow-50 p-4",children:[s.jsxs("div",{className:"mb-1 flex items-center gap-2 text-yellow-700",children:[s.jsx(Nt,{className:"h-4 w-4"}),s.jsx("span",{className:"font-bold",children:"A rendre au client"})]}),s.jsxs("div",{className:"text-2xl font-black text-yellow-600",children:[m.toLocaleString()," ",l.currency_from]})]})]}),e[88]=m,e[89]=a.operation_type,e[90]=l,e[91]=W):W=e[91];let G;e[92]!==m||e[93]!==a.operation_type||e[94]!==l?(G=a.operation_type==="change"&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"Devise Source"}),s.jsxs(Ie,{value:l.currency_from,onValueChange:k=>h({...l,currency_from:k}),children:[s.jsx(He,{className:"mt-1",children:s.jsx(Oe,{})}),s.jsxs(Ke,{children:[s.jsx(ye,{value:"USD",children:"USD"}),s.jsx(ye,{value:"CDF",children:"CDF"}),s.jsx(ye,{value:"EUR",children:"EUR"})]})]})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"Devise Cible"}),s.jsxs(Ie,{value:l.currency_to,onValueChange:k=>h({...l,currency_to:k}),children:[s.jsx(He,{className:"mt-1",children:s.jsx(Oe,{})}),s.jsxs(Ke,{children:[s.jsx(ye,{value:"USD",children:"USD"}),s.jsx(ye,{value:"CDF",children:"CDF"}),s.jsx(ye,{value:"EUR",children:"EUR"})]})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx(Me,{children:"Taux de change"}),s.jsx(Ue,{type:"number",value:l.exchange_rate,onChange:k=>h({...l,exchange_rate:k.target.value}),className:"mt-1"})]}),s.jsxs("div",{className:"col-span-2 rounded-xl border border-amber-200 bg-amber-50 p-4",children:[s.jsx("div",{className:"mb-1 font-bold text-amber-700",children:"Montant à remettre"}),s.jsxs("div",{className:"text-3xl font-black text-amber-600",children:[m.toLocaleString()," ",l.currency_to]})]})]}),e[92]=m,e[93]=a.operation_type,e[94]=l,e[95]=G):G=e[95];let ce;e[96]!==V||e[97]!==W||e[98]!==G?(ce=s.jsxs("div",{className:"space-y-4",children:[V,W,G]}),e[96]=V,e[97]=W,e[98]=G,e[99]=ce):ce=e[99];let be;e[100]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(Me,{children:"Notes (optionnel)"}),e[100]=be):be=e[100];let J;e[101]!==l?(J=k=>h({...l,notes:k.target.value}),e[101]=l,e[102]=J):J=e[102];let X;e[103]!==l.notes||e[104]!==J?(X=s.jsxs("div",{children:[be,s.jsx(Je,{value:l.notes,onChange:J,className:"mt-1",placeholder:"Remarques..."})]}),e[103]=l.notes,e[104]=J,e[105]=X):X=e[105];let ve;e[106]!==i?(ve=s.jsx(pe,{variant:"outline",onClick:i,className:"flex-1",children:"Annuler"}),e[106]=i,e[107]=ve):ve=e[107];let Y;e[108]!==M?(Y=()=>M.mutate(),e[108]=M,e[109]=Y):Y=e[109];const ue=M.isPending||!l.amount_from,fe=`flex-1 text-white ${a.operation_type==="depot"||a.operation_type==="transfert"?"bg-green-600 hover:bg-green-700":a.operation_type==="retrait"?"bg-blue-600 hover:bg-blue-700":"bg-amber-500 hover:bg-amber-600"}`;let Z;e[110]!==M.isPending?(Z=M.isPending?s.jsx(gt,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(kt,{className:"mr-2 h-4 w-4"}),e[110]=M.isPending,e[111]=Z):Z=e[111];let we;e[112]!==f.label||e[113]!==Y||e[114]!==ue||e[115]!==fe||e[116]!==Z?(we=s.jsxs(pe,{onClick:Y,disabled:ue,className:fe,children:[Z,"Valider ",f.label]}),e[112]=f.label,e[113]=Y,e[114]=ue,e[115]=fe,e[116]=Z,e[117]=we):we=e[117];let ee;e[118]!==ve||e[119]!==we?(ee=s.jsxs("div",{className:"flex gap-3 pt-4",children:[ve,we]}),e[118]=ve,e[119]=we,e[120]=ee):ee=e[120];let te;e[121]!==ne||e[122]!==ce||e[123]!==X||e[124]!==ee?(te=s.jsxs("div",{className:"space-y-6 py-4",children:[ne,ce,X,ee]}),e[121]=ne,e[122]=ce,e[123]=X,e[124]=ee,e[125]=te):te=e[125];let se;e[126]!==B||e[127]!==te?(se=s.jsxs(lt,{className:"max-w-lg",children:[B,te]}),e[126]=B,e[127]=te,e[128]=se):se=e[128];let de;return e[129]!==i||e[130]!==c||e[131]!==se?(de=s.jsx(at,{open:c,onOpenChange:i,children:se}),e[129]=i,e[130]=c,e[131]=se,e[132]=de):de=e[132],de}function Ot(){return _e.entities.ExchangeRate.filter({is_active:!0})}function gs(){const t=Ae.c(112),[e,a]=me.useState(null),[c,i]=me.useState(!1),[d,C]=me.useState(!1),[_,r]=me.useState(null),[n,l]=me.useState(""),h=et();let m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m={queryKey:["clients","waiting"],queryFn:Jt,refetchInterval:5e3},t[0]=m):m=t[0];const{data:g}=Ee(m);let y;t[1]!==g?(y=g===void 0?[]:g,t[1]=g,t[2]=y):y=t[2];const x=y;let p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p={queryKey:["clients","called"],queryFn:Gt,refetchInterval:5e3},t[3]=p):p=t[3];const{data:u}=Ee(p);let b;t[4]!==u?(b=u===void 0?[]:u,t[4]=u,t[5]=b):b=t[5];const j=b;let v;t[6]===Symbol.for("react.memo_cache_sentinel")?(v={queryKey:["clients","completed"],queryFn:Wt,refetchInterval:1e4},t[6]=v):v=t[6];const{data:S}=Ee(v);let w;t[7]!==S?(w=S===void 0?[]:S,t[7]=S,t[8]=w):w=t[8];const N=w;let $;if(t[9]!==n||t[10]!==x){let o;t[12]!==n?(o=H=>H.ticket_number.toLowerCase().includes(n.toLowerCase())||H.phone.includes(n),t[12]=n,t[13]=o):o=t[13],$=x.filter(o),t[9]=n,t[10]=x,t[11]=$}else $=t[11];const E=$;let U;if(t[14]!==j||t[15]!==n){let o;t[17]!==n?(o=H=>H.ticket_number.toLowerCase().includes(n.toLowerCase())||H.phone.includes(n),t[17]=n,t[18]=o):o=t[18],U=j.filter(o),t[14]=j,t[15]=n,t[16]=U}else U=t[16];const R=U;let q;if(t[19]!==N||t[20]!==n){let o;t[22]!==n?(o=H=>H.ticket_number.toLowerCase().includes(n.toLowerCase())||H.phone.includes(n),t[22]=n,t[23]=o):o=t[23],q=N.filter(o),t[19]=N,t[20]=n,t[21]=q}else q=t[21];const M=q;let K;t[24]!==h?(K={mutationFn:Vt,onSuccess:o=>{h.invalidateQueries({queryKey:["clients"]}),Re.success(`Client ${o.ticket_number} appelé`)}},t[24]=h,t[25]=K):K=t[25];const f=ze(K);let z;t[26]===Symbol.for("react.memo_cache_sentinel")?(z={mutationFn:Qt,onSuccess:Bt},t[26]=z):z=t[26];const L=ze(z);let T;t[27]!==f?(T=o=>f.mutate(o),t[27]=f,t[28]=T):T=t[28];const P=T;let A;t[29]!==L?(A=o=>L.mutate(o),t[29]=L,t[30]=A):A=t[30];const D=A;let F;t[31]===Symbol.for("react.memo_cache_sentinel")?(F=o=>{a(o),i(!0)},t[31]=F):F=t[31];const B=F;let I;t[32]===Symbol.for("react.memo_cache_sentinel")?(I=o=>{r(o),C(!0)},t[32]=I):I=t[32];const Fe=I;let ae;t[33]!==h?(ae=()=>{h.invalidateQueries({queryKey:["clients"]}),Re.info("Données actualisées")},t[33]=h,t[34]=ae):ae=t[34];const he=ae;let ne,je;t[35]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx("div",{className:"rounded-2xl bg-blue-600 p-3 shadow-lg shadow-blue-500/20",children:s.jsx(yt,{className:"h-6 w-6 text-white"})}),je=s.jsx("h1",{className:"text-2xl leading-none font-black tracking-tight text-slate-900",children:"Gestion"}),t[35]=ne,t[36]=je):(ne=t[35],je=t[36]);let ie;t[37]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsxs("div",{className:"flex items-center gap-4",children:[ne,s.jsxs("div",{children:[je,s.jsx("p",{className:"mt-1.5 flex items-center gap-1.5 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:s.jsx("span",{className:"pulse-soft h-2 w-2 rounded-full bg-emerald-500"})})]})]}),t[37]=ie):ie=t[37];let re;t[38]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(vt,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-slate-400 transition-colors group-focus-within:text-blue-500"}),t[38]=re):re=t[38];let oe;t[39]===Symbol.for("react.memo_cache_sentinel")?(oe=o=>l(o.target.value),t[39]=oe):oe=t[39];let Q;t[40]!==n?(Q=s.jsx("div",{className:"mx-10 max-w-sm flex-1",children:s.jsxs("div",{className:"group relative",children:[re,s.jsx(Ue,{placeholder:"Rechercher ticket...",value:n,onChange:oe,className:"h-11 w-full rounded-2xl border-transparent bg-slate-50 pl-11 font-medium text-slate-700 transition-all focus:border-blue-500 focus:bg-white"})]})}),t[40]=n,t[41]=Q):Q=t[41];const xe=f.isPending&&"animate-spin";let V;t[42]!==xe?(V=Ce("mr-2 h-4 w-4",xe),t[42]=xe,t[43]=V):V=t[43];let W;t[44]!==V?(W=s.jsx(it,{className:V}),t[44]=V,t[45]=W):W=t[45];let G;t[46]!==he||t[47]!==W?(G=s.jsxs(pe,{variant:"outline",onClick:he,className:"h-12 rounded-2xl border-slate-200 bg-white px-6 font-bold shadow-sm transition-all hover:border-blue-500 hover:text-blue-600",children:[W,"Actualiser"]}),t[46]=he,t[47]=W,t[48]=G):G=t[48];let ce;t[49]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx("div",{className:"h-10 w-[1px] bg-slate-200"}),t[49]=ce):ce=t[49];let be;t[50]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 bg-slate-100 p-1.5 pr-4 shadow-inner",children:[s.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl border border-slate-100 bg-white text-slate-600 shadow-sm",children:s.jsx(Pt,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black tracking-wider text-slate-400 uppercase",children:"Caissier"}),s.jsx("div",{className:"text-xs font-bold text-slate-700",children:"Havifin Team"})]})]}),t[50]=be):be=t[50];let J;t[51]!==G?(J=s.jsxs("div",{className:"flex items-center gap-4",children:[G,ce,be]}),t[51]=G,t[52]=J):J=t[52];let X;t[53]!==Q||t[54]!==J?(X=s.jsxs("header",{className:"z-20 flex h-20 flex-shrink-0 items-center justify-between border-b border-slate-200 bg-white px-10 shadow-[0_1px_3px_rgba(0,0,0,0.02)]",children:[ie,Q,J]}),t[53]=Q,t[54]=J,t[55]=X):X=t[55];const ve=x.length;let Y;if(t[56]!==f.isPending||t[57]!==f.variables?.id||t[58]!==E||t[59]!==P){let o;t[61]!==f.isPending||t[62]!==f.variables?.id||t[63]!==P?(o=H=>s.jsx(Ge,{client:H,onCall:P,isProcessing:f.isPending&&f.variables?.id===H.id},H.id),t[61]=f.isPending,t[62]=f.variables?.id,t[63]=P,t[64]=o):o=t[64],Y=E.map(o),t[56]=f.isPending,t[57]=f.variables?.id,t[58]=E,t[59]=P,t[60]=Y}else Y=t[60];let ue;t[65]!==Y?(ue=s.jsx(qe,{mode:"popLayout",children:Y}),t[65]=Y,t[66]=ue):ue=t[66];let fe;t[67]!==x.length?(fe=x.length===0&&s.jsxs("div",{className:"mt-12 text-center opacity-30",children:[s.jsx(jt,{className:"mx-auto mb-4 h-16 w-16"}),s.jsx("p",{className:"text-sm font-bold tracking-widest uppercase",children:"Aucun client"})]}),t[67]=x.length,t[68]=fe):fe=t[68];let Z;t[69]!==ue||t[70]!==fe||t[71]!==x.length?(Z=s.jsxs(Be,{title:"Clients en Attente",icon:nt,count:ve,color:"bg-slate-900 text-white border-slate-900",children:[ue,fe]}),t[69]=ue,t[70]=fe,t[71]=x.length,t[72]=Z):Z=t[72];const we=j.length;let ee;if(t[73]!==R||t[74]!==D){let o;t[76]!==D?(o=H=>s.jsx(Ge,{client:H,onRecall:D,onProcess:B,onHelp:Fe},H.id),t[76]=D,t[77]=o):o=t[77],ee=R.map(o),t[73]=R,t[74]=D,t[75]=ee}else ee=t[75];let te;t[78]!==ee?(te=s.jsx(qe,{mode:"popLayout",children:ee}),t[78]=ee,t[79]=te):te=t[79];let se;t[80]!==j.length?(se=j.length===0&&s.jsxs("div",{className:"mt-12 text-center opacity-20",children:[s.jsx(Ye,{className:"mx-auto mb-4 h-16 w-16"}),s.jsx("p",{className:"text-sm font-bold tracking-widest uppercase",children:"Prenez un ticket"})]}),t[80]=j.length,t[81]=se):se=t[81];let de;t[82]!==j.length||t[83]!==te||t[84]!==se?(de=s.jsxs(Be,{title:"En Cours de Service",icon:Ye,count:we,color:"bg-blue-600 text-white border-blue-600",children:[te,se]}),t[82]=j.length,t[83]=te,t[84]=se,t[85]=de):de=t[85];const k=N.length;let le;t[86]!==M?(le=M.map(Kt),t[86]=M,t[87]=le):le=t[87];let O;t[88]!==le?(O=s.jsx(qe,{mode:"popLayout",children:le}),t[88]=le,t[89]=O):O=t[89];let ge;t[90]!==N.length||t[91]!==O?(ge=s.jsx(Be,{title:"Derniers Traités",icon:rt,count:k,color:"bg-emerald-500 text-white border-emerald-500 shadow-lg shadow-emerald-500/20",children:O}),t[90]=N.length,t[91]=O,t[92]=ge):ge=t[92];let ke;t[93]!==Z||t[94]!==de||t[95]!==ge?(ke=s.jsx("main",{className:"flex-1 overflow-x-auto overflow-y-hidden bg-[url('/grid.svg')] bg-[length:40px_40px] bg-fixed px-10 py-8",children:s.jsxs("div",{className:"flex h-full min-w-max gap-10 pb-4",children:[Z,de,ge]})}),t[93]=Z,t[94]=de,t[95]=ge,t[96]=ke):ke=t[96];let Se;t[97]!==h?(Se=()=>{i(!1),a(null),h.invalidateQueries({queryKey:["clients"]})},t[97]=h,t[98]=Se):Se=t[98];let Pe;t[99]!==c||t[100]!==e||t[101]!==Se?(Pe=s.jsx(Ht,{client:e,open:c,onClose:Se}),t[99]=c,t[100]=e,t[101]=Se,t[102]=Pe):Pe=t[102];let Le;t[103]===Symbol.for("react.memo_cache_sentinel")?(Le=()=>{C(!1),r(null)},t[103]=Le):Le=t[103];const Te=_?.phone;let De;t[104]!==d||t[105]!==Te?(De=s.jsx(zt,{isOpen:d,onClose:Le,clientPhone:Te}),t[104]=d,t[105]=Te,t[106]=De):De=t[106];let $e;return t[107]!==X||t[108]!==ke||t[109]!==Pe||t[110]!==De?($e=s.jsx(_t,{currentPageName:"Tableau de Bord Caissier",children:s.jsxs("div",{className:"flex flex-col overflow-hidden bg-slate-50",children:[X,ke,Pe,De]})}),t[107]=X,t[108]=ke,t[109]=Pe,t[110]=De,t[111]=$e):$e=t[111],$e}function Kt(t){return s.jsx(Ge,{client:t},t.id)}function Bt(){Re.info("Rappel envoyé à l'affichage")}async function Qt(t){await _e.entities.Client.update(t.id,{called_at:new Date().toISOString()})}async function Vt(t){return await _e.entities.Client.update(t.id,{status:"called",called_at:new Date().toISOString(),counter_number:1}),t}function Wt(){return _e.entities.Client.filter({status:"completed"},"-completed_at",20)}function Gt(){return _e.entities.Client.filter({status:"called"},"-called_at")}function Jt(){return _e.entities.Client.filter({status:"waiting"},"created_date")}export{gs as default};
