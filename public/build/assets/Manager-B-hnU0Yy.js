import{c as Me,u as We,r as O,j as t,R as Tt,a as bt,H as Pt}from"./app-iXgwWwEP.js";import{u as Fe,A as Qe,b as G}from"./base44Client-CMGRtuZ5.js";import{t as B,B as $}from"./index-Dl445f_t.js";import{L as xe,I as pe}from"./label-CUOTP-Av.js";import{S as st,a as at,b as lt,c as it,d as ke}from"./select-BCxwzNl1.js";import{c as re,b as H,m as be,a as Oe}from"./createLucideIcon-tt_XANJS.js";import{u as ue}from"./check-_efk342n.js";import{L as Ge,R as Je,a as Nt,C as Xe,A as It}from"./refresh-cw-JYAqlydQ.js";import{B as ht}from"./building-2-xDTGTs0o.js";import{P as Be}from"./plus-RvYa2yAe.js";import{T as rt}from"./trash-2-5bAtSlRB.js";import{a as pt,X as ot,S as Dt,U as qt,L as wt,A as zt}from"./app-main-CZ00S3js.js";import{G as yt,C as Ht}from"./globe-Dat6jaXg.js";import{S as Yt,a as gt}from"./smartphone-1hsh2XsO.js";import{L as At}from"./loader-circle-B0qZqCqA.js";import{a as kt,T as Ke,A as nt,C as $t}from"./trending-up-CxDjksNZ.js";import{C as Rt,a as Vt}from"./card-pmuhBG8w.js";import{h as J}from"./moment-B-YVwB4U.js";import{U as ct}from"./users-Cd920HLA.js";import{C as Bt}from"./circle-alert-Dm_MVXhI.js";import{E as Et}from"./ManagerModal-39pQMy-t.js";import{T as ut,a as $e,S as Kt,b as Ot,c as Ye,d as Qt,e as Gt,f as Jt}from"./ShopManager-BYxWVOtF.js";import{B as Ve}from"./badge-BNI-Tc8t.js";import{D as Xt,a as Wt,c as Zt,d as es}from"./index-DtmtTvlc.js";/* empty css            */const ts=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],_t=re("Activity",ts);const ss=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],as=re("ArrowDownLeft",ss);const ls=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],is=re("ArrowUpRight",ls);const rs=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jt=re("Calendar",rs);const ns=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],St=re("ChartPie",ns);const cs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],vt=re("CircleStop",cs);const os=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ds=re("Download",os);const xs=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],ms=re("Filter",xs);const hs=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Ut=re("Hash",hs);const us=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ps=re("LayoutGrid",us);const gs=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],fs=re("List",gs);const bs=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],js=re("LockOpen",bs);const vs=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ns=re("Pencil",vs);const ws=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],dt=re("Play",ws);const ys=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Lt=re("Save",ys);const ks=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ft=re("Settings",ks);const _s=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ss=re("Shield",_s);function Cs(){const e=Me.c(50),s=We(),[l,n]=O.useState(!1),[c,i]=O.useState(null),[d,m]=O.useState(null),[o,v]=O.useState("all");let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={name:"",type:"bank",code:"",logo:null},e[0]=h):h=e[0];const[a,u]=O.useState(h),[N,S]=O.useState(""),[b,C]=O.useState("depot");let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y={queryKey:["institutions"],queryFn:Is},e[1]=y):y=e[1];const{data:D,isLoading:f}=Fe(y),p=D===void 0?[]:D;let q;e[2]!==o?(q=r=>o==="all"?!0:r.type===o,e[2]=o,e[3]=q):q=e[3];const M=p.filter(q),j=ue({mutationFn:Ps,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),L(),B.success("Institution ajoutée avec succès")},onError:Ts}),k=ue({mutationFn:Ls,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),L(),B.success("Institution mise à jour avec succès")},onError:Us});let g;e[4]!==s?(g={mutationFn:Es,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),B.success("Configuration mise à jour")}},e[4]=s,e[5]=g):g=e[5];const _=ue(g),L=()=>{u({name:"",type:"bank",code:"",logo:null}),i(null),n(!1)};let E;e[6]===Symbol.for("react.memo_cache_sentinel")?(E=r=>{u({name:r.name,type:r.type,code:r.code,logo:null}),i(r.id),n(!0)},e[6]=E):E=e[6];const R=E;let A;e[7]!==s?(A={mutationFn:Rs,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),B.success("Institution supprimée")}},e[7]=s,e[8]=A):A=e[8];const z=ue(A);let T;e[9]!==s?(T={mutationFn:$s,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),B.success("Statut mis à jour")}},e[9]=s,e[10]=T):T=e[10];const x=ue(T);let F;e[11]!==s?(F={mutationFn:As,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),S(""),C("depot"),B.success("Champ ajouté")},onError:qs},e[11]=s,e[12]=F):F=e[12];const U=ue(F);let I;e[13]!==s?(I={mutationFn:Ds,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),B.success("Champ supprimé")}},e[13]=s,e[14]=I):I=e[14];const P=ue(I);let Y;e[15]!==s?(Y={mutationFn:Fs,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),B.success("Infos agent mises à jour")}},e[15]=s,e[16]=Y):Y=e[16];const K=ue(Y);let X,W;e[17]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600 shadow-lg shadow-indigo-600/20",children:t.jsx(ht,{className:"h-5 w-5 text-white"})}),W=t.jsx("h4",{className:"text-sm font-black tracking-tight text-slate-800 uppercase",children:"Partenaires & Institutions"}),e[17]=X,e[18]=W):(X=e[17],W=e[18]);let ne;e[19]!==l?(ne=()=>n(!l),e[19]=l,e[20]=ne):ne=e[20];const se=l?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 hover:bg-indigo-700";let Q;e[21]!==se?(Q=H("h-11 rounded-xl px-6 text-xs font-black tracking-widest uppercase transition-all",se),e[21]=se,e[22]=Q):Q=e[22];let me;e[23]!==l?(me=l?t.jsx(ot,{className:"mr-2 h-4 w-4"}):t.jsx(Be,{className:"mr-2 h-4 w-4"}),e[23]=l,e[24]=me):me=e[24];const ae=l?"Fermer":"Nouvelle Institution";let ce;e[25]!==ne||e[26]!==Q||e[27]!==me||e[28]!==ae?(ce=t.jsxs($,{onClick:ne,className:Q,children:[me,ae]}),e[25]=ne,e[26]=Q,e[27]=me,e[28]=ae,e[29]=ce):ce=e[29];let le;e[30]!==j||e[31]!==c||e[32]!==a||e[33]!==L||e[34]!==l||e[35]!==k?(le=l&&t.jsx(be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsxs("div",{className:"relative rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-64 w-64 bg-indigo-500/10 blur-[100px]"}),t.jsxs("h5",{className:"mb-8 flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(Ge,{className:"h-6 w-6 text-indigo-400"}),c?"Modifier l'institution":"Configurer un nouveau partenaire"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Nom de l'institution"}),t.jsx(pe,{placeholder:"ex: Bank of Africa",value:a.name,onChange:r=>u({...a,name:r.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Type de service"}),t.jsxs(st,{value:a.type,onValueChange:r=>u({...a,type:r}),children:[t.jsx(at,{className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500",children:t.jsx(lt,{})}),t.jsxs(it,{className:"border-slate-800 bg-slate-900 text-white",children:[t.jsx(ke,{value:"bank",className:"focus:bg-slate-800",children:"Banque Classique"}),t.jsx(ke,{value:"mobile_money",className:"focus:bg-slate-800",children:"Mobile Money"}),t.jsx(ke,{value:"payment",className:"focus:bg-slate-800",children:"Service de Paiement"}),t.jsx(ke,{value:"other",className:"focus:bg-slate-800",children:"Autre Service (MoneyGram, etc.)"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Code Identifiant"}),t.jsx(pe,{placeholder:"ex: BOA-CD",value:a.code,onChange:r=>u({...a,code:r.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 font-mono font-black text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),t.jsxs("div",{className:"mt-6 space-y-2",children:[t.jsx(xe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Logo de l'institution (Optionnel)"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"relative flex h-16 w-16 items-center justify-center overflow-hidden rounded-xl border border-white/10 bg-white/5",children:a.logo?t.jsx("img",{src:URL.createObjectURL(a.logo),alt:"Preview",className:"h-full w-full object-cover"}):t.jsx(ht,{className:"h-6 w-6 text-white/20"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx(pe,{type:"file",accept:"image/*",onChange:r=>{r.target.files&&r.target.files[0]&&u({...a,logo:r.target.files[0]})},className:"h-12 w-full cursor-pointer rounded-xl border-white/10 bg-white/5 pt-2 text-sm font-bold text-white file:mr-4 file:rounded-lg file:border-0 file:bg-indigo-600 file:px-4 file:py-1 file:text-xs file:font-bold file:text-white hover:file:bg-indigo-700"}),t.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Format recommandé: PNG ou JPG, fond transparent. Max 2MB."})]})]})]}),t.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[t.jsx($,{variant:"ghost",onClick:L,className:"h-12 rounded-xl px-8 text-xs font-black tracking-widest text-slate-400 uppercase hover:bg-white/5 hover:text-white",children:"Annuler"}),t.jsx($,{onClick:()=>{c?k.mutate({id:c,data:a}):j.mutate(a)},disabled:j.isPending||k.isPending||!a.name||!a.code,className:"h-12 rounded-xl bg-white px-10 text-xs font-black tracking-widest text-slate-900 uppercase transition-all hover:bg-slate-100",children:j.isPending?t.jsx(Je,{className:"h-4 w-4 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Lt,{className:"mr-2 h-4 w-4"}),c?"Mettre à jour":"Enregistrer Partenaire"]})})]})]})}),e[30]=j,e[31]=c,e[32]=a,e[33]=L,e[34]=l,e[35]=k,e[36]=le):le=e[36];let oe;e[37]!==le?(oe=t.jsx(Qe,{children:le}),e[37]=le,e[38]=oe):oe=e[38];let de;e[39]===Symbol.for("react.memo_cache_sentinel")?(de=[{id:"all",label:"Tout"},{id:"bank",label:"Banques"},{id:"mobile_money",label:"Mobile Money"},{id:"payment",label:"Paiement"},{id:"other",label:"Autres"}],e[39]=de):de=e[39];let ge;e[40]!==o?(ge=t.jsx("div",{className:"flex gap-2",children:de.map(r=>t.jsx("button",{onClick:()=>v(r.id),className:H("rounded-xl px-4 py-2 text-xs font-black tracking-widest uppercase transition-all",o===r.id?"bg-slate-900 text-white shadow-lg shadow-slate-900/10":"bg-white text-slate-400 hover:bg-slate-50 hover:text-slate-600"),children:r.label},r.id))}),e[40]=o,e[41]=ge):ge=e[41];let Z;e[42]!==z||e[43]!==x?(Z=r=>t.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative overflow-hidden rounded-[2rem] border-2 border-slate-50 bg-white p-6 shadow-xl shadow-slate-200/50 transition-all duration-300 hover:border-indigo-100",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("div",{className:H("flex h-14 w-14 items-center justify-center rounded-2xl shadow-lg transition-transform group-hover:rotate-6",r.type==="bank"?"bg-slate-900 text-white shadow-slate-900/10":r.type==="payment"?"bg-indigo-500 text-white shadow-indigo-500/10":r.type==="other"?"bg-amber-500 text-white shadow-amber-500/10":"bg-emerald-500 text-white shadow-emerald-500/10"),children:r.logo_url?t.jsx("img",{src:r.logo_url,alt:r.name,className:"h-9 w-9 object-contain"}):r.type==="bank"?t.jsx(ht,{className:"h-7 w-7"}):r.type==="payment"?t.jsx(yt,{className:"h-7 w-7"}):r.type==="other"?t.jsx(yt,{className:"h-7 w-7"}):t.jsx(Yt,{className:"h-7 w-7"})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx($,{variant:"ghost",size:"icon",onClick:()=>x.mutate({id:r.id,is_active:!r.is_active}),className:H("h-10 w-10 rounded-xl transition-all",r.is_active?"bg-emerald-50 text-emerald-500":"bg-slate-50 text-slate-300"),children:t.jsx(pt,{className:"h-5 w-5"})}),t.jsx($,{variant:"ghost",size:"icon",onClick:()=>z.mutate(r.id),className:"h-10 w-10 rounded-xl text-slate-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500",children:t.jsx(rt,{className:"h-5 w-5"})}),t.jsx($,{variant:"ghost",size:"icon",onClick:()=>m(r.id),className:"h-10 w-10 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-emerald-50 hover:text-emerald-600",children:t.jsx(ft,{className:"h-5 w-5"})}),t.jsx($,{variant:"ghost",size:"icon",onClick:()=>R(r),className:"h-10 w-10 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-indigo-50 hover:text-indigo-600",children:t.jsx(Ns,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-lg font-black tracking-tight text-slate-900",children:r.name}),!r.is_active&&t.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[8px] font-black tracking-widest text-slate-400 uppercase",children:"Inactif"}),r.settings?.required_fields&&r.settings.required_fields.length>0&&t.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[8px] font-black tracking-widest text-emerald-600 uppercase",children:[t.jsx(Nt,{className:"h-2 w-2"}),"Configuré"]})]}),t.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[t.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:r.code}),t.jsx("span",{className:"h-1 w-1 rounded-full bg-slate-200"}),t.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase",children:r.type==="bank"?"Banque":r.type==="payment"?"Service de Paiement":r.type==="other"?"Autre Service":"Mobile Money"})]})]}),t.jsx("div",{className:H("absolute -right-6 -bottom-6 h-24 w-24 rounded-full opacity-[0.03] transition-transform group-hover:scale-150",r.type==="bank"?"bg-slate-900":"bg-emerald-500")})]},r.id),e[42]=z,e[43]=x,e[44]=Z):Z=e[44];let he;e[45]!==f?(he=f&&t.jsx("div",{className:"flex justify-center p-20",children:t.jsx(At,{className:"h-10 w-10 animate-spin text-indigo-600"})}),e[45]=f,e[46]=he):he=e[46];const je=Qe,ie=d&&t.jsx(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 p-4 backdrop-blur-sm",onClick:()=>m(null),children:t.jsxs(be.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"w-full max-w-md overflow-hidden rounded-[2.5rem] bg-white shadow-2xl",onClick:Ms,children:[t.jsxs("div",{className:"relative bg-slate-900 p-8 text-white",children:[t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 bg-indigo-500/10 blur-3xl"}),t.jsxs("h3",{className:"flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(ft,{className:"h-6 w-6 text-indigo-400"}),"Champs Requis"]}),t.jsxs("p",{className:"mt-2 text-xs font-medium text-slate-400",children:["Configurez les informations obligatoires pour"," ",t.jsx("span",{className:"text-white",children:p.find(r=>r.id===d)?.name})]})]}),t.jsxs("div",{className:"p-8",children:[t.jsx("div",{className:"space-y-3",children:[{id:"account_number",label:"Numéro de Compte"},{id:"beneficiary",label:"Nom du Bénéficiaire"},{id:"beneficiary_number",label:"Numéro du Bénéficiaire"},{id:"reason",label:"Motif / Raison"}].map(r=>{const V=p.find(_e=>_e.id===d),te=(V?.settings?.required_fields||[]).includes(r.id);return t.jsxs("button",{onClick:()=>_.mutate({institution:V,field:r.id}),className:H("flex w-full items-center justify-between rounded-2xl border-2 p-5 transition-all",te?"border-indigo-100 bg-indigo-50/50 text-indigo-900 shadow-sm":"border-slate-100 bg-slate-50/50 text-slate-500 hover:border-slate-200"),children:[t.jsx("span",{className:"text-sm font-black tracking-tight",children:r.label}),te?t.jsx(Nt,{className:"h-6 w-6 text-indigo-600"}):t.jsx("div",{className:"h-6 w-6 rounded-full border-2 border-slate-200 bg-white"})]},r.id)})}),t.jsxs("div",{className:"mt-8 space-y-4",children:[t.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[t.jsx(Be,{className:"h-3 w-3"}),"Ajouter un champ personnalisé"]}),t.jsx("div",{className:"flex flex-col gap-2",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(pe,{placeholder:"ex: Code Agence...",value:N,onChange:r=>S(r.target.value),className:"h-12 rounded-xl border-slate-200"}),t.jsxs(st,{value:b,onValueChange:r=>C(r),children:[t.jsx(at,{className:"h-12 w-32 rounded-xl border-slate-200",children:t.jsx(lt,{})}),t.jsxs(it,{className:"bg-white",children:[t.jsx(ke,{value:"depot",children:"Dépôt"}),t.jsx(ke,{value:"retrait",children:"Retrait"}),t.jsx(ke,{value:"both",children:"Les deux"})]})]}),t.jsx($,{onClick:()=>{if(N.trim()){const r=p.find(V=>V.id===d);U.mutate({institution:r,label:N,operation_type:b})}},disabled:!N.trim()||U.isPending,className:"h-12 rounded-xl bg-indigo-600 px-4 text-white hover:bg-indigo-700",children:U.isPending?t.jsx(Je,{className:"h-4 w-4 animate-spin"}):t.jsx(Be,{className:"h-4 w-4"})})]})}),t.jsx("div",{className:"space-y-2",children:(p.find(r=>r.id===d)?.settings?.custom_fields||[]).map(r=>t.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-100 bg-slate-50 p-3",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-bold text-slate-700",children:r.label}),t.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:r.operation_type==="depot"?"Dépôt":r.operation_type==="retrait"?"Retrait":"Les deux"})]}),t.jsx($,{variant:"ghost",size:"icon",onClick:()=>{const V=p.find(te=>te.id===d);P.mutate({institution:V,fieldId:r.id})},className:"h-8 w-8 text-slate-400 hover:text-red-500",children:t.jsx(rt,{className:"h-4 w-4"})})]},r.id))})]}),t.jsxs("div",{className:"mt-8 space-y-4 border-t border-slate-100 pt-6",children:[t.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[t.jsx(pt,{className:"h-3 w-3"}),"Infos Agent (Retrait)"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(xe,{className:"ml-1 text-[10px] font-bold text-slate-500",children:"Nom de l'Agent"}),t.jsx(pe,{placeholder:"ex: HAVIFIN BOUTIQUE",defaultValue:p.find(r=>r.id===d)?.settings?.withdrawal_agent_name||"",onBlur:r=>{const V=p.find(te=>te.id===d);V&&r.target.value!==(V.settings?.withdrawal_agent_name||"")&&K.mutate({institution:V,name:r.target.value,number:V.settings?.withdrawal_agent_number||""})},className:"h-10 rounded-xl border-slate-200 text-sm"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx(xe,{className:"ml-1 text-[10px] font-bold text-slate-500",children:"Numéro de l'Agent"}),t.jsx(pe,{placeholder:"ex: 123456",defaultValue:p.find(r=>r.id===d)?.settings?.withdrawal_agent_number||"",onBlur:r=>{const V=p.find(te=>te.id===d);V&&r.target.value!==(V.settings?.withdrawal_agent_number||"")&&K.mutate({institution:V,name:V.settings?.withdrawal_agent_name||"",number:r.target.value})},className:"h-10 rounded-xl border-slate-200 text-sm"})]})]})]}),t.jsx($,{onClick:()=>m(null),className:"mt-8 h-14 w-full rounded-2xl bg-slate-900 text-sm font-black tracking-widest text-white uppercase transition-all hover:bg-slate-800",children:"Terminer"})]})]})});let ee;return e[47]!==je||e[48]!==ie?(ee=t.jsx(je,{children:ie}),e[47]=je,e[48]=ie,e[49]=ee):ee=e[49],t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-[1.5rem] border border-slate-100 bg-slate-100/50 p-4",children:[t.jsxs("div",{className:"ml-2 flex items-center gap-3",children:[X,t.jsxs("div",{children:[W,t.jsxs("p",{className:"text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:[p.length," Entités Enregistrées"]})]})]}),ce]}),oe,ge,t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:[M.map(Z),p.length===0&&!f&&t.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-slate-200 bg-slate-50/50 py-20",children:[t.jsx(Ge,{className:"mb-4 h-16 w-16 text-slate-200"}),t.jsx("p",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Aucune institution configurée"})]})]}),he,ee]})}function Ms(e){return e.stopPropagation()}function Fs(e){const{institution:s,name:l,number:n}=e,c=s.settings||{required_fields:[]};return Oe.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...c,withdrawal_agent_name:l,withdrawal_agent_number:n}})}function Ds(e){const{institution:s,fieldId:l}=e,n=s.settings||{required_fields:[]},i=(n.custom_fields||[]).filter(d=>d.id!==l);return Oe.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...n,custom_fields:i}})}function qs(e){return B.error(typeof e=="string"?e:"Erreur lors de l’ajout")}function As(e){const{institution:s,label:l,operation_type:n}=e,c=s.settings||{required_fields:[]},i=c.custom_fields||[],d=l.toLowerCase().replace(/\s+/g,"_").replace(/[^\w]/g,"");if(i.find(o=>o.id===d))return Promise.reject("Ce champ existe déjà");const m=[...i,{id:d,label:l,type:"text",operation_type:n}];return Oe.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...c,custom_fields:m}})}function $s(e){const{id:s,is_active:l}=e;return G.entities.Institution.update(s,{is_active:l})}function Rs(e){return G.entities.Institution.delete(e)}function Es(e){const{institution:s,field:l}=e,n=s.settings||{required_fields:[]},c=n.required_fields||[],i=c.includes(l)?c.filter(d=>d!==l):[...c,l];return Oe.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...n,required_fields:i}})}function Us(){return B.error("Erreur lors de la mise à jour")}function Ls(e){const{id:s,data:l}=e,n=new FormData;return n.append("_method","PUT"),n.append("name",l.name),n.append("type",l.type),n.append("code",l.code),l.logo&&n.append("logo",l.logo),Oe.post(`/api/institutions/${s}`,n,{headers:{"Content-Type":"multipart/form-data"}})}function Ts(){return B.error("Erreur lors de l'ajout de l'institution")}function Ps(e){const s=new FormData;return s.append("name",e.name),s.append("type",e.type),s.append("code",e.code),e.logo&&s.append("logo",e.logo),Oe.post("/api/institutions",s,{headers:{"Content-Type":"multipart/form-data"}})}function Is(){return G.entities.Institution.list()}const Ct=[{id:"USD_CDF",label:"USD → CDF",from:"USD",to:"CDF"},{id:"EUR_CDF",label:"EUR → CDF",from:"EUR",to:"CDF"},{id:"EUR_USD",label:"EUR → USD",from:"EUR",to:"USD"},{id:"CDF_USD",label:"CDF → USD",from:"CDF",to:"USD"}];function zs(){const e=Me.c(56),s=We();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={currency_pair:"",buy_rate:"",sell_rate:""},e[0]=l):l=e[0];const[n,c]=O.useState(l),[i,d]=O.useState(!1);let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m={queryKey:["rates"],queryFn:Os},e[1]=m):m=e[1];const{data:o,isLoading:v}=Fe(m);let h;e[2]!==o?(h=o===void 0?[]:o,e[2]=o,e[3]=h):h=e[3];const a=h;let u;e[4]!==s?(u={mutationFn:Ks,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),B.success("Taux mis à jour")}},e[4]=s,e[5]=u):u=e[5];const N=ue(u);let S;e[6]!==s?(S={mutationFn:Bs,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),c({currency_pair:"",buy_rate:"",sell_rate:""}),d(!1),B.success("Nouveau taux de change configuré")},onError:Vs},e[6]=s,e[7]=S):S=e[7];const b=ue(S);let C;e[8]!==s?(C={mutationFn:Ys,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),B.success("Configuration supprimée")}},e[8]=s,e[9]=C):C=e[9];const y=ue(C);let D;e[10]!==N?(D=(P,Y,K)=>{K&&N.mutate({id:P.id,data:{[Y]:parseFloat(K)}})},e[10]=N,e[11]=D):D=e[11];const f=D;let p,q;e[12]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600 shadow-lg shadow-indigo-600/20",children:t.jsx(nt,{className:"h-5 w-5 text-white"})}),q=t.jsx("h4",{className:"text-sm font-black tracking-tight text-slate-800 uppercase",children:"Marché des Devises"}),e[12]=p,e[13]=q):(p=e[12],q=e[13]);let M;e[14]!==a.length?(M=t.jsxs("div",{className:"ml-2 flex items-center gap-3",children:[p,t.jsxs("div",{children:[q,t.jsxs("p",{className:"text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:[a.length," Paires Actives"]})]})]}),e[14]=a.length,e[15]=M):M=e[15];let j;e[16]!==i?(j=()=>d(!i),e[16]=i,e[17]=j):j=e[17];const k=i?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 hover:bg-indigo-700";let g;e[18]!==k?(g=H("h-11 rounded-xl px-6 text-xs font-black tracking-widest uppercase transition-all",k),e[18]=k,e[19]=g):g=e[19];let _;e[20]!==i?(_=i?t.jsx(ot,{className:"mr-2 h-4 w-4"}):t.jsx(Be,{className:"mr-2 h-4 w-4"}),e[20]=i,e[21]=_):_=e[21];const L=i?"Fermer":"Ajouter une Paire";let E;e[22]!==j||e[23]!==g||e[24]!==_||e[25]!==L?(E=t.jsxs($,{onClick:j,className:g,children:[_,L]}),e[22]=j,e[23]=g,e[24]=_,e[25]=L,e[26]=E):E=e[26];let R;e[27]!==M||e[28]!==E?(R=t.jsxs("div",{className:"flex items-center justify-between rounded-[1.5rem] border border-slate-100 bg-slate-100/50 p-4",children:[M,E]}),e[27]=M,e[28]=E,e[29]=R):R=e[29];let A;e[30]!==b||e[31]!==n||e[32]!==i?(A=i&&t.jsx(be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsxs("div",{className:"relative rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-64 w-64 bg-indigo-500/10 blur-[100px]"}),t.jsxs("h5",{className:"mb-8 flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(Be,{className:"h-6 w-6 text-indigo-400"}),"Nouvelle Configuration"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Paire de devises"}),t.jsxs(st,{value:n.currency_pair,onValueChange:P=>c({...n,currency_pair:P}),children:[t.jsx(at,{className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500",children:t.jsx(lt,{placeholder:"Choisir une paire"})}),t.jsx(it,{className:"border-slate-800 bg-slate-900 text-white",children:Ct.map(Hs)})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Taux d'Achat (Buy)"}),t.jsxs("div",{className:"relative",children:[t.jsx(kt,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-emerald-400"}),t.jsx(pe,{type:"number",placeholder:"0.00",value:n.buy_rate,onChange:P=>c({...n,buy_rate:P.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 pl-11 font-mono font-black text-white"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Taux de Vente (Sell)"}),t.jsxs("div",{className:"relative",children:[t.jsx(Ke,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-blue-400"}),t.jsx(pe,{type:"number",placeholder:"0.00",value:n.sell_rate,onChange:P=>c({...n,sell_rate:P.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 pl-11 font-mono font-black text-white"})]})]})]}),t.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[t.jsx($,{variant:"ghost",onClick:()=>d(!1),className:"h-12 rounded-xl px-8 text-xs font-black tracking-widest text-slate-400 uppercase hover:bg-white/5 hover:text-white",children:"Annuler"}),t.jsx($,{onClick:()=>b.mutate(n),disabled:b.isPending||!n.currency_pair,className:"h-12 rounded-xl bg-white px-10 text-xs font-black tracking-widest text-slate-900 uppercase transition-all hover:bg-slate-100",children:b.isPending?t.jsx(Je,{className:"h-4 w-4 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Lt,{className:"mr-2 h-4 w-4"}),"Activer le Taux"]})})]})]})}),e[30]=b,e[31]=n,e[32]=i,e[33]=A):A=e[33];let z;e[34]!==A?(z=t.jsx(Qe,{children:A}),e[34]=A,e[35]=z):z=e[35];let T;if(e[36]!==y||e[37]!==f||e[38]!==a){let P;e[40]!==y||e[41]!==f?(P=Y=>{const K=Ct.find(X=>X.id===Y.currency_pair);return t.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group rounded-[2rem] border-2 border-slate-50 bg-white p-8 shadow-xl shadow-slate-200/50 transition-all duration-300 hover:border-indigo-100",children:[t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-900 shadow-lg shadow-slate-900/10 transition-transform group-hover:rotate-6",children:t.jsx("span",{className:"text-sm font-black text-white",children:K?.from||Y.currency_pair.split("_")[0]})}),t.jsx(Ke,{className:"h-4 w-4 text-slate-300"}),t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl border border-indigo-100 bg-indigo-50",children:t.jsx("span",{className:"text-sm font-black text-indigo-600",children:K?.to||Y.currency_pair.split("_")[1]})})]}),t.jsx($,{variant:"ghost",size:"icon",onClick:()=>y.mutate(Y.id),className:"h-10 w-10 rounded-xl text-slate-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500",children:t.jsx(rt,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between px-1",children:[t.jsx("span",{className:"text-[9px] font-black tracking-widest text-slate-400 uppercase",children:"Achat (Buy)"}),t.jsx(kt,{className:"h-3 w-3 text-emerald-500"})]}),t.jsx("div",{className:"relative",children:t.jsx(pe,{type:"number",value:Y.buy_rate,onChange:X=>f(Y,"buy_rate",X.target.value),className:"h-14 rounded-2xl border-transparent bg-slate-50 font-mono text-xl font-black text-slate-900 focus:border-indigo-500 focus:bg-white"})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between px-1",children:[t.jsx("span",{className:"text-[9px] font-black tracking-widest text-slate-400 uppercase",children:"Vente (Sell)"}),t.jsx(Ke,{className:"h-3 w-3 text-blue-500"})]}),t.jsx("div",{className:"relative",children:t.jsx(pe,{type:"number",value:Y.sell_rate,onChange:X=>f(Y,"sell_rate",X.target.value),className:"h-14 rounded-2xl border-transparent bg-slate-50 font-mono text-xl font-black text-slate-900 focus:border-indigo-500 focus:bg-white"})})]})]})]},Y.id)},e[40]=y,e[41]=f,e[42]=P):P=e[42],T=a.map(P),e[36]=y,e[37]=f,e[38]=a,e[39]=T}else T=e[39];let x;e[43]!==v||e[44]!==a.length?(x=a.length===0&&!v&&t.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-slate-200 bg-slate-50/50 py-20",children:[t.jsx(nt,{className:"mb-4 h-16 w-16 text-slate-200"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Aucun taux configuré"})]}),e[43]=v,e[44]=a.length,e[45]=x):x=e[45];let F;e[46]!==T||e[47]!==x?(F=t.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[T,x]}),e[46]=T,e[47]=x,e[48]=F):F=e[48];let U;e[49]!==v?(U=v&&t.jsx("div",{className:"flex justify-center p-20",children:t.jsx(At,{className:"h-10 w-10 animate-spin text-indigo-600"})}),e[49]=v,e[50]=U):U=e[50];let I;return e[51]!==R||e[52]!==z||e[53]!==F||e[54]!==U?(I=t.jsxs("div",{className:"space-y-8",children:[R,z,F,U]}),e[51]=R,e[52]=z,e[53]=F,e[54]=U,e[55]=I):I=e[55],I}function Hs(e){return t.jsx(ke,{value:e.id,className:"hover:bg-slate-800 focus:bg-slate-800",children:e.label},e.id)}async function Ys(e){await G.entities.ExchangeRate.delete(e)}function Vs(){return B.error("Erreur lors de la création du taux")}async function Bs(e){await G.entities.ExchangeRate.create({...e,buy_rate:parseFloat(e.buy_rate),sell_rate:parseFloat(e.sell_rate),is_active:!0})}async function Ks(e){const{id:s,data:l}=e;await G.entities.ExchangeRate.update(s,l)}function Os(){return G.entities.ExchangeRate.filter({is_active:!0})}function Qs(){const e=We(),[s,l]=O.useState("grid"),[n,c]=O.useState(null),[i,d]=O.useState(!1),[m,o]=O.useState(!1),[v,h]=O.useState(1),[a,u]=O.useState("all"),[N,S]=O.useState(""),[b,C]=O.useState(null),[y,D]=O.useState(""),{data:f=[]}=Fe({queryKey:["manager-shops"],queryFn:()=>G.entities.Shop.list()});Tt.useEffect(()=>{f.length>0&&!b&&C(f[0].id)},[f,b]);const{data:p,isLoading:q}=Fe({queryKey:["sessions",b,v,a,N],queryFn:()=>G.entities.Session.list({shop_id:b?.toString(),status:a==="all"?void 0:a,date:N||void 0,page:v.toString()}),enabled:!!b}),M=p?.data||[],j=p,{data:k,isLoading:g}=Fe({queryKey:["session-report",n],queryFn:()=>G.entities.Session.report(n),enabled:!!n}),_=M.find(x=>x.status==="open"),L=async()=>{if(b){d(!0);try{await G.entities.Session.create({session_date:J().format("YYYY-MM-DD"),shop_id:b,notes:y}),B.success("Session ouverte avec succès"),e.invalidateQueries({queryKey:["sessions"]}),D("")}catch(x){const F=x.response?.data?.error||x.response?.data?.message||"Erreur lors de l’ouverture";B.error(F)}finally{d(!1)}}},E=async x=>{o(!0);try{await G.entities.Session.close(x),B.success("Session fermée avec succès"),e.invalidateQueries({queryKey:["sessions"]})}catch(F){const U=F.response?.data?.error||F.response?.data?.message||"Erreur lors de la fermeture";B.error(U)}finally{o(!1)}},R=async x=>{try{await G.entities.Session.reopen(x),B.success("Session réouverte avec succès"),e.invalidateQueries({queryKey:["sessions"]})}catch(F){const U=F.response?.data?.error||F.response?.data?.message||"Erreur lors de la réouverture de la session";B.error(U)}},A=f.find(x=>x.id===b),{auth:z}=bt().props,T=z.user;return t.jsxs("div",{className:"animate-in space-y-8 pb-10 font-sans duration-500 fade-in slide-in-from-bottom-4",children:[t.jsxs("div",{className:"flex flex-col justify-between gap-6 md:flex-row md:items-center",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-3xl font-black tracking-tighter text-slate-900 uppercase",children:["Console"," ",t.jsx("span",{className:"text-indigo-600",children:"Sessions"})]}),t.jsx("p",{className:"mt-1 text-sm font-medium text-slate-400",children:"Pilotez l'activité journalière de vos guichets."})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[f.length>1&&t.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 bg-white p-1 shadow-sm",children:[t.jsx("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-2",children:t.jsx(Dt,{className:"h-4 w-4 text-slate-500"})}),t.jsx("select",{className:"cursor-pointer border-none bg-transparent pr-10 text-sm font-black text-slate-700 uppercase focus:ring-0",value:b||"",onChange:x=>C(Number(x.target.value)),children:f.map(x=>t.jsx("option",{value:x.id,children:x.name},x.id))})]}),t.jsxs("div",{className:"flex rounded-2xl border border-slate-200 bg-slate-100 p-1 shadow-inner",children:[t.jsxs("button",{onClick:()=>l("grid"),className:H("flex items-center gap-2 rounded-xl p-2 px-4 text-[10px] font-black tracking-widest uppercase transition-all duration-300",s==="grid"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"),children:[t.jsx(ps,{className:"h-4 w-4"})," Grille"]}),t.jsxs("button",{onClick:()=>l("list"),className:H("flex items-center gap-2 rounded-xl p-2 px-4 text-[10px] font-black tracking-widest uppercase transition-all duration-300",s==="list"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"),children:[t.jsx(fs,{className:"h-4 w-4"})," Liste"]})]})]})]}),t.jsxs(Rt,{className:"relative overflow-hidden rounded-[3rem] border-none bg-white shadow-2xl",children:[t.jsx("div",{className:H("absolute inset-0 z-0 opacity-[0.04]",_?"bg-emerald-500":"bg-indigo-600")}),t.jsx(Vt,{className:"relative z-10 p-10",children:_?t.jsxs("div",{className:"flex flex-col items-center justify-between gap-12 lg:flex-row",children:[t.jsx("div",{className:"flex-1 space-y-8",children:t.jsxs("div",{className:"inline-flex items-center gap-6 rounded-[2.5rem] border border-slate-100 bg-slate-50 p-8 shadow-sm",children:[t.jsx("div",{className:"rounded-3xl bg-emerald-500 p-5 shadow-xl shadow-emerald-500/30",children:t.jsx(js,{className:"h-10 w-10 text-white"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-[9px] font-bold tracking-tighter text-emerald-600 uppercase",children:"Session Active"}),t.jsxs("span",{className:"text-[9px] font-bold tracking-widest text-slate-400 uppercase",children:["• ",A?.name]})]}),t.jsx("div",{className:"text-4xl font-black tracking-tighter text-slate-900",children:J(_.session_date).format("DD MMMM YYYY")}),t.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm font-bold text-slate-400",children:[t.jsxs("span",{className:"flex items-center gap-1.5",children:[t.jsx(Xe,{className:"h-4 w-4 text-indigo-500"})," ",J(_.opened_at).format("HH:mm")]}),t.jsx("span",{className:"h-4 w-[1px] bg-slate-200"}),t.jsxs("span",{className:"flex items-center gap-1.5",children:[t.jsx(ct,{className:"h-4 w-4 text-indigo-500"})," ",_.opened_by," ","(Opérateur)"]})]})]})]})}),t.jsxs("div",{className:"flex w-full flex-col items-center gap-4 lg:w-96",children:[t.jsxs($,{onClick:()=>E(_.id),disabled:m,className:"flex h-24 w-full flex-col items-center justify-center gap-2 rounded-[2.5rem] bg-slate-900 text-sm font-black tracking-widest text-white uppercase shadow-2xl transition-all hover:bg-black active:scale-95",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(vt,{className:H("h-7 w-7 text-red-500",m&&"animate-pulse")}),"Fermer la Boutique"]}),t.jsx("span",{className:"text-[9px] font-bold opacity-40",children:"Arrêter le flux de transactions"})]}),t.jsx($,{variant:"ghost",onClick:()=>c(_.id),className:"rounded-2xl font-bold text-indigo-600 hover:bg-indigo-50",children:"Consulter les statistiques en direct"})]})]}):t.jsxs("div",{className:"flex flex-col items-center justify-between gap-12 lg:flex-row",children:[t.jsxs("div",{className:"flex-1 space-y-8",children:[t.jsxs("div",{className:"flex items-start gap-6",children:[t.jsx("div",{className:"rounded-[2rem] border border-slate-100 bg-slate-50 p-6",children:t.jsx(Bt,{className:"h-10 w-10 text-slate-300"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"mb-2 text-3xl font-black tracking-tight text-slate-900",children:"Prêt pour l'ouverture ?"}),t.jsxs("p",{className:"max-w-lg leading-relaxed font-medium text-slate-500",children:["Aucune session n'est ouverte pour"," ",t.jsx("span",{className:"font-bold text-indigo-600",children:A?.name})," ","aujourd'hui. Ouvrez une session pour autoriser les caissiers à traiter les tickets."]})]})]}),t.jsxs("div",{className:"max-w-xl space-y-4",children:[t.jsx(xe,{className:"ml-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Commentaire d'ouverture"}),t.jsx(pe,{value:y,onChange:x=>D(x.target.value),placeholder:"Ex: Fond de caisse, équipe du jour...",className:"h-16 rounded-3xl border-slate-200 bg-slate-50 px-8 font-bold text-slate-700 transition-colors focus:bg-white"})]})]}),t.jsxs("div",{className:"group relative w-full overflow-hidden rounded-[3rem] bg-indigo-600 p-8 text-white shadow-2xl shadow-indigo-600/20 lg:w-96",children:[t.jsx("div",{className:"absolute top-0 right-0 h-40 w-40 translate-x-1/2 -translate-y-1/2 bg-white/10 blur-[60px]"}),t.jsxs("div",{className:"relative z-10 space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"rounded-2xl bg-white/20 p-4",children:t.jsx(jt,{className:"h-8 w-8 text-white"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] leading-none font-black tracking-widest uppercase opacity-60",children:"Session du"}),t.jsx("div",{className:"text-2xl font-black",children:J().format("DD/MM/YYYY")})]})]}),t.jsxs($,{onClick:L,disabled:i||!b,className:"flex h-20 w-full items-center justify-center gap-3 rounded-[2rem] bg-white text-xs font-black tracking-[0.2em] text-indigo-600 uppercase shadow-xl transition-all hover:bg-slate-50 active:scale-95",children:[i?t.jsx(Xe,{className:"h-5 w-5 animate-spin"}):t.jsx(dt,{className:"h-5 w-5 fill-indigo-600"}),"Ouvrir Session"]}),t.jsx("p",{className:"text-center text-[9px] font-black tracking-widest uppercase opacity-60",children:"Active le terminal client immédiatement"})]})]})]})})]}),t.jsxs("div",{className:"space-y-8 pt-10",children:[t.jsxs("div",{className:"flex flex-col items-end justify-between gap-6 border-b border-slate-100 pb-8 lg:flex-row",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-12 w-1.5 rounded-full bg-indigo-500 shadow-[0_0_15px_rgba(79,70,229,0.5)]"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-2xl font-black tracking-tight text-slate-900 uppercase",children:"Registre Historique"}),t.jsxs("p",{className:"mt-0.5 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:[j?.total||0," sessions enregistrées au total"]})]})]}),t.jsxs("div",{className:"flex w-full flex-wrap items-center gap-4 lg:w-auto",children:[t.jsxs("div",{className:"flex h-14 flex-1 items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 shadow-sm transition-all focus-within:border-indigo-500 lg:min-w-[200px] lg:flex-none",children:[t.jsx(gt,{className:"h-4 w-4 text-slate-400"}),t.jsx("input",{type:"date",value:N,onChange:x=>{S(x.target.value),h(1)},className:"w-full border-none bg-transparent text-xs font-bold text-slate-600 focus:ring-0"})]}),t.jsxs("div",{className:"flex h-14 flex-1 items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 shadow-sm transition-all focus-within:border-indigo-500 lg:min-w-[200px] lg:flex-none",children:[t.jsx(ms,{className:"h-4 w-4 text-slate-400"}),t.jsxs("select",{value:a,onChange:x=>{u(x.target.value),h(1)},className:"w-full border-none bg-transparent text-xs font-bold text-slate-600 uppercase focus:ring-0",children:[t.jsx("option",{value:"all",children:"Tous les Statuts"}),t.jsx("option",{value:"open",children:"En Cours"}),t.jsx("option",{value:"closed",children:"Clôturées"})]})]}),(N||a!=="all")&&t.jsx($,{variant:"ghost",size:"icon",onClick:()=>{S(""),u("all")},className:"h-14 w-14 rounded-2xl text-red-500 hover:bg-red-50 hover:text-red-600",children:t.jsx(ot,{className:"h-5 w-5"})})]})]}),t.jsx(Qe,{mode:"wait",children:q?t.jsxs(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex h-96 flex-col items-center justify-center space-y-6",children:[t.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-indigo-100 border-t-indigo-600"}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Chargement du registre..."})]},"loading"):M.length===0?t.jsxs(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex h-96 flex-col items-center justify-center space-y-4 rounded-[3rem] border-2 border-dashed border-slate-100",children:[t.jsx("div",{className:"rounded-full bg-slate-50 p-6 text-slate-300",children:t.jsx(gt,{className:"h-12 w-12"})}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucune session trouvée"})]},"empty"):t.jsx(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:s==="grid"?t.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3",children:M.map(x=>t.jsx(Gs,{session:x,userRole:T?.role,onView:()=>c(x.id),onClose:()=>E(x.id),onReopen:()=>R(x.id)},x.id))}):t.jsx(Js,{sessions:M,userRole:T?.role,onView:x=>c(x),onClose:x=>E(x),onReopen:x=>R(x)})},s)}),j&&j.last_page>1&&t.jsxs("div",{className:"mt-12 flex items-center justify-center gap-4 self-center rounded-3xl border border-white bg-white/50 p-4 backdrop-blur-sm",children:[t.jsx($,{variant:"ghost",disabled:v===1,onClick:()=>h(v-1),className:"h-12 w-12 rounded-2xl border border-slate-100 hover:bg-white",children:t.jsx(Ht,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[Array.from({length:Math.min(j.last_page,5)}).map((x,F)=>{const U=F+1;return t.jsx("button",{onClick:()=>h(U),className:H("h-12 w-12 rounded-2xl text-xs font-black transition-all",v===U?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"text-slate-400 hover:bg-white hover:text-slate-600"),children:U},U)}),j.last_page>5&&t.jsx("span",{className:"mx-2 text-slate-300",children:"•••"})]}),t.jsx($,{variant:"ghost",disabled:v===j.last_page,onClick:()=>h(v+1),className:"h-12 w-12 rounded-2xl border border-slate-100 hover:bg-white",children:t.jsx($t,{className:"h-5 w-5"})})]})]}),t.jsx(Qe,{children:n&&k&&t.jsx(Xs,{session:k?.session,stats:k?.statistics,clients:k?.clients,transactions:k?.transactions,activities:k?.activities,loading:g,onClose:()=>c(null)})})]})}function Gs(e){const s=Me.c(61),{session:l,userRole:n,onView:c,onClose:i,onReopen:d}=e;let m;s[0]!==l.session_date?(m=J(l.session_date).isSame(J(),"day"),s[0]=l.session_date,s[1]=m):m=s[1];const o=m,v=l.status==="open"?"animate-pulse bg-emerald-500":"bg-slate-200";let h;s[2]!==v?(h=H("absolute top-0 right-0 h-2 w-full",v),s[2]=v,s[3]=h):h=s[3];let a;s[4]!==h?(a=t.jsx("div",{className:h}),s[4]=h,s[5]=a):a=s[5];let u;s[6]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx("div",{className:"rounded-2xl bg-slate-50 p-4 transition-colors duration-500 group-hover:bg-indigo-50",children:t.jsx(jt,{className:"h-7 w-7 text-slate-400 group-hover:text-indigo-500"})}),s[6]=u):u=s[6];const N=l.status==="open"?"border border-emerald-500/20 bg-emerald-500/10 text-emerald-600":"border border-slate-200 bg-slate-100 text-slate-500";let S;s[7]!==N?(S=H("flex items-center gap-1.5 rounded-full px-4 py-1.5 text-[10px] font-black tracking-widest uppercase",N),s[7]=N,s[8]=S):S=s[8];let b;s[9]!==l.status?(b=l.status==="open"?t.jsx("div",{className:"h-1.5 w-1.5 animate-ping rounded-full bg-emerald-500"}):null,s[9]=l.status,s[10]=b):b=s[10];const C=l.status==="open"?"En cours":"Terminé";let y;s[11]!==S||s[12]!==b||s[13]!==C?(y=t.jsxs("div",{className:"mb-8 flex items-start justify-between",children:[u,t.jsxs("div",{className:S,children:[b,C]})]}),s[11]=S,s[12]=b,s[13]=C,s[14]=y):y=s[14];let D;s[15]!==l.session_date?(D=J(l.session_date).format("DD MMMM YYYY"),s[15]=l.session_date,s[16]=D):D=s[16];let f;s[17]!==D?(f=t.jsx("div",{className:"mb-1 text-2xl font-black tracking-tight text-slate-900",children:D}),s[17]=D,s[18]=f):f=s[18];let p;s[19]!==o?(p=o&&t.jsx("p",{className:"text-[10px] leading-none font-black tracking-widest text-indigo-500 uppercase",children:"Aujourd'hui"}),s[19]=o,s[20]=p):p=s[20];let q;s[21]!==f||s[22]!==p?(q=t.jsxs("div",{children:[f,p]}),s[21]=f,s[22]=p,s[23]=q):q=s[23];let M;s[24]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] uppercase opacity-60",children:"Ouverture"}),s[24]=M):M=s[24];let j;s[25]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(Xe,{className:"h-3 w-3"}),s[25]=j):j=s[25];let k;s[26]!==l.opened_at?(k=J(l.opened_at).format("HH:mm"),s[26]=l.opened_at,s[27]=k):k=s[27];let g;s[28]!==k?(g=t.jsxs("div",{className:"flex flex-col gap-1",children:[M,t.jsxs("span",{className:"flex items-center gap-1.5 text-slate-700",children:[j,k]})]}),s[28]=k,s[29]=g):g=s[29];let _;s[30]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx("div",{className:"h-8 w-[1px] bg-slate-200"}),s[30]=_):_=s[30];let L;s[31]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] uppercase opacity-60",children:"Clôture"}),s[31]=L):L=s[31];let E;s[32]!==l.closed_at?(E=l.closed_at?t.jsxs(t.Fragment,{children:[t.jsx(Xe,{className:"h-3 w-3"}),J(l.closed_at).format("HH:mm")]}):"--:--",s[32]=l.closed_at,s[33]=E):E=s[33];let R;s[34]!==E?(R=t.jsxs("div",{className:"flex flex-col items-end gap-1",children:[L,t.jsx("span",{className:"flex items-center gap-1.5 text-slate-700",children:E})]}),s[34]=E,s[35]=R):R=s[35];let A;s[36]!==g||s[37]!==R?(A=t.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-50 bg-slate-50/50 p-4 text-xs font-bold text-slate-400",children:[g,_,R]}),s[36]=g,s[37]=R,s[38]=A):A=s[38];let z;s[39]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(Et,{className:"mr-2 h-4 w-4"}),s[39]=z):z=s[39];let T;s[40]!==c?(T=t.jsxs($,{onClick:c,className:"h-14 flex-1 rounded-2xl bg-indigo-600 text-[10px] font-black tracking-widest text-white uppercase shadow-lg shadow-indigo-600/20 transition-all hover:scale-105 hover:bg-indigo-700 active:scale-95",children:[z," Rapport"]}),s[40]=c,s[41]=T):T=s[41];let x;s[42]!==i||s[43]!==l.status?(x=l.status==="open"&&t.jsx($,{onClick:i,variant:"outline",className:"h-14 w-14 rounded-2xl border-slate-200 text-red-500 transition-all hover:border-red-100 hover:bg-red-50 active:scale-95",children:t.jsx(vt,{className:"h-5 w-5"})}),s[42]=i,s[43]=l.status,s[44]=x):x=s[44];let F;s[45]!==d||s[46]!==l.status||s[47]!==n?(F=l.status==="closed"&&n==="super-admin"&&t.jsx($,{onClick:d,variant:"outline",className:"h-14 w-14 rounded-2xl border-indigo-200 text-indigo-500 transition-all hover:bg-indigo-50 active:scale-95",title:"Réouvrir la session",children:t.jsx(dt,{className:"h-5 w-5"})}),s[45]=d,s[46]=l.status,s[47]=n,s[48]=F):F=s[48];let U;s[49]!==T||s[50]!==x||s[51]!==F?(U=t.jsxs("div",{className:"flex gap-3 pt-4",children:[T,x,F]}),s[49]=T,s[50]=x,s[51]=F,s[52]=U):U=s[52];let I;s[53]!==q||s[54]!==A||s[55]!==U?(I=t.jsxs("div",{className:"space-y-6",children:[q,A,U]}),s[53]=q,s[54]=A,s[55]=U,s[56]=I):I=s[56];let P;return s[57]!==y||s[58]!==I||s[59]!==a?(P=t.jsxs(Rt,{className:"group hover:shadow-3xl relative overflow-hidden rounded-[2.5rem] border border-none border-transparent bg-white p-8 shadow-xl shadow-slate-200/50 transition-all duration-500 hover:-translate-y-2 hover:border-indigo-100",children:[a,y,I]}),s[57]=y,s[58]=I,s[59]=a,s[60]=P):P=s[60],P}function Js(e){const s=Me.c(14),{sessions:l,userRole:n,onView:c,onClose:i,onReopen:d}=e;let m;s[0]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase first:rounded-tl-[2.5rem]",children:"Date"}),t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Boutique / Guichet"}),t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Statut"}),t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Horaire"}),t.jsx("th",{className:"p-8 text-right text-[11px] font-black tracking-widest text-slate-400 uppercase last:rounded-tr-[2.5rem]",children:"Actions"})]})}),s[0]=m):m=s[0];let o;if(s[1]!==i||s[2]!==d||s[3]!==c||s[4]!==l||s[5]!==n){let h;s[7]!==i||s[8]!==d||s[9]!==c||s[10]!==n?(h=a=>t.jsxs("tr",{className:"group transition-colors hover:bg-slate-50/50",children:[t.jsx("td",{className:"p-8 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-100 text-slate-400 transition-colors group-hover:bg-indigo-100 group-hover:text-indigo-600",children:t.jsx(jt,{className:"h-5 w-5"})}),t.jsx("span",{className:"text-sm font-black tracking-tight text-slate-700",children:J(a.session_date).format("DD/MM/YYYY")})]})}),t.jsx("td",{className:"p-8",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs font-bold text-slate-700",children:a.shop?.name||"Agence Centrale"}),t.jsxs("span",{className:"mt-0.5 text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:["ID: ",a.shop_id]})]})}),t.jsx("td",{className:"p-8",children:t.jsx("span",{className:H("rounded-full px-4 py-1.5 text-[9px] font-black tracking-widest uppercase",a.status==="open"?"border border-emerald-100 bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-400"),children:a.status==="open"?"En Cours":"Clôturé"})}),t.jsx("td",{className:"p-8",children:t.jsxs("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"mb-0.5 text-[9px] uppercase opacity-50",children:"Ouvert"}),t.jsx("span",{className:"text-slate-600",children:J(a.opened_at).format("HH:mm")})]}),t.jsx(nt,{className:"h-3 w-3 opacity-20"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"mb-0.5 text-[9px] uppercase opacity-50",children:"Fermé"}),t.jsx("span",{className:"text-slate-600",children:a.closed_at?J(a.closed_at).format("HH:mm"):"--:--"})]})]})}),t.jsx("td",{className:"p-8 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsxs($,{onClick:()=>c(a.id),className:"h-10 rounded-xl bg-indigo-50 px-4 text-[10px] font-black tracking-widest text-indigo-600 uppercase shadow-none transition-all hover:bg-indigo-600 hover:text-white",children:[t.jsx(Et,{className:"mr-2 h-3.5 w-3.5"})," ","Rapport"]}),a.status==="open"&&t.jsx($,{onClick:()=>i(a.id),size:"icon",className:"h-10 w-10 rounded-xl bg-red-50 text-red-500 shadow-none transition-all hover:bg-red-500 hover:text-white",children:t.jsx(vt,{className:"h-4 w-4"})}),a.status==="closed"&&n==="super-admin"&&t.jsx($,{onClick:()=>d(a.id),size:"icon",className:"h-10 w-10 rounded-xl bg-indigo-50 text-indigo-500 shadow-none transition-all hover:bg-indigo-500 hover:text-white",title:"Réouvrir la session",children:t.jsx(dt,{className:"h-4 w-4"})})]})})]},a.id),s[7]=i,s[8]=d,s[9]=c,s[10]=n,s[11]=h):h=s[11],o=l.map(h),s[1]=i,s[2]=d,s[3]=c,s[4]=l,s[5]=n,s[6]=o}else o=s[6];let v;return s[12]!==o?(v=t.jsx("div",{className:"w-full overflow-hidden rounded-[2.5rem] border border-slate-100 bg-white shadow-xl shadow-slate-200/30",children:t.jsxs("table",{className:"w-full border-collapse text-left",children:[m,t.jsx("tbody",{className:"divide-y divide-slate-100",children:o})]})}),s[12]=o,s[13]=v):v=s[13],v}function Xs(e){const s=Me.c(47),{session:l,stats:n,transactions:c,loading:i,onClose:d}=e;let m,o,v;s[0]===Symbol.for("react.memo_cache_sentinel")?(m={opacity:0},o={opacity:1},v={opacity:0},s[0]=m,s[1]=o,s[2]=v):(m=s[0],o=s[1],v=s[2]);let h;s[3]!==d?(h=t.jsx(be.div,{initial:m,animate:o,exit:v,onClick:d,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-xl"}),s[3]=d,s[4]=h):h=s[4];let a,u,N;s[5]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:0,scale:.9,y:30},u={opacity:1,scale:1,y:0},N={opacity:0,scale:.9,y:30},s[5]=a,s[6]=u,s[7]=N):(a=s[5],u=s[6],N=s[7]);let S;s[8]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx("div",{className:"rounded-[2rem] bg-indigo-600 p-5 shadow-xl shadow-indigo-600/30",children:t.jsx(Ke,{className:"h-10 w-10 text-white"})}),s[8]=S):S=s[8];let b;s[9]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx("h3",{className:"text-3xl font-black tracking-tighter text-slate-900 uppercase",children:"Rapport de Session"}),s[9]=b):b=s[9];const C=l?.status==="open"?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-500";let y;s[10]!==C?(y=H("rounded-full px-4 py-1.5 text-[10px] font-black tracking-widest uppercase",C),s[10]=C,s[11]=y):y=s[11];const D=l?.status==="open"?"Live":"Archivé";let f;s[12]!==y||s[13]!==D?(f=t.jsxs("div",{className:"mb-1 flex items-center gap-3",children:[b,t.jsx("span",{className:y,children:D})]}),s[12]=y,s[13]=D,s[14]=f):f=s[14];let p;s[15]!==l?(p=l?J(l.session_date).format("dddd DD MMMM YYYY"):"Chargement...",s[15]=l,s[16]=p):p=s[16];const q=l?.shop?.name;let M;s[17]!==p||s[18]!==q?(M=t.jsxs("p",{className:"text-sm font-bold text-slate-400",children:[p," ","• Guichet ",q]}),s[17]=p,s[18]=q,s[19]=M):M=s[19];let j;s[20]!==f||s[21]!==M?(j=t.jsxs("div",{className:"flex items-center gap-6",children:[S,t.jsxs("div",{children:[f,M]})]}),s[20]=f,s[21]=M,s[22]=j):j=s[22];let k;s[23]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(ot,{className:"h-8 w-8"}),s[23]=k):k=s[23];let g;s[24]!==d?(g=t.jsx($,{onClick:d,variant:"ghost",className:"h-16 w-16 rounded-[2rem] bg-slate-50 text-slate-400 transition-all hover:bg-red-50 hover:text-red-500",children:k}),s[24]=d,s[25]=g):g=s[25];let _;s[26]!==j||s[27]!==g?(_=t.jsxs("div",{className:"flex shrink-0 items-center justify-between border-b border-slate-100 bg-white p-8 md:p-12",children:[j,g]}),s[26]=j,s[27]=g,s[28]=_):_=s[28];let L;s[29]!==i||s[30]!==n?.cashier_stats||s[31]!==n?.total_clients||s[32]!==n?.total_transactions||s[33]!==n?.volume_cdf||s[34]!==n?.volume_usd||s[35]!==c?(L=t.jsx("div",{className:"flex-1 space-y-12 overflow-y-auto p-8 md:p-12",children:i?t.jsxs("div",{className:"flex h-96 flex-col items-center justify-center space-y-6",children:[t.jsx("div",{className:"h-20 w-20 animate-spin rounded-full border-4 border-indigo-100 border-t-indigo-600"}),t.jsx("p",{className:"animate-pulse text-sm font-black tracking-widest text-slate-400 uppercase",children:"Synthèse des données..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4",children:[t.jsx(et,{title:"Clients",value:n?.total_clients,icon:ct,color:"blue"}),t.jsx(et,{title:"Transactions",value:n?.total_transactions,icon:nt,color:"emerald"}),t.jsx(et,{title:"Volume USD",value:`$ ${n?.volume_usd?.toLocaleString()}`,icon:Ke,color:"indigo"}),t.jsx(et,{title:"Volume CDF",value:`${n?.volume_cdf?.toLocaleString()} FC`,icon:Ge,color:"amber"})]}),t.jsxs("div",{className:"space-y-12",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-10 w-1 rounded-full bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.5)]"}),t.jsx("h5",{className:"text-xl font-black tracking-tight text-slate-900 uppercase",children:"Flux Financier"})]}),t.jsx("div",{className:"overflow-hidden rounded-[2.5rem] border border-slate-100 bg-white shadow-xl shadow-slate-200/20",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50/50",children:[t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Heure"}),t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Opération"}),t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Montant Envoyé"}),t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Montant Reçu"}),t.jsx("th",{className:"p-6 text-right text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Commission"})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[c?.map(Zs),c?.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"p-12 text-center text-xs font-black tracking-widest text-slate-300 uppercase",children:"Aucune transaction"})})]})]})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-10 w-1 rounded-full bg-indigo-500"}),t.jsx("h5",{className:"text-xl font-black tracking-tight text-slate-900 uppercase",children:"Performance Opérateurs"})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:n?.cashier_stats?.map(Ws)})]})]})]})}),s[29]=i,s[30]=n?.cashier_stats,s[31]=n?.total_clients,s[32]=n?.total_transactions,s[33]=n?.volume_cdf,s[34]=n?.volume_usd,s[35]=c,s[36]=L):L=s[36];let E;s[37]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsxs("div",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:["Document généré le ",J().format("DD/MM/YYYY HH:mm")]}),s[37]=E):E=s[37];let R;s[38]!==d?(R=t.jsxs("div",{className:"flex shrink-0 items-center justify-between border-t border-slate-100 bg-white p-8 md:p-12",children:[E,t.jsx($,{onClick:d,className:"h-14 rounded-2xl bg-slate-900 px-10 text-xs font-black tracking-widest text-white uppercase",children:"Fermer le Rapport"})]}),s[38]=d,s[39]=R):R=s[39];let A;s[40]!==_||s[41]!==L||s[42]!==R?(A=t.jsxs(be.div,{initial:a,animate:u,exit:N,className:"relative flex max-h-[90vh] w-full max-w-6xl flex-col overflow-hidden rounded-[3.5rem] border border-white/20 bg-[#f8fafc] shadow-[0_40px_100px_rgba(0,0,0,0.5)]",children:[_,L,R]}),s[40]=_,s[41]=L,s[42]=R,s[43]=A):A=s[43];let z;return s[44]!==A||s[45]!==h?(z=t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 font-sans md:p-12",children:[h,A]}),s[44]=A,s[45]=h,s[46]=z):z=s[46],z}function Ws(e,s){return t.jsxs("div",{className:"group rounded-[2rem] border border-slate-100 bg-white p-8 shadow-lg shadow-slate-200/30 transition-all hover:border-indigo-200",children:[t.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[t.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-indigo-50 text-xl font-black text-indigo-600 transition-all group-hover:bg-indigo-600 group-hover:text-white",children:e.cashier.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-black tracking-tighter text-slate-800",children:e.cashier}),t.jsx("div",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Opérateur"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"rounded-xl bg-slate-50 p-4",children:[t.jsx("div",{className:"mb-1 text-[9px] font-black text-slate-400 uppercase",children:"Appels"}),t.jsx("div",{className:"text-xl font-black text-slate-700",children:e.clients_called})]}),t.jsxs("div",{className:"rounded-xl bg-slate-50 p-4",children:[t.jsx("div",{className:"mb-1 text-[9px] font-black text-slate-400 uppercase",children:"Succès"}),t.jsx("div",{className:"text-xl font-black text-emerald-600",children:e.transactions_completed})]})]})]},s)}function Zs(e){return t.jsxs("tr",{className:"transition-colors hover:bg-slate-50/30",children:[t.jsx("td",{className:"p-6 text-xs font-bold text-slate-500",children:J(e.created_at).format("HH:mm:ss")}),t.jsx("td",{className:"p-6",children:t.jsx("span",{className:"text-xs font-black tracking-tighter text-slate-800 uppercase",children:e.operation_type})}),t.jsx("td",{className:"p-6",children:t.jsxs("span",{className:"text-sm font-black text-emerald-600",children:[e.amount_from?.toLocaleString()," ",e.currency_from]})}),t.jsx("td",{className:"p-6",children:t.jsxs("span",{className:"text-sm font-black text-slate-600",children:[e.amount_to?.toLocaleString()," ",e.currency_to]})}),t.jsx("td",{className:"p-6 text-right",children:t.jsxs("span",{className:"text-xs font-black text-indigo-600",children:["$"," ",e.commission]})})]},e.id)}function et(e){const s=Me.c(21),{title:l,value:n,icon:c,color:i}=e;let d,m,o,v;if(s[0]!==c||s[1]!==i){const b={blue:"bg-blue-500 text-blue-500 border-blue-100 shadow-blue-500/20",emerald:"bg-emerald-500 text-emerald-500 border-emerald-100 shadow-emerald-500/20",indigo:"bg-indigo-500 text-indigo-500 border-indigo-100 shadow-indigo-500/20",amber:"bg-amber-500 text-amber-500 border-amber-100 shadow-amber-500/20"};v="flex flex-col items-center rounded-[2.5rem] border border-slate-100 bg-white p-8 text-center shadow-xl shadow-slate-200/30",o=H("mb-6 rounded-2xl p-5 shadow-xl",b[i].split(" ")[0],"bg-opacity-10"),d=c,m=H("h-8 w-8",b[i].split(" ")[1]),s[0]=c,s[1]=i,s[2]=d,s[3]=m,s[4]=o,s[5]=v}else d=s[2],m=s[3],o=s[4],v=s[5];let h;s[6]!==d||s[7]!==m?(h=t.jsx(d,{className:m}),s[6]=d,s[7]=m,s[8]=h):h=s[8];let a;s[9]!==o||s[10]!==h?(a=t.jsx("div",{className:o,children:h}),s[9]=o,s[10]=h,s[11]=a):a=s[11];let u;s[12]!==l?(u=t.jsx("div",{className:"mb-2 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:l}),s[12]=l,s[13]=u):u=s[13];let N;s[14]!==n?(N=t.jsx("div",{className:"text-3xl leading-none font-black tracking-tighter text-slate-900",children:n}),s[14]=n,s[15]=N):N=s[15];let S;return s[16]!==v||s[17]!==a||s[18]!==u||s[19]!==N?(S=t.jsxs("div",{className:v,children:[a,u,N]}),s[16]=v,s[17]=a,s[18]=u,s[19]=N,s[20]=S):S=s[20],S}const Mt={blue:{bg:"bg-blue-50",icon:"bg-blue-600 text-white shadow-blue-200",text:"text-blue-600",border:"border-blue-100",accent:"bg-blue-600/5",glow:"shadow-blue-500/10"},emerald:{bg:"bg-emerald-50",icon:"bg-emerald-600 text-white shadow-emerald-200",text:"text-emerald-600",border:"border-emerald-100",accent:"bg-emerald-600/5",glow:"shadow-emerald-500/10"},amber:{bg:"bg-amber-50",icon:"bg-amber-500 text-white shadow-amber-200",text:"text-amber-600",border:"border-amber-100",accent:"bg-amber-600/5",glow:"shadow-amber-500/10"},indigo:{bg:"bg-indigo-50",icon:"bg-indigo-600 text-white shadow-indigo-200",text:"text-indigo-600",border:"border-indigo-100",accent:"bg-indigo-600/5",glow:"shadow-indigo-500/10"},purple:{bg:"bg-purple-50",icon:"bg-purple-600 text-white shadow-purple-200",text:"text-purple-600",border:"border-purple-100",accent:"bg-purple-600/5",glow:"shadow-purple-500/10"},rose:{bg:"bg-rose-50",icon:"bg-rose-600 text-white shadow-rose-200",text:"text-rose-600",border:"border-rose-100",accent:"bg-rose-600/5",glow:"shadow-rose-500/10"}};function tt(e){const s=Me.c(43),{title:l,value:n,subtitle:c,icon:i,color:d,trend:m}=e,o=Mt[d]||Mt.blue;let v,h;s[0]===Symbol.for("react.memo_cache_sentinel")?(v={y:-5,scale:1.02},h={type:"spring",stiffness:400,damping:25},s[0]=v,s[1]=h):(v=s[0],h=s[1]);let a;s[2]!==o.glow?(a=H("group relative overflow-hidden rounded-[2.5rem] border border-white bg-white/70 p-8 shadow-xl backdrop-blur-xl transition-all",o.glow),s[2]=o.glow,s[3]=a):a=s[3];let u;s[4]!==o.bg?(u=H("absolute -top-12 -right-12 h-32 w-32 rounded-full opacity-20 blur-3xl",o.bg),s[4]=o.bg,s[5]=u):u=s[5];let N;s[6]!==u?(N=t.jsx("div",{className:u}),s[6]=u,s[7]=N):N=s[7];let S;s[8]!==o.icon?(S=H("flex h-14 w-14 items-center justify-center rounded-2xl shadow-lg transition-transform duration-500 group-hover:scale-110",o.icon),s[8]=o.icon,s[9]=S):S=s[9];let b;s[10]!==i?(b=t.jsx(i,{className:"h-8 w-8"}),s[10]=i,s[11]=b):b=s[11];let C;s[12]!==S||s[13]!==b?(C=t.jsx("div",{className:S,children:b}),s[12]=S,s[13]=b,s[14]=C):C=s[14];let y;s[15]!==m?(y=m&&t.jsxs("div",{className:H("flex items-center gap-1 rounded-full px-3 py-1 text-[10px] font-black tracking-widest uppercase",m.positive?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"),children:[m.positive?"↑":"↓"," ",m.value]}),s[15]=m,s[16]=y):y=s[16];let D;s[17]!==C||s[18]!==y?(D=t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[C,y]}),s[17]=C,s[18]=y,s[19]=D):D=s[19];let f;s[20]!==l?(f=t.jsx("p",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:l}),s[20]=l,s[21]=f):f=s[21];let p;s[22]!==n?(p=t.jsx("h2",{className:"text-3xl leading-tight font-black tracking-tight text-slate-900",children:n}),s[22]=n,s[23]=p):p=s[23];let q;s[24]!==o.text||s[25]!==c?(q=c&&t.jsxs("p",{className:"mt-2 flex items-center gap-1.5 text-[11px] font-bold tracking-wide text-slate-400 uppercase",children:[t.jsx("span",{className:H("h-1.5 w-1.5 rounded-full",o.text.replace("text","bg"))}),c]}),s[24]=o.text,s[25]=c,s[26]=q):q=s[26];let M;s[27]!==f||s[28]!==p||s[29]!==q?(M=t.jsxs("div",{className:"space-y-1",children:[f,p,q]}),s[27]=f,s[28]=p,s[29]=q,s[30]=M):M=s[30];let j;s[31]!==D||s[32]!==M?(j=t.jsxs("div",{className:"relative z-10 flex h-full flex-col",children:[D,M]}),s[31]=D,s[32]=M,s[33]=j):j=s[33];let k;s[34]!==o.text?(k=H("absolute bottom-0 left-0 h-1.5 w-full opacity-30",o.text.replace("text","bg")),s[34]=o.text,s[35]=k):k=s[35];let g;s[36]!==k?(g=t.jsx("div",{className:k}),s[36]=k,s[37]=g):g=s[37];let _;return s[38]!==j||s[39]!==g||s[40]!==a||s[41]!==N?(_=t.jsxs(be.div,{whileHover:v,transition:h,className:a,children:[N,j,g]}),s[38]=j,s[39]=g,s[40]=a,s[41]=N,s[42]=_):_=s[42],_}function Ft(e){const s=Me.c(6),{transactions:l}=e;if(l.length===0){let d;return s[0]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsxs("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border-2 border-dashed border-slate-200 bg-slate-50/50 p-20",children:[t.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-2xl border border-slate-100 bg-white shadow-sm",children:t.jsx(Ut,{className:"h-8 w-8 text-slate-300"})}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucune transaction trouvée"})]}),s[0]=d):d=s[0],d}let n;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx("thead",{children:t.jsxs("tr",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[t.jsx("th",{className:"px-6 py-4 font-black",children:"Transaction / Client"}),t.jsx("th",{className:"px-6 py-4 text-center font-black",children:"Type"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Montant Entrée"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Montant Sortie"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Commission"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Date / Heure"})]})}),s[1]=n):n=s[1];let c;s[2]!==l?(c=l.map(ea),s[2]=l,s[3]=c):c=s[3];let i;return s[4]!==c?(i=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border-separate border-spacing-y-3 text-left",children:[n,t.jsx("tbody",{children:c})]})}),s[4]=c,s[5]=i):i=s[5],i}function ea(e){return t.jsxs("tr",{className:"group rounded-2xl border border-slate-100 bg-white transition-all duration-300 hover:bg-slate-50",children:[t.jsx("td",{className:"rounded-l-2xl border-y border-l border-slate-100 px-6 py-5 group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-slate-900 shadow-lg shadow-slate-900/10 transition-transform group-hover:scale-110",children:t.jsx(qt,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{className:"flex min-w-0 flex-col",children:[t.jsx("span",{className:"truncate text-sm font-black text-slate-900",children:e.client_name||"Utilisateur"}),t.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold tracking-tight text-slate-400 uppercase",children:[t.jsx(Ut,{className:"h-2.5 w-2.5"})," ID-",e.id.toString().slice(-4).toUpperCase()]})]})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-center group-hover:border-indigo-100",children:t.jsxs("div",{className:H("inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-[10px] font-black tracking-widest uppercase",e.operation_type==="change"?"bg-indigo-50 text-indigo-600":"bg-amber-50 text-amber-600"),children:[e.operation_type==="change"?t.jsx(is,{className:"h-3 w-3"}):t.jsx(as,{className:"h-3 w-3"}),e.operation_type]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-black text-slate-900",children:e.amount_from?.toLocaleString()}),t.jsx("span",{className:"text-[10px] font-black tracking-tighter text-slate-400 uppercase",children:e.currency_from})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-black text-emerald-600",children:e.amount_to?.toLocaleString()}),t.jsx("span",{className:"text-[10px] font-black tracking-tighter text-emerald-600 uppercase opacity-60",children:e.currency_to})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("span",{className:"rounded-lg bg-slate-900 px-3 py-1 font-mono text-xs font-black text-white shadow-lg shadow-slate-900/10",children:["$",parseFloat(e.commission).toLocaleString()]})}),t.jsx("td",{className:"rounded-r-2xl border-y border-r border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-black text-slate-700",children:J(e.created_date).format("DD/MM/YYYY")}),t.jsxs("span",{className:"flex items-center justify-end gap-1 text-[10px] font-bold text-slate-400",children:[t.jsx(Xe,{className:"h-2.5 w-2.5"})," ",J(e.created_date).format("HH:mm")]})]})})]},e.id)}function ta(){const e=Me.c(96),{auth:s}=bt().props,l=s.user?.role==="super-admin",[n,c]=O.useState(!1),[i,d]=O.useState(null),m=We(),o=l?"manager":"cashier";let v;e[0]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[0]=v):v=e[0];let h;e[1]!==o?(h={name:"",email:"",password:"",role:o,is_active:!0,shop_ids:v},e[1]=o,e[2]=h):h=e[2];const[a,u]=O.useState(h);let N;e[3]===Symbol.for("react.memo_cache_sentinel")?(N=["shops"],e[3]=N):N=e[3];let S;e[4]!==l?(S={queryKey:N,queryFn:G.entities.Shop.list,enabled:l},e[4]=l,e[5]=S):S=e[5];const{data:b}=Fe(S);let C;e[6]===Symbol.for("react.memo_cache_sentinel")?(C={queryKey:["users"],queryFn:G.entities.User.list},e[6]=C):C=e[6];const{data:y,isLoading:D}=Fe(C);let f;e[7]!==m?(f={mutationFn:G.entities.User.create,onSuccess:()=>{m.invalidateQueries({queryKey:["users"]}),c(!1),u({name:"",email:"",password:"",role:"cashier",is_active:!0}),B.success("Utilisateur créé avec succès")},onError:ca},e[7]=m,e[8]=f):f=e[8];const p=ue(f);let q;e[9]!==m?(q={mutationFn:na,onSuccess:()=>{m.invalidateQueries({queryKey:["users"]}),d(null),u({name:"",email:"",password:"",role:"cashier",is_active:!0}),B.success("Utilisateur mis à jour avec succès")},onError:ra},e[9]=m,e[10]=q):q=e[10];const M=ue(q);let j;e[11]!==m?(j={mutationFn:ia,onSuccess:()=>{m.invalidateQueries({queryKey:["users"]}),B.success("Utilisateur supprimé avec succès")},onError:la},e[11]=m,e[12]=j):j=e[12];const k=ue(j);let g;e[13]!==p||e[14]!==i||e[15]!==a||e[16]!==M?(g=w=>{w.preventDefault(),i?M.mutate({id:i.id,data:a}):p.mutate(a)},e[13]=p,e[14]=i,e[15]=a,e[16]=M,e[17]=g):g=e[17];const _=g;let L;e[18]===Symbol.for("react.memo_cache_sentinel")?(L=w=>{d(w),u({name:w.name,email:w.email,role:w.role,is_active:w.is_active}),c(!0)},e[18]=L):L=e[18];const E=L;let R;e[19]!==k?(R=w=>{confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?")&&k.mutate(w)},e[19]=k,e[20]=R):R=e[20];const A=R,z=aa;let T;e[21]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Gestion des utilisateurs"}),t.jsx("p",{className:"text-slate-500",children:"Gérez les accès et les rôles des utilisateurs"})]}),e[21]=T):T=e[21];let x;e[22]!==l?(x=()=>{d(null),u({name:"",email:"",password:"",role:l?"manager":"cashier",is_active:!0}),c(!0)},e[22]=l,e[23]=x):x=e[23];let F;e[24]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(Be,{className:"mr-2 h-4 w-4"}),e[24]=F):F=e[24];const U=l?"Nouvel utilisateur":"Nouveau Caissier";let I;e[25]!==x||e[26]!==U?(I=t.jsxs("div",{className:"flex items-center justify-between",children:[T,t.jsxs($,{onClick:x,className:"bg-[#1f61e4] hover:bg-[#1f61e4]/90",children:[F,U]})]}),e[25]=x,e[26]=U,e[27]=I):I=e[27];let P;e[28]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(Ot,{children:t.jsxs(ut,{children:[t.jsx(Ye,{children:"Nom"}),t.jsx(Ye,{children:"Email"}),t.jsx(Ye,{children:"Boutique"}),t.jsx(Ye,{children:"Rôle"}),t.jsx(Ye,{children:"Statut"}),t.jsx(Ye,{className:"text-right",children:"Actions"})]})}),e[28]=P):P=e[28];let Y;e[29]!==A||e[30]!==D||e[31]!==y?(Y=D?t.jsx(ut,{children:t.jsx($e,{colSpan:5,className:"h-24 text-center",children:"Chargement..."})}):y?.map(w=>t.jsxs(ut,{children:[t.jsx($e,{className:"font-medium",children:w.name}),t.jsx($e,{children:w.email}),t.jsx($e,{children:t.jsx("div",{className:"flex flex-wrap gap-1",children:w.shops&&w.shops.length>0?w.shops.map(sa):t.jsx("span",{className:"text-[10px] text-slate-400 italic",children:"Aucune"})})}),t.jsx($e,{children:z(w.role)}),t.jsx($e,{children:t.jsx(Ve,{variant:w.is_active?"default":"destructive",className:w.is_active?"bg-green-500 hover:bg-green-600":"",children:w.is_active?"Actif":"Inactif"})}),t.jsx($e,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx($,{variant:"ghost",size:"icon",onClick:()=>E(w),className:"h-8 w-8 text-slate-500 hover:text-[#1f61e4]",children:t.jsx(Kt,{className:"h-4 w-4"})}),t.jsx($,{variant:"ghost",size:"icon",onClick:()=>A(w.id),className:"h-8 w-8 text-slate-500 hover:text-red-600",children:t.jsx(rt,{className:"h-4 w-4"})})]})})]},w.id)),e[29]=A,e[30]=D,e[31]=y,e[32]=Y):Y=e[32];let K;e[33]!==Y?(K=t.jsx("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:t.jsxs(Qt,{children:[P,t.jsx(Gt,{children:Y})]})}),e[33]=Y,e[34]=K):K=e[34];const X=i?"Modifier l'utilisateur":"Nouvel utilisateur";let W;e[35]!==X?(W=t.jsx(Xt,{children:t.jsx(Wt,{children:X})}),e[35]=X,e[36]=W):W=e[36];let ne;e[37]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(xe,{htmlFor:"name",children:"Nom complet"}),e[37]=ne):ne=e[37];let se;e[38]!==a?(se=w=>u({...a,name:w.target.value}),e[38]=a,e[39]=se):se=e[39];let Q;e[40]!==a.name||e[41]!==se?(Q=t.jsxs("div",{className:"space-y-2",children:[ne,t.jsx(pe,{id:"name",value:a.name,onChange:se,required:!0})]}),e[40]=a.name,e[41]=se,e[42]=Q):Q=e[42];let me;e[43]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(xe,{htmlFor:"email",children:"Email"}),e[43]=me):me=e[43];let ae;e[44]!==a?(ae=w=>u({...a,email:w.target.value}),e[44]=a,e[45]=ae):ae=e[45];let ce;e[46]!==a.email||e[47]!==ae?(ce=t.jsxs("div",{className:"space-y-2",children:[me,t.jsx(pe,{id:"email",type:"email",value:a.email,onChange:ae,required:!0})]}),e[46]=a.email,e[47]=ae,e[48]=ce):ce=e[48];let le;e[49]!==i||e[50]!==a?(le=!i&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{htmlFor:"password",children:"Mot de passe"}),t.jsx(pe,{id:"password",type:"password",value:a.password,onChange:w=>u({...a,password:w.target.value}),required:!i})]}),e[49]=i,e[50]=a,e[51]=le):le=e[51];let oe;e[52]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(xe,{htmlFor:"role",children:"Rôle"}),e[52]=oe):oe=e[52];let de;e[53]!==a?(de=w=>u({...a,role:w}),e[53]=a,e[54]=de):de=e[54];let ge;e[55]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(at,{children:t.jsx(lt,{placeholder:"Sélectionner un rôle"})}),e[55]=ge):ge=e[55];let Z;e[56]!==l?(Z=l&&t.jsx(ke,{value:"manager",children:"Manager"}),e[56]=l,e[57]=Z):Z=e[57];let he,je;e[58]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(ke,{value:"cashier",children:"Caissier"}),je=t.jsx(ke,{value:"client",children:"Client"}),e[58]=he,e[59]=je):(he=e[58],je=e[59]);let ie;e[60]!==Z?(ie=t.jsxs(it,{children:[Z,he,je]}),e[60]=Z,e[61]=ie):ie=e[61];let ee;e[62]!==a.role||e[63]!==de||e[64]!==ie?(ee=t.jsxs("div",{className:"space-y-2",children:[oe,t.jsxs(st,{value:a.role,onValueChange:de,disabled:!1,children:[ge,ie]})]}),e[62]=a.role,e[63]=de,e[64]=ie,e[65]=ee):ee=e[65];let r;e[66]!==b||e[67]!==a||e[68]!==l?(r=l&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(xe,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Assigner aux Boutiques"}),t.jsx("div",{className:"grid max-h-32 grid-cols-2 gap-2 overflow-y-auto rounded-lg border p-1",children:b?.map(w=>t.jsxs("div",{onClick:()=>{const Se=a.shop_ids||[],qe=Se.includes(w.id)?Se.filter(Ae=>Ae!==w.id):[...Se,w.id];u({...a,shop_ids:qe})},className:`flex cursor-pointer items-center gap-2 rounded-md border p-2 transition-colors ${a.shop_ids?.includes(w.id)?"border-indigo-200 bg-indigo-50":"bg-white hover:bg-slate-50"}`,children:[t.jsx("div",{className:`h-3 w-3 rounded-sm border ${a.shop_ids?.includes(w.id)?"border-indigo-600 bg-indigo-600":"border-slate-300"}`}),t.jsx("span",{className:"text-xs font-bold",children:w.name})]},w.id))})]}),e[66]=b,e[67]=a,e[68]=l,e[69]=r):r=e[69];let V;e[70]!==i||e[71]!==a?(V=i&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"is_active",checked:a.is_active,onChange:w=>u({...a,is_active:w.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),t.jsx(xe,{htmlFor:"is_active",children:"Compte actif"})]}),e[70]=i,e[71]=a,e[72]=V):V=e[72];let te;e[73]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx($,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Annuler"}),e[73]=te):te=e[73];const _e=p.isPending||M.isPending,De=p.isPending||M.isPending?"Enregistrement...":"Enregistrer";let ve;e[74]!==_e||e[75]!==De?(ve=t.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[te,t.jsx($,{type:"submit",className:"bg-[#1f61e4] hover:bg-[#1f61e4]/90",disabled:_e,children:De})]}),e[74]=_e,e[75]=De,e[76]=ve):ve=e[76];let Ne;e[77]!==_||e[78]!==Q||e[79]!==ce||e[80]!==le||e[81]!==ee||e[82]!==r||e[83]!==V||e[84]!==ve?(Ne=t.jsxs("form",{onSubmit:_,className:"space-y-4",children:[Q,ce,le,ee,r,V,ve]}),e[77]=_,e[78]=Q,e[79]=ce,e[80]=le,e[81]=ee,e[82]=r,e[83]=V,e[84]=ve,e[85]=Ne):Ne=e[85];let we;e[86]!==W||e[87]!==Ne?(we=t.jsxs(Zt,{children:[W,Ne]}),e[86]=W,e[87]=Ne,e[88]=we):we=e[88];let fe;e[89]!==n||e[90]!==we?(fe=t.jsx(es,{open:n,onOpenChange:c,children:we}),e[89]=n,e[90]=we,e[91]=fe):fe=e[91];let ye;return e[92]!==I||e[93]!==K||e[94]!==fe?(ye=t.jsxs("div",{className:"space-y-6",children:[I,K,fe]}),e[92]=I,e[93]=K,e[94]=fe,e[95]=ye):ye=e[95],ye}function sa(e){return t.jsx(Ve,{variant:"outline",className:"py-0 text-[10px]",children:e.name},e.id)}function aa(e){switch(e){case"manager":return t.jsxs(Ve,{className:"bg-purple-500 hover:bg-purple-600",children:[t.jsx(pt,{className:"mr-1 h-3 w-3"})," Manager"]});case"cashier":return t.jsxs(Ve,{className:"bg-pink-500 hover:bg-pink-600",children:[t.jsx(Ss,{className:"mr-1 h-3 w-3"})," Caissier"]});case"client":return t.jsxs(Ve,{className:"bg-cyan-500 hover:bg-cyan-600",children:[t.jsx(qt,{className:"mr-1 h-3 w-3"})," Client"]});default:return t.jsx(Ve,{variant:"secondary",children:e})}}function la(e){B.error(e.message||"Erreur lors de la suppression")}function ia(e){return G.entities.User.delete(e)}function ra(e){B.error(e.message||"Erreur lors de la mise à jour")}function na(e){const{id:s,data:l}=e;return G.entities.User.update(s,l)}function ca(e){B.error(e.message||"Erreur lors de la création")}function Ha(){const e=Me.c(119),{auth:s}=bt().props,n=s.user?.role==="super-admin",c=We(),[i,d]=O.useState(n?"shops":"overview");let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={queryKey:["all-clients"],queryFn:ga,refetchInterval:3e4},e[0]=m):m=e[0];const{data:o,isLoading:v}=Fe(m);let h;e[1]!==o?(h=o===void 0?[]:o,e[1]=o,e[2]=h):h=e[2];const a=h;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u={queryKey:["all-transactions"],queryFn:pa,refetchInterval:3e4},e[3]=u):u=e[3];const{data:N,isLoading:S}=Fe(u);let b;e[4]!==N?(b=N===void 0?[]:N,e[4]=N,e[5]=b):b=e[5];const C=b;let y,D,f,p;if(e[6]!==a||e[7]!==C){const Ce=J().startOf("day");D=a.filter(mt=>J(mt.created_date).isSameOrAfter(Ce));const xt=C.filter(mt=>J(mt.created_date).isSameOrAfter(Ce));p=xt.filter(ua).reduce(ha,0),f=xt.filter(ma).reduce(xa,0),y=xt.reduce(da,0),e[6]=a,e[7]=C,e[8]=y,e[9]=D,e[10]=f,e[11]=p}else y=e[8],D=e[9],f=e[10],p=e[11];const q=y,M=D.length;let j;e[12]!==a?(j=a.filter(oa),e[12]=a,e[13]=j):j=e[13];let k;e[14]!==j.length||e[15]!==D.length||e[16]!==q||e[17]!==f||e[18]!==p?(k={todayClients:M,waiting:j.length,volumeUSD:p,volumeCDF:f,commissions:q},e[14]=j.length,e[15]=D.length,e[16]=q,e[17]=f,e[18]=p,e[19]=k):k=e[19];const g=k;let _;e[20]!==c?(_=()=>{c.invalidateQueries({queryKey:["all-clients"]}),c.invalidateQueries({queryKey:["all-transactions"]}),B.success("Tableau de bord actualisé")},e[20]=c,e[21]=_):_=e[21];const L=_;let E;e[22]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(Pt,{title:"Manager"}),e[22]=E):E=e[22];let R;e[23]===Symbol.for("react.memo_cache_sentinel")?(R={scale:1.02},e[23]=R):R=e[23];let A,z;e[24]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(be.div,{whileHover:R,className:"relative flex h-16 w-38 items-center justify-center px-4",children:t.jsx("img",{src:"/logo-color.png",alt:"Havifin",className:"h-full w-full object-contain"})}),z=t.jsx("div",{className:"h-10 w-[1px] bg-slate-100"}),e[24]=A,e[25]=z):(A=e[24],z=e[25]);let T;e[26]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("h1",{className:"text-2xl font-black tracking-tight text-slate-900 uppercase",children:["Console"," ",t.jsx("span",{className:"text-indigo-600",children:"Manager"})]}),t.jsx("span",{className:"rounded-full border border-emerald-500/20 bg-emerald-500/10 px-3 py-1 text-[10px] font-black tracking-widest text-emerald-600 uppercase",children:"Live"})]}),e[26]=T):T=e[26];const x=s.user.shop||"Supervision & Reporting";let F;e[27]!==s.user.role||e[28]!==x?(F=t.jsxs("div",{className:"flex items-center gap-6",children:[A,z,t.jsxs("div",{children:[T,t.jsxs("p",{className:"mt-1 flex items-center gap-2 text-[10px] font-black tracking-[0.15em] text-slate-400 uppercase",children:[s.user.role," •"," ",x]})]})]}),e[27]=s.user.role,e[28]=x,e[29]=F):F=e[29];const U=(v||S)&&"animate-spin";let I;e[30]!==U?(I=H("h-5 w-5",U),e[30]=U,e[31]=I):I=e[31];let P;e[32]!==I?(P=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-slate-100 bg-white text-slate-400 shadow-sm",children:t.jsx(Je,{className:I})}),e[32]=I,e[33]=P):P=e[33];let Y;e[34]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] font-black tracking-wider text-slate-400 uppercase",children:"Dernier Sync"}),t.jsx("div",{className:"text-xs font-bold text-slate-600",children:"A l'instant"})]}),e[34]=Y):Y=e[34];let K;e[35]!==P?(K=t.jsxs("div",{className:"hidden items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-1.5 pr-5 xl:flex",children:[P,Y]}),e[35]=P,e[36]=K):K=e[36];let X;e[37]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(Je,{className:"mr-2 h-4 w-4"}),e[37]=X):X=e[37];let W;e[38]!==L?(W=t.jsxs($,{variant:"outline",onClick:L,className:"h-12 rounded-2xl border-slate-200 bg-white px-6 text-xs font-black tracking-widest uppercase shadow-sm transition-all hover:border-indigo-500 hover:text-indigo-600",children:[X,"Actualiser"]}),e[38]=L,e[39]=W):W=e[39];let ne;e[40]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsxs($,{className:"h-12 rounded-2xl bg-slate-900 px-6 text-xs font-black tracking-widest text-white uppercase shadow-xl shadow-slate-900/10 transition-all hover:bg-black active:scale-95",children:[t.jsx(ds,{className:"mr-2 h-4 w-4 text-emerald-400"}),"Exporter Rapport"]}),e[40]=ne):ne=e[40];let se;e[41]!==K||e[42]!==W?(se=t.jsxs("div",{className:"flex items-center gap-4",children:[K,W,ne]}),e[41]=K,e[42]=W,e[43]=se):se=e[43];let Q;e[44]!==F||e[45]!==se?(Q=t.jsxs("header",{className:"z-20 flex h-24 flex-shrink-0 items-center justify-between border-b border-slate-200 bg-white px-10 shadow-[0_1px_3px_rgba(0,0,0,0.02)]",children:[F,se]}),e[44]=F,e[45]=se,e[46]=Q):Q=e[46];const me=`${g.waiting} en attente`;let ae;e[47]!==g.todayClients||e[48]!==me?(ae=t.jsx(tt,{title:"Clients Aujourd'hui",value:g.todayClients,subtitle:me,icon:ct,color:"blue"}),e[47]=g.todayClients,e[48]=me,e[49]=ae):ae=e[49];let ce;e[50]!==g.volumeUSD?(ce=g.volumeUSD.toLocaleString(),e[50]=g.volumeUSD,e[51]=ce):ce=e[51];const le=`$ ${ce}`;let oe;e[52]!==le?(oe=t.jsx(tt,{title:"Volume USD",value:le,icon:Ke,color:"emerald"}),e[52]=le,e[53]=oe):oe=e[53];let de;e[54]!==g.volumeCDF?(de=g.volumeCDF.toLocaleString(),e[54]=g.volumeCDF,e[55]=de):de=e[55];const ge=`${de} FC`;let Z;e[56]!==ge?(Z=t.jsx(tt,{title:"Volume CDF",value:ge,icon:Ge,color:"amber"}),e[56]=ge,e[57]=Z):Z=e[57];let he;e[58]!==g.commissions?(he=g.commissions.toLocaleString(),e[58]=g.commissions,e[59]=he):he=e[59];const je=`$ ${he}`;let ie;e[60]!==je?(ie=t.jsx(tt,{title:"Commissions Estimées",value:je,icon:St,color:"indigo"}),e[60]=je,e[61]=ie):ie=e[61];let ee;e[62]!==ae||e[63]!==oe||e[64]!==Z||e[65]!==ie?(ee=t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[ae,oe,Z,ie]}),e[62]=ae,e[63]=oe,e[64]=Z,e[65]=ie,e[66]=ee):ee=e[66];let r;e[67]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx("h3",{className:"mb-6 px-2 text-[11px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Navigation"}),e[67]=r):r=e[67];let V,te,_e,De,ve,Ne,we;e[68]===Symbol.for("react.memo_cache_sentinel")?(V={id:"overview",label:"Vue d'ensemble",icon:wt},te={id:"transactions",label:"Flux Transactions",icon:It},_e={id:"rates",label:"Gestion Taux",icon:ft},De={id:"users",label:"Utilisateurs",icon:ct},ve={id:"institutions",label:"Banques & Partenaires",icon:Ge},Ne={id:"logs",label:"Journal Activité",icon:_t},we={id:"sessions",label:"Gestion Sessions",icon:dt},e[68]=V,e[69]=te,e[70]=_e,e[71]=De,e[72]=ve,e[73]=Ne,e[74]=we):(V=e[68],te=e[69],_e=e[70],De=e[71],ve=e[72],Ne=e[73],we=e[74]);let fe;e[75]!==n?(fe=[V,te,_e,De,ve,Ne,we,...n?[{id:"shops",label:"Gestion Boutiques",icon:Dt}]:[]],e[75]=n,e[76]=fe):fe=e[76];let ye;e[77]!==i||e[78]!==fe?(ye=t.jsxs("div",{className:"rounded-[2rem] border border-white bg-white/50 p-6 shadow-sm backdrop-blur-xl",children:[r,t.jsx("nav",{className:"space-y-2",children:fe.map(Ce=>t.jsxs("button",{onClick:()=>d(Ce.id),className:H("flex w-full items-center justify-between rounded-2xl border p-4 text-sm font-bold transition-all duration-300",i===Ce.id?"border-indigo-600 bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"border-slate-100 bg-white/40 text-slate-500 hover:border-slate-200 hover:bg-white"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ce.icon,{className:H("h-5 w-5",i===Ce.id?"text-white":"text-slate-400")}),Ce.label]}),t.jsx($t,{className:H("h-4 w-4 transition-transform",i===Ce.id?"translate-x-1":"opacity-0")})]},Ce.id))})]}),e[77]=i,e[78]=fe,e[79]=ye):ye=e[79];let w;e[80]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsxs("div",{className:"group relative overflow-hidden rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-1/2 -translate-y-1/2 bg-indigo-500/20 blur-[80px]"}),t.jsx("h4",{className:"relative z-10 mb-2 text-xl font-black",children:"Besoin d'aide ?"}),t.jsx("p",{className:"relative z-10 mb-6 text-xs font-medium text-slate-400",children:"Consultez la documentation technique du bureau de change."}),t.jsx($,{className:"relative z-10 w-full rounded-xl bg-white text-[10px] font-black tracking-widest text-slate-900 uppercase hover:bg-slate-100",children:"Guide Manager"})]}),e[80]=w):w=e[80];let Se;e[81]!==ye?(Se=t.jsxs("div",{className:"col-span-12 space-y-4 lg:col-span-3",children:[ye,w]}),e[81]=ye,e[82]=Se):Se=e[82];let qe;e[83]!==i||e[84]!==C?(qe=i==="overview"&&t.jsxs("div",{className:"animate-in space-y-8 duration-500 fade-in slide-in-from-bottom-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Performances du Jour"}),t.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Aperçu rapide des flux financiers et des clients."})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("span",{className:"rounded-xl border border-indigo-100 bg-indigo-50 px-4 py-2 text-xs font-black tracking-wider text-indigo-600 uppercase",children:"Hebdomadaire"}),t.jsx("span",{className:"cursor-pointer rounded-xl border border-slate-100 bg-white px-4 py-2 text-xs font-black tracking-wider text-slate-400 uppercase hover:bg-slate-50",children:"Mensuel"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[t.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border border-slate-100 bg-slate-50 p-8 opacity-50",children:[t.jsx(St,{className:"mb-4 h-16 w-16 text-slate-300"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Graphique des Flux (Soon)"})]}),t.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border border-slate-100 bg-slate-50 p-8 opacity-50",children:[t.jsx(wt,{className:"mb-4 h-16 w-16 text-slate-300"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Volume par Guichet (Soon)"})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("h4",{className:"text-lg font-black tracking-tight text-slate-800",children:"Activités Récentes"}),t.jsx($,{variant:"ghost",className:"font-bold text-indigo-600 hover:bg-indigo-50",children:"Voir tout"})]}),t.jsx(Ft,{transactions:C.slice(0,5)})]})]}),e[83]=i,e[84]=C,e[85]=qe):qe=e[85];let Ae;e[86]!==i||e[87]!==C?(Ae=i==="transactions"&&t.jsxs("div",{className:"animate-in space-y-6 duration-300 fade-in",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Journal Complet"}),t.jsxs("div",{className:"relative w-72",children:[t.jsx(gt,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-slate-400"}),t.jsx("input",{placeholder:"Filtrer...",className:"h-10 w-full rounded-xl border-slate-200 pr-4 pl-10 text-sm focus:ring-indigo-500"})]})]}),t.jsx(Ft,{transactions:C})]}),e[86]=i,e[87]=C,e[88]=Ae):Ae=e[88];let Re;e[89]!==i?(Re=i==="rates"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(zs,{})}),e[89]=i,e[90]=Re):Re=e[90];let Ee;e[91]!==i?(Ee=i==="institutions"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Cs,{})}),e[91]=i,e[92]=Ee):Ee=e[92];let Ue;e[93]!==i?(Ue=i==="users"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(ta,{})}),e[93]=i,e[94]=Ue):Ue=e[94];let Le;e[95]!==i?(Le=i==="shops"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Jt,{})}),e[95]=i,e[96]=Le):Le=e[96];let Te;e[97]!==i?(Te=i==="sessions"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Qs,{})}),e[97]=i,e[98]=Te):Te=e[98];let Pe;e[99]!==i?(Pe=i==="logs"&&t.jsxs("div",{className:"flex h-96 animate-in flex-col items-center justify-center space-y-4 opacity-40 duration-300 zoom-in-95",children:[t.jsx(_t,{className:"h-20 w-20 text-slate-200"}),t.jsx("p",{className:"text-xs font-black tracking-[0.3em] text-slate-400 uppercase",children:"Journal d'audit Manager bientôt disponible"})]}),e[99]=i,e[100]=Pe):Pe=e[100];let Ie;e[101]!==qe||e[102]!==Ae||e[103]!==Re||e[104]!==Ee||e[105]!==Ue||e[106]!==Le||e[107]!==Te||e[108]!==Pe?(Ie=t.jsx("div",{className:"col-span-12 lg:col-span-9",children:t.jsx("div",{className:"min-h-[600px] overflow-hidden rounded-[2.5rem] border border-white bg-white/80 shadow-xl shadow-slate-200/50 backdrop-blur-xl",children:t.jsxs("div",{className:"p-10",children:[qe,Ae,Re,Ee,Ue,Le,Te,Pe]})})}),e[101]=qe,e[102]=Ae,e[103]=Re,e[104]=Ee,e[105]=Ue,e[106]=Le,e[107]=Te,e[108]=Pe,e[109]=Ie):Ie=e[109];let ze;e[110]!==Se||e[111]!==Ie?(ze=t.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[Se,Ie]}),e[110]=Se,e[111]=Ie,e[112]=ze):ze=e[112];let He;e[113]!==ee||e[114]!==ze?(He=t.jsx("main",{className:"flex-1 overflow-y-auto bg-[url('/grid.svg')] bg-[length:40px_40px] px-10 py-10",children:t.jsxs("div",{className:"w-full max-w-none space-y-10",children:[ee,ze]})}),e[113]=ee,e[114]=ze,e[115]=He):He=e[115];let Ze;return e[116]!==Q||e[117]!==He?(Ze=t.jsxs(zt,{currentPageName:"Manager",children:[E,t.jsxs("div",{className:"flex flex-col overflow-hidden bg-[#f8fafc]",children:[Q,He]})]}),e[116]=Q,e[117]=He,e[118]=Ze):Ze=e[118],Ze}function oa(e){return e.status==="waiting"}function da(e,s){return e+(parseFloat(s.commission)||0)}function xa(e,s){return e+(s.amount_from||0)}function ma(e){return e.currency_from==="CDF"}function ha(e,s){return e+(s.amount_from||0)}function ua(e){return e.currency_from==="USD"}function pa(){return G.entities.Transaction.list("-created_date",500)}function ga(){return G.entities.Client.list("-created_date",500)}export{Ha as default};
