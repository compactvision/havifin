import{c as q,b as A,j as s,H as D,L as R}from"./app-XPqbswjP.js";import{b as S}from"./base44Client-D_8p-kpS.js";import{B}from"./badge-BZemhbWI.js";import{B as Y}from"./index-OjgNDduT.js";import{T as H,a as r,b as $,c as x,d as z,e as F}from"./table-Dc3gysDx.js";import{A as T}from"./app-main-p7Td2XQe.js";import{u as C}from"./users-3glLT9eq.js";import{h as L}from"./moment-B-YVwB4U.js";import{A as O}from"./arrow-left-DsqDSJSh.js";import{L as P}from"./lock-open-42mnpy67.js";import{L as U}from"./lock-zW8xBJEF.js";import{E as K}from"./eye-CVeGzO8K.js";/* empty css            */import"./axios-G5n3UMvP.js";import"./createLucideIcon-CscEagRl.js";function oe(t){const e=q.c(30),{id:a}=t;A();let p;e[0]!==a?(p={queryKey:["cash-register",a],queryFn:()=>S.entities.CashRegister.show(Number(a))},e[0]=a,e[1]=p):p=e[1];const{data:f,isLoading:E}=C(p);let j;e[2]!==a?(j={queryKey:["cash-register-sessions",a],queryFn:()=>S.entities.CashSession.list({cash_register_id:a})},e[2]=a,e[3]=j):j=e[3];const{data:u,isLoading:M}=C(j);let b;e[4]!==u?(b=u===void 0?[]:u,e[4]=u,e[5]=b):b=e[5];const l=b;if(E||M||!f){let v;return e[6]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(T,{currentPageName:"CashMoney",children:s.jsx("div",{className:"flex h-screen items-center justify-center",children:"Chargement..."})}),e[6]=v):v=e[6],v}const k=`Historique - ${f.name}`;let i;e[7]!==k?(i=s.jsx(D,{title:k}),e[7]=k,e[8]=i):i=e[8];let g,N;e[9]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(R,{href:"/cash/dashboard",children:s.jsx(Y,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-2xl border border-white/40 bg-white/50 shadow-sm backdrop-blur-md hover:bg-white/80",children:s.jsx(O,{className:"h-5 w-5 text-pink-600"})})}),N=s.jsx("div",{className:"h-10 w-[1px] bg-pink-100"}),e[9]=g,e[10]=N):(g=e[9],N=e[10]);let n;e[11]!==f.name?(n=s.jsx("h1",{className:"text-xl font-black tracking-tight text-slate-900",children:f.name}),e[11]=f.name,e[12]=n):n=e[12];let w;e[13]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("p",{className:"text-xs font-bold text-pink-500 uppercase",children:"Historique des Sessions"}),e[13]=w):w=e[13];let c;e[14]!==n?(c=s.jsx("header",{className:"sticky top-0 z-50 mb-10 flex h-24 w-full flex-col gap-6 border-b border-white/20 bg-white/70 px-6 py-4 shadow-sm backdrop-blur-xl md:flex-row md:items-center md:justify-between md:px-10",children:s.jsxs("div",{className:"flex items-center gap-4",children:[g,N,s.jsxs("div",{className:"flex flex-col",children:[n,w]})]})}),e[14]=n,e[15]=c):c=e[15];let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx($,{children:s.jsxs(H,{children:[s.jsx(x,{children:"ID"}),s.jsx(x,{children:"Statut"}),s.jsx(x,{children:"Ouverture"}),s.jsx(x,{children:"Fermeture"}),s.jsx(x,{children:"Caissier"}),s.jsx(x,{className:"text-right",children:"Actions"})]})}),e[16]=y):y=e[16];let o;e[17]!==l?(o=l.map(I),e[17]=l,e[18]=o):o=e[18];let d;e[19]!==l.length?(d=l.length===0&&s.jsx(H,{children:s.jsx(r,{colSpan:6,className:"h-24 text-center text-slate-400",children:"Aucune session trouvée."})}),e[19]=l.length,e[20]=d):d=e[20];let m;e[21]!==o||e[22]!==d?(m=s.jsx("div",{className:"rounded-3xl border border-slate-200/60 bg-white p-6 shadow-sm",children:s.jsxs(z,{children:[y,s.jsxs(F,{children:[o,d]})]})}),e[21]=o,e[22]=d,e[23]=m):m=e[23];let h;e[24]!==c||e[25]!==m?(h=s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-pink-50/30 px-6 py-8 md:px-10",children:[c,m]}),e[24]=c,e[25]=m,e[26]=h):h=e[26];let _;return e[27]!==h||e[28]!==i?(_=s.jsxs(T,{currentPageName:"CashMoney",children:[i,h]}),e[27]=h,e[28]=i,e[29]=_):_=e[29],_}function I(t){return s.jsxs(H,{children:[s.jsxs(r,{className:"font-bold",children:["#",t.id]}),s.jsx(r,{children:s.jsxs(B,{variant:t.status==="open"?"default":"secondary",className:t.status==="open"?"bg-green-500":"bg-slate-200 text-slate-600",children:[t.status==="open"?s.jsx(P,{className:"mr-1 h-3 w-3"}):s.jsx(U,{className:"mr-1 h-3 w-3"}),t.status==="open"?"OUVERTE":"CLÔTURÉE"]})}),s.jsx(r,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-slate-900",children:L(t.opened_at).format("DD/MM/YYYY")}),s.jsx("span",{className:"text-xs text-slate-500",children:L(t.opened_at).format("HH:mm")})]})}),s.jsx(r,{children:t.closed_at?s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-slate-900",children:L(t.closed_at).format("DD/MM/YYYY")}),s.jsx("span",{className:"text-xs text-slate-500",children:L(t.closed_at).format("HH:mm")})]}):s.jsx("span",{className:"text-slate-400",children:"-"})}),s.jsx(r,{children:t.user?.name||`User #${t.user_id}`}),s.jsx(r,{className:"text-right",children:s.jsx(R,{href:`/cash/sessions/${t.id}`,children:s.jsxs(Y,{variant:"ghost",size:"sm",children:[s.jsx(K,{className:"mr-2 h-4 w-4"}),"Détails"]})})})]},t.id)}export{oe as default};
