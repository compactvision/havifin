import{c as B,j as a,r as A,R as P}from"./app-6bs8d8QB.js";import{c as $,m as y,b as q}from"./createLucideIcon-dTi0n6Eb.js";import{d as F,a as z,B as D,b as O,e as E,A as H,L as R,I as L,f as I}from"./app-main-BebEPR0-.js";import{a as V,C as Z,P as Q}from"./phone-BxHtm0X4.js";import{C as U,A as G}from"./clock-of5YTFl6.js";/* empty css            */const J=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],K=$("Building2",J);const W=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Y=$("CircleCheck",W);const ee=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],te=$("Smartphone",ee);const ae=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],se=$("Ticket",ae),le=[{id:"change",name:"Change",icon:F,description:"Échanger des devises",color:"text-amber-500"},{id:"depot",name:"Dépôt",icon:V,description:"Déposer de l'argent",color:"text-green-500"},{id:"retrait",name:"Retrait",icon:Z,description:"Retirer de l'argent",color:"text-blue-500"}];function ie(t){const e=B.c(5),{selectedOperation:i,onSelect:c}=t;let o;e[0]!==c||e[1]!==i?(o=le.map(s=>{const d=s.icon;return a.jsxs(y.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>c(s.id),className:z("p-6 rounded-2xl border-2 transition-all duration-200 text-center",i===s.id?"border-amber-500 bg-gradient-to-br from-amber-50 to-amber-100 shadow-xl shadow-amber-100":"border-slate-200 bg-white hover:border-slate-300 hover:shadow-lg"),children:[a.jsx(d,{className:z("w-10 h-10 mx-auto mb-3",s.color)}),a.jsx("h3",{className:"text-lg font-bold text-slate-800",children:s.name}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:s.description})]},s.id)}),e[0]=c,e[1]=i,e[2]=o):o=e[2];let l;return e[3]!==o?(l=a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o}),e[3]=o,e[4]=l):l=e[4],l}const X={mobile:[{id:"mpesa",name:"M-Pesa",color:"bg-green-500"},{id:"orange_money",name:"Orange Money",color:"bg-orange-500"},{id:"airtel_money",name:"Airtel Money",color:"bg-red-500"},{id:"afrimoney",name:"Afrimoney",color:"bg-blue-500"}],banks:[{id:"rawbank",name:"Rawbank",color:"bg-blue-700"},{id:"equity_bcdc",name:"Equity BCDC",color:"bg-purple-600"},{id:"tmb",name:"TMB",color:"bg-teal-600"},{id:"fbn_bank",name:"FBN Bank",color:"bg-indigo-600"}]};function re(t){const e=B.c(15),{selectedService:i,onSelect:c}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(te,{className:"w-5 h-5 text-amber-500"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Mobile Money"})]}),e[0]=o):o=e[0];let l;e[1]!==c||e[2]!==i?(l=X.mobile.map(n=>a.jsx(y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(n.id),className:z("p-4 rounded-xl border-2 transition-all duration-200 text-left",i===n.id?"border-amber-500 bg-amber-50 shadow-lg shadow-amber-100":"border-slate-200 bg-white hover:border-slate-300"),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:z("w-3 h-3 rounded-full",n.color)}),a.jsx("span",{className:"font-medium text-slate-700",children:n.name})]})},n.id)),e[1]=c,e[2]=i,e[3]=l):l=e[3];let s;e[4]!==l?(s=a.jsxs("div",{children:[o,a.jsx("div",{className:"grid grid-cols-2 gap-3",children:l})]}),e[4]=l,e[5]=s):s=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(K,{className:"w-5 h-5 text-amber-500"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Banques"})]}),e[6]=d):d=e[6];let m;e[7]!==c||e[8]!==i?(m=X.banks.map(n=>a.jsx(y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(n.id),className:z("p-4 rounded-xl border-2 transition-all duration-200 text-left",i===n.id?"border-amber-500 bg-amber-50 shadow-lg shadow-amber-100":"border-slate-200 bg-white hover:border-slate-300"),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:z("w-3 h-3 rounded-full",n.color)}),a.jsx("span",{className:"font-medium text-slate-700",children:n.name})]})},n.id)),e[7]=c,e[8]=i,e[9]=m):m=e[9];let r;e[10]!==m?(r=a.jsxs("div",{children:[d,a.jsx("div",{className:"grid grid-cols-2 gap-3",children:m})]}),e[10]=m,e[11]=r):r=e[11];let x;return e[12]!==s||e[13]!==r?(x=a.jsxs("div",{className:"space-y-6",children:[s,r]}),e[12]=s,e[13]=r,e[14]=x):x=e[14],x}function ne(t){const e=B.c(25),{ticketNumber:i,onNewTicket:c}=t;let o,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={opacity:0,scale:.9},l={opacity:1,scale:1},e[0]=o,e[1]=l):(o=e[0],l=e[1]);let s,d,m;e[2]===Symbol.for("react.memo_cache_sentinel")?(s={scale:0},d={scale:1},m={delay:.2,type:"spring",stiffness:200},e[2]=s,e[3]=d,e[4]=m):(s=e[2],d=e[3],m=e[4]);let r,x,n;e[5]===Symbol.for("react.memo_cache_sentinel")?(r=a.jsx(y.div,{initial:s,animate:d,transition:m,className:"w-24 h-24 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-8 shadow-2xl shadow-green-200",children:a.jsx(Y,{className:"w-12 h-12 text-white"})}),x=a.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Demande enregistrée!"}),n=a.jsx("p",{className:"text-slate-500 mb-8",children:"Veuillez patienter, vous serez appelé bientôt"}),e[5]=r,e[6]=x,e[7]=n):(r=e[5],x=e[6],n=e[7]);let j,S,N;e[8]===Symbol.for("react.memo_cache_sentinel")?(N={y:20,opacity:0},j={y:0,opacity:1},S={delay:.4},e[8]=j,e[9]=S,e[10]=N):(j=e[8],S=e[9],N=e[10]);let k;e[11]===Symbol.for("react.memo_cache_sentinel")?(k=a.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-400 mb-4",children:[a.jsx(se,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium uppercase tracking-wider",children:"Votre numéro"})]}),e[11]=k):k=e[11];let b;e[12]!==i?(b=a.jsx("div",{className:"text-6xl font-black text-white mb-4 font-mono tracking-wider",children:i}),e[12]=i,e[13]=b):b=e[13];let _;e[14]===Symbol.for("react.memo_cache_sentinel")?(_=a.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-400 text-sm",children:[a.jsx(U,{className:"w-4 h-4"}),a.jsx("span",{children:"Surveillez l'écran d'affichage"})]}),e[14]=_):_=e[14];let p;e[15]!==b?(p=a.jsxs(y.div,{initial:N,animate:j,transition:S,className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-3xl p-8 max-w-sm mx-auto shadow-2xl",children:[k,b,_]}),e[15]=b,e[16]=p):p=e[16];let u,v,w;e[17]===Symbol.for("react.memo_cache_sentinel")?(u={opacity:0},v={opacity:1},w={delay:.6},e[17]=u,e[18]=v,e[19]=w):(u=e[17],v=e[18],w=e[19]);let f;e[20]!==c?(f=a.jsx(y.div,{initial:u,animate:v,transition:w,className:"mt-8",children:a.jsx(D,{onClick:c,variant:"outline",className:"rounded-full px-8",children:"Nouvelle demande"})}),e[20]=c,e[21]=f):f=e[21];let g;return e[22]!==p||e[23]!==f?(g=a.jsxs(y.div,{initial:o,animate:l,className:"text-center py-12",children:[r,x,n,p,f]}),e[22]=p,e[23]=f,e[24]=g):g=e[24],g}const oe=()=>{const t=String.fromCharCode(65+Math.floor(Math.random()*26)),e=String(Math.floor(Math.random()*999)+1).padStart(3,"0");return`${t}${e}`};function pe(){const t=B.c(34),[e,i]=A.useState(1),[c,o]=A.useState(null);let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={phone:"",operation_type:"",service:""},t[0]=l):l=t[0];const[s,d]=A.useState(l);let m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m={mutationFn:ce,onSuccess:h=>{o(h),i(3)}},t[1]=m):m=t[1];const r=O(m);let x;t[2]!==r||t[3]!==s||t[4]!==e?(x=()=>{e===1&&s.phone?i(2):e===2&&(s.operation_type==="change"?r.mutate({...s,service:"bureau"}):s.operation_type&&s.service&&r.mutate(s))},t[2]=r,t[3]=s,t[4]=e,t[5]=x):x=t[5];const n=x;let j;t[6]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{i(1),o(null),d({phone:"",operation_type:"",service:""})},t[6]=j):j=t[6];const S=j;let N;t[7]!==s||t[8]!==e?(N=()=>e===1?s.phone&&s.phone.length>=9:e===2?s.operation_type==="change"?!0:s.operation_type&&s.service:!0,t[7]=s,t[8]=e,t[9]=N):N=t[9];const k=N;let b;t[10]!==s||t[11]!==e||t[12]!==c?(b=()=>{switch(e){case 1:return a.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6 text-center",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-3xl bg-gradient-to-br from-[#1f61e4] to-[#2000ff] shadow-2xl shadow-[#1f61e4]/30",children:a.jsx(Q,{className:"h-10 w-10 text-white"})}),a.jsx("h2",{className:"text-3xl font-black text-slate-800",children:"Bienvenue"}),a.jsx("p",{className:"mt-2 text-lg text-slate-500",children:"Entrez votre numéro de téléphone"})]}),a.jsx("div",{className:"mx-auto max-w-sm",children:a.jsx(L,{type:"tel",value:s.phone,onChange:h=>d({...s,phone:h.target.value}),placeholder:"+243 XXX XXX XXX",className:"h-16 rounded-2xl border-2 border-slate-100 text-center text-xl shadow-lg shadow-slate-100/50 focus:border-[#1f61e4] focus:ring-[#1f61e4]",autoFocus:!0})})]});case 2:return a.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-8",children:[a.jsxs("div",{className:"mb-6 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Que souhaitez-vous faire?"}),a.jsx("p",{className:"mt-1 text-slate-500",children:"Choisissez votre opération"})]}),a.jsxs("div",{children:[a.jsx(R,{className:"mb-3 block text-base font-semibold text-slate-700",children:"Opération"}),a.jsx(ie,{selectedOperation:s.operation_type,onSelect:h=>d({...s,operation_type:h,service:h==="change"?"bureau":""})})]}),s.operation_type&&s.operation_type!=="change"&&a.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsx(R,{className:"mb-3 block text-base font-semibold text-slate-700",children:"Service de paiement"}),a.jsx(re,{selectedService:s.service,onSelect:h=>d({...s,service:h})})]}),s.operation_type==="change"&&a.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-xl border border-amber-200 bg-amber-50 p-4 text-center text-sm font-medium text-amber-800",children:"Opération de change au guichet. Cliquez sur Confirmer pour obtenir votre ticket."})]});case 3:return a.jsx(ne,{ticketNumber:c,onNewTicket:S});default:return null}},t[10]=s,t[11]=e,t[12]=c,t[13]=b):b=t[13];const _=b;let p;t[14]===Symbol.for("react.memo_cache_sentinel")?(p=a.jsxs("div",{className:"mb-12 text-center",children:[a.jsxs("h1",{className:"mb-2 text-4xl font-black tracking-tight text-slate-900 md:text-5xl",children:["Bureau de"," ",a.jsx("span",{className:"text-[#1f61e4]",children:"Change"})]}),a.jsx("p",{className:"text-slate-500",children:"Service rapide et fiable"})]}),t[14]=p):p=t[14];let u;t[15]!==e?(u=e<3&&a.jsx("div",{className:"mb-8 flex justify-center",children:a.jsx("div",{className:"flex items-center gap-3",children:[1,2].map(h=>a.jsxs(P.Fragment,{children:[a.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full font-bold transition-all ${h===e?"scale-110 bg-[#1f61e4] text-white shadow-lg shadow-[#1f61e4]/30":h<e?"bg-[#00e2f6] text-white":"bg-slate-200 text-slate-400"}`,children:h}),h<2&&a.jsx("div",{className:`h-1 w-12 rounded-full transition-all ${h<e?"bg-[#00e2f6]":"bg-slate-200"}`})]},h))})}),t[15]=e,t[16]=u):u=t[16];let v,w;t[17]===Symbol.for("react.memo_cache_sentinel")?(v=a.jsx("div",{className:"absolute top-0 right-0 h-64 w-64 translate-x-1/2 -translate-y-1/2 rounded-full bg-[#00e2f6]/5"}),w=a.jsx("div",{className:"absolute bottom-0 left-0 h-48 w-48 -translate-x-1/2 translate-y-1/2 rounded-full bg-[#bf15cf]/5"}),t[17]=v,t[18]=w):(v=t[17],w=t[18]);let f;t[19]!==_?(f=_(),t[19]=_,t[20]=f):f=t[20];let g;t[21]!==f?(g=a.jsx(G,{mode:"wait",children:f}),t[21]=f,t[22]=g):g=t[22];let C;t[23]!==k||t[24]!==r||t[25]!==n||t[26]!==e?(C=e<3&&a.jsx("div",{className:"mt-12 flex justify-center",children:a.jsx(D,{onClick:n,disabled:!k()||r.isPending,size:"lg",className:"h-14 rounded-full bg-gradient-to-r from-[#1f61e4] to-[#2000ff] px-12 text-lg text-white shadow-xl shadow-[#1f61e4]/30 hover:from-[#2000ff] hover:to-[#1f61e4] disabled:opacity-50",children:r.isPending?a.jsx(E,{className:"h-5 w-5 animate-spin"}):a.jsxs(a.Fragment,{children:[e===2?"Confirmer":"Suivant",a.jsx(H,{className:"ml-2 h-5 w-5"})]})})}),t[23]=k,t[24]=r,t[25]=n,t[26]=e,t[27]=C):C=t[27];let M;t[28]!==g||t[29]!==C?(M=a.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-white p-8 shadow-2xl shadow-slate-200/50 md:p-12",children:[v,w,a.jsxs("div",{className:"relative z-10",children:[g,C]})]}),t[28]=g,t[29]=C,t[30]=M):M=t[30];let T;return t[31]!==M||t[32]!==u?(T=a.jsx(I,{currentPageName:"Client",children:a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-[#00e2f6]/10",children:a.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[p,u,M]})})}),t[31]=M,t[32]=u,t[33]=T):T=t[33],T}async function ce(t){const e=oe(),i={...t,ticket_number:e,status:"waiting"};return await q.entities.Client.create(i),e}export{pe as default};
