import{r as m,j as s,a as ss,c as ts,b as as,u as ls,H as rs,L as ns}from"./app-Cxt9o3Ni.js";import{b as Me}from"./base44Client-DmNi4SLu.js";import{B as _,t as D}from"./index-DuH3KfOy.js";import{D as Ke,a as Pe,b as Qe,c as Je,d as Ge,e as We}from"./dialog-jwl-8dtj.js";import{L as xe,I as $e}from"./label-Crfn3rDI.js";import{S as is,a as os,b as cs,c as ds,d as ms}from"./select-Cln87ae0.js";import{T as Xe}from"./textarea-8svmIBQp.js";import{B as Ye}from"./banknote-c8RyUxNW.js";import{c as Ze}from"./createLucideIcon-DKGtSlCQ.js";import{B as Te}from"./badge-CR7ZYRZw.js";import{C as Oe,a as ze,b as De,c as Ee}from"./card-BFvogdOn.js";import{T as Be,a as me,b as xs,c as he,d as hs,e as us}from"./table-DNhAI4A8.js";import{A as Ve,U as ps}from"./app-main-BA-8pEG-.js";import{u as qe}from"./users-N9kzuMsT.js";import{h as Ie}from"./moment-B-YVwB4U.js";import{H as fs}from"./history-Ckt2LLIO.js";import{A as bs}from"./arrow-left-Bzq6LAWX.js";import{L as gs}from"./lock-open-C-O4MdUU.js";import{L as js}from"./lock-IeFk-np7.js";import{C as Ns}from"./clock-Dg7t4-9j.js";import{C as vs}from"./circle-check-CDfo5YK2.js";import{T as ys}from"./triangle-alert-D07wf3kl.js";/* empty css            */import"./axios-DaOL9Jop.js";import"./index-Dboi62kf.js";import"./check-BBrG0uQh.js";const ws=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],Cs=Ze("CircleMinus",ws);const _s=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ss=Ze("CirclePlus",_s),ks=["USD","CDF","EUR"];function Fs({session:a,isOpen:e,onClose:l,onSuccess:h}){const[u,g]=m.useState(!1),[c,S]=m.useState("deposit"),[d,t]=m.useState(""),[E,n]=m.useState("USD"),[i,T]=m.useState(""),[j,k]=m.useState(""),R=async r=>{if(r.preventDefault(),!d||parseFloat(d)<=0){D.error("Veuillez saisir un montant valide");return}if(!i){D.error("Veuillez saisir un motif");return}if(!j){D.error("Veuillez saisir le nom de la personne");return}g(!0);try{await ss.post("/api/cash/movements",{cash_session_id:a.id,type:c,amount:d,currency:E,description:i,metadata:{performed_by:j}}),D.success("Mouvement enregistré avec succès"),h(),l(),t(""),T(""),k("")}catch(N){D.error(N.response?.data?.message||"Erreur lors de l'enregistrement")}finally{g(!1)}};return s.jsx(Ke,{open:e,onOpenChange:l,children:s.jsxs(Pe,{className:"overflow-hidden rounded-3xl border-none bg-white p-0 shadow-2xl sm:max-w-[450px]",children:[s.jsx("div",{className:`h-2 w-full ${c==="deposit"?"bg-green-500":"bg-red-500"}`}),s.jsxs("form",{onSubmit:R,children:[s.jsxs("div",{className:"p-8 pb-4",children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-3 text-2xl font-black text-slate-900",children:[s.jsx(Ye,{className:"h-6 w-6 text-brand-blue"}),"Mouvement de Caisse"]}),s.jsx(Ge,{className:"mt-2 text-xs font-bold tracking-tight text-slate-400 uppercase",children:"Enregistrer une entrée ou sortie de fonds exceptionnelle"})]}),s.jsxs("div",{className:"grid gap-6 py-8",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>S("deposit"),className:`flex flex-1 flex-col items-center justify-center rounded-2xl border-2 p-4 transition-all ${c==="deposit"?"border-green-500 bg-green-50 text-green-700":"border-slate-100 bg-slate-50 text-slate-400 grayscale hover:border-green-200 hover:grayscale-0"}`,children:[s.jsx(Ss,{className:"mb-2 h-8 w-8"}),s.jsx("span",{className:"text-xs font-black uppercase",children:"Entrée"})]}),s.jsxs("button",{type:"button",onClick:()=>S("withdrawal"),className:`flex flex-1 flex-col items-center justify-center rounded-2xl border-2 p-4 transition-all ${c==="withdrawal"?"border-red-500 bg-red-50 text-red-700":"border-slate-100 bg-slate-50 text-slate-400 grayscale hover:border-red-200 hover:grayscale-0"}`,children:[s.jsx(Cs,{className:"mb-2 h-8 w-8"}),s.jsx("span",{className:"text-xs font-black uppercase",children:"Sortie"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(xe,{htmlFor:"amount",className:"px-1 text-xs font-black text-slate-500 uppercase",children:"Montant"}),s.jsx($e,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:d,onChange:r=>t(r.target.value),className:"h-12 rounded-xl border-slate-200 bg-slate-50 text-lg font-black transition-all focus:bg-white"})]}),s.jsxs("div",{className:"w-32 space-y-2",children:[s.jsx(xe,{htmlFor:"currency",className:"px-1 text-xs font-black text-slate-500 uppercase",children:"Devise"}),s.jsxs(is,{value:E,onValueChange:n,children:[s.jsx(os,{className:"h-12 rounded-xl border-slate-200 bg-slate-50 font-bold",children:s.jsx(cs,{})}),s.jsx(ds,{children:ks.map(r=>s.jsx(ms,{value:r,className:"font-bold",children:r},r))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"description",className:"px-1 text-xs font-black text-slate-500 uppercase",children:"Motif du mouvement"}),s.jsx(Xe,{id:"description",placeholder:"Pourquoi ce mouvement ? (ex: Approvisionnement, Frais divers...)",value:i,onChange:r=>T(r.target.value),className:"min-h-[100px] rounded-xl border-slate-200 bg-slate-50 font-medium transition-all focus:bg-white"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"performedBy",className:"px-1 text-xs font-black text-slate-500 uppercase",children:"Effectué par (Nom)"}),s.jsx($e,{id:"performedBy",placeholder:"Nom de la personne (ex: Jean-Luc, Manager...)",value:j,onChange:r=>k(r.target.value),className:"h-12 rounded-xl border-slate-200 bg-slate-50 font-medium transition-all focus:bg-white"})]})]})]}),s.jsxs(We,{className:"border-t border-slate-100 bg-slate-50/80 p-6",children:[s.jsx(_,{type:"button",variant:"ghost",onClick:l,className:"h-12 rounded-xl font-bold text-slate-500 hover:bg-slate-200",children:"Annuler"}),s.jsx(_,{type:"submit",disabled:u,className:`h-12 rounded-xl px-8 font-black text-white shadow-lg transition-all active:scale-95 ${c==="deposit"?"bg-green-600 shadow-green-200 hover:bg-green-700":"bg-red-600 shadow-red-200 hover:bg-red-700"}`,children:u?"Enregistrement...":"Valider le Mouvement"})]})]})]})})}const Ms=["USD","CDF","EUR"];function Ds({session:a,isOpen:e,onClose:l,onSuccess:h}){const[u,g]=m.useState(!1),[c,S]=m.useState({USD:"0",CDF:"0",EUR:"0"}),[d,t]=m.useState(""),E=async n=>{if(n.preventDefault(),!!a&&confirm("Êtes-vous sûr de vouloir clôturer cette caisse ? Cette action est irréversible.")){g(!0);try{await Me.entities.CashSession.close(a.id,{closing_amounts:c,notes:d}),D.success("Session clôturée avec succès"),h(),l()}catch(i){D.error(i.response?.data?.message||"Erreur lors de la clôture")}finally{g(!1)}}};return s.jsx(Ke,{open:e,onOpenChange:l,children:s.jsxs(Pe,{className:"sm:max-w-[425px]",children:[s.jsxs(Qe,{children:[s.jsx(Je,{children:"Clôture de Caisse"}),s.jsxs(Ge,{children:["Veuillez compter et saisir le solde RÉEL pour la session #",a?.id,". Tout écart sera enregistré."]})]}),s.jsxs("form",{onSubmit:E,className:"grid gap-4 py-4",children:[s.jsx("div",{className:"grid gap-4",children:Ms.map(n=>s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(xe,{htmlFor:`close-amount-${n}`,className:"text-right font-bold",children:n}),s.jsx($e,{id:`close-amount-${n}`,type:"number",min:"0",step:"0.01",value:c[n],onChange:i=>S({...c,[n]:i.target.value}),className:"col-span-3"})]},n))}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(xe,{htmlFor:"close-notes",className:"text-right",children:"Notes"}),s.jsx(Xe,{id:"close-notes",value:d,onChange:n=>t(n.target.value),className:"col-span-3",placeholder:"Remarques sur la clôture..."})]}),s.jsxs(We,{children:[s.jsx(_,{type:"button",variant:"outline",onClick:l,children:"Annuler"}),s.jsx(_,{type:"submit",variant:"destructive",disabled:u,children:u?"Clôture...":"Clôturer la Caisse"})]})]})]})})}function ct(a){const e=ts.c(135),{id:l}=a;as();const h=ls(),[u,g]=m.useState(!1),[c,S]=m.useState(!1);let d;e[0]!==l?(d={queryKey:["cash-session",l],queryFn:()=>Me.entities.CashSession.show(l)},e[0]=l,e[1]=d):d=e[1];const{data:t,isLoading:E}=qe(d);let n,i;e[2]!==l?(n=["cash-movements",l],i=async()=>(await Me.entities.CashSession.movements(l)).data,e[2]=l,e[3]=n,e[4]=i):(n=e[3],i=e[4]);const T=!!t;let j;e[5]!==n||e[6]!==i||e[7]!==T?(j={queryKey:n,queryFn:i,enabled:T},e[5]=n,e[6]=i,e[7]=T,e[8]=j):j=e[8];const{data:k}=qe(j);let R;e[9]!==k?(R=k===void 0?[]:k,e[9]=k,e[10]=R):R=e[10];const r=R;let N,L;e[11]!==l?(N=["cash-session-report",l],L=()=>Me.entities.CashSession.report(l),e[11]=l,e[12]=N,e[13]=L):(N=e[12],L=e[13]);const Re=!!t;let ue;e[14]!==Re||e[15]!==N||e[16]!==L?(ue={queryKey:N,queryFn:L,enabled:Re},e[14]=Re,e[15]=N,e[16]=L,e[17]=ue):ue=e[17],qe(ue);let pe;e[18]!==l||e[19]!==h?(pe=()=>{h.invalidateQueries({queryKey:["cash-session",l]}),h.invalidateQueries({queryKey:["cash-movements",l]}),h.invalidateQueries({queryKey:["cash-registers"]})},e[18]=l,e[19]=h,e[20]=pe):pe=e[20];const A=pe;if(E||!t){let x;return e[21]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(Ve,{currentPageName:"CashMoney",children:s.jsx("div",{className:"flex h-screen items-center justify-center",children:"Chargement..."})}),e[21]=x):x=e[21],x}const o=t.status==="open";let fe;e[22]!==o||e[23]!==r||e[24]!==t.amounts?(fe=x=>{const J=t.amounts?.find(M=>M.currency===x);if(!J)return null;const G=parseFloat(J.opening_amount),p=J.closing_amount_real?parseFloat(J.closing_amount_real):null,F=r.filter(M=>M.currency===x),f=F.filter(Hs).reduce(As,0),W=F.filter(Ls).reduce(Rs,0),X=G+f-W,b=p!==null?p-X:null;return{currency:x,opening:G,totalIn:f,totalOut:W,theoretical:X,closingReal:p,difference:b,status:!o&&p!==null?Math.abs(b)<.01?"perfect":"mismatch":"pending"}},e[22]=o,e[23]=r,e[24]=t.amounts,e[25]=fe):fe=e[25];const Le=fe;let H,U,q,$,v,y,w,B,C;if(e[26]!==Le||e[27]!==o||e[28]!==t.closed_at||e[29]!==t.id||e[30]!==t.opened_at||e[31]!==t.register?.name||e[32]!==t.register?.shop?.name||e[33]!==t.user?.name||e[34]!==t.user_id){const J=["USD","CDF","EUR"].map(es=>Le(es)).filter(Boolean);H=Ve,B="CashMoney";const G=`Session #${t.id}`;e[44]!==G?(C=s.jsx(rs,{title:G}),e[44]=G,e[45]=C):C=e[45],$="min-h-screen bg-gradient-to-br from-slate-50 via-white to-pink-50/30 px-6 py-8 md:px-10";let p,F;e[46]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(ns,{href:"/cash/dashboard",children:s.jsx(_,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-2xl border border-white/40 bg-white/50 shadow-sm backdrop-blur-md hover:bg-white/80",children:s.jsx(bs,{className:"h-5 w-5 text-pink-600"})})}),F=s.jsx("div",{className:"h-10 w-[1px] bg-pink-100"}),e[46]=p,e[47]=F):(p=e[46],F=e[47]);let f;e[48]!==t.id?(f=s.jsxs("h1",{className:"text-xl font-black tracking-tight text-slate-900",children:["Session #",t.id]}),e[48]=t.id,e[49]=f):f=e[49];const W=o?"default":"secondary",X=o?"bg-green-500 hover:bg-green-600":"bg-slate-200 text-slate-600";let b;e[50]!==o?(b=o?s.jsx(gs,{className:"mr-1 h-3 w-3"}):s.jsx(js,{className:"mr-1 h-3 w-3"}),e[50]=o,e[51]=b):b=e[51];const M=o?"OUVERTE":"CLÔTURÉE";let Y;e[52]!==W||e[53]!==X||e[54]!==b||e[55]!==M?(Y=s.jsxs(Te,{variant:W,className:X,children:[b,M]}),e[52]=W,e[53]=X,e[54]=b,e[55]=M,e[56]=Y):Y=e[56];let Z;e[57]!==f||e[58]!==Y?(Z=s.jsxs("div",{className:"flex items-center gap-2",children:[f,Y]}),e[57]=f,e[58]=Y,e[59]=Z):Z=e[59];const Ae=t.register?.name,He=t.register?.shop?.name;let ee;e[60]!==Ae||e[61]!==He?(ee=s.jsxs("p",{className:"text-xs font-bold text-pink-500 uppercase",children:[Ae," •"," ",He]}),e[60]=Ae,e[61]=He,e[62]=ee):ee=e[62];let se;e[63]!==Z||e[64]!==ee?(se=s.jsxs("div",{className:"flex items-center gap-4",children:[p,F,s.jsxs("div",{className:"flex flex-col",children:[Z,ee]})]}),e[63]=Z,e[64]=ee,e[65]=se):se=e[65];let te;e[66]!==o?(te=o&&s.jsxs(s.Fragment,{children:[s.jsxs(_,{onClick:()=>S(!0),className:"h-11 rounded-xl bg-white text-slate-700 shadow-sm ring-1 ring-slate-200 hover:bg-slate-50",children:[s.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Ajouter Mouvement"]}),s.jsx(_,{onClick:()=>g(!0),className:"h-11 rounded-xl bg-gradient-to-r from-pink-600 to-rose-600 font-bold text-white shadow-lg shadow-pink-500/30 hover:shadow-xl",children:"Clôturer la Session"})]}),e[66]=o,e[67]=te):te=e[67];let ae;e[68]!==te?(ae=s.jsx("div",{className:"flex items-center gap-3",children:te}),e[68]=te,e[69]=ae):ae=e[69],e[70]!==se||e[71]!==ae?(v=s.jsxs("header",{className:"sticky top-0 z-50 mb-10 flex h-24 w-full flex-col gap-6 border-b border-white/20 bg-white/70 px-6 py-4 shadow-sm backdrop-blur-xl md:flex-row md:items-center md:justify-between md:px-10",children:[se,ae]}),e[70]=se,e[71]=ae,e[72]=v):v=e[72];let ye;e[73]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx(Oe,{className:"pb-2",children:s.jsx(ze,{className:"text-sm font-bold text-slate-400 uppercase",children:"Responsable"})}),e[73]=ye):ye=e[73];let we;e[74]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-indigo-50 text-indigo-600",children:s.jsx(ps,{className:"h-6 w-6"})}),e[74]=we):we=e[74];const Ue=t.user?.name||`User #${t.user_id}`;let le;e[75]!==Ue?(le=s.jsx("p",{className:"font-black text-slate-900",children:Ue}),e[75]=Ue,e[76]=le):le=e[76];let Ce;e[77]===Symbol.for("react.memo_cache_sentinel")?(Ce=s.jsx("p",{className:"text-xs font-bold text-slate-400",children:"Caissier"}),e[77]=Ce):Ce=e[77];let re;e[78]!==le?(re=s.jsxs(De,{className:"rounded-3xl border-slate-200/60 shadow-sm",children:[ye,s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center gap-4",children:[we,s.jsxs("div",{children:[le,Ce]})]})})]}),e[78]=le,e[79]=re):re=e[79];let _e;e[80]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(Oe,{className:"pb-2",children:s.jsx(ze,{className:"text-sm font-bold text-slate-400 uppercase",children:"Horaire"})}),e[80]=_e):_e=e[80];let Se;e[81]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-blue-50 text-blue-600",children:s.jsx(Ns,{className:"h-6 w-6"})}),e[81]=Se):Se=e[81];let ne;e[82]!==t.opened_at?(ne=Ie(t.opened_at).format("HH:mm"),e[82]=t.opened_at,e[83]=ne):ne=e[83];let ie;e[84]!==ne?(ie=s.jsx("p",{className:"font-bold text-slate-900",children:ne}),e[84]=ne,e[85]=ie):ie=e[85];let ke;e[86]===Symbol.for("react.memo_cache_sentinel")?(ke=s.jsx("p",{className:"text-xs font-bold text-slate-400",children:"Ouverture"}),e[86]=ke):ke=e[86];let oe;e[87]!==ie?(oe=s.jsxs("div",{children:[ie,ke]}),e[87]=ie,e[88]=oe):oe=e[88];let ce;e[89]!==t.closed_at?(ce=t.closed_at&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-8 w-[1px] bg-slate-100"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-900",children:Ie(t.closed_at).format("HH:mm")}),s.jsx("p",{className:"text-xs font-bold text-slate-400",children:"Fermeture"})]})]}),e[89]=t.closed_at,e[90]=ce):ce=e[90];let de;e[91]!==oe||e[92]!==ce?(de=s.jsxs(De,{className:"rounded-3xl border-slate-200/60 shadow-sm",children:[_e,s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center gap-4",children:[Se,oe,ce]})})]}),e[91]=oe,e[92]=ce,e[93]=de):de=e[93];let Fe;e[94]===Symbol.for("react.memo_cache_sentinel")?(Fe=s.jsx(De,{className:"col-span-2 rounded-3xl border-slate-200/60 bg-slate-900 text-white shadow-sm",children:s.jsxs(Ee,{className:"flex h-full items-center justify-between p-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black",children:"Besoin d'aide ?"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Contactez un manager si vous constatez une erreur."})]}),s.jsx(_,{variant:"outline",className:"border-slate-700 bg-slate-800 text-white hover:bg-slate-700 hover:text-white",children:"Signaler un problème"})]})}),e[94]=Fe):Fe=e[94],e[95]!==re||e[96]!==de?(y=s.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-4",children:[re,de,Fe]}),e[95]=re,e[96]=de,e[97]=y):y=e[97],e[98]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("h2",{className:"mb-6 text-2xl font-black text-slate-900",children:"État de la Caisse"}),e[98]=w):w=e[98],U="mb-10 grid grid-cols-1 gap-6 lg:grid-cols-3",q=J.map(Ts),e[26]=Le,e[27]=o,e[28]=t.closed_at,e[29]=t.id,e[30]=t.opened_at,e[31]=t.register?.name,e[32]=t.register?.shop?.name,e[33]=t.user?.name,e[34]=t.user_id,e[35]=H,e[36]=U,e[37]=q,e[38]=$,e[39]=v,e[40]=y,e[41]=w,e[42]=B,e[43]=C}else H=e[35],U=e[36],q=e[37],$=e[38],v=e[39],y=e[40],w=e[41],B=e[42],C=e[43];let I;e[99]!==U||e[100]!==q?(I=s.jsx("div",{className:U,children:q}),e[99]=U,e[100]=q,e[101]=I):I=e[101];let be;e[102]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx("h2",{className:"mb-6 text-2xl font-black text-slate-900",children:"Historique des Mouvements"}),e[102]=be):be=e[102];let ge;e[103]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(xs,{children:s.jsxs(Be,{children:[s.jsx(he,{children:"Heure"}),s.jsx(he,{children:"Type"}),s.jsx(he,{children:"Description"}),s.jsx(he,{children:"Acteur"}),s.jsx(he,{children:"Montant"})]})}),e[103]=ge):ge=e[103];let O;e[104]!==r?(O=r.map(Es),e[104]=r,e[105]=O):O=e[105];let z;e[106]!==r.length?(z=r.length===0&&s.jsx(Be,{children:s.jsxs(me,{colSpan:5,className:"py-12 text-center text-slate-400",children:[s.jsx(fs,{className:"mx-auto mb-3 h-12 w-12 text-slate-200"}),"Aucun mouvement enregistré pour cette session."]})}),e[106]=r.length,e[107]=z):z=e[107];let V;e[108]!==O||e[109]!==z?(V=s.jsx("div",{className:"rounded-3xl border border-slate-200/60 bg-white p-6 shadow-sm",children:s.jsxs(hs,{children:[ge,s.jsxs(us,{children:[O,z]})]})}),e[108]=O,e[109]=z,e[110]=V):V=e[110];let K;e[111]!==$||e[112]!==v||e[113]!==y||e[114]!==w||e[115]!==I||e[116]!==V?(K=s.jsxs("div",{className:$,children:[v,y,w,I,be,V]}),e[111]=$,e[112]=v,e[113]=y,e[114]=w,e[115]=I,e[116]=V,e[117]=K):K=e[117];let je;e[118]===Symbol.for("react.memo_cache_sentinel")?(je=()=>S(!1),e[118]=je):je=e[118];let P;e[119]!==A||e[120]!==c||e[121]!==t?(P=s.jsx(Fs,{isOpen:c,onClose:je,session:t,onSuccess:A}),e[119]=A,e[120]=c,e[121]=t,e[122]=P):P=e[122];let Ne;e[123]===Symbol.for("react.memo_cache_sentinel")?(Ne=()=>g(!1),e[123]=Ne):Ne=e[123];let Q;e[124]!==A||e[125]!==u||e[126]!==t?(Q=s.jsx(Ds,{isOpen:u,onClose:Ne,session:t,onSuccess:A}),e[124]=A,e[125]=u,e[126]=t,e[127]=Q):Q=e[127];let ve;return e[128]!==H||e[129]!==B||e[130]!==C||e[131]!==K||e[132]!==P||e[133]!==Q?(ve=s.jsxs(H,{currentPageName:B,children:[C,K,P,Q]}),e[128]=H,e[129]=B,e[130]=C,e[131]=K,e[132]=P,e[133]=Q,e[134]=ve):ve=e[134],ve}function Es(a){return s.jsxs(Be,{children:[s.jsx(me,{className:"font-bold text-slate-500",children:Ie(a.created_at).format("HH:mm")}),s.jsx(me,{children:s.jsx(Te,{variant:"outline",className:"text-[10px] tracking-wider uppercase",children:a.type})}),s.jsx(me,{className:"font-medium text-slate-700",children:a.description}),s.jsx(me,{className:"text-sm font-bold text-slate-500",children:a.user?.name||"-"}),s.jsx(me,{children:s.jsxs("span",{className:`font-black ${parseFloat(a.amount)<0?"text-red-500":"text-green-500"}`,children:[parseFloat(a.amount)>0?"+":"",a.amount," ",a.currency]})})]},a.id)}function Ts(a){return s.jsxs(De,{className:"overflow-hidden rounded-3xl border-slate-200/60 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 bg-slate-50 px-6 py-4",children:[s.jsx("span",{className:"font-black text-slate-500",children:a.currency}),a.status==="perfect"&&s.jsxs(Te,{className:"bg-green-100 text-green-700 hover:bg-green-100",children:[s.jsx(vs,{className:"mr-1 h-3 w-3"})," ","OK"]}),a.status==="mismatch"&&s.jsxs(Te,{className:"bg-red-100 text-red-700 hover:bg-red-100",children:[s.jsx(ys,{className:"mr-1 h-3 w-3"})," ","ÉCART"]})]}),s.jsxs(Ee,{className:"p-0",children:[s.jsxs("div",{className:"grid grid-cols-2 divide-x divide-slate-100 border-b border-slate-100",children:[s.jsxs("div",{className:"p-4",children:[s.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Ouverture"}),s.jsx("p",{className:"text-lg font-bold text-slate-700",children:a.opening.toFixed(2)})]}),s.jsxs("div",{className:"bg-slate-50/50 p-4",children:[s.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Théorique"}),s.jsx("p",{className:"text-lg font-bold text-slate-900",children:a.theoretical.toFixed(2)})]})]}),s.jsxs("div",{className:"grid grid-cols-2 divide-x divide-slate-100",children:[s.jsxs("div",{className:"p-4",children:[s.jsx("p",{className:"text-xs font-bold text-green-500 uppercase",children:"Entrées"}),s.jsxs("p",{className:"font-bold text-green-600",children:["+",a.totalIn.toFixed(2)]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("p",{className:"text-xs font-bold text-red-500 uppercase",children:"Sorties"}),s.jsxs("p",{className:"font-bold text-red-600",children:["-",a.totalOut.toFixed(2)]})]})]}),a.closingReal!==null&&s.jsx("div",{className:`border-t border-slate-100 p-4 ${Math.abs(a.difference)>.01?"bg-red-50":"bg-green-50"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Réel (Compté)"}),s.jsx("p",{className:"text-xl font-black text-slate-900",children:a.closingReal.toFixed(2)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Écart"}),s.jsxs("p",{className:`text-xl font-black ${Math.abs(a.difference)>.01?"text-red-600":"text-green-600"}`,children:[a.difference>0?"+":"",a.difference.toFixed(2)]})]})]})})]})]},a.currency)}function Rs(a,e){return a+Math.abs(parseFloat(e.amount))}function Ls(a){return parseFloat(a.amount)<0}function As(a,e){return a+parseFloat(e.amount)}function Hs(a){return parseFloat(a.amount)>0}export{ct as default};
