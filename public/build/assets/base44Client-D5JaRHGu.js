import{S as ee,p as A,k as S,s as k,l as _,f as F,m as D,o as H,t as te,q as Q,v as se,w as ie,x as z,n as G,r as l,i as X,u as ne,j as T}from"./app-BUM8O9EM.js";import{M as re,i as ae,u as J,P as oe,e as he,f as ce,L as ue,c as le,a as i}from"./createLucideIcon-Cs_plsy0.js";var pe=class extends ee{constructor(e,t){super(),this.options=t,this.#s=e,this.#n=null,this.#i=A(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#f=void 0;#t=void 0;#a;#u;#i;#n;#g;#l;#p;#o;#h;#r;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),B(this.#e,this.options)?this.#c():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return L(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return L(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#C(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,s=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof S(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#e.setOptions(this.options),t._defaulted&&!k(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&W(this.#e,s,this.options,t)&&this.#c(),this.updateResult(),r&&(this.#e!==s||S(this.options.enabled,this.#e)!==S(t.enabled,this.#e)||_(this.options.staleTime,this.#e)!==_(t.staleTime,this.#e))&&this.#m();const a=this.#v();r&&(this.#e!==s||S(this.options.enabled,this.#e)!==S(t.enabled,this.#e)||a!==this.#r)&&this.#R(a)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),s=this.createResult(t,e);return fe(this,s)&&(this.#t=s,this.#u=this.options,this.#a=this.#e.state),s}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),t?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,r))})}trackProp(e){this.#d.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),s=this.#s.getQueryCache().build(this.#s,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#x();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(F)),t}#m(){this.#b();const e=_(this.options.staleTime,this.#e);if(D||this.#t.isStale||!H(e))return;const s=te(this.#t.dataUpdatedAt,e)+1;this.#o=Q.setTimeout(()=>{this.#t.isStale||this.updateResult()},s)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#R(e){this.#C(),this.#r=e,!(D||S(this.options.enabled,this.#e)===!1||!H(this.#r)||this.#r===0)&&(this.#h=Q.setInterval(()=>{(this.options.refetchIntervalInBackground||se.isFocused())&&this.#c()},this.#r))}#y(){this.#m(),this.#R(this.#v())}#b(){this.#o&&(Q.clearTimeout(this.#o),this.#o=void 0)}#C(){this.#h&&(Q.clearInterval(this.#h),this.#h=void 0)}createResult(e,t){const s=this.#e,r=this.options,a=this.#t,o=this.#a,h=this.#u,b=e!==s?e.state:this.#f,{state:p}=e;let c={...p},f=!1,d;if(t._optimisticResults){const u=this.hasListeners(),E=!u&&B(e,t),w=u&&W(e,s,t,r);(E||w)&&(c={...c,...ie(p.data,e.options)}),t._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:R,errorUpdatedAt:C,status:m}=c;d=c.data;let y=!1;if(t.placeholderData!==void 0&&d===void 0&&m==="pending"){let u;a?.isPlaceholderData&&t.placeholderData===h?.placeholderData?(u=a.data,y=!0):u=typeof t.placeholderData=="function"?t.placeholderData(this.#p?.state.data,this.#p):t.placeholderData,u!==void 0&&(m="success",d=z(a?.data,u,t),f=!0)}if(t.select&&d!==void 0&&!y)if(a&&d===o?.data&&t.select===this.#g)d=this.#l;else try{this.#g=t.select,d=t.select(d),d=z(a?.data,d,t),this.#l=d,this.#n=null}catch(u){this.#n=u}this.#n&&(R=this.#n,d=this.#l,C=Date.now(),m="error");const O=c.fetchStatus==="fetching",P=m==="pending",x=m==="error",$=P&&O,M=d!==void 0,g={status:m,fetchStatus:c.fetchStatus,isPending:P,isSuccess:m==="success",isError:x,isInitialLoading:$,isLoading:$,data:d,dataUpdatedAt:c.dataUpdatedAt,error:R,errorUpdatedAt:C,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>b.dataUpdateCount||c.errorUpdateCount>b.errorUpdateCount,isFetching:O,isRefetching:O&&!P,isLoadingError:x&&!M,isPaused:c.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&M,isStale:j(e,t),refetch:this.refetch,promise:this.#i,isEnabled:S(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const u=I=>{g.status==="error"?I.reject(g.error):g.data!==void 0&&I.resolve(g.data)},E=()=>{const I=this.#i=g.promise=A();u(I)},w=this.#i;switch(w.status){case"pending":e.queryHash===s.queryHash&&u(w);break;case"fulfilled":(g.status==="error"||g.data!==w.value)&&E();break;case"rejected":(g.status!=="error"||g.error!==w.reason)&&E();break}}return g}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#a=this.#e.state,this.#u=this.options,this.#a.data!==void 0&&(this.#p=this.#e),k(t,e))return;this.#t=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,a=typeof r=="function"?r():r;if(a==="all"||!a&&!this.#d.size)return!0;const o=new Set(a??this.#d);return this.options.throwOnError&&o.add("error"),Object.keys(this.#t).some(h=>{const v=h;return this.#t[v]!==e[v]&&o.has(v)})};this.#E({listeners:s()})}#x(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#f=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#E(e){G.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function de(e,t){return S(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function B(e,t){return de(e,t)||e.state.data!==void 0&&L(e,t,t.refetchOnMount)}function L(e,t,s){if(S(t.enabled,e)!==!1&&_(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&j(e,t)}return!1}function W(e,t,s,r){return(e!==t||S(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&j(e,s)}function j(e,t){return S(t.enabled,e)!==!1&&e.isStaleByTime(_(t.staleTime,e))}function fe(e,t){return!k(e.getCurrentResult(),t)}var Y=l.createContext(!1),ge=()=>l.useContext(Y);Y.Provider;function me(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ve=l.createContext(me()),Re=()=>l.useContext(ve),ye=(e,t,s)=>{const r=s?.state.error&&typeof e.throwOnError=="function"?X(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(t.isReset()||(e.retryOnMount=!1))},be=e=>{l.useEffect(()=>{e.clearReset()},[e])},Ce=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||X(s,[e.error,r])),xe=e=>{if(e.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>s(r(...a)):s(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ee=(e,t)=>e.isLoading&&e.isFetching&&!t,Se=(e,t)=>e?.suspense&&t.isPending,V=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function we(e,t,s){const r=ge(),a=Re(),o=ne(),h=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(h);const v=o.getQueryCache().get(h.queryHash);h._optimisticResults=r?"isRestoring":"optimistic",xe(h),ye(h,a,v),be(a);const b=!o.getQueryCache().get(h.queryHash),[p]=l.useState(()=>new t(o,h)),c=p.getOptimisticResult(h),f=!r&&e.subscribed!==!1;if(l.useSyncExternalStore(l.useCallback(d=>{const R=f?p.subscribe(G.batchCalls(d)):F;return p.updateResult(),R},[p,f]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),l.useEffect(()=>{p.setOptions(h)},[h,p]),Se(h,c))throw V(h,p,a);if(Ce({result:c,errorResetBoundary:a,throwOnError:h.throwOnError,query:v,suspense:h.suspense}))throw c.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(h,c),h.experimental_prefetchInRender&&!D&&Ee(c,r)&&(b?V(h,p,a):v?.promise)?.catch(F).finally(()=>{p.updateResult()}),h.notifyOnChangeProps?c:p.trackResult(c)}function ke(e,t){return we(e,pe)}function K(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Oe(...e){return t=>{let s=!1;const r=e.map(a=>{const o=K(a,t);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let a=0;a<r.length;a++){const o=r[a];typeof o=="function"?o():K(e[a],null)}}}}function Ie(...e){return l.useCallback(Oe(...e),e)}class Me extends l.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const r=s.offsetParent,a=ae(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft,o.right=a-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Te({children:e,isPresent:t,anchorX:s,root:r}){const a=l.useId(),o=l.useRef(null),h=l.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:v}=l.useContext(re),b=e.props?.ref??e?.ref,p=Ie(o,b);return l.useInsertionEffect(()=>{const{width:c,height:f,top:d,left:R,right:C}=h.current;if(t||!o.current||!c||!f)return;const m=s==="left"?`left: ${R}`:`right: ${C}`;o.current.dataset.motionPopId=a;const y=document.createElement("style");v&&(y.nonce=v);const O=r??document.head;return O.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{O.contains(y)&&O.removeChild(y)}},[t]),T.jsx(Me,{isPresent:t,childRef:o,sizeRef:h,children:l.cloneElement(e,{ref:p})})}const Pe=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:o,mode:h,anchorX:v,root:b})=>{const p=J($e),c=l.useId();let f=!0,d=l.useMemo(()=>(f=!1,{id:c,initial:t,isPresent:s,custom:a,onExitComplete:R=>{p.set(R,!0);for(const C of p.values())if(!C)return;r&&r()},register:R=>(p.set(R,!1),()=>p.delete(R))}),[s,p,r]);return o&&f&&(d={...d}),l.useMemo(()=>{p.forEach((R,C)=>p.set(C,!1))},[s]),l.useEffect(()=>{!s&&!p.size&&r&&r()},[s]),h==="popLayout"&&(e=T.jsx(Te,{isPresent:s,anchorX:v,root:b,children:e})),T.jsx(oe.Provider,{value:d,children:e})};function $e(){return new Map}const U=e=>e.key||"";function q(e){const t=[];return l.Children.forEach(e,s=>{l.isValidElement(s)&&t.push(s)}),t}const Fe=({children:e,custom:t,initial:s=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:o="sync",propagate:h=!1,anchorX:v="left",root:b})=>{const[p,c]=he(h),f=l.useMemo(()=>q(e),[e]),d=h&&!p?[]:f.map(U),R=l.useRef(!0),C=l.useRef(f),m=J(()=>new Map),y=l.useRef(new Set),[O,P]=l.useState(f),[x,$]=l.useState(f);ce(()=>{R.current=!1,C.current=f;for(let g=0;g<x.length;g++){const u=U(x[g]);d.includes(u)?(m.delete(u),y.current.delete(u)):m.get(u)!==!0&&m.set(u,!1)}},[x,d.length,d.join("-")]);const M=[];if(f!==O){let g=[...f];for(let u=0;u<x.length;u++){const E=x[u],w=U(E);d.includes(w)||(g.splice(u,0,E),M.push(E))}return o==="wait"&&M.length&&(g=M),$(q(g)),P(f),null}const{forceRender:N}=l.useContext(ue);return T.jsx(T.Fragment,{children:x.map(g=>{const u=U(g),E=h&&!p?!1:f===x||d.includes(u),w=()=>{if(y.current.has(u))return;if(y.current.add(u),m.has(u))m.set(u,!0);else return;let I=!0;m.forEach(Z=>{Z||(I=!1)}),I&&(N?.(),$(C.current),h&&c?.(),r&&r())};return T.jsx(Pe,{isPresent:E,initial:!R.current||s?void 0:!1,custom:t,presenceAffectsLayout:a,mode:o,root:b,onExitComplete:E?void 0:w,anchorX:v,children:g},u)})})};const _e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],De=le("Monitor",_e),n=e=>e.data,Le={entities:{Client:{create:e=>i.post("/api/clients",e).then(n),update:(e,t)=>i.put(`/api/clients/${e}`,t).then(n),list:(e,t)=>i.get("/api/clients",{params:{sort:e,limit:t}}).then(n),filter:(e,t,s)=>i.get("/api/clients",{params:{...e,sort:t,limit:s}}).then(n),verifyPhone:e=>i.post("/api/clients/verify-phone",{phone:e}).then(n),register:e=>i.post("/api/clients/register",e).then(n),addPhone:(e,t)=>i.post("/api/clients/add-phone",{client_id:e,phone_number:t}).then(n)},Transaction:{create:e=>i.post("/api/transactions",e).then(n),list:(e,t)=>i.get("/api/transactions",{params:{sort:e,limit:t}}).then(n)},ExchangeRate:{getAll:()=>i.get("/api/exchange-rates").then(n),create:e=>i.post("/api/exchange-rates",e).then(n),update:(e,t)=>i.put(`/api/exchange-rates/${e}`,t).then(n),delete:e=>i.delete(`/api/exchange-rates/${e}`).then(n),filter:(e,t,s)=>i.get("/api/exchange-rates",{params:{...e,sort:t,limit:s}}).then(n)},Institution:{list:e=>i.get("/api/institutions",{params:e}).then(n),active:()=>i.get("/api/institutions/active").then(n),create:e=>i.post("/api/institutions",e).then(n),update:(e,t)=>i.put(`/api/institutions/${e}`,t).then(n),delete:e=>i.delete(`/api/institutions/${e}`).then(n)},Session:{current:()=>i.get("/api/sessions/current").then(n),list:e=>i.get("/api/sessions",{params:e}).then(n),create:e=>i.post("/api/sessions",e).then(n),close:e=>i.post(`/api/sessions/${e}/close`).then(n),reopen:e=>i.post(`/api/sessions/${e}/reopen`).then(n),report:e=>i.get(`/api/sessions/${e}/report`).then(n)},ExchangeRateHistory:{list:e=>i.get("/api/exchange-rate-history",{params:e}).then(n),active:()=>i.get("/api/exchange-rate-history/active").then(n),create:e=>i.post("/api/exchange-rate-history",e).then(n),currentRate:(e,t)=>i.post("/api/exchange-rate-history/current-rate",{currency_from:e,currency_to:t}).then(n)},CashierActivity:{list:e=>i.get("/api/cashier-activities",{params:e}).then(n),create:e=>i.post("/api/cashier-activities",e).then(n),stats:e=>i.get("/api/cashier-activities/stats",{params:e}).then(n)},HelpRequest:{list:e=>i.get("/api/help-requests",{params:e}).then(n),create:e=>i.post("/api/help-requests",e).then(n),resolve:e=>i.post(`/api/help-requests/${e}/resolve`).then(n)},Advertisement:{list:()=>i.get("/api/advertisements").then(n),active:()=>i.get("/api/advertisements/active").then(n),create:e=>i.post("/api/advertisements",e).then(n),update:(e,t)=>i.put(`/api/advertisements/${e}`,t).then(n),delete:e=>i.delete(`/api/advertisements/${e}`).then(n)},News:{list:()=>i.get("/api/news").then(n),active:()=>i.get("/api/news/active").then(n),create:e=>i.post("/api/news",e).then(n),update:(e,t)=>i.put(`/api/news/${e}`,t).then(n),delete:e=>i.delete(`/api/news/${e}`).then(n)},User:{list:()=>i.get("/api/users").then(n),create:e=>i.post("/api/users",e).then(n),update:(e,t)=>i.put(`/api/users/${e}`,t).then(n),delete:e=>i.delete(`/api/users/${e}`).then(n)},Shop:{list:()=>i.get("/api/shops").then(n),create:e=>i.post("/api/shops",e).then(n),update:(e,t)=>i.put(`/api/shops/${e}`,t).then(n),delete:e=>i.delete(`/api/shops/${e}`).then(n),assignUsers:(e,t)=>i.post(`/api/shops/${e}/assign-users`,{user_ids:t}).then(n)},Counter:{list:e=>i.get(`/api/shops/${e}/counters`).then(n),create:(e,t)=>i.post(`/api/shops/${e}/counters`,t).then(n),update:(e,t)=>i.put(`/api/counters/${e}`,t).then(n),delete:e=>i.delete(`/api/counters/${e}`).then(n)}}};export{Fe as A,De as M,Le as b,ke as u};
