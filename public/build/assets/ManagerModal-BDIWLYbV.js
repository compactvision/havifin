import{r as c,j as a,c as ne,u as ve}from"./app-DkFnKQqu.js";import{c as je,u as ue,B as ce,t as pe}from"./index-DgHTDt3N.js";import{g as we,i as de,j as Ne,u as _e,n as Se,D as Ee,a as Pe,c as Re,d as Ie}from"./index-BCYbKlc0.js";import{c as ae,b as Me}from"./createLucideIcon-CI6QMrH4.js";import{C as $e,u as De}from"./check-LQOZXpZ8.js";import{b as Oe}from"./base44Client-DAffFGfU.js";import{I as re,L as oe}from"./label-_YbXeZt4.js";import{L as Be}from"./loader-circle-D3PApFWE.js";const Le=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qe=ae("EyeOff",Le);const Fe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ae=ae("Eye",Fe);const Te=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],He=ae("UserPlus",Te);function Ve(t,e=[]){let r=[];function o(i,l){const u=c.createContext(l),d=r.length;r=[...r,l];const n=p=>{const{scope:b,children:g,...x}=p,C=b?.[t]?.[d]||u,y=c.useMemo(()=>x,Object.values(x));return a.jsx(C.Provider,{value:y,children:g})};n.displayName=i+"Provider";function f(p,b){const g=b?.[t]?.[d]||u,x=c.useContext(g);if(x)return x;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[n,f]}const s=()=>{const i=r.map(l=>c.createContext(l));return function(u){const d=u?.[t]||i;return c.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return s.scopeName=t,[o,ze(s,...e)]}function ze(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const o=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=o.reduce((u,{useScope:d,scopeName:n})=>{const p=d(i)[`__scope${n}`];return{...u,...p}},{});return c.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return r.scopeName=e.scopeName,r}function Ue(t){const e=We(t),r=c.forwardRef((o,s)=>{const{children:i,...l}=o,u=c.Children.toArray(i),d=u.find(Qe);if(d){const n=d.props.children,f=u.map(p=>p===d?c.Children.count(n)>1?c.Children.only(null):c.isValidElement(n)?n.props.children:null:p);return a.jsx(e,{...l,ref:s,children:c.isValidElement(n)?c.cloneElement(n,void 0,f):null})}return a.jsx(e,{...l,ref:s,children:i})});return r.displayName=`${t}.Slot`,r}function We(t){const e=c.forwardRef((r,o)=>{const{children:s,...i}=r;if(c.isValidElement(s)){const l=Xe(s),u=Ge(i,s.props);return s.type!==c.Fragment&&(u.ref=o?je(o,l):l),c.cloneElement(s,u)}return c.Children.count(s)>1?c.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Ke=Symbol("radix.slottable");function Qe(t){return c.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ke}function Ge(t,e){const r={...e};for(const o in e){const s=t[o],i=e[o];/^on[A-Z]/.test(o)?s&&i?r[o]=(...u)=>{const d=i(...u);return s(...u),d}:s&&(r[o]=s):o==="style"?r[o]={...s,...i}:o==="className"&&(r[o]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function Xe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Je=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ie=Je.reduce((t,e)=>{const r=Ue(`Primitive.${e}`),o=c.forwardRef((s,i)=>{const{asChild:l,...u}=s,d=l?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...u,ref:i})});return o.displayName=`Primitive.${e}`,{...t,[e]:o}},{}),J="Checkbox",[Ze]=Ve(J),[Ye,le]=Ze(J);function et(t){const{__scopeCheckbox:e,checked:r,children:o,defaultChecked:s,disabled:i,form:l,name:u,onCheckedChange:d,required:n,value:f="on",internal_do_not_use_render:p}=t,[b,g]=we({prop:r,defaultProp:s??!1,onChange:d,caller:J}),[x,C]=c.useState(null),[y,h]=c.useState(null),m=c.useRef(!1),k=x?!!l||!!x.closest("form"):!0,j={checked:b,disabled:i,setChecked:g,control:x,setControl:C,name:u,form:l,value:f,hasConsumerStoppedPropagationRef:m,required:n,defaultChecked:N(s)?!1:s,isFormControl:k,bubbleInput:y,setBubbleInput:h};return a.jsx(Ye,{scope:e,...j,children:tt(p)?p(j):o})}var fe="CheckboxTrigger",me=c.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:r,...o},s)=>{const{control:i,value:l,disabled:u,checked:d,required:n,setControl:f,setChecked:p,hasConsumerStoppedPropagationRef:b,isFormControl:g,bubbleInput:x}=le(fe,t),C=ue(s,f),y=c.useRef(d);return c.useEffect(()=>{const h=i?.form;if(h){const m=()=>p(y.current);return h.addEventListener("reset",m),()=>h.removeEventListener("reset",m)}},[i,p]),a.jsx(ie.button,{type:"button",role:"checkbox","aria-checked":N(d)?"mixed":d,"aria-required":n,"data-state":Ce(d),"data-disabled":u?"":void 0,disabled:u,value:l,...o,ref:C,onKeyDown:de(e,h=>{h.key==="Enter"&&h.preventDefault()}),onClick:de(r,h=>{p(m=>N(m)?!0:!m),x&&g&&(b.current=h.isPropagationStopped(),b.current||h.stopPropagation())})})});me.displayName=fe;var he=c.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:o,checked:s,defaultChecked:i,required:l,disabled:u,value:d,onCheckedChange:n,form:f,...p}=t;return a.jsx(et,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:u,required:l,onCheckedChange:n,name:o,form:f,value:d,internal_do_not_use_render:({isFormControl:b})=>a.jsxs(a.Fragment,{children:[a.jsx(me,{...p,ref:e,__scopeCheckbox:r}),b&&a.jsx(ye,{__scopeCheckbox:r})]})})});he.displayName=J;var xe="CheckboxIndicator",be=c.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:o,...s}=t,i=le(xe,r);return a.jsx(Se,{present:o||N(i.checked)||i.checked===!0,children:a.jsx(ie.span,{"data-state":Ce(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});be.displayName=xe;var ge="CheckboxBubbleInput",ye=c.forwardRef(({__scopeCheckbox:t,...e},r)=>{const{control:o,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:l,required:u,disabled:d,name:n,value:f,form:p,bubbleInput:b,setBubbleInput:g}=le(ge,t),x=ue(r,g),C=Ne(i),y=_e(o);c.useEffect(()=>{const m=b;if(!m)return;const k=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(k,"checked").set,w=!s.current;if(C!==i&&v){const S=new Event("click",{bubbles:w});m.indeterminate=N(i),v.call(m,N(i)?!1:i),m.dispatchEvent(S)}},[b,C,i,s]);const h=c.useRef(N(i)?!1:i);return a.jsx(ie.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??h.current,required:u,disabled:d,name:n,value:f,form:p,...e,tabIndex:-1,ref:x,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ye.displayName=ge;function tt(t){return typeof t=="function"}function N(t){return t==="indeterminate"}function Ce(t){return N(t)?"indeterminate":t?"checked":"unchecked"}function ft(t){const e=ne.c(9);let r,o;e[0]!==t?({className:r,...o}=t,e[0]=t,e[1]=r,e[2]=o):(r=e[1],o=e[2]);let s;e[3]!==r?(s=Me("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),e[3]=r,e[4]=s):s=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx(be,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:a.jsx($e,{className:"size-3.5"})}),e[5]=i):i=e[5];let l;return e[6]!==o||e[7]!==s?(l=a.jsx(he,{"data-slot":"checkbox",className:s,...o,children:i}),e[6]=o,e[7]=s,e[8]=l):l=e[8],l}function mt(t){const e=ne.c(83),{isOpen:r,onOpenChange:o,shopId:s}=t,i=ve(),[l,u]=c.useState(!1);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={name:"",email:"",password:"",role:"manager"},e[0]=d):d=e[0];const[n,f]=c.useState(d),p=De({mutationFn:rt,onSuccess:()=>{i.invalidateQueries({queryKey:["users"]}),s&&i.invalidateQueries({queryKey:["shop",s]}),pe.success("Compte créé avec succès"),o(!1),b()},onError:st}),b=()=>{f({name:"",email:"",password:"",role:"manager"})};let g;e[1]!==p||e[2]!==n||e[3]!==s?(g=_=>{_.preventDefault();const ke={...n,shop_ids:s?[s]:[]};p.mutate(ke)},e[1]=p,e[2]=n,e[3]=s,e[4]=g):g=e[4];const x=g,C=n.role==="manager"?"Nouveau Manager":"Nouveau Caissier";let y;e[5]!==C?(y=a.jsx("div",{className:"border-b border-slate-100 bg-slate-50/50 p-8",children:a.jsx(Ee,{children:a.jsx(Pe,{className:"text-2xl font-black tracking-tight text-slate-900",children:C})})}),e[5]=C,e[6]=y):y=e[6];let h;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=a.jsx(oe,{htmlFor:"name",className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Nom Complet"}),e[7]=h):h=e[7];let m;e[8]!==n?(m=_=>f({...n,name:_.target.value}),e[8]=n,e[9]=m):m=e[9];let k;e[10]!==n.name||e[11]!==m?(k=a.jsxs("div",{className:"space-y-2",children:[h,a.jsx(re,{id:"name",placeholder:"ex: Jean Dupont",value:n.name,onChange:m,className:"h-12 rounded-xl border-slate-200 font-bold focus:border-indigo-500",required:!0})]}),e[10]=n.name,e[11]=m,e[12]=k):k=e[12];let j;e[13]===Symbol.for("react.memo_cache_sentinel")?(j=a.jsx(oe,{htmlFor:"email",className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Email"}),e[13]=j):j=e[13];let v;e[14]!==n?(v=_=>f({...n,email:_.target.value}),e[14]=n,e[15]=v):v=e[15];let w;e[16]!==n.email||e[17]!==v?(w=a.jsxs("div",{className:"space-y-2",children:[j,a.jsx(re,{id:"email",type:"email",placeholder:"jean.dupont@example.com",value:n.email,onChange:v,className:"h-12 rounded-xl border-slate-200 font-bold focus:border-indigo-500",required:!0})]}),e[16]=n.email,e[17]=v,e[18]=w):w=e[18];let S;e[19]===Symbol.for("react.memo_cache_sentinel")?(S=a.jsx(oe,{htmlFor:"password",className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Mot de Passe"}),e[19]=S):S=e[19];const Z=l?"text":"password";let E;e[20]!==n?(E=_=>f({...n,password:_.target.value}),e[20]=n,e[21]=E):E=e[21];let P;e[22]!==n.password||e[23]!==Z||e[24]!==E?(P=a.jsx(re,{id:"password",type:Z,placeholder:"••••••••",value:n.password,onChange:E,className:"h-12 rounded-xl border-slate-200 pr-12 font-bold focus:border-indigo-500",required:!0}),e[22]=n.password,e[23]=Z,e[24]=E,e[25]=P):P=e[25];let R;e[26]!==l?(R=()=>u(!l),e[26]=l,e[27]=R):R=e[27];let I;e[28]!==l?(I=l?a.jsx(qe,{className:"h-4 w-4"}):a.jsx(Ae,{className:"h-4 w-4"}),e[28]=l,e[29]=I):I=e[29];let M;e[30]!==R||e[31]!==I?(M=a.jsx("button",{type:"button",onClick:R,className:"absolute top-1/2 right-4 -translate-y-1/2 text-slate-400 hover:text-indigo-600",children:I}),e[30]=R,e[31]=I,e[32]=M):M=e[32];let $;e[33]!==P||e[34]!==M?($=a.jsxs("div",{className:"space-y-2",children:[S,a.jsxs("div",{className:"relative",children:[P,M]})]}),e[33]=P,e[34]=M,e[35]=$):$=e[35];let D;e[36]!==n?(D=()=>f({...n,role:"manager"}),e[36]=n,e[37]=D):D=e[37];const Y=`flex flex-col items-center gap-2 rounded-2xl border p-4 transition-all ${n.role==="manager"?"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-100 bg-white text-slate-400 hover:border-slate-200"}`,ee=`h-6 w-6 ${n.role==="manager"?"text-indigo-600":"text-slate-300"}`;let O;e[38]!==ee?(O=a.jsx(ot,{className:ee}),e[38]=ee,e[39]=O):O=e[39];let Q;e[40]===Symbol.for("react.memo_cache_sentinel")?(Q=a.jsx("span",{className:"text-[10px] font-black uppercase",children:"Manager"}),e[40]=Q):Q=e[40];let B;e[41]!==D||e[42]!==Y||e[43]!==O?(B=a.jsxs("button",{type:"button",onClick:D,className:Y,children:[O,Q]}),e[41]=D,e[42]=Y,e[43]=O,e[44]=B):B=e[44];let L;e[45]!==n?(L=()=>f({...n,role:"cashier"}),e[45]=n,e[46]=L):L=e[46];const te=`flex flex-col items-center gap-2 rounded-2xl border p-4 transition-all ${n.role==="cashier"?"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-100 bg-white text-slate-400 hover:border-slate-200"}`,se=`h-6 w-6 ${n.role==="cashier"?"text-indigo-600":"text-slate-300"}`;let q;e[47]!==se?(q=a.jsx(He,{className:se}),e[47]=se,e[48]=q):q=e[48];let G;e[49]===Symbol.for("react.memo_cache_sentinel")?(G=a.jsx("span",{className:"text-[10px] font-black uppercase",children:"Caissier"}),e[49]=G):G=e[49];let F;e[50]!==L||e[51]!==te||e[52]!==q?(F=a.jsxs("button",{type:"button",onClick:L,className:te,children:[q,G]}),e[50]=L,e[51]=te,e[52]=q,e[53]=F):F=e[53];let A;e[54]!==B||e[55]!==F?(A=a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[B,F]}),e[54]=B,e[55]=F,e[56]=A):A=e[56];let T;e[57]!==w||e[58]!==$||e[59]!==A||e[60]!==k?(T=a.jsxs("div",{className:"space-y-4",children:[k,w,$,A]}),e[57]=w,e[58]=$,e[59]=A,e[60]=k,e[61]=T):T=e[61];let H;e[62]!==o?(H=a.jsx(ce,{type:"button",variant:"outline",onClick:()=>o(!1),className:"h-12 rounded-xl border-slate-200 px-8 text-xs font-black tracking-widest uppercase hover:bg-slate-50",children:"Annuler"}),e[62]=o,e[63]=H):H=e[63];let V;e[64]!==p.isPending?(V=p.isPending?a.jsx(Be,{className:"h-4 w-4 animate-spin"}):"Créer le compte",e[64]=p.isPending,e[65]=V):V=e[65];let z;e[66]!==p.isPending||e[67]!==V?(z=a.jsx(ce,{type:"submit",className:"h-12 rounded-xl bg-slate-900 px-8 text-xs font-black tracking-widest text-white uppercase shadow-xl transition-all hover:bg-black",disabled:p.isPending,children:V}),e[66]=p.isPending,e[67]=V,e[68]=z):z=e[68];let U;e[69]!==H||e[70]!==z?(U=a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[H,z]}),e[69]=H,e[70]=z,e[71]=U):U=e[71];let W;e[72]!==x||e[73]!==T||e[74]!==U?(W=a.jsxs("form",{onSubmit:x,className:"space-y-6 p-8",children:[T,U]}),e[72]=x,e[73]=T,e[74]=U,e[75]=W):W=e[75];let K;e[76]!==W||e[77]!==y?(K=a.jsxs(Re,{className:"max-w-md overflow-hidden rounded-[2.5rem] border-slate-100 p-0",children:[y,W]}),e[76]=W,e[77]=y,e[78]=K):K=e[78];let X;return e[79]!==r||e[80]!==o||e[81]!==K?(X=a.jsx(Ie,{open:r,onOpenChange:o,children:K}),e[79]=r,e[80]=o,e[81]=K,e[82]=X):X=e[82],X}function st(t){pe.error(t.response?.data?.message||"Erreur lors de la création")}function rt(t){return Oe.entities.User.create(t)}function ot(t){const e=ne.c(3),{className:r}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsx("path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}),e[0]=o):o=e[0];let s;return e[1]!==r?(s=a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:o}),e[1]=r,e[2]=s):s=e[2],s}export{ft as C,Ae as E,mt as M,He as U};
