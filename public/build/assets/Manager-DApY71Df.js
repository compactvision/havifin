import{c as Ce,u as Xe,r as K,j as t,R as Lt,a as ft}from"./app-DkFnKQqu.js";import{u as Fe,A as Oe,b as J}from"./base44Client-DAffFGfU.js";import{t as B,B as R}from"./index-DgHTDt3N.js";import{L as oe,I as ge}from"./label-_YbXeZt4.js";import{S as tt,a as st,b as at,c as lt,d as ye}from"./select-DjJYDB6t.js";import{c as le,b as Y,m as ve,a as Ke}from"./createLucideIcon-CI6QMrH4.js";import{u as pe}from"./check-LQOZXpZ8.js";import{L as Qe,h as X}from"./moment-ByqU4UZs.js";import{B as mt}from"./building-2-zyFdD99p.js";import{R as Ge,a as vt,C as Je,A as Tt}from"./refresh-cw-B1VdfBTQ.js";import{P as Ve}from"./plus-DIMEmRs9.js";import{T as it}from"./trash-2-DMTitS91.js";import{a as ut,X as ct,S as Ft,U as Dt,L as Nt,A as Pt}from"./app-main-CFwQ4KEa.js";import{G as wt,C as It}from"./globe-EINNj12u.js";import{S as zt}from"./smartphone-BNoicElp.js";import{L as qt}from"./loader-circle-D3PApFWE.js";import{a as yt,T as Be,A as rt,C as At}from"./trending-up-gzSx1UWh.js";import{C as $t,a as Ht}from"./card-ClVOptKc.js";import{U as nt}from"./users-D1gVHlYe.js";import{C as Yt}from"./circle-alert-C92WPWAJ.js";import{S as pt}from"./search-DcRWAGcZ.js";import{E as Rt}from"./ManagerModal-BDIWLYbV.js";import{T as ht,a as $e,S as Vt,b as Bt,c as He,d as Kt,e as Ot,f as Qt}from"./ShopManager-DBiPUxjL.js";import{B as Ye}from"./badge-ClbS0mgP.js";import{D as Gt,a as Jt,c as Xt,d as Wt}from"./index-BCYbKlc0.js";/* empty css            */const Zt=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],kt=le("Activity",Zt);const es=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],ts=le("ArrowDownLeft",es);const ss=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],as=le("ArrowUpRight",ss);const ls=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bt=le("Calendar",ls);const is=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],_t=le("ChartPie",is);const rs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],jt=le("CircleStop",rs);const ns=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],cs=le("Download",ns);const os=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],ds=le("Filter",os);const xs=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Et=le("Hash",xs);const ms=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],hs=le("LayoutGrid",ms);const us=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],ps=le("List",us);const gs=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],fs=le("LockOpen",gs);const bs=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],js=le("Pencil",bs);const vs=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],ot=le("Play",vs);const Ns=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ut=le("Save",Ns);const ws=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gt=le("Settings",ws);const ys=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ks=le("Shield",ys);function _s(){const e=Ce.c(50),s=Xe(),[l,n]=K.useState(!1),[c,i]=K.useState(null),[x,m]=K.useState(null),[d,v]=K.useState("all");let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={name:"",type:"bank",code:"",logo:null},e[0]=h):h=e[0];const[a,u]=K.useState(h),[w,S]=K.useState(""),[b,C]=K.useState("depot");let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y={queryKey:["institutions"],queryFn:Ts},e[1]=y):y=e[1];const{data:F,isLoading:f}=Fe(y),p=F===void 0?[]:F;let D;e[2]!==d?(D=r=>d==="all"?!0:r.type===d,e[2]=d,e[3]=D):D=e[3];const M=p.filter(D),j=pe({mutationFn:Ls,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),L(),B.success("Institution ajoutée avec succès")},onError:Us}),k=pe({mutationFn:Es,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),L(),B.success("Institution mise à jour avec succès")},onError:Rs});let g;e[4]!==s?(g={mutationFn:$s,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),B.success("Configuration mise à jour")}},e[4]=s,e[5]=g):g=e[5];const _=pe(g),L=()=>{u({name:"",type:"bank",code:"",logo:null}),i(null),n(!1)};let U;e[6]===Symbol.for("react.memo_cache_sentinel")?(U=r=>{u({name:r.name,type:r.type,code:r.code,logo:null}),i(r.id),n(!0)},e[6]=U):U=e[6];const E=U;let q;e[7]!==s?(q={mutationFn:As,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),B.success("Institution supprimée")}},e[7]=s,e[8]=q):q=e[8];const z=pe(q);let T;e[9]!==s?(T={mutationFn:qs,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),B.success("Statut mis à jour")}},e[9]=s,e[10]=T):T=e[10];const o=pe(T);let A;e[11]!==s?(A={mutationFn:Ds,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),S(""),C("depot"),B.success("Champ ajouté")},onError:Fs},e[11]=s,e[12]=A):A=e[12];const $=pe(A);let P;e[13]!==s?(P={mutationFn:Ms,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),B.success("Champ supprimé")}},e[13]=s,e[14]=P):P=e[14];const H=pe(P);let I;e[15]!==s?(I={mutationFn:Cs,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),B.success("Infos agent mises à jour")}},e[15]=s,e[16]=I):I=e[16];const Q=pe(I);let O,ie;e[17]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600 shadow-lg shadow-indigo-600/20",children:t.jsx(mt,{className:"h-5 w-5 text-white"})}),ie=t.jsx("h4",{className:"text-sm font-black tracking-tight text-slate-800 uppercase",children:"Partenaires & Institutions"}),e[17]=O,e[18]=ie):(O=e[17],ie=e[18]);let W;e[19]!==l?(W=()=>n(!l),e[19]=l,e[20]=W):W=e[20];const te=l?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 hover:bg-indigo-700";let se;e[21]!==te?(se=Y("h-11 rounded-xl px-6 text-xs font-black tracking-widest uppercase transition-all",te),e[21]=te,e[22]=se):se=e[22];let Z;e[23]!==l?(Z=l?t.jsx(ct,{className:"mr-2 h-4 w-4"}):t.jsx(Ve,{className:"mr-2 h-4 w-4"}),e[23]=l,e[24]=Z):Z=e[24];const de=l?"Fermer":"Nouvelle Institution";let xe;e[25]!==W||e[26]!==se||e[27]!==Z||e[28]!==de?(xe=t.jsxs(R,{onClick:W,className:se,children:[Z,de]}),e[25]=W,e[26]=se,e[27]=Z,e[28]=de,e[29]=xe):xe=e[29];let G;e[30]!==j||e[31]!==c||e[32]!==a||e[33]!==L||e[34]!==l||e[35]!==k?(G=l&&t.jsx(ve.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsxs("div",{className:"relative rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-64 w-64 bg-indigo-500/10 blur-[100px]"}),t.jsxs("h5",{className:"mb-8 flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(Qe,{className:"h-6 w-6 text-indigo-400"}),c?"Modifier l'institution":"Configurer un nouveau partenaire"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(oe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Nom de l'institution"}),t.jsx(ge,{placeholder:"ex: Bank of Africa",value:a.name,onChange:r=>u({...a,name:r.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(oe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Type de service"}),t.jsxs(tt,{value:a.type,onValueChange:r=>u({...a,type:r}),children:[t.jsx(st,{className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500",children:t.jsx(at,{})}),t.jsxs(lt,{className:"border-slate-800 bg-slate-900 text-white",children:[t.jsx(ye,{value:"bank",className:"focus:bg-slate-800",children:"Banque Classique"}),t.jsx(ye,{value:"mobile_money",className:"focus:bg-slate-800",children:"Mobile Money"}),t.jsx(ye,{value:"payment",className:"focus:bg-slate-800",children:"Service de Paiement"}),t.jsx(ye,{value:"other",className:"focus:bg-slate-800",children:"Autre Service (MoneyGram, etc.)"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(oe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Code Identifiant"}),t.jsx(ge,{placeholder:"ex: BOA-CD",value:a.code,onChange:r=>u({...a,code:r.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 font-mono font-black text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),t.jsxs("div",{className:"mt-6 space-y-2",children:[t.jsx(oe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Logo de l'institution (Optionnel)"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"relative flex h-16 w-16 items-center justify-center overflow-hidden rounded-xl border border-white/10 bg-white/5",children:a.logo?t.jsx("img",{src:URL.createObjectURL(a.logo),alt:"Preview",className:"h-full w-full object-cover"}):t.jsx(mt,{className:"h-6 w-6 text-white/20"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx(ge,{type:"file",accept:"image/*",onChange:r=>{r.target.files&&r.target.files[0]&&u({...a,logo:r.target.files[0]})},className:"h-12 w-full cursor-pointer rounded-xl border-white/10 bg-white/5 pt-2 text-sm font-bold text-white file:mr-4 file:rounded-lg file:border-0 file:bg-indigo-600 file:px-4 file:py-1 file:text-xs file:font-bold file:text-white hover:file:bg-indigo-700"}),t.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Format recommandé: PNG ou JPG, fond transparent. Max 2MB."})]})]})]}),t.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[t.jsx(R,{variant:"ghost",onClick:L,className:"h-12 rounded-xl px-8 text-xs font-black tracking-widest text-slate-400 uppercase hover:bg-white/5 hover:text-white",children:"Annuler"}),t.jsx(R,{onClick:()=>{c?k.mutate({id:c,data:a}):j.mutate(a)},disabled:j.isPending||k.isPending||!a.name||!a.code,className:"h-12 rounded-xl bg-white px-10 text-xs font-black tracking-widest text-slate-900 uppercase transition-all hover:bg-slate-100",children:j.isPending?t.jsx(Ge,{className:"h-4 w-4 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Ut,{className:"mr-2 h-4 w-4"}),c?"Mettre à jour":"Enregistrer Partenaire"]})})]})]})}),e[30]=j,e[31]=c,e[32]=a,e[33]=L,e[34]=l,e[35]=k,e[36]=G):G=e[36];let ue;e[37]!==G?(ue=t.jsx(Oe,{children:G}),e[37]=G,e[38]=ue):ue=e[38];let me;e[39]===Symbol.for("react.memo_cache_sentinel")?(me=[{id:"all",label:"Tout"},{id:"bank",label:"Banques"},{id:"mobile_money",label:"Mobile Money"},{id:"payment",label:"Paiement"},{id:"other",label:"Autres"}],e[39]=me):me=e[39];let re;e[40]!==d?(re=t.jsx("div",{className:"flex gap-2",children:me.map(r=>t.jsx("button",{onClick:()=>v(r.id),className:Y("rounded-xl px-4 py-2 text-xs font-black tracking-widest uppercase transition-all",d===r.id?"bg-slate-900 text-white shadow-lg shadow-slate-900/10":"bg-white text-slate-400 hover:bg-slate-50 hover:text-slate-600"),children:r.label},r.id))}),e[40]=d,e[41]=re):re=e[41];let ne;e[42]!==z||e[43]!==o?(ne=r=>t.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative overflow-hidden rounded-[2rem] border-2 border-slate-50 bg-white p-6 shadow-xl shadow-slate-200/50 transition-all duration-300 hover:border-indigo-100",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("div",{className:Y("flex h-14 w-14 items-center justify-center rounded-2xl shadow-lg transition-transform group-hover:rotate-6",r.type==="bank"?"bg-slate-900 text-white shadow-slate-900/10":r.type==="payment"?"bg-indigo-500 text-white shadow-indigo-500/10":r.type==="other"?"bg-amber-500 text-white shadow-amber-500/10":"bg-emerald-500 text-white shadow-emerald-500/10"),children:r.logo_url?t.jsx("img",{src:r.logo_url,alt:r.name,className:"h-9 w-9 object-contain"}):r.type==="bank"?t.jsx(mt,{className:"h-7 w-7"}):r.type==="payment"?t.jsx(wt,{className:"h-7 w-7"}):r.type==="other"?t.jsx(wt,{className:"h-7 w-7"}):t.jsx(zt,{className:"h-7 w-7"})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(R,{variant:"ghost",size:"icon",onClick:()=>o.mutate({id:r.id,is_active:!r.is_active}),className:Y("h-10 w-10 rounded-xl transition-all",r.is_active?"bg-emerald-50 text-emerald-500":"bg-slate-50 text-slate-300"),children:t.jsx(ut,{className:"h-5 w-5"})}),t.jsx(R,{variant:"ghost",size:"icon",onClick:()=>z.mutate(r.id),className:"h-10 w-10 rounded-xl text-slate-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500",children:t.jsx(it,{className:"h-5 w-5"})}),t.jsx(R,{variant:"ghost",size:"icon",onClick:()=>m(r.id),className:"h-10 w-10 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-emerald-50 hover:text-emerald-600",children:t.jsx(gt,{className:"h-5 w-5"})}),t.jsx(R,{variant:"ghost",size:"icon",onClick:()=>E(r),className:"h-10 w-10 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-indigo-50 hover:text-indigo-600",children:t.jsx(js,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-lg font-black tracking-tight text-slate-900",children:r.name}),!r.is_active&&t.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[8px] font-black tracking-widest text-slate-400 uppercase",children:"Inactif"}),r.settings?.required_fields&&r.settings.required_fields.length>0&&t.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[8px] font-black tracking-widest text-emerald-600 uppercase",children:[t.jsx(vt,{className:"h-2 w-2"}),"Configuré"]})]}),t.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[t.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:r.code}),t.jsx("span",{className:"h-1 w-1 rounded-full bg-slate-200"}),t.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase",children:r.type==="bank"?"Banque":r.type==="payment"?"Service de Paiement":r.type==="other"?"Autre Service":"Mobile Money"})]})]}),t.jsx("div",{className:Y("absolute -right-6 -bottom-6 h-24 w-24 rounded-full opacity-[0.03] transition-transform group-hover:scale-150",r.type==="bank"?"bg-slate-900":"bg-emerald-500")})]},r.id),e[42]=z,e[43]=o,e[44]=ne):ne=e[44];let fe;e[45]!==f?(fe=f&&t.jsx("div",{className:"flex justify-center p-20",children:t.jsx(qt,{className:"h-10 w-10 animate-spin text-indigo-600"})}),e[45]=f,e[46]=fe):fe=e[46];const he=Oe,ae=x&&t.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 p-4 backdrop-blur-sm",onClick:()=>m(null),children:t.jsxs(ve.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"w-full max-w-md overflow-hidden rounded-[2.5rem] bg-white shadow-2xl",onClick:Ss,children:[t.jsxs("div",{className:"relative bg-slate-900 p-8 text-white",children:[t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 bg-indigo-500/10 blur-3xl"}),t.jsxs("h3",{className:"flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(gt,{className:"h-6 w-6 text-indigo-400"}),"Champs Requis"]}),t.jsxs("p",{className:"mt-2 text-xs font-medium text-slate-400",children:["Configurez les informations obligatoires pour"," ",t.jsx("span",{className:"text-white",children:p.find(r=>r.id===x)?.name})]})]}),t.jsxs("div",{className:"p-8",children:[t.jsx("div",{className:"space-y-3",children:[{id:"account_number",label:"Numéro de Compte"},{id:"beneficiary",label:"Nom du Bénéficiaire"},{id:"beneficiary_number",label:"Numéro du Bénéficiaire"},{id:"reason",label:"Motif / Raison"}].map(r=>{const V=p.find(ke=>ke.id===x),ee=(V?.settings?.required_fields||[]).includes(r.id);return t.jsxs("button",{onClick:()=>_.mutate({institution:V,field:r.id}),className:Y("flex w-full items-center justify-between rounded-2xl border-2 p-5 transition-all",ee?"border-indigo-100 bg-indigo-50/50 text-indigo-900 shadow-sm":"border-slate-100 bg-slate-50/50 text-slate-500 hover:border-slate-200"),children:[t.jsx("span",{className:"text-sm font-black tracking-tight",children:r.label}),ee?t.jsx(vt,{className:"h-6 w-6 text-indigo-600"}):t.jsx("div",{className:"h-6 w-6 rounded-full border-2 border-slate-200 bg-white"})]},r.id)})}),t.jsxs("div",{className:"mt-8 space-y-4",children:[t.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[t.jsx(Ve,{className:"h-3 w-3"}),"Ajouter un champ personnalisé"]}),t.jsx("div",{className:"flex flex-col gap-2",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ge,{placeholder:"ex: Code Agence...",value:w,onChange:r=>S(r.target.value),className:"h-12 rounded-xl border-slate-200"}),t.jsxs(tt,{value:b,onValueChange:r=>C(r),children:[t.jsx(st,{className:"h-12 w-32 rounded-xl border-slate-200",children:t.jsx(at,{})}),t.jsxs(lt,{className:"bg-white",children:[t.jsx(ye,{value:"depot",children:"Dépôt"}),t.jsx(ye,{value:"retrait",children:"Retrait"}),t.jsx(ye,{value:"both",children:"Les deux"})]})]}),t.jsx(R,{onClick:()=>{if(w.trim()){const r=p.find(V=>V.id===x);$.mutate({institution:r,label:w,operation_type:b})}},disabled:!w.trim()||$.isPending,className:"h-12 rounded-xl bg-indigo-600 px-4 text-white hover:bg-indigo-700",children:$.isPending?t.jsx(Ge,{className:"h-4 w-4 animate-spin"}):t.jsx(Ve,{className:"h-4 w-4"})})]})}),t.jsx("div",{className:"space-y-2",children:(p.find(r=>r.id===x)?.settings?.custom_fields||[]).map(r=>t.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-100 bg-slate-50 p-3",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-bold text-slate-700",children:r.label}),t.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:r.operation_type==="depot"?"Dépôt":r.operation_type==="retrait"?"Retrait":"Les deux"})]}),t.jsx(R,{variant:"ghost",size:"icon",onClick:()=>{const V=p.find(ee=>ee.id===x);H.mutate({institution:V,fieldId:r.id})},className:"h-8 w-8 text-slate-400 hover:text-red-500",children:t.jsx(it,{className:"h-4 w-4"})})]},r.id))})]}),t.jsxs("div",{className:"mt-8 space-y-4 border-t border-slate-100 pt-6",children:[t.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[t.jsx(ut,{className:"h-3 w-3"}),"Infos Agent (Retrait)"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(oe,{className:"ml-1 text-[10px] font-bold text-slate-500",children:"Nom de l'Agent"}),t.jsx(ge,{placeholder:"ex: HAVIFIN BOUTIQUE",defaultValue:p.find(r=>r.id===x)?.settings?.withdrawal_agent_name||"",onBlur:r=>{const V=p.find(ee=>ee.id===x);V&&r.target.value!==(V.settings?.withdrawal_agent_name||"")&&Q.mutate({institution:V,name:r.target.value,number:V.settings?.withdrawal_agent_number||""})},className:"h-10 rounded-xl border-slate-200 text-sm"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx(oe,{className:"ml-1 text-[10px] font-bold text-slate-500",children:"Numéro de l'Agent"}),t.jsx(ge,{placeholder:"ex: 123456",defaultValue:p.find(r=>r.id===x)?.settings?.withdrawal_agent_number||"",onBlur:r=>{const V=p.find(ee=>ee.id===x);V&&r.target.value!==(V.settings?.withdrawal_agent_number||"")&&Q.mutate({institution:V,name:V.settings?.withdrawal_agent_name||"",number:r.target.value})},className:"h-10 rounded-xl border-slate-200 text-sm"})]})]})]}),t.jsx(R,{onClick:()=>m(null),className:"mt-8 h-14 w-full rounded-2xl bg-slate-900 text-sm font-black tracking-widest text-white uppercase transition-all hover:bg-slate-800",children:"Terminer"})]})]})});let ce;return e[47]!==he||e[48]!==ae?(ce=t.jsx(he,{children:ae}),e[47]=he,e[48]=ae,e[49]=ce):ce=e[49],t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-[1.5rem] border border-slate-100 bg-slate-100/50 p-4",children:[t.jsxs("div",{className:"ml-2 flex items-center gap-3",children:[O,t.jsxs("div",{children:[ie,t.jsxs("p",{className:"text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:[p.length," Entités Enregistrées"]})]})]}),xe]}),ue,re,t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:[M.map(ne),p.length===0&&!f&&t.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-slate-200 bg-slate-50/50 py-20",children:[t.jsx(Qe,{className:"mb-4 h-16 w-16 text-slate-200"}),t.jsx("p",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Aucune institution configurée"})]})]}),fe,ce]})}function Ss(e){return e.stopPropagation()}function Cs(e){const{institution:s,name:l,number:n}=e,c=s.settings||{required_fields:[]};return Ke.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...c,withdrawal_agent_name:l,withdrawal_agent_number:n}})}function Ms(e){const{institution:s,fieldId:l}=e,n=s.settings||{required_fields:[]},i=(n.custom_fields||[]).filter(x=>x.id!==l);return Ke.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...n,custom_fields:i}})}function Fs(e){return B.error(typeof e=="string"?e:"Erreur lors de l’ajout")}function Ds(e){const{institution:s,label:l,operation_type:n}=e,c=s.settings||{required_fields:[]},i=c.custom_fields||[],x=l.toLowerCase().replace(/\s+/g,"_").replace(/[^\w]/g,"");if(i.find(d=>d.id===x))return Promise.reject("Ce champ existe déjà");const m=[...i,{id:x,label:l,type:"text",operation_type:n}];return Ke.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...c,custom_fields:m}})}function qs(e){const{id:s,is_active:l}=e;return J.entities.Institution.update(s,{is_active:l})}function As(e){return J.entities.Institution.delete(e)}function $s(e){const{institution:s,field:l}=e,n=s.settings||{required_fields:[]},c=n.required_fields||[],i=c.includes(l)?c.filter(x=>x!==l):[...c,l];return Ke.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...n,required_fields:i}})}function Rs(){return B.error("Erreur lors de la mise à jour")}function Es(e){const{id:s,data:l}=e,n=new FormData;return n.append("_method","PUT"),n.append("name",l.name),n.append("type",l.type),n.append("code",l.code),l.logo&&n.append("logo",l.logo),Ke.post(`/api/institutions/${s}`,n,{headers:{"Content-Type":"multipart/form-data"}})}function Us(){return B.error("Erreur lors de l'ajout de l'institution")}function Ls(e){const s=new FormData;return s.append("name",e.name),s.append("type",e.type),s.append("code",e.code),e.logo&&s.append("logo",e.logo),Ke.post("/api/institutions",s,{headers:{"Content-Type":"multipart/form-data"}})}function Ts(){return J.entities.Institution.list()}const St=[{id:"USD_CDF",label:"USD → CDF",from:"USD",to:"CDF"},{id:"EUR_CDF",label:"EUR → CDF",from:"EUR",to:"CDF"},{id:"EUR_USD",label:"EUR → USD",from:"EUR",to:"USD"},{id:"CDF_USD",label:"CDF → USD",from:"CDF",to:"USD"}];function Ps(){const e=Ce.c(56),s=Xe();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={currency_pair:"",buy_rate:"",sell_rate:""},e[0]=l):l=e[0];const[n,c]=K.useState(l),[i,x]=K.useState(!1);let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m={queryKey:["rates"],queryFn:Bs},e[1]=m):m=e[1];const{data:d,isLoading:v}=Fe(m);let h;e[2]!==d?(h=d===void 0?[]:d,e[2]=d,e[3]=h):h=e[3];const a=h;let u;e[4]!==s?(u={mutationFn:Vs,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),B.success("Taux mis à jour")}},e[4]=s,e[5]=u):u=e[5];const w=pe(u);let S;e[6]!==s?(S={mutationFn:Ys,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),c({currency_pair:"",buy_rate:"",sell_rate:""}),x(!1),B.success("Nouveau taux de change configuré")},onError:Hs},e[6]=s,e[7]=S):S=e[7];const b=pe(S);let C;e[8]!==s?(C={mutationFn:zs,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),B.success("Configuration supprimée")}},e[8]=s,e[9]=C):C=e[9];const y=pe(C);let F;e[10]!==w?(F=(H,I,Q)=>{Q&&w.mutate({id:H.id,data:{[I]:parseFloat(Q)}})},e[10]=w,e[11]=F):F=e[11];const f=F;let p,D;e[12]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600 shadow-lg shadow-indigo-600/20",children:t.jsx(rt,{className:"h-5 w-5 text-white"})}),D=t.jsx("h4",{className:"text-sm font-black tracking-tight text-slate-800 uppercase",children:"Marché des Devises"}),e[12]=p,e[13]=D):(p=e[12],D=e[13]);let M;e[14]!==a.length?(M=t.jsxs("div",{className:"ml-2 flex items-center gap-3",children:[p,t.jsxs("div",{children:[D,t.jsxs("p",{className:"text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:[a.length," Paires Actives"]})]})]}),e[14]=a.length,e[15]=M):M=e[15];let j;e[16]!==i?(j=()=>x(!i),e[16]=i,e[17]=j):j=e[17];const k=i?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 hover:bg-indigo-700";let g;e[18]!==k?(g=Y("h-11 rounded-xl px-6 text-xs font-black tracking-widest uppercase transition-all",k),e[18]=k,e[19]=g):g=e[19];let _;e[20]!==i?(_=i?t.jsx(ct,{className:"mr-2 h-4 w-4"}):t.jsx(Ve,{className:"mr-2 h-4 w-4"}),e[20]=i,e[21]=_):_=e[21];const L=i?"Fermer":"Ajouter une Paire";let U;e[22]!==j||e[23]!==g||e[24]!==_||e[25]!==L?(U=t.jsxs(R,{onClick:j,className:g,children:[_,L]}),e[22]=j,e[23]=g,e[24]=_,e[25]=L,e[26]=U):U=e[26];let E;e[27]!==M||e[28]!==U?(E=t.jsxs("div",{className:"flex items-center justify-between rounded-[1.5rem] border border-slate-100 bg-slate-100/50 p-4",children:[M,U]}),e[27]=M,e[28]=U,e[29]=E):E=e[29];let q;e[30]!==b||e[31]!==n||e[32]!==i?(q=i&&t.jsx(ve.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsxs("div",{className:"relative rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-64 w-64 bg-indigo-500/10 blur-[100px]"}),t.jsxs("h5",{className:"mb-8 flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(Ve,{className:"h-6 w-6 text-indigo-400"}),"Nouvelle Configuration"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(oe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Paire de devises"}),t.jsxs(tt,{value:n.currency_pair,onValueChange:H=>c({...n,currency_pair:H}),children:[t.jsx(st,{className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500",children:t.jsx(at,{placeholder:"Choisir une paire"})}),t.jsx(lt,{className:"border-slate-800 bg-slate-900 text-white",children:St.map(Is)})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(oe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Taux d'Achat (Buy)"}),t.jsxs("div",{className:"relative",children:[t.jsx(yt,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-emerald-400"}),t.jsx(ge,{type:"number",placeholder:"0.00",value:n.buy_rate,onChange:H=>c({...n,buy_rate:H.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 pl-11 font-mono font-black text-white"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(oe,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Taux de Vente (Sell)"}),t.jsxs("div",{className:"relative",children:[t.jsx(Be,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-blue-400"}),t.jsx(ge,{type:"number",placeholder:"0.00",value:n.sell_rate,onChange:H=>c({...n,sell_rate:H.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 pl-11 font-mono font-black text-white"})]})]})]}),t.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[t.jsx(R,{variant:"ghost",onClick:()=>x(!1),className:"h-12 rounded-xl px-8 text-xs font-black tracking-widest text-slate-400 uppercase hover:bg-white/5 hover:text-white",children:"Annuler"}),t.jsx(R,{onClick:()=>b.mutate(n),disabled:b.isPending||!n.currency_pair,className:"h-12 rounded-xl bg-white px-10 text-xs font-black tracking-widest text-slate-900 uppercase transition-all hover:bg-slate-100",children:b.isPending?t.jsx(Ge,{className:"h-4 w-4 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Ut,{className:"mr-2 h-4 w-4"}),"Activer le Taux"]})})]})]})}),e[30]=b,e[31]=n,e[32]=i,e[33]=q):q=e[33];let z;e[34]!==q?(z=t.jsx(Oe,{children:q}),e[34]=q,e[35]=z):z=e[35];let T;if(e[36]!==y||e[37]!==f||e[38]!==a){let H;e[40]!==y||e[41]!==f?(H=I=>{const Q=St.find(O=>O.id===I.currency_pair);return t.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group rounded-[2rem] border-2 border-slate-50 bg-white p-8 shadow-xl shadow-slate-200/50 transition-all duration-300 hover:border-indigo-100",children:[t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-900 shadow-lg shadow-slate-900/10 transition-transform group-hover:rotate-6",children:t.jsx("span",{className:"text-sm font-black text-white",children:Q?.from||I.currency_pair.split("_")[0]})}),t.jsx(Be,{className:"h-4 w-4 text-slate-300"}),t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl border border-indigo-100 bg-indigo-50",children:t.jsx("span",{className:"text-sm font-black text-indigo-600",children:Q?.to||I.currency_pair.split("_")[1]})})]}),t.jsx(R,{variant:"ghost",size:"icon",onClick:()=>y.mutate(I.id),className:"h-10 w-10 rounded-xl text-slate-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500",children:t.jsx(it,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between px-1",children:[t.jsx("span",{className:"text-[9px] font-black tracking-widest text-slate-400 uppercase",children:"Achat (Buy)"}),t.jsx(yt,{className:"h-3 w-3 text-emerald-500"})]}),t.jsx("div",{className:"relative",children:t.jsx(ge,{type:"number",value:I.buy_rate,onChange:O=>f(I,"buy_rate",O.target.value),className:"h-14 rounded-2xl border-transparent bg-slate-50 font-mono text-xl font-black text-slate-900 focus:border-indigo-500 focus:bg-white"})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between px-1",children:[t.jsx("span",{className:"text-[9px] font-black tracking-widest text-slate-400 uppercase",children:"Vente (Sell)"}),t.jsx(Be,{className:"h-3 w-3 text-blue-500"})]}),t.jsx("div",{className:"relative",children:t.jsx(ge,{type:"number",value:I.sell_rate,onChange:O=>f(I,"sell_rate",O.target.value),className:"h-14 rounded-2xl border-transparent bg-slate-50 font-mono text-xl font-black text-slate-900 focus:border-indigo-500 focus:bg-white"})})]})]})]},I.id)},e[40]=y,e[41]=f,e[42]=H):H=e[42],T=a.map(H),e[36]=y,e[37]=f,e[38]=a,e[39]=T}else T=e[39];let o;e[43]!==v||e[44]!==a.length?(o=a.length===0&&!v&&t.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-slate-200 bg-slate-50/50 py-20",children:[t.jsx(rt,{className:"mb-4 h-16 w-16 text-slate-200"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Aucun taux configuré"})]}),e[43]=v,e[44]=a.length,e[45]=o):o=e[45];let A;e[46]!==T||e[47]!==o?(A=t.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[T,o]}),e[46]=T,e[47]=o,e[48]=A):A=e[48];let $;e[49]!==v?($=v&&t.jsx("div",{className:"flex justify-center p-20",children:t.jsx(qt,{className:"h-10 w-10 animate-spin text-indigo-600"})}),e[49]=v,e[50]=$):$=e[50];let P;return e[51]!==E||e[52]!==z||e[53]!==A||e[54]!==$?(P=t.jsxs("div",{className:"space-y-8",children:[E,z,A,$]}),e[51]=E,e[52]=z,e[53]=A,e[54]=$,e[55]=P):P=e[55],P}function Is(e){return t.jsx(ye,{value:e.id,className:"hover:bg-slate-800 focus:bg-slate-800",children:e.label},e.id)}async function zs(e){await J.entities.ExchangeRate.delete(e)}function Hs(){return B.error("Erreur lors de la création du taux")}async function Ys(e){await J.entities.ExchangeRate.create({...e,buy_rate:parseFloat(e.buy_rate),sell_rate:parseFloat(e.sell_rate),is_active:!0})}async function Vs(e){const{id:s,data:l}=e;await J.entities.ExchangeRate.update(s,l)}function Bs(){return J.entities.ExchangeRate.filter({is_active:!0})}function Ks(){const e=Xe(),[s,l]=K.useState("grid"),[n,c]=K.useState(null),[i,x]=K.useState(!1),[m,d]=K.useState(!1),[v,h]=K.useState(1),[a,u]=K.useState("all"),[w,S]=K.useState(""),[b,C]=K.useState(null),[y,F]=K.useState(""),{data:f=[]}=Fe({queryKey:["manager-shops"],queryFn:()=>J.entities.Shop.list()});Lt.useEffect(()=>{f.length>0&&!b&&C(f[0].id)},[f,b]);const{data:p,isLoading:D}=Fe({queryKey:["sessions",b,v,a,w],queryFn:()=>J.entities.Session.list({shop_id:b?.toString(),status:a==="all"?void 0:a,date:w||void 0,page:v.toString()}),enabled:!!b}),M=p?.data||[],j=p,{data:k,isLoading:g}=Fe({queryKey:["session-report",n],queryFn:()=>J.entities.Session.report(n),enabled:!!n}),_=M.find(o=>o.status==="open"),L=async()=>{if(b){x(!0);try{await J.entities.Session.create({session_date:X().format("YYYY-MM-DD"),shop_id:b,notes:y}),B.success("Session ouverte avec succès"),e.invalidateQueries({queryKey:["sessions"]}),F("")}catch(o){const A=o.response?.data?.error||o.response?.data?.message||"Erreur lors de l’ouverture";B.error(A)}finally{x(!1)}}},U=async o=>{d(!0);try{await J.entities.Session.close(o),B.success("Session fermée avec succès"),e.invalidateQueries({queryKey:["sessions"]})}catch(A){const $=A.response?.data?.error||A.response?.data?.message||"Erreur lors de la fermeture";B.error($)}finally{d(!1)}},E=async o=>{try{await J.entities.Session.reopen(o),B.success("Session réouverte avec succès"),e.invalidateQueries({queryKey:["sessions"]})}catch(A){const $=A.response?.data?.error||A.response?.data?.message||"Erreur lors de la réouverture de la session";B.error($)}},q=f.find(o=>o.id===b),{auth:z}=ft().props,T=z.user;return t.jsxs("div",{className:"animate-in space-y-8 pb-10 font-sans duration-500 fade-in slide-in-from-bottom-4",children:[t.jsxs("div",{className:"flex flex-col justify-between gap-6 md:flex-row md:items-center",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-3xl font-black tracking-tighter text-slate-900 uppercase",children:["Console"," ",t.jsx("span",{className:"text-indigo-600",children:"Sessions"})]}),t.jsx("p",{className:"mt-1 text-sm font-medium text-slate-400",children:"Pilotez l'activité journalière de vos guichets."})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[f.length>1&&t.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 bg-white p-1 shadow-sm",children:[t.jsx("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-2",children:t.jsx(Ft,{className:"h-4 w-4 text-slate-500"})}),t.jsx("select",{className:"cursor-pointer border-none bg-transparent pr-10 text-sm font-black text-slate-700 uppercase focus:ring-0",value:b||"",onChange:o=>C(Number(o.target.value)),children:f.map(o=>t.jsx("option",{value:o.id,children:o.name},o.id))})]}),t.jsxs("div",{className:"flex rounded-2xl border border-slate-200 bg-slate-100 p-1 shadow-inner",children:[t.jsxs("button",{onClick:()=>l("grid"),className:Y("flex items-center gap-2 rounded-xl p-2 px-4 text-[10px] font-black tracking-widest uppercase transition-all duration-300",s==="grid"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"),children:[t.jsx(hs,{className:"h-4 w-4"})," Grille"]}),t.jsxs("button",{onClick:()=>l("list"),className:Y("flex items-center gap-2 rounded-xl p-2 px-4 text-[10px] font-black tracking-widest uppercase transition-all duration-300",s==="list"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"),children:[t.jsx(ps,{className:"h-4 w-4"})," Liste"]})]})]})]}),t.jsxs($t,{className:"relative overflow-hidden rounded-[3rem] border-none bg-white shadow-2xl",children:[t.jsx("div",{className:Y("absolute inset-0 z-0 opacity-[0.04]",_?"bg-emerald-500":"bg-indigo-600")}),t.jsx(Ht,{className:"relative z-10 p-10",children:_?t.jsxs("div",{className:"flex flex-col items-center justify-between gap-12 lg:flex-row",children:[t.jsx("div",{className:"flex-1 space-y-8",children:t.jsxs("div",{className:"inline-flex items-center gap-6 rounded-[2.5rem] border border-slate-100 bg-slate-50 p-8 shadow-sm",children:[t.jsx("div",{className:"rounded-3xl bg-emerald-500 p-5 shadow-xl shadow-emerald-500/30",children:t.jsx(fs,{className:"h-10 w-10 text-white"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-[9px] font-bold tracking-tighter text-emerald-600 uppercase",children:"Session Active"}),t.jsxs("span",{className:"text-[9px] font-bold tracking-widest text-slate-400 uppercase",children:["• ",q?.name]})]}),t.jsx("div",{className:"text-4xl font-black tracking-tighter text-slate-900",children:X(_.session_date).format("DD MMMM YYYY")}),t.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm font-bold text-slate-400",children:[t.jsxs("span",{className:"flex items-center gap-1.5",children:[t.jsx(Je,{className:"h-4 w-4 text-indigo-500"})," ",X(_.opened_at).format("HH:mm")]}),t.jsx("span",{className:"h-4 w-[1px] bg-slate-200"}),t.jsxs("span",{className:"flex items-center gap-1.5",children:[t.jsx(nt,{className:"h-4 w-4 text-indigo-500"})," ",_.opened_by," ","(Opérateur)"]})]})]})]})}),t.jsxs("div",{className:"flex w-full flex-col items-center gap-4 lg:w-96",children:[t.jsxs(R,{onClick:()=>U(_.id),disabled:m,className:"flex h-24 w-full flex-col items-center justify-center gap-2 rounded-[2.5rem] bg-slate-900 text-sm font-black tracking-widest text-white uppercase shadow-2xl transition-all hover:bg-black active:scale-95",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(jt,{className:Y("h-7 w-7 text-red-500",m&&"animate-pulse")}),"Fermer la Boutique"]}),t.jsx("span",{className:"text-[9px] font-bold opacity-40",children:"Arrêter le flux de transactions"})]}),t.jsx(R,{variant:"ghost",onClick:()=>c(_.id),className:"rounded-2xl font-bold text-indigo-600 hover:bg-indigo-50",children:"Consulter les statistiques en direct"})]})]}):t.jsxs("div",{className:"flex flex-col items-center justify-between gap-12 lg:flex-row",children:[t.jsxs("div",{className:"flex-1 space-y-8",children:[t.jsxs("div",{className:"flex items-start gap-6",children:[t.jsx("div",{className:"rounded-[2rem] border border-slate-100 bg-slate-50 p-6",children:t.jsx(Yt,{className:"h-10 w-10 text-slate-300"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"mb-2 text-3xl font-black tracking-tight text-slate-900",children:"Prêt pour l'ouverture ?"}),t.jsxs("p",{className:"max-w-lg leading-relaxed font-medium text-slate-500",children:["Aucune session n'est ouverte pour"," ",t.jsx("span",{className:"font-bold text-indigo-600",children:q?.name})," ","aujourd'hui. Ouvrez une session pour autoriser les caissiers à traiter les tickets."]})]})]}),t.jsxs("div",{className:"max-w-xl space-y-4",children:[t.jsx(oe,{className:"ml-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Commentaire d'ouverture"}),t.jsx(ge,{value:y,onChange:o=>F(o.target.value),placeholder:"Ex: Fond de caisse, équipe du jour...",className:"h-16 rounded-3xl border-slate-200 bg-slate-50 px-8 font-bold text-slate-700 transition-colors focus:bg-white"})]})]}),t.jsxs("div",{className:"group relative w-full overflow-hidden rounded-[3rem] bg-indigo-600 p-8 text-white shadow-2xl shadow-indigo-600/20 lg:w-96",children:[t.jsx("div",{className:"absolute top-0 right-0 h-40 w-40 translate-x-1/2 -translate-y-1/2 bg-white/10 blur-[60px]"}),t.jsxs("div",{className:"relative z-10 space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"rounded-2xl bg-white/20 p-4",children:t.jsx(bt,{className:"h-8 w-8 text-white"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] leading-none font-black tracking-widest uppercase opacity-60",children:"Session du"}),t.jsx("div",{className:"text-2xl font-black",children:X().format("DD/MM/YYYY")})]})]}),t.jsxs(R,{onClick:L,disabled:i||!b,className:"flex h-20 w-full items-center justify-center gap-3 rounded-[2rem] bg-white text-xs font-black tracking-[0.2em] text-indigo-600 uppercase shadow-xl transition-all hover:bg-slate-50 active:scale-95",children:[i?t.jsx(Je,{className:"h-5 w-5 animate-spin"}):t.jsx(ot,{className:"h-5 w-5 fill-indigo-600"}),"Ouvrir Session"]}),t.jsx("p",{className:"text-center text-[9px] font-black tracking-widest uppercase opacity-60",children:"Active le terminal client immédiatement"})]})]})]})})]}),t.jsxs("div",{className:"space-y-8 pt-10",children:[t.jsxs("div",{className:"flex flex-col items-end justify-between gap-6 border-b border-slate-100 pb-8 lg:flex-row",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-12 w-1.5 rounded-full bg-indigo-500 shadow-[0_0_15px_rgba(79,70,229,0.5)]"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-2xl font-black tracking-tight text-slate-900 uppercase",children:"Registre Historique"}),t.jsxs("p",{className:"mt-0.5 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:[j?.total||0," sessions enregistrées au total"]})]})]}),t.jsxs("div",{className:"flex w-full flex-wrap items-center gap-4 lg:w-auto",children:[t.jsxs("div",{className:"flex h-14 flex-1 items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 shadow-sm transition-all focus-within:border-indigo-500 lg:min-w-[200px] lg:flex-none",children:[t.jsx(pt,{className:"h-4 w-4 text-slate-400"}),t.jsx("input",{type:"date",value:w,onChange:o=>{S(o.target.value),h(1)},className:"w-full border-none bg-transparent text-xs font-bold text-slate-600 focus:ring-0"})]}),t.jsxs("div",{className:"flex h-14 flex-1 items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 shadow-sm transition-all focus-within:border-indigo-500 lg:min-w-[200px] lg:flex-none",children:[t.jsx(ds,{className:"h-4 w-4 text-slate-400"}),t.jsxs("select",{value:a,onChange:o=>{u(o.target.value),h(1)},className:"w-full border-none bg-transparent text-xs font-bold text-slate-600 uppercase focus:ring-0",children:[t.jsx("option",{value:"all",children:"Tous les Statuts"}),t.jsx("option",{value:"open",children:"En Cours"}),t.jsx("option",{value:"closed",children:"Clôturées"})]})]}),(w||a!=="all")&&t.jsx(R,{variant:"ghost",size:"icon",onClick:()=>{S(""),u("all")},className:"h-14 w-14 rounded-2xl text-red-500 hover:bg-red-50 hover:text-red-600",children:t.jsx(ct,{className:"h-5 w-5"})})]})]}),t.jsx(Oe,{mode:"wait",children:D?t.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex h-96 flex-col items-center justify-center space-y-6",children:[t.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-indigo-100 border-t-indigo-600"}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Chargement du registre..."})]},"loading"):M.length===0?t.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex h-96 flex-col items-center justify-center space-y-4 rounded-[3rem] border-2 border-dashed border-slate-100",children:[t.jsx("div",{className:"rounded-full bg-slate-50 p-6 text-slate-300",children:t.jsx(pt,{className:"h-12 w-12"})}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucune session trouvée"})]},"empty"):t.jsx(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:s==="grid"?t.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3",children:M.map(o=>t.jsx(Os,{session:o,userRole:T?.role,onView:()=>c(o.id),onClose:()=>U(o.id),onReopen:()=>E(o.id)},o.id))}):t.jsx(Qs,{sessions:M,userRole:T?.role,onView:o=>c(o),onClose:o=>U(o),onReopen:o=>E(o)})},s)}),j&&j.last_page>1&&t.jsxs("div",{className:"mt-12 flex items-center justify-center gap-4 self-center rounded-3xl border border-white bg-white/50 p-4 backdrop-blur-sm",children:[t.jsx(R,{variant:"ghost",disabled:v===1,onClick:()=>h(v-1),className:"h-12 w-12 rounded-2xl border border-slate-100 hover:bg-white",children:t.jsx(It,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[Array.from({length:Math.min(j.last_page,5)}).map((o,A)=>{const $=A+1;return t.jsx("button",{onClick:()=>h($),className:Y("h-12 w-12 rounded-2xl text-xs font-black transition-all",v===$?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"text-slate-400 hover:bg-white hover:text-slate-600"),children:$},$)}),j.last_page>5&&t.jsx("span",{className:"mx-2 text-slate-300",children:"•••"})]}),t.jsx(R,{variant:"ghost",disabled:v===j.last_page,onClick:()=>h(v+1),className:"h-12 w-12 rounded-2xl border border-slate-100 hover:bg-white",children:t.jsx(At,{className:"h-5 w-5"})})]})]}),t.jsx(Oe,{children:n&&k&&t.jsx(Gs,{session:k?.session,stats:k?.statistics,clients:k?.clients,transactions:k?.transactions,activities:k?.activities,loading:g,onClose:()=>c(null)})})]})}function Os(e){const s=Ce.c(61),{session:l,userRole:n,onView:c,onClose:i,onReopen:x}=e;let m;s[0]!==l.session_date?(m=X(l.session_date).isSame(X(),"day"),s[0]=l.session_date,s[1]=m):m=s[1];const d=m,v=l.status==="open"?"animate-pulse bg-emerald-500":"bg-slate-200";let h;s[2]!==v?(h=Y("absolute top-0 right-0 h-2 w-full",v),s[2]=v,s[3]=h):h=s[3];let a;s[4]!==h?(a=t.jsx("div",{className:h}),s[4]=h,s[5]=a):a=s[5];let u;s[6]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx("div",{className:"rounded-2xl bg-slate-50 p-4 transition-colors duration-500 group-hover:bg-indigo-50",children:t.jsx(bt,{className:"h-7 w-7 text-slate-400 group-hover:text-indigo-500"})}),s[6]=u):u=s[6];const w=l.status==="open"?"border border-emerald-500/20 bg-emerald-500/10 text-emerald-600":"border border-slate-200 bg-slate-100 text-slate-500";let S;s[7]!==w?(S=Y("flex items-center gap-1.5 rounded-full px-4 py-1.5 text-[10px] font-black tracking-widest uppercase",w),s[7]=w,s[8]=S):S=s[8];let b;s[9]!==l.status?(b=l.status==="open"?t.jsx("div",{className:"h-1.5 w-1.5 animate-ping rounded-full bg-emerald-500"}):null,s[9]=l.status,s[10]=b):b=s[10];const C=l.status==="open"?"En cours":"Terminé";let y;s[11]!==S||s[12]!==b||s[13]!==C?(y=t.jsxs("div",{className:"mb-8 flex items-start justify-between",children:[u,t.jsxs("div",{className:S,children:[b,C]})]}),s[11]=S,s[12]=b,s[13]=C,s[14]=y):y=s[14];let F;s[15]!==l.session_date?(F=X(l.session_date).format("DD MMMM YYYY"),s[15]=l.session_date,s[16]=F):F=s[16];let f;s[17]!==F?(f=t.jsx("div",{className:"mb-1 text-2xl font-black tracking-tight text-slate-900",children:F}),s[17]=F,s[18]=f):f=s[18];let p;s[19]!==d?(p=d&&t.jsx("p",{className:"text-[10px] leading-none font-black tracking-widest text-indigo-500 uppercase",children:"Aujourd'hui"}),s[19]=d,s[20]=p):p=s[20];let D;s[21]!==f||s[22]!==p?(D=t.jsxs("div",{children:[f,p]}),s[21]=f,s[22]=p,s[23]=D):D=s[23];let M;s[24]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] uppercase opacity-60",children:"Ouverture"}),s[24]=M):M=s[24];let j;s[25]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(Je,{className:"h-3 w-3"}),s[25]=j):j=s[25];let k;s[26]!==l.opened_at?(k=X(l.opened_at).format("HH:mm"),s[26]=l.opened_at,s[27]=k):k=s[27];let g;s[28]!==k?(g=t.jsxs("div",{className:"flex flex-col gap-1",children:[M,t.jsxs("span",{className:"flex items-center gap-1.5 text-slate-700",children:[j,k]})]}),s[28]=k,s[29]=g):g=s[29];let _;s[30]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx("div",{className:"h-8 w-[1px] bg-slate-200"}),s[30]=_):_=s[30];let L;s[31]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] uppercase opacity-60",children:"Clôture"}),s[31]=L):L=s[31];let U;s[32]!==l.closed_at?(U=l.closed_at?t.jsxs(t.Fragment,{children:[t.jsx(Je,{className:"h-3 w-3"}),X(l.closed_at).format("HH:mm")]}):"--:--",s[32]=l.closed_at,s[33]=U):U=s[33];let E;s[34]!==U?(E=t.jsxs("div",{className:"flex flex-col items-end gap-1",children:[L,t.jsx("span",{className:"flex items-center gap-1.5 text-slate-700",children:U})]}),s[34]=U,s[35]=E):E=s[35];let q;s[36]!==g||s[37]!==E?(q=t.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-50 bg-slate-50/50 p-4 text-xs font-bold text-slate-400",children:[g,_,E]}),s[36]=g,s[37]=E,s[38]=q):q=s[38];let z;s[39]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(Rt,{className:"mr-2 h-4 w-4"}),s[39]=z):z=s[39];let T;s[40]!==c?(T=t.jsxs(R,{onClick:c,className:"h-14 flex-1 rounded-2xl bg-indigo-600 text-[10px] font-black tracking-widest text-white uppercase shadow-lg shadow-indigo-600/20 transition-all hover:scale-105 hover:bg-indigo-700 active:scale-95",children:[z," Rapport"]}),s[40]=c,s[41]=T):T=s[41];let o;s[42]!==i||s[43]!==l.status?(o=l.status==="open"&&t.jsx(R,{onClick:i,variant:"outline",className:"h-14 w-14 rounded-2xl border-slate-200 text-red-500 transition-all hover:border-red-100 hover:bg-red-50 active:scale-95",children:t.jsx(jt,{className:"h-5 w-5"})}),s[42]=i,s[43]=l.status,s[44]=o):o=s[44];let A;s[45]!==x||s[46]!==l.status||s[47]!==n?(A=l.status==="closed"&&n==="super-admin"&&t.jsx(R,{onClick:x,variant:"outline",className:"h-14 w-14 rounded-2xl border-indigo-200 text-indigo-500 transition-all hover:bg-indigo-50 active:scale-95",title:"Réouvrir la session",children:t.jsx(ot,{className:"h-5 w-5"})}),s[45]=x,s[46]=l.status,s[47]=n,s[48]=A):A=s[48];let $;s[49]!==T||s[50]!==o||s[51]!==A?($=t.jsxs("div",{className:"flex gap-3 pt-4",children:[T,o,A]}),s[49]=T,s[50]=o,s[51]=A,s[52]=$):$=s[52];let P;s[53]!==D||s[54]!==q||s[55]!==$?(P=t.jsxs("div",{className:"space-y-6",children:[D,q,$]}),s[53]=D,s[54]=q,s[55]=$,s[56]=P):P=s[56];let H;return s[57]!==y||s[58]!==P||s[59]!==a?(H=t.jsxs($t,{className:"group hover:shadow-3xl relative overflow-hidden rounded-[2.5rem] border border-none border-transparent bg-white p-8 shadow-xl shadow-slate-200/50 transition-all duration-500 hover:-translate-y-2 hover:border-indigo-100",children:[a,y,P]}),s[57]=y,s[58]=P,s[59]=a,s[60]=H):H=s[60],H}function Qs(e){const s=Ce.c(14),{sessions:l,userRole:n,onView:c,onClose:i,onReopen:x}=e;let m;s[0]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase first:rounded-tl-[2.5rem]",children:"Date"}),t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Boutique / Guichet"}),t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Statut"}),t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Horaire"}),t.jsx("th",{className:"p-8 text-right text-[11px] font-black tracking-widest text-slate-400 uppercase last:rounded-tr-[2.5rem]",children:"Actions"})]})}),s[0]=m):m=s[0];let d;if(s[1]!==i||s[2]!==x||s[3]!==c||s[4]!==l||s[5]!==n){let h;s[7]!==i||s[8]!==x||s[9]!==c||s[10]!==n?(h=a=>t.jsxs("tr",{className:"group transition-colors hover:bg-slate-50/50",children:[t.jsx("td",{className:"p-8 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-100 text-slate-400 transition-colors group-hover:bg-indigo-100 group-hover:text-indigo-600",children:t.jsx(bt,{className:"h-5 w-5"})}),t.jsx("span",{className:"text-sm font-black tracking-tight text-slate-700",children:X(a.session_date).format("DD/MM/YYYY")})]})}),t.jsx("td",{className:"p-8",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs font-bold text-slate-700",children:a.shop?.name||"Agence Centrale"}),t.jsxs("span",{className:"mt-0.5 text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:["ID: ",a.shop_id]})]})}),t.jsx("td",{className:"p-8",children:t.jsx("span",{className:Y("rounded-full px-4 py-1.5 text-[9px] font-black tracking-widest uppercase",a.status==="open"?"border border-emerald-100 bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-400"),children:a.status==="open"?"En Cours":"Clôturé"})}),t.jsx("td",{className:"p-8",children:t.jsxs("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"mb-0.5 text-[9px] uppercase opacity-50",children:"Ouvert"}),t.jsx("span",{className:"text-slate-600",children:X(a.opened_at).format("HH:mm")})]}),t.jsx(rt,{className:"h-3 w-3 opacity-20"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"mb-0.5 text-[9px] uppercase opacity-50",children:"Fermé"}),t.jsx("span",{className:"text-slate-600",children:a.closed_at?X(a.closed_at).format("HH:mm"):"--:--"})]})]})}),t.jsx("td",{className:"p-8 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsxs(R,{onClick:()=>c(a.id),className:"h-10 rounded-xl bg-indigo-50 px-4 text-[10px] font-black tracking-widest text-indigo-600 uppercase shadow-none transition-all hover:bg-indigo-600 hover:text-white",children:[t.jsx(Rt,{className:"mr-2 h-3.5 w-3.5"})," ","Rapport"]}),a.status==="open"&&t.jsx(R,{onClick:()=>i(a.id),size:"icon",className:"h-10 w-10 rounded-xl bg-red-50 text-red-500 shadow-none transition-all hover:bg-red-500 hover:text-white",children:t.jsx(jt,{className:"h-4 w-4"})}),a.status==="closed"&&n==="super-admin"&&t.jsx(R,{onClick:()=>x(a.id),size:"icon",className:"h-10 w-10 rounded-xl bg-indigo-50 text-indigo-500 shadow-none transition-all hover:bg-indigo-500 hover:text-white",title:"Réouvrir la session",children:t.jsx(ot,{className:"h-4 w-4"})})]})})]},a.id),s[7]=i,s[8]=x,s[9]=c,s[10]=n,s[11]=h):h=s[11],d=l.map(h),s[1]=i,s[2]=x,s[3]=c,s[4]=l,s[5]=n,s[6]=d}else d=s[6];let v;return s[12]!==d?(v=t.jsx("div",{className:"w-full overflow-hidden rounded-[2.5rem] border border-slate-100 bg-white shadow-xl shadow-slate-200/30",children:t.jsxs("table",{className:"w-full border-collapse text-left",children:[m,t.jsx("tbody",{className:"divide-y divide-slate-100",children:d})]})}),s[12]=d,s[13]=v):v=s[13],v}function Gs(e){const s=Ce.c(47),{session:l,stats:n,transactions:c,loading:i,onClose:x}=e;let m,d,v;s[0]===Symbol.for("react.memo_cache_sentinel")?(m={opacity:0},d={opacity:1},v={opacity:0},s[0]=m,s[1]=d,s[2]=v):(m=s[0],d=s[1],v=s[2]);let h;s[3]!==x?(h=t.jsx(ve.div,{initial:m,animate:d,exit:v,onClick:x,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-xl"}),s[3]=x,s[4]=h):h=s[4];let a,u,w;s[5]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:0,scale:.9,y:30},u={opacity:1,scale:1,y:0},w={opacity:0,scale:.9,y:30},s[5]=a,s[6]=u,s[7]=w):(a=s[5],u=s[6],w=s[7]);let S;s[8]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx("div",{className:"rounded-[2rem] bg-indigo-600 p-5 shadow-xl shadow-indigo-600/30",children:t.jsx(Be,{className:"h-10 w-10 text-white"})}),s[8]=S):S=s[8];let b;s[9]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx("h3",{className:"text-3xl font-black tracking-tighter text-slate-900 uppercase",children:"Rapport de Session"}),s[9]=b):b=s[9];const C=l?.status==="open"?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-500";let y;s[10]!==C?(y=Y("rounded-full px-4 py-1.5 text-[10px] font-black tracking-widest uppercase",C),s[10]=C,s[11]=y):y=s[11];const F=l?.status==="open"?"Live":"Archivé";let f;s[12]!==y||s[13]!==F?(f=t.jsxs("div",{className:"mb-1 flex items-center gap-3",children:[b,t.jsx("span",{className:y,children:F})]}),s[12]=y,s[13]=F,s[14]=f):f=s[14];let p;s[15]!==l?(p=l?X(l.session_date).format("dddd DD MMMM YYYY"):"Chargement...",s[15]=l,s[16]=p):p=s[16];const D=l?.shop?.name;let M;s[17]!==p||s[18]!==D?(M=t.jsxs("p",{className:"text-sm font-bold text-slate-400",children:[p," ","• Guichet ",D]}),s[17]=p,s[18]=D,s[19]=M):M=s[19];let j;s[20]!==f||s[21]!==M?(j=t.jsxs("div",{className:"flex items-center gap-6",children:[S,t.jsxs("div",{children:[f,M]})]}),s[20]=f,s[21]=M,s[22]=j):j=s[22];let k;s[23]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(ct,{className:"h-8 w-8"}),s[23]=k):k=s[23];let g;s[24]!==x?(g=t.jsx(R,{onClick:x,variant:"ghost",className:"h-16 w-16 rounded-[2rem] bg-slate-50 text-slate-400 transition-all hover:bg-red-50 hover:text-red-500",children:k}),s[24]=x,s[25]=g):g=s[25];let _;s[26]!==j||s[27]!==g?(_=t.jsxs("div",{className:"flex shrink-0 items-center justify-between border-b border-slate-100 bg-white p-8 md:p-12",children:[j,g]}),s[26]=j,s[27]=g,s[28]=_):_=s[28];let L;s[29]!==i||s[30]!==n?.cashier_stats||s[31]!==n?.total_clients||s[32]!==n?.total_transactions||s[33]!==n?.volume_cdf||s[34]!==n?.volume_usd||s[35]!==c?(L=t.jsx("div",{className:"flex-1 space-y-12 overflow-y-auto p-8 md:p-12",children:i?t.jsxs("div",{className:"flex h-96 flex-col items-center justify-center space-y-6",children:[t.jsx("div",{className:"h-20 w-20 animate-spin rounded-full border-4 border-indigo-100 border-t-indigo-600"}),t.jsx("p",{className:"animate-pulse text-sm font-black tracking-widest text-slate-400 uppercase",children:"Synthèse des données..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4",children:[t.jsx(Ze,{title:"Clients",value:n?.total_clients,icon:nt,color:"blue"}),t.jsx(Ze,{title:"Transactions",value:n?.total_transactions,icon:rt,color:"emerald"}),t.jsx(Ze,{title:"Volume USD",value:`$ ${n?.volume_usd?.toLocaleString()}`,icon:Be,color:"indigo"}),t.jsx(Ze,{title:"Volume CDF",value:`${n?.volume_cdf?.toLocaleString()} FC`,icon:Qe,color:"amber"})]}),t.jsxs("div",{className:"space-y-12",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-10 w-1 rounded-full bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.5)]"}),t.jsx("h5",{className:"text-xl font-black tracking-tight text-slate-900 uppercase",children:"Flux Financier"})]}),t.jsx("div",{className:"overflow-hidden rounded-[2.5rem] border border-slate-100 bg-white shadow-xl shadow-slate-200/20",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50/50",children:[t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Heure"}),t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Opération"}),t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Montant Envoyé"}),t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Montant Reçu"}),t.jsx("th",{className:"p-6 text-right text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Commission"})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[c?.map(Xs),c?.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"p-12 text-center text-xs font-black tracking-widest text-slate-300 uppercase",children:"Aucune transaction"})})]})]})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-10 w-1 rounded-full bg-indigo-500"}),t.jsx("h5",{className:"text-xl font-black tracking-tight text-slate-900 uppercase",children:"Performance Opérateurs"})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:n?.cashier_stats?.map(Js)})]})]})]})}),s[29]=i,s[30]=n?.cashier_stats,s[31]=n?.total_clients,s[32]=n?.total_transactions,s[33]=n?.volume_cdf,s[34]=n?.volume_usd,s[35]=c,s[36]=L):L=s[36];let U;s[37]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsxs("div",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:["Document généré le ",X().format("DD/MM/YYYY HH:mm")]}),s[37]=U):U=s[37];let E;s[38]!==x?(E=t.jsxs("div",{className:"flex shrink-0 items-center justify-between border-t border-slate-100 bg-white p-8 md:p-12",children:[U,t.jsx(R,{onClick:x,className:"h-14 rounded-2xl bg-slate-900 px-10 text-xs font-black tracking-widest text-white uppercase",children:"Fermer le Rapport"})]}),s[38]=x,s[39]=E):E=s[39];let q;s[40]!==_||s[41]!==L||s[42]!==E?(q=t.jsxs(ve.div,{initial:a,animate:u,exit:w,className:"relative flex max-h-[90vh] w-full max-w-6xl flex-col overflow-hidden rounded-[3.5rem] border border-white/20 bg-[#f8fafc] shadow-[0_40px_100px_rgba(0,0,0,0.5)]",children:[_,L,E]}),s[40]=_,s[41]=L,s[42]=E,s[43]=q):q=s[43];let z;return s[44]!==q||s[45]!==h?(z=t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 font-sans md:p-12",children:[h,q]}),s[44]=q,s[45]=h,s[46]=z):z=s[46],z}function Js(e,s){return t.jsxs("div",{className:"group rounded-[2rem] border border-slate-100 bg-white p-8 shadow-lg shadow-slate-200/30 transition-all hover:border-indigo-200",children:[t.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[t.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-indigo-50 text-xl font-black text-indigo-600 transition-all group-hover:bg-indigo-600 group-hover:text-white",children:e.cashier.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-black tracking-tighter text-slate-800",children:e.cashier}),t.jsx("div",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Opérateur"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"rounded-xl bg-slate-50 p-4",children:[t.jsx("div",{className:"mb-1 text-[9px] font-black text-slate-400 uppercase",children:"Appels"}),t.jsx("div",{className:"text-xl font-black text-slate-700",children:e.clients_called})]}),t.jsxs("div",{className:"rounded-xl bg-slate-50 p-4",children:[t.jsx("div",{className:"mb-1 text-[9px] font-black text-slate-400 uppercase",children:"Succès"}),t.jsx("div",{className:"text-xl font-black text-emerald-600",children:e.transactions_completed})]})]})]},s)}function Xs(e){return t.jsxs("tr",{className:"transition-colors hover:bg-slate-50/30",children:[t.jsx("td",{className:"p-6 text-xs font-bold text-slate-500",children:X(e.created_at).format("HH:mm:ss")}),t.jsx("td",{className:"p-6",children:t.jsx("span",{className:"text-xs font-black tracking-tighter text-slate-800 uppercase",children:e.operation_type})}),t.jsx("td",{className:"p-6",children:t.jsxs("span",{className:"text-sm font-black text-emerald-600",children:[e.amount_from?.toLocaleString()," ",e.currency_from]})}),t.jsx("td",{className:"p-6",children:t.jsxs("span",{className:"text-sm font-black text-slate-600",children:[e.amount_to?.toLocaleString()," ",e.currency_to]})}),t.jsx("td",{className:"p-6 text-right",children:t.jsxs("span",{className:"text-xs font-black text-indigo-600",children:["$"," ",e.commission]})})]},e.id)}function Ze(e){const s=Ce.c(21),{title:l,value:n,icon:c,color:i}=e;let x,m,d,v;if(s[0]!==c||s[1]!==i){const b={blue:"bg-blue-500 text-blue-500 border-blue-100 shadow-blue-500/20",emerald:"bg-emerald-500 text-emerald-500 border-emerald-100 shadow-emerald-500/20",indigo:"bg-indigo-500 text-indigo-500 border-indigo-100 shadow-indigo-500/20",amber:"bg-amber-500 text-amber-500 border-amber-100 shadow-amber-500/20"};v="flex flex-col items-center rounded-[2.5rem] border border-slate-100 bg-white p-8 text-center shadow-xl shadow-slate-200/30",d=Y("mb-6 rounded-2xl p-5 shadow-xl",b[i].split(" ")[0],"bg-opacity-10"),x=c,m=Y("h-8 w-8",b[i].split(" ")[1]),s[0]=c,s[1]=i,s[2]=x,s[3]=m,s[4]=d,s[5]=v}else x=s[2],m=s[3],d=s[4],v=s[5];let h;s[6]!==x||s[7]!==m?(h=t.jsx(x,{className:m}),s[6]=x,s[7]=m,s[8]=h):h=s[8];let a;s[9]!==d||s[10]!==h?(a=t.jsx("div",{className:d,children:h}),s[9]=d,s[10]=h,s[11]=a):a=s[11];let u;s[12]!==l?(u=t.jsx("div",{className:"mb-2 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:l}),s[12]=l,s[13]=u):u=s[13];let w;s[14]!==n?(w=t.jsx("div",{className:"text-3xl leading-none font-black tracking-tighter text-slate-900",children:n}),s[14]=n,s[15]=w):w=s[15];let S;return s[16]!==v||s[17]!==a||s[18]!==u||s[19]!==w?(S=t.jsxs("div",{className:v,children:[a,u,w]}),s[16]=v,s[17]=a,s[18]=u,s[19]=w,s[20]=S):S=s[20],S}const Ct={blue:{bg:"bg-blue-50",icon:"bg-blue-600 text-white shadow-blue-200",text:"text-blue-600",border:"border-blue-100",accent:"bg-blue-600/5",glow:"shadow-blue-500/10"},emerald:{bg:"bg-emerald-50",icon:"bg-emerald-600 text-white shadow-emerald-200",text:"text-emerald-600",border:"border-emerald-100",accent:"bg-emerald-600/5",glow:"shadow-emerald-500/10"},amber:{bg:"bg-amber-50",icon:"bg-amber-500 text-white shadow-amber-200",text:"text-amber-600",border:"border-amber-100",accent:"bg-amber-600/5",glow:"shadow-amber-500/10"},indigo:{bg:"bg-indigo-50",icon:"bg-indigo-600 text-white shadow-indigo-200",text:"text-indigo-600",border:"border-indigo-100",accent:"bg-indigo-600/5",glow:"shadow-indigo-500/10"},purple:{bg:"bg-purple-50",icon:"bg-purple-600 text-white shadow-purple-200",text:"text-purple-600",border:"border-purple-100",accent:"bg-purple-600/5",glow:"shadow-purple-500/10"},rose:{bg:"bg-rose-50",icon:"bg-rose-600 text-white shadow-rose-200",text:"text-rose-600",border:"border-rose-100",accent:"bg-rose-600/5",glow:"shadow-rose-500/10"}};function et(e){const s=Ce.c(43),{title:l,value:n,subtitle:c,icon:i,color:x,trend:m}=e,d=Ct[x]||Ct.blue;let v,h;s[0]===Symbol.for("react.memo_cache_sentinel")?(v={y:-5,scale:1.02},h={type:"spring",stiffness:400,damping:25},s[0]=v,s[1]=h):(v=s[0],h=s[1]);let a;s[2]!==d.glow?(a=Y("group relative overflow-hidden rounded-[2.5rem] border border-white bg-white/70 p-8 shadow-xl backdrop-blur-xl transition-all",d.glow),s[2]=d.glow,s[3]=a):a=s[3];let u;s[4]!==d.bg?(u=Y("absolute -top-12 -right-12 h-32 w-32 rounded-full opacity-20 blur-3xl",d.bg),s[4]=d.bg,s[5]=u):u=s[5];let w;s[6]!==u?(w=t.jsx("div",{className:u}),s[6]=u,s[7]=w):w=s[7];let S;s[8]!==d.icon?(S=Y("flex h-14 w-14 items-center justify-center rounded-2xl shadow-lg transition-transform duration-500 group-hover:scale-110",d.icon),s[8]=d.icon,s[9]=S):S=s[9];let b;s[10]!==i?(b=t.jsx(i,{className:"h-8 w-8"}),s[10]=i,s[11]=b):b=s[11];let C;s[12]!==S||s[13]!==b?(C=t.jsx("div",{className:S,children:b}),s[12]=S,s[13]=b,s[14]=C):C=s[14];let y;s[15]!==m?(y=m&&t.jsxs("div",{className:Y("flex items-center gap-1 rounded-full px-3 py-1 text-[10px] font-black tracking-widest uppercase",m.positive?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"),children:[m.positive?"↑":"↓"," ",m.value]}),s[15]=m,s[16]=y):y=s[16];let F;s[17]!==C||s[18]!==y?(F=t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[C,y]}),s[17]=C,s[18]=y,s[19]=F):F=s[19];let f;s[20]!==l?(f=t.jsx("p",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:l}),s[20]=l,s[21]=f):f=s[21];let p;s[22]!==n?(p=t.jsx("h2",{className:"text-3xl leading-tight font-black tracking-tight text-slate-900",children:n}),s[22]=n,s[23]=p):p=s[23];let D;s[24]!==d.text||s[25]!==c?(D=c&&t.jsxs("p",{className:"mt-2 flex items-center gap-1.5 text-[11px] font-bold tracking-wide text-slate-400 uppercase",children:[t.jsx("span",{className:Y("h-1.5 w-1.5 rounded-full",d.text.replace("text","bg"))}),c]}),s[24]=d.text,s[25]=c,s[26]=D):D=s[26];let M;s[27]!==f||s[28]!==p||s[29]!==D?(M=t.jsxs("div",{className:"space-y-1",children:[f,p,D]}),s[27]=f,s[28]=p,s[29]=D,s[30]=M):M=s[30];let j;s[31]!==F||s[32]!==M?(j=t.jsxs("div",{className:"relative z-10 flex h-full flex-col",children:[F,M]}),s[31]=F,s[32]=M,s[33]=j):j=s[33];let k;s[34]!==d.text?(k=Y("absolute bottom-0 left-0 h-1.5 w-full opacity-30",d.text.replace("text","bg")),s[34]=d.text,s[35]=k):k=s[35];let g;s[36]!==k?(g=t.jsx("div",{className:k}),s[36]=k,s[37]=g):g=s[37];let _;return s[38]!==j||s[39]!==g||s[40]!==a||s[41]!==w?(_=t.jsxs(ve.div,{whileHover:v,transition:h,className:a,children:[w,j,g]}),s[38]=j,s[39]=g,s[40]=a,s[41]=w,s[42]=_):_=s[42],_}function Mt(e){const s=Ce.c(6),{transactions:l}=e;if(l.length===0){let x;return s[0]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsxs("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border-2 border-dashed border-slate-200 bg-slate-50/50 p-20",children:[t.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-2xl border border-slate-100 bg-white shadow-sm",children:t.jsx(Et,{className:"h-8 w-8 text-slate-300"})}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucune transaction trouvée"})]}),s[0]=x):x=s[0],x}let n;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx("thead",{children:t.jsxs("tr",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[t.jsx("th",{className:"px-6 py-4 font-black",children:"Transaction / Client"}),t.jsx("th",{className:"px-6 py-4 text-center font-black",children:"Type"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Montant Entrée"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Montant Sortie"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Commission"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Date / Heure"})]})}),s[1]=n):n=s[1];let c;s[2]!==l?(c=l.map(Ws),s[2]=l,s[3]=c):c=s[3];let i;return s[4]!==c?(i=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border-separate border-spacing-y-3 text-left",children:[n,t.jsx("tbody",{children:c})]})}),s[4]=c,s[5]=i):i=s[5],i}function Ws(e){return t.jsxs("tr",{className:"group rounded-2xl border border-slate-100 bg-white transition-all duration-300 hover:bg-slate-50",children:[t.jsx("td",{className:"rounded-l-2xl border-y border-l border-slate-100 px-6 py-5 group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-slate-900 shadow-lg shadow-slate-900/10 transition-transform group-hover:scale-110",children:t.jsx(Dt,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{className:"flex min-w-0 flex-col",children:[t.jsx("span",{className:"truncate text-sm font-black text-slate-900",children:e.client_name||"Utilisateur"}),t.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold tracking-tight text-slate-400 uppercase",children:[t.jsx(Et,{className:"h-2.5 w-2.5"})," ID-",e.id.toString().slice(-4).toUpperCase()]})]})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-center group-hover:border-indigo-100",children:t.jsxs("div",{className:Y("inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-[10px] font-black tracking-widest uppercase",e.operation_type==="change"?"bg-indigo-50 text-indigo-600":"bg-amber-50 text-amber-600"),children:[e.operation_type==="change"?t.jsx(as,{className:"h-3 w-3"}):t.jsx(ts,{className:"h-3 w-3"}),e.operation_type]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-black text-slate-900",children:e.amount_from?.toLocaleString()}),t.jsx("span",{className:"text-[10px] font-black tracking-tighter text-slate-400 uppercase",children:e.currency_from})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-black text-emerald-600",children:e.amount_to?.toLocaleString()}),t.jsx("span",{className:"text-[10px] font-black tracking-tighter text-emerald-600 uppercase opacity-60",children:e.currency_to})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("span",{className:"rounded-lg bg-slate-900 px-3 py-1 font-mono text-xs font-black text-white shadow-lg shadow-slate-900/10",children:["$",parseFloat(e.commission).toLocaleString()]})}),t.jsx("td",{className:"rounded-r-2xl border-y border-r border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-black text-slate-700",children:X(e.created_date).format("DD/MM/YYYY")}),t.jsxs("span",{className:"flex items-center justify-end gap-1 text-[10px] font-bold text-slate-400",children:[t.jsx(Je,{className:"h-2.5 w-2.5"})," ",X(e.created_date).format("HH:mm")]})]})})]},e.id)}function Zs(){const e=Ce.c(96),{auth:s}=ft().props,l=s.user?.role==="super-admin",[n,c]=K.useState(!1),[i,x]=K.useState(null),m=Xe(),d=l?"manager":"cashier";let v;e[0]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[0]=v):v=e[0];let h;e[1]!==d?(h={name:"",email:"",password:"",role:d,is_active:!0,shop_ids:v},e[1]=d,e[2]=h):h=e[2];const[a,u]=K.useState(h);let w;e[3]===Symbol.for("react.memo_cache_sentinel")?(w=["shops"],e[3]=w):w=e[3];let S;e[4]!==l?(S={queryKey:w,queryFn:J.entities.Shop.list,enabled:l},e[4]=l,e[5]=S):S=e[5];const{data:b}=Fe(S);let C;e[6]===Symbol.for("react.memo_cache_sentinel")?(C={queryKey:["users"],queryFn:J.entities.User.list},e[6]=C):C=e[6];const{data:y,isLoading:F}=Fe(C);let f;e[7]!==m?(f={mutationFn:J.entities.User.create,onSuccess:()=>{m.invalidateQueries({queryKey:["users"]}),c(!1),u({name:"",email:"",password:"",role:"cashier",is_active:!0}),B.success("Utilisateur créé avec succès")},onError:ra},e[7]=m,e[8]=f):f=e[8];const p=pe(f);let D;e[9]!==m?(D={mutationFn:ia,onSuccess:()=>{m.invalidateQueries({queryKey:["users"]}),x(null),u({name:"",email:"",password:"",role:"cashier",is_active:!0}),B.success("Utilisateur mis à jour avec succès")},onError:la},e[9]=m,e[10]=D):D=e[10];const M=pe(D);let j;e[11]!==m?(j={mutationFn:aa,onSuccess:()=>{m.invalidateQueries({queryKey:["users"]}),B.success("Utilisateur supprimé avec succès")},onError:sa},e[11]=m,e[12]=j):j=e[12];const k=pe(j);let g;e[13]!==p||e[14]!==i||e[15]!==a||e[16]!==M?(g=N=>{N.preventDefault(),i?M.mutate({id:i.id,data:a}):p.mutate(a)},e[13]=p,e[14]=i,e[15]=a,e[16]=M,e[17]=g):g=e[17];const _=g;let L;e[18]===Symbol.for("react.memo_cache_sentinel")?(L=N=>{x(N),u({name:N.name,email:N.email,role:N.role,is_active:N.is_active}),c(!0)},e[18]=L):L=e[18];const U=L;let E;e[19]!==k?(E=N=>{confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?")&&k.mutate(N)},e[19]=k,e[20]=E):E=e[20];const q=E,z=ta;let T;e[21]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Gestion des utilisateurs"}),t.jsx("p",{className:"text-slate-500",children:"Gérez les accès et les rôles des utilisateurs"})]}),e[21]=T):T=e[21];let o;e[22]!==l?(o=()=>{x(null),u({name:"",email:"",password:"",role:l?"manager":"cashier",is_active:!0}),c(!0)},e[22]=l,e[23]=o):o=e[23];let A;e[24]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(Ve,{className:"mr-2 h-4 w-4"}),e[24]=A):A=e[24];const $=l?"Nouvel utilisateur":"Nouveau Caissier";let P;e[25]!==o||e[26]!==$?(P=t.jsxs("div",{className:"flex items-center justify-between",children:[T,t.jsxs(R,{onClick:o,className:"bg-[#1f61e4] hover:bg-[#1f61e4]/90",children:[A,$]})]}),e[25]=o,e[26]=$,e[27]=P):P=e[27];let H;e[28]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(Bt,{children:t.jsxs(ht,{children:[t.jsx(He,{children:"Nom"}),t.jsx(He,{children:"Email"}),t.jsx(He,{children:"Boutique"}),t.jsx(He,{children:"Rôle"}),t.jsx(He,{children:"Statut"}),t.jsx(He,{className:"text-right",children:"Actions"})]})}),e[28]=H):H=e[28];let I;e[29]!==q||e[30]!==F||e[31]!==y?(I=F?t.jsx(ht,{children:t.jsx($e,{colSpan:5,className:"h-24 text-center",children:"Chargement..."})}):y?.map(N=>t.jsxs(ht,{children:[t.jsx($e,{className:"font-medium",children:N.name}),t.jsx($e,{children:N.email}),t.jsx($e,{children:t.jsx("div",{className:"flex flex-wrap gap-1",children:N.shops&&N.shops.length>0?N.shops.map(ea):t.jsx("span",{className:"text-[10px] text-slate-400 italic",children:"Aucune"})})}),t.jsx($e,{children:z(N.role)}),t.jsx($e,{children:t.jsx(Ye,{variant:N.is_active?"default":"destructive",className:N.is_active?"bg-green-500 hover:bg-green-600":"",children:N.is_active?"Actif":"Inactif"})}),t.jsx($e,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(R,{variant:"ghost",size:"icon",onClick:()=>U(N),className:"h-8 w-8 text-slate-500 hover:text-[#1f61e4]",children:t.jsx(Vt,{className:"h-4 w-4"})}),t.jsx(R,{variant:"ghost",size:"icon",onClick:()=>q(N.id),className:"h-8 w-8 text-slate-500 hover:text-red-600",children:t.jsx(it,{className:"h-4 w-4"})})]})})]},N.id)),e[29]=q,e[30]=F,e[31]=y,e[32]=I):I=e[32];let Q;e[33]!==I?(Q=t.jsx("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:t.jsxs(Kt,{children:[H,t.jsx(Ot,{children:I})]})}),e[33]=I,e[34]=Q):Q=e[34];const O=i?"Modifier l'utilisateur":"Nouvel utilisateur";let ie;e[35]!==O?(ie=t.jsx(Gt,{children:t.jsx(Jt,{children:O})}),e[35]=O,e[36]=ie):ie=e[36];let W;e[37]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx(oe,{htmlFor:"name",children:"Nom complet"}),e[37]=W):W=e[37];let te;e[38]!==a?(te=N=>u({...a,name:N.target.value}),e[38]=a,e[39]=te):te=e[39];let se;e[40]!==a.name||e[41]!==te?(se=t.jsxs("div",{className:"space-y-2",children:[W,t.jsx(ge,{id:"name",value:a.name,onChange:te,required:!0})]}),e[40]=a.name,e[41]=te,e[42]=se):se=e[42];let Z;e[43]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(oe,{htmlFor:"email",children:"Email"}),e[43]=Z):Z=e[43];let de;e[44]!==a?(de=N=>u({...a,email:N.target.value}),e[44]=a,e[45]=de):de=e[45];let xe;e[46]!==a.email||e[47]!==de?(xe=t.jsxs("div",{className:"space-y-2",children:[Z,t.jsx(ge,{id:"email",type:"email",value:a.email,onChange:de,required:!0})]}),e[46]=a.email,e[47]=de,e[48]=xe):xe=e[48];let G;e[49]!==i||e[50]!==a?(G=!i&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(oe,{htmlFor:"password",children:"Mot de passe"}),t.jsx(ge,{id:"password",type:"password",value:a.password,onChange:N=>u({...a,password:N.target.value}),required:!i})]}),e[49]=i,e[50]=a,e[51]=G):G=e[51];let ue;e[52]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(oe,{htmlFor:"role",children:"Rôle"}),e[52]=ue):ue=e[52];let me;e[53]!==a?(me=N=>u({...a,role:N}),e[53]=a,e[54]=me):me=e[54];let re;e[55]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(st,{children:t.jsx(at,{placeholder:"Sélectionner un rôle"})}),e[55]=re):re=e[55];let ne;e[56]!==l?(ne=l&&t.jsx(ye,{value:"manager",children:"Manager"}),e[56]=l,e[57]=ne):ne=e[57];let fe,he;e[58]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(ye,{value:"cashier",children:"Caissier"}),he=t.jsx(ye,{value:"client",children:"Client"}),e[58]=fe,e[59]=he):(fe=e[58],he=e[59]);let ae;e[60]!==ne?(ae=t.jsxs(lt,{children:[ne,fe,he]}),e[60]=ne,e[61]=ae):ae=e[61];let ce;e[62]!==a.role||e[63]!==me||e[64]!==ae?(ce=t.jsxs("div",{className:"space-y-2",children:[ue,t.jsxs(tt,{value:a.role,onValueChange:me,disabled:!1,children:[re,ae]})]}),e[62]=a.role,e[63]=me,e[64]=ae,e[65]=ce):ce=e[65];let r;e[66]!==b||e[67]!==a||e[68]!==l?(r=l&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(oe,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Assigner aux Boutiques"}),t.jsx("div",{className:"grid max-h-32 grid-cols-2 gap-2 overflow-y-auto rounded-lg border p-1",children:b?.map(N=>t.jsxs("div",{onClick:()=>{const _e=a.shop_ids||[],qe=_e.includes(N.id)?_e.filter(Ae=>Ae!==N.id):[..._e,N.id];u({...a,shop_ids:qe})},className:`flex cursor-pointer items-center gap-2 rounded-md border p-2 transition-colors ${a.shop_ids?.includes(N.id)?"border-indigo-200 bg-indigo-50":"bg-white hover:bg-slate-50"}`,children:[t.jsx("div",{className:`h-3 w-3 rounded-sm border ${a.shop_ids?.includes(N.id)?"border-indigo-600 bg-indigo-600":"border-slate-300"}`}),t.jsx("span",{className:"text-xs font-bold",children:N.name})]},N.id))})]}),e[66]=b,e[67]=a,e[68]=l,e[69]=r):r=e[69];let V;e[70]!==i||e[71]!==a?(V=i&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"is_active",checked:a.is_active,onChange:N=>u({...a,is_active:N.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),t.jsx(oe,{htmlFor:"is_active",children:"Compte actif"})]}),e[70]=i,e[71]=a,e[72]=V):V=e[72];let ee;e[73]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(R,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Annuler"}),e[73]=ee):ee=e[73];const ke=p.isPending||M.isPending,De=p.isPending||M.isPending?"Enregistrement...":"Enregistrer";let Ne;e[74]!==ke||e[75]!==De?(Ne=t.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[ee,t.jsx(R,{type:"submit",className:"bg-[#1f61e4] hover:bg-[#1f61e4]/90",disabled:ke,children:De})]}),e[74]=ke,e[75]=De,e[76]=Ne):Ne=e[76];let we;e[77]!==_||e[78]!==se||e[79]!==xe||e[80]!==G||e[81]!==ce||e[82]!==r||e[83]!==V||e[84]!==Ne?(we=t.jsxs("form",{onSubmit:_,className:"space-y-4",children:[se,xe,G,ce,r,V,Ne]}),e[77]=_,e[78]=se,e[79]=xe,e[80]=G,e[81]=ce,e[82]=r,e[83]=V,e[84]=Ne,e[85]=we):we=e[85];let be;e[86]!==ie||e[87]!==we?(be=t.jsxs(Xt,{children:[ie,we]}),e[86]=ie,e[87]=we,e[88]=be):be=e[88];let je;e[89]!==n||e[90]!==be?(je=t.jsx(Wt,{open:n,onOpenChange:c,children:be}),e[89]=n,e[90]=be,e[91]=je):je=e[91];let Me;return e[92]!==P||e[93]!==Q||e[94]!==je?(Me=t.jsxs("div",{className:"space-y-6",children:[P,Q,je]}),e[92]=P,e[93]=Q,e[94]=je,e[95]=Me):Me=e[95],Me}function ea(e){return t.jsx(Ye,{variant:"outline",className:"py-0 text-[10px]",children:e.name},e.id)}function ta(e){switch(e){case"manager":return t.jsxs(Ye,{className:"bg-purple-500 hover:bg-purple-600",children:[t.jsx(ut,{className:"mr-1 h-3 w-3"})," Manager"]});case"cashier":return t.jsxs(Ye,{className:"bg-pink-500 hover:bg-pink-600",children:[t.jsx(ks,{className:"mr-1 h-3 w-3"})," Caissier"]});case"client":return t.jsxs(Ye,{className:"bg-cyan-500 hover:bg-cyan-600",children:[t.jsx(Dt,{className:"mr-1 h-3 w-3"})," Client"]});default:return t.jsx(Ye,{variant:"secondary",children:e})}}function sa(e){B.error(e.message||"Erreur lors de la suppression")}function aa(e){return J.entities.User.delete(e)}function la(e){B.error(e.message||"Erreur lors de la mise à jour")}function ia(e){const{id:s,data:l}=e;return J.entities.User.update(s,l)}function ra(e){B.error(e.message||"Erreur lors de la création")}function za(){const e=Ce.c(118),{auth:s}=ft().props,n=s.user?.role==="super-admin",c=Xe(),[i,x]=K.useState(n?"shops":"overview");let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={queryKey:["all-clients"],queryFn:ua,refetchInterval:3e4},e[0]=m):m=e[0];const{data:d,isLoading:v}=Fe(m);let h;e[1]!==d?(h=d===void 0?[]:d,e[1]=d,e[2]=h):h=e[2];const a=h;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u={queryKey:["all-transactions"],queryFn:ha,refetchInterval:3e4},e[3]=u):u=e[3];const{data:w,isLoading:S}=Fe(u);let b;e[4]!==w?(b=w===void 0?[]:w,e[4]=w,e[5]=b):b=e[5];const C=b;let y,F,f,p;if(e[6]!==a||e[7]!==C){const Se=X().startOf("day");F=a.filter(xt=>X(xt.created_date).isSameOrAfter(Se));const dt=C.filter(xt=>X(xt.created_date).isSameOrAfter(Se));p=dt.filter(ma).reduce(xa,0),f=dt.filter(da).reduce(oa,0),y=dt.reduce(ca,0),e[6]=a,e[7]=C,e[8]=y,e[9]=F,e[10]=f,e[11]=p}else y=e[8],F=e[9],f=e[10],p=e[11];const D=y,M=F.length;let j;e[12]!==a?(j=a.filter(na),e[12]=a,e[13]=j):j=e[13];let k;e[14]!==j.length||e[15]!==F.length||e[16]!==D||e[17]!==f||e[18]!==p?(k={todayClients:M,waiting:j.length,volumeUSD:p,volumeCDF:f,commissions:D},e[14]=j.length,e[15]=F.length,e[16]=D,e[17]=f,e[18]=p,e[19]=k):k=e[19];const g=k;let _;e[20]!==c?(_=()=>{c.invalidateQueries({queryKey:["all-clients"]}),c.invalidateQueries({queryKey:["all-transactions"]}),B.success("Tableau de bord actualisé")},e[20]=c,e[21]=_):_=e[21];const L=_;let U;e[22]===Symbol.for("react.memo_cache_sentinel")?(U={scale:1.02},e[22]=U):U=e[22];let E,q;e[23]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(ve.div,{whileHover:U,className:"relative flex h-16 w-38 items-center justify-center px-4",children:t.jsx("img",{src:"/logo-color.png",alt:"Havifin",className:"h-full w-full object-contain"})}),q=t.jsx("div",{className:"h-10 w-[1px] bg-slate-100"}),e[23]=E,e[24]=q):(E=e[23],q=e[24]);let z;e[25]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("h1",{className:"text-2xl font-black tracking-tight text-slate-900 uppercase",children:["Console"," ",t.jsx("span",{className:"text-indigo-600",children:"Manager"})]}),t.jsx("span",{className:"rounded-full border border-emerald-500/20 bg-emerald-500/10 px-3 py-1 text-[10px] font-black tracking-widest text-emerald-600 uppercase",children:"Live"})]}),e[25]=z):z=e[25];const T=s.user.shop||"Supervision & Reporting";let o;e[26]!==s.user.role||e[27]!==T?(o=t.jsxs("div",{className:"flex items-center gap-6",children:[E,q,t.jsxs("div",{children:[z,t.jsxs("p",{className:"mt-1 flex items-center gap-2 text-[10px] font-black tracking-[0.15em] text-slate-400 uppercase",children:[s.user.role," •"," ",T]})]})]}),e[26]=s.user.role,e[27]=T,e[28]=o):o=e[28];const A=(v||S)&&"animate-spin";let $;e[29]!==A?($=Y("h-5 w-5",A),e[29]=A,e[30]=$):$=e[30];let P;e[31]!==$?(P=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-slate-100 bg-white text-slate-400 shadow-sm",children:t.jsx(Ge,{className:$})}),e[31]=$,e[32]=P):P=e[32];let H;e[33]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] font-black tracking-wider text-slate-400 uppercase",children:"Dernier Sync"}),t.jsx("div",{className:"text-xs font-bold text-slate-600",children:"A l'instant"})]}),e[33]=H):H=e[33];let I;e[34]!==P?(I=t.jsxs("div",{className:"hidden items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-1.5 pr-5 xl:flex",children:[P,H]}),e[34]=P,e[35]=I):I=e[35];let Q;e[36]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(Ge,{className:"mr-2 h-4 w-4"}),e[36]=Q):Q=e[36];let O;e[37]!==L?(O=t.jsxs(R,{variant:"outline",onClick:L,className:"h-12 rounded-2xl border-slate-200 bg-white px-6 text-xs font-black tracking-widest uppercase shadow-sm transition-all hover:border-indigo-500 hover:text-indigo-600",children:[Q,"Actualiser"]}),e[37]=L,e[38]=O):O=e[38];let ie;e[39]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsxs(R,{className:"h-12 rounded-2xl bg-slate-900 px-6 text-xs font-black tracking-widest text-white uppercase shadow-xl shadow-slate-900/10 transition-all hover:bg-black active:scale-95",children:[t.jsx(cs,{className:"mr-2 h-4 w-4 text-emerald-400"}),"Exporter Rapport"]}),e[39]=ie):ie=e[39];let W;e[40]!==I||e[41]!==O?(W=t.jsxs("div",{className:"flex items-center gap-4",children:[I,O,ie]}),e[40]=I,e[41]=O,e[42]=W):W=e[42];let te;e[43]!==o||e[44]!==W?(te=t.jsxs("header",{className:"z-20 flex h-24 flex-shrink-0 items-center justify-between border-b border-slate-200 bg-white px-10 shadow-[0_1px_3px_rgba(0,0,0,0.02)]",children:[o,W]}),e[43]=o,e[44]=W,e[45]=te):te=e[45];const se=`${g.waiting} en attente`;let Z;e[46]!==g.todayClients||e[47]!==se?(Z=t.jsx(et,{title:"Clients Aujourd'hui",value:g.todayClients,subtitle:se,icon:nt,color:"blue"}),e[46]=g.todayClients,e[47]=se,e[48]=Z):Z=e[48];let de;e[49]!==g.volumeUSD?(de=g.volumeUSD.toLocaleString(),e[49]=g.volumeUSD,e[50]=de):de=e[50];const xe=`$ ${de}`;let G;e[51]!==xe?(G=t.jsx(et,{title:"Volume USD",value:xe,icon:Be,color:"emerald"}),e[51]=xe,e[52]=G):G=e[52];let ue;e[53]!==g.volumeCDF?(ue=g.volumeCDF.toLocaleString(),e[53]=g.volumeCDF,e[54]=ue):ue=e[54];const me=`${ue} FC`;let re;e[55]!==me?(re=t.jsx(et,{title:"Volume CDF",value:me,icon:Qe,color:"amber"}),e[55]=me,e[56]=re):re=e[56];let ne;e[57]!==g.commissions?(ne=g.commissions.toLocaleString(),e[57]=g.commissions,e[58]=ne):ne=e[58];const fe=`$ ${ne}`;let he;e[59]!==fe?(he=t.jsx(et,{title:"Commissions Estimées",value:fe,icon:_t,color:"indigo"}),e[59]=fe,e[60]=he):he=e[60];let ae;e[61]!==Z||e[62]!==G||e[63]!==re||e[64]!==he?(ae=t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[Z,G,re,he]}),e[61]=Z,e[62]=G,e[63]=re,e[64]=he,e[65]=ae):ae=e[65];let ce;e[66]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("h3",{className:"mb-6 px-2 text-[11px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Navigation"}),e[66]=ce):ce=e[66];let r,V,ee,ke,De,Ne,we;e[67]===Symbol.for("react.memo_cache_sentinel")?(r={id:"overview",label:"Vue d'ensemble",icon:Nt},V={id:"transactions",label:"Flux Transactions",icon:Tt},ee={id:"rates",label:"Gestion Taux",icon:gt},ke={id:"users",label:"Utilisateurs",icon:nt},De={id:"institutions",label:"Banques & Partenaires",icon:Qe},Ne={id:"logs",label:"Journal Activité",icon:kt},we={id:"sessions",label:"Gestion Sessions",icon:ot},e[67]=r,e[68]=V,e[69]=ee,e[70]=ke,e[71]=De,e[72]=Ne,e[73]=we):(r=e[67],V=e[68],ee=e[69],ke=e[70],De=e[71],Ne=e[72],we=e[73]);let be;e[74]!==n?(be=[r,V,ee,ke,De,Ne,we,...n?[{id:"shops",label:"Gestion Boutiques",icon:Ft}]:[]],e[74]=n,e[75]=be):be=e[75];let je;e[76]!==i||e[77]!==be?(je=t.jsxs("div",{className:"rounded-[2rem] border border-white bg-white/50 p-6 shadow-sm backdrop-blur-xl",children:[ce,t.jsx("nav",{className:"space-y-2",children:be.map(Se=>t.jsxs("button",{onClick:()=>x(Se.id),className:Y("flex w-full items-center justify-between rounded-2xl border p-4 text-sm font-bold transition-all duration-300",i===Se.id?"border-indigo-600 bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"border-slate-100 bg-white/40 text-slate-500 hover:border-slate-200 hover:bg-white"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Se.icon,{className:Y("h-5 w-5",i===Se.id?"text-white":"text-slate-400")}),Se.label]}),t.jsx(At,{className:Y("h-4 w-4 transition-transform",i===Se.id?"translate-x-1":"opacity-0")})]},Se.id))})]}),e[76]=i,e[77]=be,e[78]=je):je=e[78];let Me;e[79]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsxs("div",{className:"group relative overflow-hidden rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-1/2 -translate-y-1/2 bg-indigo-500/20 blur-[80px]"}),t.jsx("h4",{className:"relative z-10 mb-2 text-xl font-black",children:"Besoin d'aide ?"}),t.jsx("p",{className:"relative z-10 mb-6 text-xs font-medium text-slate-400",children:"Consultez la documentation technique du bureau de change."}),t.jsx(R,{className:"relative z-10 w-full rounded-xl bg-white text-[10px] font-black tracking-widest text-slate-900 uppercase hover:bg-slate-100",children:"Guide Manager"})]}),e[79]=Me):Me=e[79];let N;e[80]!==je?(N=t.jsxs("div",{className:"col-span-12 space-y-4 lg:col-span-3",children:[je,Me]}),e[80]=je,e[81]=N):N=e[81];let _e;e[82]!==i||e[83]!==C?(_e=i==="overview"&&t.jsxs("div",{className:"animate-in space-y-8 duration-500 fade-in slide-in-from-bottom-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Performances du Jour"}),t.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Aperçu rapide des flux financiers et des clients."})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("span",{className:"rounded-xl border border-indigo-100 bg-indigo-50 px-4 py-2 text-xs font-black tracking-wider text-indigo-600 uppercase",children:"Hebdomadaire"}),t.jsx("span",{className:"cursor-pointer rounded-xl border border-slate-100 bg-white px-4 py-2 text-xs font-black tracking-wider text-slate-400 uppercase hover:bg-slate-50",children:"Mensuel"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[t.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border border-slate-100 bg-slate-50 p-8 opacity-50",children:[t.jsx(_t,{className:"mb-4 h-16 w-16 text-slate-300"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Graphique des Flux (Soon)"})]}),t.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border border-slate-100 bg-slate-50 p-8 opacity-50",children:[t.jsx(Nt,{className:"mb-4 h-16 w-16 text-slate-300"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Volume par Guichet (Soon)"})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("h4",{className:"text-lg font-black tracking-tight text-slate-800",children:"Activités Récentes"}),t.jsx(R,{variant:"ghost",className:"font-bold text-indigo-600 hover:bg-indigo-50",children:"Voir tout"})]}),t.jsx(Mt,{transactions:C.slice(0,5)})]})]}),e[82]=i,e[83]=C,e[84]=_e):_e=e[84];let qe;e[85]!==i||e[86]!==C?(qe=i==="transactions"&&t.jsxs("div",{className:"animate-in space-y-6 duration-300 fade-in",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Journal Complet"}),t.jsxs("div",{className:"relative w-72",children:[t.jsx(pt,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-slate-400"}),t.jsx("input",{placeholder:"Filtrer...",className:"h-10 w-full rounded-xl border-slate-200 pr-4 pl-10 text-sm focus:ring-indigo-500"})]})]}),t.jsx(Mt,{transactions:C})]}),e[85]=i,e[86]=C,e[87]=qe):qe=e[87];let Ae;e[88]!==i?(Ae=i==="rates"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Ps,{})}),e[88]=i,e[89]=Ae):Ae=e[89];let Re;e[90]!==i?(Re=i==="institutions"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(_s,{})}),e[90]=i,e[91]=Re):Re=e[91];let Ee;e[92]!==i?(Ee=i==="users"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Zs,{})}),e[92]=i,e[93]=Ee):Ee=e[93];let Ue;e[94]!==i?(Ue=i==="shops"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Qt,{})}),e[94]=i,e[95]=Ue):Ue=e[95];let Le;e[96]!==i?(Le=i==="sessions"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Ks,{})}),e[96]=i,e[97]=Le):Le=e[97];let Te;e[98]!==i?(Te=i==="logs"&&t.jsxs("div",{className:"flex h-96 animate-in flex-col items-center justify-center space-y-4 opacity-40 duration-300 zoom-in-95",children:[t.jsx(kt,{className:"h-20 w-20 text-slate-200"}),t.jsx("p",{className:"text-xs font-black tracking-[0.3em] text-slate-400 uppercase",children:"Journal d'audit Manager bientôt disponible"})]}),e[98]=i,e[99]=Te):Te=e[99];let Pe;e[100]!==_e||e[101]!==qe||e[102]!==Ae||e[103]!==Re||e[104]!==Ee||e[105]!==Ue||e[106]!==Le||e[107]!==Te?(Pe=t.jsx("div",{className:"col-span-12 lg:col-span-9",children:t.jsx("div",{className:"min-h-[600px] overflow-hidden rounded-[2.5rem] border border-white bg-white/80 shadow-xl shadow-slate-200/50 backdrop-blur-xl",children:t.jsxs("div",{className:"p-10",children:[_e,qe,Ae,Re,Ee,Ue,Le,Te]})})}),e[100]=_e,e[101]=qe,e[102]=Ae,e[103]=Re,e[104]=Ee,e[105]=Ue,e[106]=Le,e[107]=Te,e[108]=Pe):Pe=e[108];let Ie;e[109]!==N||e[110]!==Pe?(Ie=t.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[N,Pe]}),e[109]=N,e[110]=Pe,e[111]=Ie):Ie=e[111];let ze;e[112]!==ae||e[113]!==Ie?(ze=t.jsx("main",{className:"flex-1 overflow-y-auto bg-[url('/grid.svg')] bg-[length:40px_40px] px-10 py-10",children:t.jsxs("div",{className:"w-full max-w-none space-y-10",children:[ae,Ie]})}),e[112]=ae,e[113]=Ie,e[114]=ze):ze=e[114];let We;return e[115]!==te||e[116]!==ze?(We=t.jsx(Pt,{currentPageName:"Manager",children:t.jsxs("div",{className:"flex flex-col overflow-hidden bg-[#f8fafc]",children:[te,ze]})}),e[115]=te,e[116]=ze,e[117]=We):We=e[117],We}function na(e){return e.status==="waiting"}function ca(e,s){return e+(parseFloat(s.commission)||0)}function oa(e,s){return e+(s.amount_from||0)}function da(e){return e.currency_from==="CDF"}function xa(e,s){return e+(s.amount_from||0)}function ma(e){return e.currency_from==="USD"}function ha(){return J.entities.Transaction.list("-created_date",500)}function ua(){return J.entities.Client.list("-created_date",500)}export{za as default};
