import{c as A,b as C,j as s,a as T,H as D,L as E}from"./app-DbZ43v7C.js";import{B as $}from"./badge-4CWTNqrM.js";import{B as M}from"./index-DXa1H8mm.js";import{T as H,a as l,b as B,c as f,d as z,e as F}from"./table-DVC5BUY9.js";import{A as S}from"./app-main-CEM5Oqxt.js";import{u as Y}from"./users-DVaVnv70.js";import{h as L}from"./moment-B-YVwB4U.js";import{A as O}from"./arrow-left-3wylB01y.js";import{L as P}from"./lock-open-B-H8hu8H.js";import{L as U}from"./lock-i9FTelD8.js";import{E as K}from"./eye-iFHuGsys.js";/* empty css            */import"./createLucideIcon-C42AnhHU.js";function ce(t){const e=A.c(30),{id:r}=t;C();let j;e[0]!==r?(j={queryKey:["cash-register",r],queryFn:async()=>{const{data:a}=await T.get(`/api/cash-registers/${r}`);return a}},e[0]=r,e[1]=j):j=e[1];const{data:p,isLoading:R}=Y(j);let u;e[2]!==r?(u={queryKey:["cash-register-sessions",r],queryFn:async()=>{const{data:a}=await T.get(`/api/cash-sessions?cash_register_id=${r}`);return a.data||a}},e[2]=r,e[3]=u):u=e[3];const{data:g,isLoading:q}=Y(u);let b;e[4]!==g?(b=g===void 0?[]:g,e[4]=g,e[5]=b):b=e[5];const i=b;if(R||q||!p){let a;return e[6]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(S,{currentPageName:"CashMoney",children:s.jsx("div",{className:"flex h-screen items-center justify-center",children:"Chargement..."})}),e[6]=a):a=e[6],a}const k=`Historique - ${p.name}`;let c;e[7]!==k?(c=s.jsx(D,{title:k}),e[7]=k,e[8]=c):c=e[8];let N,y;e[9]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(E,{href:"/cash/dashboard",children:s.jsx(M,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-2xl border border-white/40 bg-white/50 shadow-sm backdrop-blur-md hover:bg-white/80",children:s.jsx(O,{className:"h-5 w-5 text-pink-600"})})}),y=s.jsx("div",{className:"h-10 w-[1px] bg-pink-100"}),e[9]=N,e[10]=y):(N=e[9],y=e[10]);let n;e[11]!==p.name?(n=s.jsx("h1",{className:"text-xl font-black tracking-tight text-slate-900",children:p.name}),e[11]=p.name,e[12]=n):n=e[12];let w;e[13]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("p",{className:"text-xs font-bold text-pink-500 uppercase",children:"Historique des Sessions"}),e[13]=w):w=e[13];let o;e[14]!==n?(o=s.jsx("header",{className:"sticky top-0 z-50 mb-10 flex h-24 w-full flex-col gap-6 border-b border-white/20 bg-white/70 px-6 py-4 shadow-sm backdrop-blur-xl md:flex-row md:items-center md:justify-between md:px-10",children:s.jsxs("div",{className:"flex items-center gap-4",children:[N,y,s.jsxs("div",{className:"flex flex-col",children:[n,w]})]})}),e[14]=n,e[15]=o):o=e[15];let _;e[16]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(B,{children:s.jsxs(H,{children:[s.jsx(f,{children:"ID"}),s.jsx(f,{children:"Statut"}),s.jsx(f,{children:"Ouverture"}),s.jsx(f,{children:"Fermeture"}),s.jsx(f,{children:"Caissier"}),s.jsx(f,{className:"text-right",children:"Actions"})]})}),e[16]=_):_=e[16];let d;e[17]!==i?(d=i.map(I),e[17]=i,e[18]=d):d=e[18];let m;e[19]!==i.length?(m=i.length===0&&s.jsx(H,{children:s.jsx(l,{colSpan:6,className:"h-24 text-center text-slate-400",children:"Aucune session trouvée."})}),e[19]=i.length,e[20]=m):m=e[20];let x;e[21]!==d||e[22]!==m?(x=s.jsx("div",{className:"rounded-3xl border border-slate-200/60 bg-white p-6 shadow-sm",children:s.jsxs(z,{children:[_,s.jsxs(F,{children:[d,m]})]})}),e[21]=d,e[22]=m,e[23]=x):x=e[23];let h;e[24]!==o||e[25]!==x?(h=s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-pink-50/30 px-6 py-8 md:px-10",children:[o,x]}),e[24]=o,e[25]=x,e[26]=h):h=e[26];let v;return e[27]!==h||e[28]!==c?(v=s.jsxs(S,{currentPageName:"CashMoney",children:[c,h]}),e[27]=h,e[28]=c,e[29]=v):v=e[29],v}function I(t){return s.jsxs(H,{children:[s.jsxs(l,{className:"font-bold",children:["#",t.id]}),s.jsx(l,{children:s.jsxs($,{variant:t.status==="open"?"default":"secondary",className:t.status==="open"?"bg-green-500":"bg-slate-200 text-slate-600",children:[t.status==="open"?s.jsx(P,{className:"mr-1 h-3 w-3"}):s.jsx(U,{className:"mr-1 h-3 w-3"}),t.status==="open"?"OUVERTE":"CLÔTURÉE"]})}),s.jsx(l,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-slate-900",children:L(t.opened_at).format("DD/MM/YYYY")}),s.jsx("span",{className:"text-xs text-slate-500",children:L(t.opened_at).format("HH:mm")})]})}),s.jsx(l,{children:t.closed_at?s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-slate-900",children:L(t.closed_at).format("DD/MM/YYYY")}),s.jsx("span",{className:"text-xs text-slate-500",children:L(t.closed_at).format("HH:mm")})]}):s.jsx("span",{className:"text-slate-400",children:"-"})}),s.jsx(l,{children:t.user?.name||`User #${t.user_id}`}),s.jsx(l,{className:"text-right",children:s.jsx(E,{href:`/cash/sessions/${t.id}`,children:s.jsxs(M,{variant:"ghost",size:"sm",children:[s.jsx(K,{className:"mr-2 h-4 w-4"}),"Détails"]})})})]},t.id)}export{ce as default};
