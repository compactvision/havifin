import{c as Q,r as I,j as t,R as fe,b as ge,H as ye}from"./app-DATWHNMc.js";import{b as O}from"./base44Client-CBeTmiDE.js";import{B as M,t as le}from"./index-B7jdcb8K.js";import{L,I as T}from"./label-CrBfHtu_.js";import{c as Y,m as N,a as F}from"./createLucideIcon-Da68W3hK.js";import{A as U,u as oe}from"./users-N7UzZr7_.js";import{P as ce}from"./plus-CSmvlDjS.js";import{L as J}from"./loader-circle-tnrZfOvN.js";import{P as ae,b as je,a as ve,C as we}from"./phone-BgARZefK.js";import{C as Ne,u as te}from"./check-DWhY6IL5.js";import{A as _e,L as ke,R as Se}from"./refresh-cw-4CG3nAeR.js";import{B as Z}from"./building-2-C7QZqNXS.js";import{G as ie,C as de}from"./globe-BV3Mjz9V.js";import{S as xe,a as Ce}from"./smartphone-Dln8Xtub.js";import{C as Ae}from"./circle-check-Ba1eiQHJ.js";import{C as he}from"./clock-C4KKNSxU.js";import{A as Pe,S as ze,a as Ie}from"./app-main-DgyKFYw0.js";import{h as Re}from"./moment-B-YVwB4U.js";import{L as Te}from"./lock-Bfcso9f1.js";import{A as me}from"./arrow-right-DltcXMrc.js";/* empty css            */import"./axios-B6oNB9SN.js";const Fe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Le=Y("Copy",Fe);const Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Be=Y("Info",Me);const $e=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],De=Y("Printer",$e);const Ee=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],qe=Y("Ticket",Ee);function He(P){const e=Q.c(20),{phones:n,selectedPhone:r,onSelect:h,onAdd:c,isAdding:x}=P,i=x===void 0?!1:x,[l,d]=I.useState(!1),[o,_]=I.useState("");let y;e[0]!==o||e[1]!==c?(y=async()=>{o.length===10&&(await c(o),d(!1),_(""))},e[0]=o,e[1]=c,e[2]=y):y=e[2];const w=y;let u;if(e[3]!==h||e[4]!==n||e[5]!==r){let g;e[7]!==h||e[8]!==r?(g=p=>t.jsxs(N.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>h(p.phone_number),className:F("relative flex items-center gap-4 overflow-hidden rounded-2xl border-2 p-4 transition-all duration-200",r===p.phone_number?"border-blue-500 bg-blue-50/50 shadow-md":"border-slate-100 bg-white hover:border-slate-200"),children:[t.jsx("div",{className:F("flex h-10 w-10 items-center justify-center rounded-xl",r===p.phone_number?"bg-blue-500 text-white":"bg-slate-100 text-slate-400"),children:t.jsx(ae,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("span",{className:F("block text-lg font-bold",r===p.phone_number?"text-blue-700":"text-slate-700"),children:p.phone_number}),p.is_primary&&t.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-0.5 text-[10px] font-black tracking-wider text-blue-500/60 uppercase",children:"Principal"})]}),r===p.phone_number&&t.jsx(N.div,{initial:{scale:0},animate:{scale:1},className:"flex h-6 w-6 items-center justify-center rounded-full bg-blue-500 text-white",children:t.jsx(Ne,{className:"h-4 w-4"})})]},p.id),e[7]=h,e[8]=r,e[9]=g):g=e[9],u=n.map(g),e[3]=h,e[4]=n,e[5]=r,e[6]=u}else u=e[6];let b;e[10]!==u?(b=t.jsx("div",{className:"grid grid-cols-1 gap-3",children:u}),e[10]=u,e[11]=b):b=e[11];let f;e[12]!==w||e[13]!==i||e[14]!==l||e[15]!==o?(f=t.jsx(U,{children:l?t.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"space-y-3 rounded-2xl border-2 border-blue-100 bg-blue-50/30 p-4",children:[t.jsx(L,{className:"mb-1 block font-bold text-blue-700",children:"Nouveau numéro"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(T,{type:"tel",inputMode:"numeric",pattern:"[0-9]*",value:o,onChange:g=>_(g.target.value.replace(/\D/g,"").slice(0,10)),placeholder:"0XXXXXXXXX",className:"h-12 rounded-xl bg-white focus:border-blue-500 focus:ring-blue-500",autoFocus:!0}),t.jsx(M,{onClick:w,disabled:o.length<10||i,className:"h-12 rounded-xl bg-blue-600 px-6 text-white hover:bg-blue-700",children:i?t.jsx(J,{className:"h-5 w-5 animate-spin"}):t.jsx(ce,{className:"h-5 w-5"})})]}),t.jsx(M,{variant:"ghost",size:"sm",onClick:()=>d(!1),className:"w-full text-slate-500 hover:text-red-500",children:"Annuler"})]}):t.jsxs(N.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>d(!0),className:"flex w-full items-center justify-center gap-2 rounded-2xl border-2 border-dashed border-slate-200 p-4 font-bold text-slate-400 transition-all hover:border-blue-300 hover:bg-blue-50/30 hover:text-blue-500",children:[t.jsx(ce,{className:"h-5 w-5"}),"Ajouter un nouveau numéro"]})}),e[12]=w,e[13]=i,e[14]=l,e[15]=o,e[16]=f):f=e[16];let S;return e[17]!==b||e[18]!==f?(S=t.jsxs("div",{className:"space-y-4",children:[b,f]}),e[17]=b,e[18]=f,e[19]=S):S=e[19],S}const Oe=[{id:"change",name:"Change Devises",icon:_e,description:"USD ↔ CDF au meilleur taux",color:"from-amber-400 to-orange-500",hover:"shadow-orange-200"},{id:"depot",name:"Dépôt Cash",icon:je,description:"Alimentez vos comptes",color:"from-green-400 to-emerald-600",hover:"shadow-green-200"},{id:"retrait",name:"Retrait Cash",icon:ve,description:"Retirez vos fonds",color:"from-blue-400 to-indigo-600",hover:"shadow-blue-200"},{id:"paiement",name:"Paiement",icon:we,description:"Payez vos factures et services",color:"from-purple-400 to-pink-600",hover:"shadow-purple-200"}];function Ve(P){const e=Q.c(5),{selectedOperation:n,onSelect:r}=P;let h;e[0]!==r||e[1]!==n?(h=Oe.map(x=>{const i=x.icon,l=n===x.id;return t.jsxs(N.button,{whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},onClick:()=>r(x.id),className:F("group relative overflow-hidden rounded-[40px] border-4 p-8 text-center transition-all duration-300",l?"border-blue-500 bg-white shadow-2xl shadow-blue-500/20":"border-slate-50 bg-slate-50/50 hover:border-slate-200 hover:bg-white hover:shadow-xl"),children:[t.jsx("div",{className:F("absolute -top-12 -right-12 h-24 w-24 rounded-full blur-[40px] transition-opacity",l?"opacity-20":"opacity-0 group-hover:opacity-10",x.color.replace("from-","bg-"))}),t.jsx("div",{className:F("mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-[28px] bg-gradient-to-br shadow-lg transition-transform group-hover:rotate-6",x.color,l?"scale-110":""),children:t.jsx(i,{className:"h-10 w-10 text-white"})}),t.jsx("h3",{className:F("mb-2 text-xl font-black transition-colors",l?"text-slate-900":"text-slate-700"),children:x.name}),t.jsx("p",{className:"text-sm font-medium text-slate-400 group-hover:text-slate-500",children:x.description}),l&&t.jsx(N.div,{layoutId:"op-indicator",className:"absolute bottom-4 left-1/2 h-2 w-12 -translate-x-1/2 rounded-full bg-blue-500"})]},x.id)}),e[0]=r,e[1]=n,e[2]=h):h=e[2];let c;return e[3]!==h?(c=t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:h}),e[3]=h,e[4]=c):c=e[4],c}function Ue(P){const e=Q.c(30),{institutions:n,selectedId:r,onSelect:h,type:c}=P;let x,i,l,d;if(e[0]!==n||e[1]!==h||e[2]!==r||e[3]!==c){let y;e[8]!==c?(y=C=>C.type===c,e[8]=c,e[9]=y):y=e[9];const w=n.filter(y);let u;e[10]!==c?(u=()=>{switch(c){case"mobile_money":return xe;case"bank":return Z;case"payment":case"other":return ie;default:return Z}},e[10]=c,e[11]=u):u=e[11];const b=u;let f;e[12]!==c?(f=()=>{switch(c){case"mobile_money":return"Opérateurs Mobile";case"bank":return"Banques";case"payment":return"Services de Paiement";case"other":return"Autres Partenaires";default:return"Institutions"}},e[12]=c,e[13]=f):f=e[13];const S=f;let g;e[14]!==b?(g=b(),e[14]=b,e[15]=g):g=e[15];const p=g;l="space-y-4";let A;e[16]!==p?(A=t.jsx(p,{className:"h-5 w-5 text-blue-500"}),e[16]=p,e[17]=A):A=e[17];const m=S();let z;e[18]!==m?(z=t.jsx("h3",{className:"text-lg font-bold text-slate-800",children:m}),e[18]=m,e[19]=z):z=e[19],e[20]!==z||e[21]!==A?(d=t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[A,z]}),e[20]=z,e[21]=A,e[22]=d):d=e[22],x="grid grid-cols-2 gap-4 md:grid-cols-4",i=w.length>0?w.map(C=>t.jsxs(N.button,{whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},onClick:()=>h(C.id),className:F("relative flex flex-col items-center justify-center rounded-[32px] border-2 p-6 transition-all duration-300",r===C.id?"border-blue-500 bg-white shadow-xl ring-4 shadow-blue-500/10 ring-blue-50":"border-slate-100 bg-slate-50/50 hover:border-slate-200 hover:bg-white"),children:[t.jsx("div",{className:F("mb-4 flex h-16 w-16 items-center justify-center rounded-2xl shadow-inner transition-colors",r===C.id?"bg-blue-50":"bg-white"),children:C.logo_url?t.jsx("img",{src:C.logo_url,alt:C.name,className:"h-10 w-10 object-contain"}):t.jsx(ke,{className:F("h-8 w-8",r===C.id?"text-blue-500":"text-slate-300")})}),t.jsx("span",{className:F("text-center text-sm font-black tracking-tight",r===C.id?"text-blue-700":"text-slate-600"),children:C.name}),r===C.id&&t.jsx(N.div,{layoutId:"active-indicator",className:"absolute -top-1 -right-1 h-6 w-6 rounded-full border-4 border-white bg-blue-500 shadow-sm"})]},C.id)):t.jsxs("div",{className:"col-span-full py-12 text-center",children:[t.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-slate-100 text-slate-300",children:t.jsx(p,{className:"h-8 w-8"})}),t.jsx("p",{className:"text-sm font-bold tracking-widest text-slate-400 uppercase",children:"Aucun partenaire disponible"})]}),e[0]=n,e[1]=h,e[2]=r,e[3]=c,e[4]=x,e[5]=i,e[6]=l,e[7]=d}else x=e[4],i=e[5],l=e[6],d=e[7];let o;e[23]!==x||e[24]!==i?(o=t.jsx("div",{className:x,children:i}),e[23]=x,e[24]=i,e[25]=o):o=e[25];let _;return e[26]!==l||e[27]!==d||e[28]!==o?(_=t.jsxs("div",{className:l,children:[d,o]}),e[26]=l,e[27]=d,e[28]=o,e[29]=_):_=e[29],_}const se=[{id:"mobile_money",name:"Mobile Money",icon:xe,color:"text-emerald-500"},{id:"bank",name:"Banques",icon:Z,color:"text-blue-500"},{id:"payment",name:"Services de Paiement",icon:ie,color:"text-indigo-500"},{id:"other",name:"Autres",icon:ie,color:"text-amber-500"}];function Xe(P){const e=Q.c(25),{institutions:n,selectedId:r,onSelect:h,isLoading:c,operationType:x}=P,[i,l]=fe.useState("mobile_money");let d;e:{if(x==="paiement"){let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=se.filter(Ke),e[0]=m):m=e[0],d=m;break e}if(x==="depot"||x==="retrait"){let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=se.filter(Ge),e[1]=m):m=e[1],d=m;break e}d=se}const o=d;let _,y;if(e[2]!==i||e[3]!==x?(_=()=>{x==="paiement"&&i!=="payment"?l("payment"):x!=="paiement"&&i==="payment"&&l("mobile_money")},y=[x,i],e[2]=i,e[3]=x,e[4]=_,e[5]=y):(_=e[4],y=e[5]),I.useEffect(_,y),c){let m;return e[6]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx("div",{className:"mb-4 h-12 w-12 animate-spin rounded-full border-4 border-slate-200 border-t-indigo-600"}),t.jsx("p",{className:"text-sm font-bold tracking-widest text-slate-400 uppercase",children:"Récupération des partenaires..."})]}),e[6]=m):m=e[6],m}let w;e[7]!==i||e[8]!==o?(w=o.length>1&&t.jsx("div",{className:"flex gap-2 rounded-[24px] bg-slate-100 p-1.5",children:o.map(m=>t.jsxs("button",{onClick:()=>l(m.id),className:F("flex flex-1 items-center justify-center gap-2 rounded-[18px] px-4 py-4 text-sm font-bold transition-all",i===m.id?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[t.jsx(m.icon,{className:F("h-5 w-5",i===m.id?m.color:"text-slate-400")}),m.name]},m.id))}),e[7]=i,e[8]=o,e[9]=w):w=e[9];let u,b,f,S;e[10]===Symbol.for("react.memo_cache_sentinel")?(u={opacity:0,x:20},b={opacity:1,x:0},f={opacity:0,x:-20},S={duration:.2},e[10]=u,e[11]=b,e[12]=f,e[13]=S):(u=e[10],b=e[11],f=e[12],S=e[13]);let g;e[14]!==i||e[15]!==n||e[16]!==h||e[17]!==r?(g=t.jsx(Ue,{institutions:n,selectedId:r,onSelect:h,type:i}),e[14]=i,e[15]=n,e[16]=h,e[17]=r,e[18]=g):g=e[18];let p;e[19]!==i||e[20]!==g?(p=t.jsx(U,{mode:"wait",children:t.jsx(N.div,{initial:u,animate:b,exit:f,transition:S,children:g},i)}),e[19]=i,e[20]=g,e[21]=p):p=e[21];let A;return e[22]!==p||e[23]!==w?(A=t.jsxs("div",{className:"space-y-8",children:[w,p]}),e[22]=p,e[23]=w,e[24]=A):A=e[24],A}function Ge(P){return P.id!=="payment"}function Ke(P){return P.id==="payment"}const Qe=P=>{const e=Q.c(22),{ticketNumber:n,details:r}=P;let h,c;if(e[0]===Symbol.for("react.memo_cache_sentinel")){const A=new Date;h=A.toLocaleDateString("fr-FR"),c=A.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),e[0]=h,e[1]=c}else h=e[0],c=e[1];const x=c;let i,l,d,o,_;e[2]===Symbol.for("react.memo_cache_sentinel")?(i={width:"58mm",fontFamily:"monospace",fontSize:"12px",color:"black",backgroundColor:"white",padding:"4px"},l=t.jsxs("div",{style:{textAlign:"center",borderBottom:"1px dashed black",paddingBottom:"8px",marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:"HAVIFIN"}),t.jsxs("div",{style:{fontSize:"10px"},children:[h," - ",x]})]}),d={textAlign:"center",padding:"10px 0",borderBottom:"1px dashed black",marginBottom:"8px"},o=t.jsx("div",{style:{fontSize:"10px",textTransform:"uppercase"},children:"Ticket No."}),_={fontSize:"32px",fontWeight:"bold"},e[2]=i,e[3]=l,e[4]=d,e[5]=o,e[6]=_):(i=e[2],l=e[3],d=e[4],o=e[5],_=e[6]);let y;e[7]!==n?(y=t.jsxs("div",{style:d,children:[o,t.jsx("div",{style:_,children:n})]}),e[7]=n,e[8]=y):y=e[8];let w;e[9]===Symbol.for("react.memo_cache_sentinel")?(w={marginBottom:"8px"},e[9]=w):w=e[9];let u;e[10]!==r?(u=r?.service&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{children:"Service:"}),t.jsx("span",{children:r.service})]}),e[10]=r,e[11]=u):u=e[11];let b;e[12]!==r?(b=r?.operation_type&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{children:"Opér.:"}),t.jsx("span",{children:r.operation_type==="retrait"?"Retrait":"Dépôt"})]}),e[12]=r,e[13]=b):b=e[13];let f;e[14]!==b||e[15]!==u?(f=t.jsxs("div",{style:w,children:[u,b]}),e[14]=b,e[15]=u,e[16]=f):f=e[16];let S,g;e[17]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsxs("div",{style:{textAlign:"center",borderTop:"1px dashed black",paddingTop:"8px"},children:[t.jsx("div",{children:"MERCI DE VOTRE CONFIANCE"}),t.jsx("div",{style:{fontSize:"10px",marginTop:"4px"},children:"Attendez votre tour sur l'écran"})]}),g=t.jsx("div",{style:{height:"40px"}}),e[17]=S,e[18]=g):(S=e[17],g=e[18]);let p;return e[19]!==f||e[20]!==y?(p=t.jsxs("div",{id:"printable-ticket",style:i,children:[l,y,f,S,g]}),e[19]=f,e[20]=y,e[21]=p):p=e[21],p};function We(P){const e=Q.c(38),{ticketNumber:n,onNewTicket:r}=P;let h,c;e[0]!==n?(h=()=>{if(n){const ee=setTimeout(Ze,1e3);return()=>clearTimeout(ee)}},c=[n],e[0]=n,e[1]=h,e[2]=c):(h=e[1],c=e[2]),I.useEffect(h,c);const x=Je;let i,l;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={opacity:0,scale:.95},l={opacity:1,scale:1},e[3]=i,e[4]=l):(i=e[3],l=e[4]);let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1.5,opacity:0},transition:{repeat:1/0,duration:2,ease:"easeOut"},className:"absolute inset-0 rounded-full bg-green-500/20"}),e[5]=d):d=e[5];let o,_,y;e[6]===Symbol.for("react.memo_cache_sentinel")?(o={scale:0},_={scale:1},y={type:"spring",stiffness:200,damping:20},e[6]=o,e[7]=_,e[8]=y):(o=e[6],_=e[7],y=e[8]);let w,u,b;e[9]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsxs("div",{className:"relative mb-12",children:[d,t.jsx(N.div,{initial:o,animate:_,transition:y,className:"relative mx-auto flex h-28 w-28 items-center justify-center rounded-[36px] bg-gradient-to-br from-emerald-400 to-green-600 shadow-2xl shadow-green-500/30",children:t.jsx(Ae,{className:"h-14 w-14 text-white"})})]}),w=t.jsx("h2",{className:"mb-2 text-4xl font-black tracking-tight text-slate-900",children:"C'est fait !"}),u=t.jsx("p",{className:"mb-10 text-xl font-medium text-slate-500",children:"Votre ticket a été généré avec succès"}),e[9]=w,e[10]=u,e[11]=b):(w=e[9],u=e[10],b=e[11]);let f,S,g;e[12]===Symbol.for("react.memo_cache_sentinel")?(f={y:30,opacity:0},S={y:0,opacity:1},g={delay:.3,type:"spring"},e[12]=f,e[13]=S,e[14]=g):(f=e[12],S=e[13],g=e[14]);let p,A;e[15]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-8 -translate-y-8 rounded-full bg-white/5 blur-2xl transition-transform group-hover:scale-150"}),A=t.jsx("div",{className:"absolute bottom-0 left-0 h-24 w-24 -translate-x-8 translate-y-8 rounded-full bg-blue-500/10 blur-xl"}),e[15]=p,e[16]=A):(p=e[15],A=e[16]);let m;e[17]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs("div",{className:"mb-6 flex items-center justify-center gap-3 text-amber-400",children:[t.jsx(qe,{className:"h-6 w-6 rotate-12"}),t.jsx("span",{className:"text-sm font-black tracking-[0.2em] uppercase",children:"Ticket No."})]}),e[17]=m):m=e[17];let z;e[18]!==n?(z=t.jsx("div",{className:"mb-8 font-mono text-7xl font-black tracking-tighter text-white",children:n}),e[18]=n,e[19]=z):z=e[19];let C;e[20]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/5 bg-white/5 px-4 py-2 text-sm font-bold text-slate-400",children:[t.jsx(he,{className:"h-4 w-4 text-amber-500"}),t.jsx("span",{children:"Attendez d'être appelé sur l'écran"})]}),e[20]=C):C=e[20];let V;e[21]!==z?(V=t.jsxs(N.div,{initial:f,animate:S,transition:g,className:"group relative mx-auto max-w-sm overflow-hidden rounded-[40px] bg-slate-900 p-10 shadow-2xl",children:[p,A,t.jsxs("div",{className:"relative z-10",children:[m,z,C]})]}),e[21]=z,e[22]=V):V=e[22];let X,G,s;e[23]===Symbol.for("react.memo_cache_sentinel")?(X={opacity:0},G={opacity:1},s={delay:.6},e[23]=X,e[24]=G,e[25]=s):(X=e[23],G=e[24],s=e[25]);let k;e[26]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(Se,{className:"mr-2 h-5 w-5 text-blue-500"}),e[26]=k):k=e[26];let $;e[27]!==r?($=t.jsxs(M,{onClick:r,className:"h-14 rounded-2xl border-none bg-slate-100 px-10 font-black tracking-tight text-slate-900 shadow-none transition-all hover:scale-105 hover:bg-slate-200 active:scale-95",children:[k,"Nouvelle opération"]}),e[27]=r,e[28]=$):$=e[28];let q;e[29]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsxs(M,{onClick:x,variant:"ghost",className:"ml-4 h-14 rounded-2xl border-none bg-white/10 px-10 font-black tracking-tight text-white shadow-none transition-all hover:bg-white/20 active:scale-95",children:[t.jsx(De,{className:"mr-2 h-5 w-5 text-indigo-400"}),"Réimprimer"]}),e[29]=q):q=e[29];let B;e[30]!==n?(B=n&&t.jsx(Qe,{ticketNumber:n}),e[30]=n,e[31]=B):B=e[31];let H;e[32]!==$||e[33]!==B?(H=t.jsxs(N.div,{initial:X,animate:G,transition:s,className:"mt-12",children:[$,q,B]}),e[32]=$,e[33]=B,e[34]=H):H=e[34];let K;return e[35]!==V||e[36]!==H?(K=t.jsxs(N.div,{initial:i,animate:l,className:"py-8 text-center",children:[b,w,u,V,H]}),e[35]=V,e[36]=H,e[37]=K):K=e[37],K}function Je(){window.print()}function Ze(){window.print()}function vt(){const{auth:P}=ge().props,[e,n]=I.useState(1),[r,h]=I.useState(null),[c,x]=I.useState(!1),[i,l]=I.useState(null),[d,o]=I.useState(!1),[_,y]=I.useState(!1),[w,u]=I.useState(!1),[b,f]=I.useState(""),[S,g]=I.useState([]),[p,A]=I.useState(!1),[m,z]=I.useState(!1),{data:C=[],isPending:V}=oe({queryKey:["institutions","active"],queryFn:()=>O.entities.Institution.active()}),{data:X,isLoading:G}=oe({queryKey:["current-session"],queryFn:()=>O.entities.Session.current(),refetchInterval:1e4}),[s,k]=I.useState({phone:"",operation_type:"",institution_id:void 0,first_name:"",last_name:"",email:"",address:"",amount:"",currency:"USD",reason:"",beneficiary:"",beneficiary_number:"",account_number:"",metadata:{}});I.useEffect(()=>{(async()=>{if(s.phone.length===10&&!i&&!d){x(!0);try{const v=await O.entities.Client.verifyPhone(s.phone);v.exists&&v.client?(l(v.client),k(D=>({...D,phone:s.phone})),n(2),o(!1)):(l(null),o(!0))}catch(v){console.error("Phone verification failed:",v)}finally{x(!1)}}})()},[s.phone,i,d]);const $=te({mutationFn:async()=>(await O.entities.Client.register({phone:s.phone,first_name:s.first_name,last_name:s.last_name,email:s.email,address:s.address})).client,onSuccess:a=>{l(a),o(!1),n(2)}}),q=te({mutationFn:async a=>i?(await O.entities.Client.addPhone(i.id,a)).phone:void 0,onSuccess:a=>{i&&a&&l({...i,phones:[...i.phones||[],a]})}}),B=te({mutationFn:async a=>{const v={...a,phone:s.phone,status:"waiting",first_name:i?.first_name||a.first_name||"Client",last_name:i?.last_name||a.last_name||"Anonyme",is_registered:!!i&&!_,metadata:s.metadata};return(await O.entities.Client.create(v)).ticket_number},onSuccess:a=>{h(a),n(3)},onError:a=>{const v=a.response?.data?.error||a.response?.data?.message||"Une erreur est survenue lors de la création du ticket";le.error(v)}}),H=async()=>{if(!(b.length<2)){A(!0);try{const a=await O.entities.Client.filter({first_name:b});g(a)}catch(a){console.error(a)}finally{A(!1)}}},K=async a=>{try{await q.mutateAsync(s.phone);const v=await O.entities.Client.addPhone(a.id,s.phone);v.success&&v.phone&&(l({...a,phones:[...a.phones||[],v.phone]}),u(!1),o(!1),n(2))}catch(v){console.error("Failed to link account",v)}},ee=()=>{if(e===1)d?$.mutate():i&&n(2);else if(e===2){if(s.operation_type==="change")B.mutate({...s,service:"bureau"});else if(s.operation_type&&s.institution_id){const a=C.find(v=>v.id===s.institution_id);B.mutate({...s,operation_type:s.operation_type,service:a?.name||"",currency_from:s.currency,amount:s.amount?Number(s.amount):void 0,notes:`Motif: ${s.reason}${s.beneficiary?` | Bénéficiaire: ${s.beneficiary}`:""}${s.beneficiary_number?` | Numéro Bénéficiaire: ${s.beneficiary_number}`:""}${s.account_number?` | Compte: ${s.account_number}`:""}`})}}},re=()=>{n(1),ue()},ue=()=>{h(null),l(null),o(!1),y(!1),u(!1),z(!1),f(""),g([]),k({phone:"",operation_type:"",institution_id:void 0,first_name:"",last_name:"",email:"",address:"",amount:"",currency:"USD",reason:"",beneficiary:"",beneficiary_number:"",account_number:"",metadata:{}})},pe=()=>{if(e===1)return d?s.first_name.trim()!==""&&s.last_name.trim()!=="":!!i;if(e===2){if(s.operation_type==="change"||s.operation_type==="paiement")return!0;if(!!!(s.operation_type&&s.institution_id))return!1;if(s.operation_type==="depot"||s.operation_type==="retrait"){const v=C.find(j=>j.id===s.institution_id),D=!!s.amount;if(s.operation_type==="retrait")return D;const E=v?.settings;if(E?.required_fields||E?.custom_fields){const j=E?.required_fields||[],R=[D];return j.includes("account_number")&&R.push(!!s.account_number),j.includes("beneficiary")&&R.push(!!s.beneficiary),j.includes("beneficiary_number")&&R.push(!!s.beneficiary_number),j.includes("reason")&&R.push(!!s.reason),(E?.custom_fields||[]).filter(W=>!W.operation_type||W.operation_type==="both"||W.operation_type===s.operation_type).forEach(W=>{R.push(!!s.metadata[W.id])}),R.every(Boolean)}return v?.type==="bank"?!!(D&&s.account_number&&s.beneficiary):!!(D&&s.beneficiary&&s.beneficiary_number)}return!0}return!0},be=()=>{switch(e){case 1:return t.jsxs(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mb-8 flex h-20 w-20 items-center justify-center rounded-[24px] border border-white/20 bg-gradient-to-br from-brand-cyan/20 to-brand-purple/20 shadow-xl shadow-brand-purple/20 backdrop-blur-xl transition-transform group-hover:scale-110",children:t.jsx(ae,{className:"h-12 w-12 text-brand-dark transition-transform group-hover:rotate-12"})}),t.jsx("h2",{className:"text-4xl font-black tracking-tight text-slate-800 drop-shadow-sm",children:d?"Nouvelle Inscription":"Bienvenue chez Havifin"}),t.jsx("p",{className:"mt-3 text-lg font-bold tracking-[0.2em] text-brand-blue uppercase",children:P.user?.shop}),t.jsx("p",{className:"mt-2 text-lg font-medium text-slate-600",children:d?"Laissez-nous faire connaissance pour mieux vous servir":"Identifiez-vous pour commencer votre opération"})]}),t.jsxs("div",{className:"mx-auto max-w-lg space-y-6",children:[!i&&!d&&t.jsxs("div",{className:"group relative",children:[t.jsx("div",{className:"absolute -inset-1 rounded-[28px] bg-gradient-to-r from-brand-cyan/40 via-brand-purple/40 to-brand-pink/40 opacity-60 blur-xl transition duration-1000 group-hover:opacity-100 group-hover:duration-200"}),t.jsx(T,{type:"tel",inputMode:"numeric",pattern:"[0-9]*",value:s.phone,onChange:a=>k({...s,phone:a.target.value.replace(/\D/g,"").slice(0,10)}),placeholder:"Entrez votre numéro (10 chiffres)",className:"relative h-20 rounded-[24px] border-2 border-white/30 bg-white/40 text-center font-mono text-2xl font-black text-slate-900 shadow-2xl shadow-purple-500/20 backdrop-blur-2xl transition-all placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30",autoFocus:!0,disabled:c}),c&&t.jsx("div",{className:"absolute top-1/2 right-6 -translate-y-1/2",children:t.jsx(J,{className:"h-6 w-6 animate-spin text-brand-cyan"})})]}),w&&t.jsx(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"pt-6",children:t.jsxs("div",{className:"space-y-6 rounded-[32px] border border-white/20 bg-white/60 p-8 shadow-xl backdrop-blur-xl",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-xl font-black text-slate-800",children:"Lier à un compte existant"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Recherchez le client propriétaire de ce numéro"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(T,{placeholder:"Rechercher par nom...",value:b,onChange:a=>f(a.target.value),className:"h-12 rounded-xl bg-white"}),t.jsx(M,{onClick:H,disabled:p,className:"h-12 rounded-xl bg-cyan-600 text-white hover:bg-cyan-700",children:p?t.jsx(J,{className:"h-4 w-4 animate-spin"}):t.jsx(Ce,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"max-h-60 space-y-2 overflow-y-auto",children:S.map(a=>t.jsxs("div",{onClick:()=>K(a),className:"flex cursor-pointer items-center justify-between rounded-xl border border-slate-100 bg-white p-4 transition-colors hover:border-cyan-200 hover:bg-cyan-50",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-900",children:[a.first_name," ",a.last_name]}),t.jsx("p",{className:"text-xs text-slate-500",children:a.phone})]}),t.jsx(me,{className:"h-4 w-4 text-brand-cyan"})]},a.id))}),t.jsx(M,{variant:"ghost",onClick:()=>u(!1),className:"w-full text-slate-500 hover:text-red-500",children:"Annuler"})]})}),d&&!w&&t.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4 pt-6",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-white/30 bg-white/10 px-6 py-4 shadow-xl backdrop-blur-xl",children:[t.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Numéro à enregistrer"}),t.jsx("span",{className:"font-mono text-xl font-black text-brand-cyan",children:s.phone})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{className:"ml-2 font-bold text-slate-800",children:"Prénom"}),t.jsx(T,{placeholder:"Jean",value:s.first_name,onChange:a=>k({...s,first_name:a.target.value}),className:"h-14 rounded-2xl border-2 border-white/30 bg-white/40 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{className:"ml-2 font-bold text-slate-800",children:"Nom"}),t.jsx(T,{placeholder:"Lozé",value:s.last_name,onChange:a=>k({...s,last_name:a.target.value}),className:"h-14 rounded-2xl border-2 border-white/30 bg-white/40 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{className:"ml-2 font-bold text-slate-800",children:"Email (Optionnel)"}),t.jsx(T,{placeholder:"jean.loze@example.com",type:"email",value:s.email,onChange:a=>k({...s,email:a.target.value}),className:"h-14 rounded-2xl border-2 border-white/30 bg-white/40 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{className:"ml-2 font-bold text-slate-800",children:"Adresse (Optionnelle)"}),t.jsx(T,{placeholder:"Gombe, Kinshasa",value:s.address,onChange:a=>k({...s,address:a.target.value}),className:"h-14 rounded-2xl border-2 border-white/30 bg-white/40 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30"})]}),t.jsxs(M,{variant:"ghost",onClick:()=>{o(!1),k({...s,phone:""})},className:"h-14 w-full rounded-2xl font-bold text-slate-500 transition-colors hover:bg-slate-100",children:[t.jsx(de,{className:"mr-2 h-5 w-5"})," ","Retour"]}),t.jsx(M,{variant:"outline",onClick:()=>u(!0),className:"h-14 w-full rounded-2xl border-2 border-dashed border-brand-cyan/40 bg-brand-cyan/10 font-bold text-brand-cyan hover:bg-brand-cyan/20",children:"Déjà client ? Lier ce numéro"})]})]})]});case 2:return t.jsxs(N.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-12",children:[t.jsxs("div",{className:"space-y-2 text-center",children:[t.jsx(N.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-2 inline-block rounded-full bg-brand-blue/10 px-4 py-1 text-xs font-black tracking-widest text-brand-blue uppercase",children:"Étape 2 • Opération"}),t.jsxs("h2",{className:"text-4xl font-black tracking-tight text-slate-900",children:["Bonjour"," ",t.jsx("span",{className:"text-brand-blue",children:i?.first_name||s.first_name}),",",t.jsx("p",{className:"text-lg font-medium text-slate-600",children:"Que souhaitez-vous faire aujourd'hui ?"})]})]}),i&&t.jsxs(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"rounded-[24px] border border-slate-200 bg-slate-50/50 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-blue-100 text-blue-600",children:t.jsx(ae,{className:"h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-500 uppercase",children:"Numéro Actif"}),t.jsx("p",{className:"font-mono text-xl font-bold text-slate-900",children:s.phone})]})]}),t.jsxs(M,{variant:"ghost",onClick:()=>z(!m),className:"font-bold text-slate-600 hover:text-slate-800",children:[t.jsx(de,{className:m?"mr-2 h-4 w-4 -rotate-90 transition-transform":"mr-2 h-4 w-4 transition-transform"}),"Changer"]})]}),t.jsx(U,{children:m&&t.jsx(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden bg-white/50 pt-4",children:t.jsx(He,{phones:i.phones||[],selectedPhone:s.phone,onSelect:a=>{k({...s,phone:a}),z(!1)},onAdd:async a=>{await q.mutateAsync(a)},isAdding:q.isPending})})})]}),t.jsxs("div",{className:"grid gap-10",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"text-center md:text-left",children:t.jsx("h3",{className:"text-2xl font-black text-slate-800",children:"Opérations disponibles"})}),t.jsx(Ve,{selectedOperation:s.operation_type,onSelect:a=>k({...s,operation_type:a,institution_id:void 0})})]}),t.jsxs(U,{children:[s.operation_type&&s.operation_type!=="change"&&t.jsxs(N.div,{initial:{opacity:0,height:0,y:20},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:20},className:"space-y-4 overflow-hidden",children:[t.jsx(L,{className:"ml-4 block text-sm font-black tracking-widest text-slate-400 uppercase",children:"Partenaire Bancaire / Mobile"}),t.jsx(Xe,{institutions:C,selectedId:s.institution_id,onSelect:a=>k({...s,institution_id:a}),operationType:s.operation_type})]},"service-selector-container"),t.jsx(U,{children:(s.operation_type==="depot"||s.operation_type==="retrait")&&s.institution_id&&t.jsx(N.div,{initial:{opacity:0,height:0,y:20},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:20},className:"space-y-4 pt-4",children:(()=>{const a=C.find(j=>j.id===s.institution_id),v=a?.settings,D=v?.required_fields,E=j=>s.operation_type==="retrait"?!1:D?D.includes(j):a?.type==="bank"?["account_number","beneficiary","reason"].includes(j):["beneficiary_number","beneficiary","reason"].includes(j);return t.jsxs("div",{className:"grid gap-6",children:[E("account_number")&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{className:"ml-2 font-bold text-slate-800",children:"Numéro de compte"}),t.jsx(T,{value:s.account_number,onChange:j=>k({...s,account_number:j.target.value}),placeholder:"Compte bancaire...",className:"h-14 rounded-2xl border-2 border-white/30 bg-white/40 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30"})]}),E("beneficiary_number")&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(L,{className:"ml-2 font-bold text-slate-800",children:"Numéro du bénéficiaire"}),t.jsx("button",{type:"button",onClick:()=>k({...s,beneficiary_number:s.phone}),className:"text-xs font-bold text-cyan-800 transition-colors hover:text-cyan-900",children:"Utiliser le mien"})]}),t.jsx(T,{value:s.beneficiary_number,onChange:j=>k({...s,beneficiary_number:j.target.value}),placeholder:"08...",className:"h-14 rounded-2xl border-2 border-white/30 bg-white/40 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30"})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{className:"ml-2 font-bold text-slate-800",children:"Montant"}),t.jsxs("div",{className:"relative",children:[t.jsx(T,{type:"number",value:s.amount,onChange:j=>k({...s,amount:j.target.value}),placeholder:"0.00",className:"h-14 rounded-2xl border-2 border-white/30 bg-white/40 pr-24 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30"}),t.jsx("div",{className:"absolute top-1 right-1 bottom-1 flex rounded-xl bg-slate-100 p-1",children:["USD","CDF"].map(j=>t.jsx("button",{onClick:()=>k({...s,currency:j}),className:`relative z-10 w-12 rounded-lg text-sm font-black transition-all ${s.currency===j?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:j},j))})]})]}),E("beneficiary")&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{className:"ml-2 font-bold text-slate-800",children:"Bénéficiaire"}),t.jsx(T,{value:s.beneficiary,onChange:j=>k({...s,beneficiary:j.target.value}),placeholder:"Nom du bénéficiaire",className:"h-14 rounded-2xl border-2 border-white/30 bg-white/40 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30"})]})]}),s.operation_type==="retrait"&&t.jsxs("div",{className:"rounded-[2.5rem] border-2 border-indigo-100/50 bg-white/40 p-10 shadow-[0_20px_50px_rgba(79,70,229,0.1)] backdrop-blur-2xl transition-all hover:shadow-[0_20px_50px_rgba(79,70,229,0.15)]",children:[t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-indigo-600 shadow-xl shadow-indigo-600/20",children:t.jsx(Z,{className:"h-7 w-7 text-white"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h4",{className:"text-base font-black tracking-tight text-slate-900 uppercase",children:"Infos de l'Agent"}),t.jsx("p",{className:"text-[10px] font-bold tracking-widest text-indigo-500 uppercase",children:"Transaction Sécurisée"})]})]}),t.jsx("div",{className:"rounded-full bg-slate-100 px-4 py-1.5 text-[11px] font-black tracking-widest text-slate-600 uppercase",children:a?.name})]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs("div",{className:"group flex flex-col gap-2 text-left",children:[t.jsx("span",{className:"ml-2 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Nom de l'Agent"}),t.jsx("div",{className:"flex h-16 items-center rounded-2xl border-2 border-slate-100 bg-white/80 px-6 text-lg font-black tracking-tight text-slate-900 shadow-sm transition-all group-hover:border-indigo-100 group-hover:bg-white",children:v?.withdrawal_agent_name||"NON CONFIGURÉ"})]}),t.jsxs("div",{className:"group flex flex-col gap-2 text-left",children:[t.jsxs("div",{className:"mb-0 flex items-center justify-between px-2",children:[t.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Numéro Agent"}),t.jsxs("div",{className:"flex items-center gap-1.5 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[8px] font-black text-emerald-600 uppercase",children:[t.jsx(Ie,{className:"h-2.5 w-2.5"}),"Vérifié"]})]}),t.jsxs("div",{className:"flex h-16 items-center justify-between rounded-2xl border-2 border-slate-100 bg-white/50 px-6 shadow-sm backdrop-blur-sm transition-all group-hover:border-indigo-100 group-hover:bg-white",children:[t.jsx("span",{className:"text-xl font-black tracking-[0.2em] text-indigo-900",children:v?.withdrawal_agent_number||"---"}),t.jsx(M,{variant:"ghost",size:"icon",className:"h-10 w-10 shrink-0 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-emerald-50 hover:text-emerald-600",onClick:()=>{v?.withdrawal_agent_number&&(navigator.clipboard.writeText(v.withdrawal_agent_number),le.success("Copié !"))},children:t.jsx(Le,{className:"h-5 w-5"})})]})]})]}),t.jsxs("div",{className:"mt-8 flex items-start gap-4 rounded-3xl border border-indigo-100/30 bg-indigo-50/50 p-5 text-left",children:[t.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-xl bg-white shadow-sm",children:t.jsx(Be,{className:"h-4 w-4 text-indigo-500"})}),t.jsx("p",{className:"text-[11px] leading-relaxed font-semibold text-indigo-900/70",children:"Veuillez effectuer votre retrait vers ce numéro d'agent. Une fois terminé, indiquez le montant ci-dessous pour validation par notre équipe."})]})]}),E("reason")&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{className:"ml-2 font-bold text-slate-800",children:"Motif / Raison"}),t.jsx(T,{value:s.reason,onChange:j=>k({...s,reason:j.target.value}),placeholder:"Raison du dépôt...",className:"h-14 rounded-2xl border-2 border-white/30 bg-white/40 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30"})]}),s.operation_type==="retrait"?null:(a?.settings?.custom_fields||[]).filter(R=>!R.operation_type||R.operation_type==="both"||R.operation_type==="depot").map(R=>t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{className:"ml-2 font-bold text-slate-800",children:R.label}),t.jsx(T,{value:s.metadata[R.id]||"",onChange:ne=>k({...s,metadata:{...s.metadata,[R.id]:ne.target.value}}),placeholder:`Entrez ${R.label.toLowerCase()}...`,className:"h-14 rounded-2xl border-2 border-white/30 bg-white/40 text-slate-900 shadow-xl backdrop-blur-xl placeholder:text-slate-400 focus:border-white/60 focus:bg-white/60 focus:ring-4 focus:ring-cyan-400/30"})]},R.id))]})})()},"operation-fields-container")})]})]})]});case 3:return t.jsx(We,{ticketNumber:r,onNewTicket:re});default:return null}};return t.jsxs(Pe,{currentPageName:"Client",children:[t.jsx(ye,{title:"Client"}),t.jsxs("div",{className:"relative flex h-screen w-screen flex-col overflow-hidden",children:[t.jsx(U,{children:!G&&!X&&t.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/40 p-6 backdrop-blur-3xl",children:t.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"relative w-full max-w-2xl overflow-hidden rounded-[3rem] bg-white p-12 text-center font-sans shadow-2xl",children:[t.jsx("div",{className:"absolute top-0 right-0 -z-10 h-64 w-64 translate-x-1/2 -translate-y-1/2 rounded-full bg-indigo-50"}),t.jsx("div",{className:"mx-auto mb-8 flex h-24 w-24 items-center justify-center rounded-[2rem] border border-slate-100 bg-slate-50",children:t.jsx(Te,{className:"h-12 w-12 text-slate-300"})}),t.jsxs("h1",{className:"mb-4 text-4xl font-black tracking-tighter text-slate-900 uppercase",children:["Agence"," ",t.jsx("span",{className:"text-indigo-600",children:"Fermée"})]}),t.jsx("p",{className:"mb-10 text-lg leading-relaxed font-medium text-slate-500",children:"Veuillez patienter... Le manager n'a pas encore ouvert la session de travail pour cette agence."}),t.jsxs("div",{className:"mx-auto grid max-w-md grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex flex-col items-center rounded-3xl border border-slate-100 bg-slate-50 p-6",children:[t.jsx(he,{className:"mb-2 h-6 w-6 text-indigo-500"}),t.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Heure Locale"}),t.jsx("span",{className:"text-lg font-black text-slate-800",children:Re().format("HH:mm")})]}),t.jsxs("div",{className:"flex flex-col items-center rounded-3xl border border-slate-100 bg-slate-50 p-6",children:[t.jsx(ze,{className:"mb-2 h-6 w-6 text-indigo-500"}),t.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Agence"}),t.jsx("span",{className:"text-lg font-black text-slate-800",children:"Kinshasa"})]})]}),t.jsx("div",{className:"mt-12 flex justify-center",children:t.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-indigo-50 px-6 py-3",children:[t.jsx("div",{className:"h-2 w-2 animate-pulse rounded-full bg-indigo-600"}),t.jsx("span",{className:"text-xs font-black tracking-widest text-indigo-600 uppercase",children:"Actualisation automatique"})]})})]})})}),t.jsxs("div",{className:"fixed inset-0 z-0",children:[t.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/images/background1.png)"}}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-900/20 to-slate-900/40"})]}),t.jsxs("div",{className:"relative z-10 flex w-full flex-1 flex-col overflow-hidden px-4 pb-4",children:[t.jsx("div",{className:"flex shrink-0 items-center justify-between py-4",children:t.jsxs("div",{className:"flex items-center gap-4 rounded-full bg-white/10 px-6 py-2 backdrop-blur-md",children:[t.jsx("img",{src:"/logo.png",alt:"Havifin",className:"h-10 w-10 object-contain"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-black tracking-tight text-white uppercase",children:"Havifin"}),t.jsx("p",{className:"text-[10px] font-bold tracking-widest text-white/60 uppercase",children:"Smart Ticket"})]})]})}),t.jsx("div",{className:"scrollbar-hide flex-1 overflow-y-auto",children:t.jsxs("div",{className:"mx-auto max-w-5xl",children:[t.jsxs("div",{className:"rounded-[40px] border border-white/20 bg-white/60 p-8 shadow-2xl shadow-purple-500/20 backdrop-blur-2xl md:p-12",children:[t.jsx(U,{mode:"wait",children:be()}),e<3&&t.jsxs("div",{className:"mt-12 flex justify-center gap-4",children:[e===2&&t.jsx(M,{variant:"ghost",onClick:re,size:"lg",className:"h-16 rounded-3xl border border-white/30 bg-white/20 px-16 text-xl font-bold text-slate-600 shadow-xl backdrop-blur-xl transition-all hover:bg-white/40 hover:text-red-500",children:"Annuler"}),t.jsx(M,{onClick:ee,disabled:!pe()||B.isPending||$.isPending||c,size:"lg",className:"h-16 rounded-3xl border border-white/30 bg-gradient-to-r from-cyan-500 via-blue-600 to-purple-600 px-16 text-xl font-bold text-white shadow-2xl shadow-cyan-500/30 backdrop-blur-xl transition-all hover:scale-[1.02] hover:border-white/50 hover:shadow-cyan-500/50 active:scale-[0.98]",children:B.isPending||$.isPending?t.jsxs(t.Fragment,{children:[t.jsx(J,{className:"mr-3 h-6 w-6 animate-spin"}),"Traitement..."]}):t.jsxs(t.Fragment,{children:[e===1&&"Continuer",e===2&&"Confirmer",t.jsx(me,{className:"ml-3 h-6 w-6"})]})})]})]}),e<3&&t.jsx("div",{className:"mt-12 flex justify-center gap-4",children:[1,2].map(a=>t.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${e===a?"w-12 bg-blue-600":"w-2 bg-slate-200"}`},a))})]})})]})]})]})}export{vt as default};
