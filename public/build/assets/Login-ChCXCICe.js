import{r as n,j as e}from"./app-Cl1Srwpv.js";import{L as x,I as p,B as g}from"./label-B4e2dEWo.js";import{t as c}from"./index-DLNwE5_S.js";import{c as d,m as w}from"./createLucideIcon-D-eif_I3.js";import{C as u}from"./circle-alert-BXBVgS13.js";/* empty css            */const f=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],v=d("Lock",f);const y=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],j=d("LogIn",y);const N=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],k=d("Mail",N);function E(){const[s,l]=n.useState({email:"",password:"",remember:!1}),[t,h]=n.useState(!1),[o,m]=n.useState({}),b=async r=>{r.preventDefault(),h(!0),m({});try{const i=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(s)}),a=await i.json();if(!i.ok){a.errors?m(a.errors):a.message&&c.error(a.message);return}c.success("Connexion réussie!"),a.role==="manager"?window.location.href="/manager":a.role==="cashier"?window.location.href="/cashier":(a.role,window.location.href="/clientform")}catch(i){console.error("Login error:",i),c.error("Une erreur est survenue lors de la connexion")}finally{h(!1)}};return e.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[e.jsxs("div",{className:"fixed inset-0 z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/images/background1.png)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-900/20 to-slate-900/40"})]}),e.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center px-4 py-12",children:e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsxs("div",{className:"group relative mx-auto mb-8 inline-block",children:[e.jsx("div",{className:"absolute -inset-12 rounded-full bg-gradient-to-tr from-cyan-400/30 via-purple-500/30 to-pink-500/30 opacity-60 blur-3xl transition-all duration-700 group-hover:opacity-100 group-hover:scale-110"}),e.jsx("div",{className:"relative flex h-32 w-32 items-center justify-center rounded-[40px] border border-white/30 bg-white/10 p-6 shadow-2xl shadow-purple-500/20 backdrop-blur-2xl transition-all duration-500 group-hover:scale-110 group-hover:rotate-3 group-hover:border-white/50 group-hover:bg-white/20",children:e.jsx("img",{src:"/logo.png",alt:"Havifin",className:"h-full w-full object-contain drop-shadow-2xl"})})]}),e.jsx("h1",{className:"mb-2 text-4xl font-black tracking-tight drop-shadow-lg",children:e.jsx("span",{className:"bg-gradient-to-r from-cyan-300 via-blue-300 to-purple-300 bg-clip-text text-transparent",children:"Havifin"})}),e.jsx("p",{className:"text-lg font-bold tracking-widest text-white/60 uppercase",children:"Connexion"})]}),e.jsxs("div",{className:"rounded-[32px] border border-white/20 bg-white/10 p-8 shadow-2xl shadow-purple-500/20 backdrop-blur-2xl",children:[e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"ml-2 font-bold text-white",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-white/40"}),e.jsx(p,{type:"email",value:s.email,onChange:r=>l({...s,email:r.target.value}),placeholder:"admin@havifin.com",className:"h-14 rounded-2xl border-2 border-white/30 bg-white/10 pl-12 text-white shadow-xl backdrop-blur-xl placeholder:text-white/40 focus:border-white/60 focus:bg-white/20 focus:ring-4 focus:ring-cyan-400/30",disabled:t})]}),o.email&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:[e.jsx(u,{className:"h-4 w-4"}),o.email]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"ml-2 font-bold text-white",children:"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-white/40"}),e.jsx(p,{type:"password",value:s.password,onChange:r=>l({...s,password:r.target.value}),placeholder:"••••••••",className:"h-14 rounded-2xl border-2 border-white/30 bg-white/10 pl-12 text-white shadow-xl backdrop-blur-xl placeholder:text-white/40 focus:border-white/60 focus:bg-white/20 focus:ring-4 focus:ring-cyan-400/30",disabled:t})]}),o.password&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:[e.jsx(u,{className:"h-4 w-4"}),o.password]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"remember",checked:s.remember,onChange:r=>l({...s,remember:r.target.checked}),className:"h-5 w-5 rounded border-white/30 bg-white/10 text-cyan-500 focus:ring-2 focus:ring-cyan-400/30"}),e.jsx("label",{htmlFor:"remember",className:"text-sm font-medium text-white/70",children:"Se souvenir de moi"})]}),e.jsx(g,{type:"submit",disabled:t,className:"h-14 w-full rounded-2xl border border-white/30 bg-gradient-to-r from-cyan-500 via-blue-600 to-purple-600 text-lg font-bold text-white shadow-2xl shadow-cyan-500/30 backdrop-blur-xl transition-all hover:scale-[1.02] hover:border-white/50 hover:shadow-cyan-500/50 active:scale-[0.98]",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Connexion en cours..."]}):e.jsxs(e.Fragment,{children:["Se connecter",e.jsx(j,{className:"ml-2 h-5 w-5"})]})})]}),e.jsxs("div",{className:"mt-6 rounded-xl border border-cyan-500/30 bg-cyan-500/10 p-4 text-center text-sm text-cyan-200",children:[e.jsx("p",{className:"font-medium",children:"Comptes de test"}),e.jsx("p",{className:"mt-1 text-xs text-cyan-300/70",children:"Manager: admin@havifin.com / password"}),e.jsx("p",{className:"text-xs text-cyan-300/70",children:"Cashier: cashier@havifin.com / password"}),e.jsx("p",{className:"text-xs text-cyan-300/70",children:"Client: client@havifin.com / password"})]})]})]})})]})}export{E as default};
