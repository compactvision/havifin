import{c as ze,R as tt,j as s,u as it,r as xe,b as gt,H as _t}from"./app-XPqbswjP.js";import{b as be}from"./base44Client-D_8p-kpS.js";import{B as yt}from"./badge-BZemhbWI.js";import{B as he,t as Te}from"./index-OjgNDduT.js";import{c as He,a as Ue,m as Ve}from"./createLucideIcon-CscEagRl.js";import{h as at}from"./moment-B-YVwB4U.js";import{C as ot}from"./clock-hY7Azrf4.js";import{L as jt,R as ct,A as vt}from"./refresh-cw-B5PkTHMb.js";import{S as wt,a as Nt}from"./smartphone-DFCBQS8K.js";import{A as st}from"./arrow-right-BHLruwHy.js";import{P as Ct,C as kt,a as St,b as Pt,c as Dt}from"./phone-CiM53lzB.js";import{A as Ke,u as Be,U as At}from"./users-3glLT9eq.js";import{C as dt}from"./circle-check-DZMMeG0N.js";import{b as mt,c as ut,d as Ft,a as xt,D as ht}from"./dialog-Bfaowtgw.js";import{T as ft}from"./textarea-D7JmwleY.js";import{u as We}from"./check-40j9Q1Ph.js";import{T as Mt}from"./triangle-alert-DRDAnFip.js";import{C as Rt}from"./circle-alert-DRz5lfV5.js";import{I as Qe,L as $e}from"./label-ohV488kT.js";import{S as Je,a as Xe,b as Ye,c as Ze,d as pe}from"./select--LJarav_.js";import{L as Et}from"./loader-circle-uqjuVbFJ.js";import{A as qt}from"./app-main-p7Td2XQe.js";/* empty css            */import"./axios-G5n3UMvP.js";import"./index-D6xtymZ0.js";const Lt=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$t=He("CircleCheckBig",Lt);const Ut=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Ht=He("CircleUser",Ut);const Tt=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v2",key:"stiyo7"}],["path",{d:"M12 13h.01",key:"y0uutt"}]],zt=He("MessageSquareWarning",Tt);const It=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]],nt=He("PhoneCall",It);const Ot=[["polyline",{points:"18 2 22 6 18 10",key:"6vjanh"}],["line",{x1:"14",x2:"22",y1:"6",y2:"6",key:"1jsywh"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Kt=He("PhoneForwarded",Ot);const Bt=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Qt=He("Send",Bt);function lt(t){const e=ze.c(71),{client:a,onCall:h,onRecall:o,onProcess:f,onHelp:A,isProcessing:p}=t,[i,w]=tt.useState(!1),l=a.status==="called",_=a.status==="completed",n=a.status==="waiting";let b,g;e[0]!==l?(b=()=>{l&&w(!0)},g=[l],e[0]=l,e[1]=b,e[2]=g):(b=e[1],g=e[2]),tt.useEffect(b,g);let m,c,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(m={opacity:0,scale:.98,y:5},c={opacity:1,scale:1,y:0},d={opacity:0,scale:.95,y:-5},e[3]=m,e[4]=c,e[5]=d):(m=e[3],c=e[4],d=e[5]);let u;e[6]!==l||e[7]!==i?(u=()=>!l&&w(!i),e[6]=l,e[7]=i,e[8]=u):u=e[8];const k=l?"rounded-[2rem] border-blue-500/30 bg-white p-5 shadow-xl ring-1 shadow-blue-500/5 ring-blue-50":_?"rounded-2xl border-slate-100 bg-slate-50/50 p-3 opacity-60 hover:opacity-100":"rounded-2xl border-slate-200 bg-white p-3 shadow-sm hover:border-blue-300 hover:shadow-md";let x;e[9]!==k?(x=Ue("group relative cursor-pointer overflow-hidden transition-all duration-300",k),e[9]=k,e[10]=x):x=e[10];const S=l?"h-14 w-14 rounded-2xl bg-blue-600 text-xl text-white shadow-lg shadow-blue-500/20":"h-10 w-10 rounded-xl bg-slate-900 text-sm text-white";let v;e[11]!==S?(v=Ue("flex flex-shrink-0 items-center justify-center font-black tracking-tighter transition-all",S),e[11]=S,e[12]=v):v=e[12];let C;e[13]!==a.ticket_number||e[14]!==v?(C=s.jsx("div",{className:v,children:a.ticket_number}),e[13]=a.ticket_number,e[14]=v,e[15]=C):C=e[15];const F=l?"text-lg":"text-sm";let H;e[16]!==F?(H=Ue("truncate leading-tight font-black tracking-tight text-slate-800",F),e[16]=F,e[17]=H):H=e[17];const K=a.first_name?`${a.first_name} ${a.last_name||""}`:a.phone;let M;e[18]!==H||e[19]!==K?(M=s.jsx("h4",{className:H,children:K}),e[18]=H,e[19]=K,e[20]=M):M=e[20];let I;e[21]!==a.created_date||e[22]!==a.service||e[23]!==l||e[24]!==i?(I=!l&&!i&&s.jsxs("p",{className:"truncate text-[10px] font-bold tracking-wider text-slate-400 uppercase",children:[a.service," •"," ",at(a.created_date).format("HH:mm")]}),e[21]=a.created_date,e[22]=a.service,e[23]=l,e[24]=i,e[25]=I):I=e[25];let P;e[26]!==M||e[27]!==I?(P=s.jsxs("div",{className:"overflow-hidden",children:[M,I]}),e[26]=M,e[27]=I,e[28]=P):P=e[28];let te;e[29]!==C||e[30]!==P?(te=s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[C,P]}),e[29]=C,e[30]=P,e[31]=te):te=e[31];let N;e[32]!==a||e[33]!==i||e[34]!==p||e[35]!==n||e[36]!==h?(N=n&&!i&&s.jsx(he,{size:"icon",variant:"secondary",onClick:z=>{z.stopPropagation(),h?.(a)},disabled:p,className:"h-10 w-10 rounded-xl bg-blue-50 text-blue-600 shadow-sm transition-all hover:bg-blue-600 hover:text-white",children:p?s.jsx(ct,{className:"h-4 w-4 animate-spin"}):s.jsx(Ct,{className:"h-4 w-4"})}),e[32]=a,e[33]=i,e[34]=p,e[35]=n,e[36]=h,e[37]=N):N=e[37];let L;e[38]!==a||e[39]!==l||e[40]!==A||e[41]!==o?(L=l&&s.jsxs("div",{className:"flex gap-1.5",onClick:Vt,children:[s.jsx(he,{variant:"ghost",size:"icon",onClick:()=>A?.(a),className:"h-9 w-9 rounded-xl border border-amber-100/50 bg-amber-50 text-amber-600 hover:bg-amber-100",children:s.jsx(zt,{className:"h-4 w-4"})}),s.jsx(he,{variant:"ghost",size:"icon",onClick:()=>o?.(a),className:"h-9 w-9 rounded-xl border border-blue-100/50 bg-blue-50 text-blue-600 hover:bg-blue-100",children:s.jsx(Kt,{className:"h-4 w-4"})})]}),e[38]=a,e[39]=l,e[40]=A,e[41]=o,e[42]=L):L=e[42];let R;e[43]!==N||e[44]!==L?(R=s.jsxs("div",{className:"flex items-center gap-2",children:[N,L]}),e[43]=N,e[44]=L,e[45]=R):R=e[45];let y;e[46]!==te||e[47]!==R?(y=s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[te,R]}),e[46]=te,e[47]=R,e[48]=y):y=e[48];let E;e[49]!==a||e[50]!==l||e[51]!==i||e[52]!==p||e[53]!==n||e[54]!==h||e[55]!==f?(E=i&&s.jsx(Ve.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:s.jsxs("div",{className:Ue("mt-4 space-y-3",l?"":"border-t border-slate-100 pt-3"),children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-500",children:[s.jsx(ot,{className:"h-3.5 w-3.5"}),at(a.created_date).format("HH:mm")]}),s.jsx(yt,{variant:"outline",className:"h-5 py-0 text-[9px] font-black tracking-tighter uppercase",children:a.operation_type})]}),s.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-100/50 bg-slate-50 p-3",children:[s.jsx("div",{className:"rounded-lg bg-white p-1.5 shadow-sm",children:a.operation_type==="change"?s.jsx(jt,{className:"h-3.5 w-3.5 text-indigo-500"}):s.jsx(wt,{className:"h-3.5 w-3.5 text-amber-500"})}),s.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-600 uppercase",children:a.service})]}),a.amount&&s.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-blue-100/20 bg-blue-50/50 p-3",children:[s.jsx("span",{className:"text-[9px] font-black tracking-widest text-blue-600/60 uppercase",children:"Estimation"}),s.jsxs("span",{className:"font-mono text-sm font-black text-blue-700",children:[a.amount?.toLocaleString()," ",a.currency_to]})]}),s.jsxs("div",{className:"pt-2",children:[n&&s.jsxs(he,{onClick:z=>{z.stopPropagation(),h?.(a)},disabled:p,className:"h-11 w-full rounded-xl bg-blue-600 text-sm font-black text-white shadow-lg shadow-blue-600/20",children:["Appeler Ticket",s.jsx(st,{className:"ml-2 h-4 w-4"})]}),l&&s.jsxs(he,{onClick:z=>{z.stopPropagation(),f?.(a)},className:"h-12 w-full rounded-xl bg-slate-900 text-sm font-black text-white shadow-xl shadow-slate-900/10",children:["Démarrer le service",s.jsx(st,{className:"ml-2 h-4 w-4 text-[#00e2f6]"})]})]})]})}),e[49]=a,e[50]=l,e[51]=i,e[52]=p,e[53]=n,e[54]=h,e[55]=f,e[56]=E):E=e[56];let $;e[57]!==E?($=s.jsx(Ke,{children:E}),e[57]=E,e[58]=$):$=e[58];let q;e[59]!==_||e[60]!==i?(q=_&&!i&&s.jsxs("div",{className:"mt-2 flex items-center justify-center gap-1 text-[9px] font-black tracking-widest text-emerald-600 uppercase",children:[s.jsx(dt,{className:"h-3 w-3"}),"Terminé"]}),e[59]=_,e[60]=i,e[61]=q):q=e[61];let D;e[62]!==l?(D=l&&s.jsx("div",{className:"absolute -right-6 -bottom-6 h-16 w-16 rounded-full bg-blue-500/5 blur-2xl"}),e[62]=l,e[63]=D):D=e[63];let T;return e[64]!==y||e[65]!==$||e[66]!==q||e[67]!==D||e[68]!==u||e[69]!==x?(T=s.jsxs(Ve.div,{layout:!0,initial:m,animate:c,exit:d,onClick:u,className:x,children:[y,$,q,D]}),e[64]=y,e[65]=$,e[66]=q,e[67]=D,e[68]=u,e[69]=x,e[70]=T):T=e[70],T}function Vt(t){return t.stopPropagation()}function Wt(t){const e=ze.c(36),{isOpen:a,onClose:h,clientPhone:o}=t,[f,A]=tt.useState("");let p;e[0]!==h?(p={mutationFn:Jt,onSuccess:()=>{Te.success("Demande d'aide envoyée au manager"),A(""),h()},onError:Gt},e[0]=h,e[1]=p):p=e[1];const i=We(p);let w;e[2]!==o||e[3]!==f||e[4]!==i?(w=F=>{F.preventDefault(),f.trim()&&i.mutate({client_phone:o||"N/A",description:f})},e[2]=o,e[3]=f,e[4]=i,e[5]=w):w=e[5];const l=w;let _;e[6]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-1/2 -translate-y-1/2 bg-amber-500/10 blur-3xl"}),e[6]=_):_=e[6];let n;e[7]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsxs(mt,{className:"mb-6",children:[s.jsx("div",{className:"mb-4 flex h-14 w-14 items-center justify-center rounded-2xl border border-amber-500/30 bg-amber-500/20",children:s.jsx(Mt,{className:"h-8 w-8 text-amber-500"})}),s.jsx(ut,{className:"text-3xl font-black tracking-tight",children:"Besoin d'aide ?"}),s.jsx(Ft,{className:"text-lg font-medium text-slate-400",children:"Expliquez brièvement le problème au manager."})]}),e[7]=n):n=e[7];let b;e[8]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("label",{className:"ml-1 text-xs font-black tracking-widest text-slate-500 uppercase",children:"Message d'urgence"}),e[8]=b):b=e[8];let g;e[9]===Symbol.for("react.memo_cache_sentinel")?(g=F=>A(F.target.value),e[9]=g):g=e[9];let m;e[10]!==f?(m=s.jsxs("div",{className:"space-y-2",children:[b,s.jsx(ft,{value:f,onChange:g,placeholder:"Ex: Problème de validation M-Pesa, client impatient...",className:"min-h-[120px] resize-none rounded-2xl border-white/10 bg-white/5 p-4 text-lg text-white placeholder:text-slate-600 focus:border-amber-500 focus:ring-amber-500"})]}),e[10]=f,e[11]=m):m=e[11];let c;e[12]!==o?(c=o&&s.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-white/5 bg-white/5 p-4",children:[s.jsx(Rt,{className:"h-5 w-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black tracking-wider text-slate-500 uppercase",children:"Client associé"}),s.jsx("div",{className:"text-sm font-bold",children:o})]})]}),e[12]=o,e[13]=c):c=e[13];let d;e[14]!==h?(d=s.jsx(he,{type:"button",variant:"ghost",onClick:h,className:"h-14 flex-1 rounded-2xl border border-white/5 font-bold text-slate-400 hover:bg-white/5",children:"Annuler"}),e[14]=h,e[15]=d):d=e[15];let u;e[16]!==f||e[17]!==i.isPending?(u=i.isPending||!f.trim(),e[16]=f,e[17]=i.isPending,e[18]=u):u=e[18];let k;e[19]!==i.isPending?(k=i.isPending?s.jsx(Ve.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},children:s.jsx(RefreshCw,{className:"h-6 w-6"})}):s.jsxs(s.Fragment,{children:["Envoyer Alerte",s.jsx(Qt,{className:"ml-2 h-5 w-5"})]}),e[19]=i.isPending,e[20]=k):k=e[20];let x;e[21]!==u||e[22]!==k?(x=s.jsx(he,{type:"submit",disabled:u,className:"h-14 flex-[2] rounded-2xl bg-amber-500 text-lg font-black text-black shadow-lg shadow-amber-500/20 hover:bg-amber-600",children:k}),e[21]=u,e[22]=k,e[23]=x):x=e[23];let S;e[24]!==x||e[25]!==d?(S=s.jsxs("div",{className:"flex gap-4 pt-2",children:[d,x]}),e[24]=x,e[25]=d,e[26]=S):S=e[26];let v;e[27]!==l||e[28]!==S||e[29]!==m||e[30]!==c?(v=s.jsx(xt,{className:"overflow-hidden rounded-[32px] border-none bg-slate-900 p-0 text-white sm:max-w-[500px]",children:s.jsxs("div",{className:"relative p-8",children:[_,n,s.jsxs("form",{onSubmit:l,className:"space-y-6",children:[m,c,S]})]})}),e[27]=l,e[28]=S,e[29]=m,e[30]=c,e[31]=v):v=e[31];let C;return e[32]!==a||e[33]!==h||e[34]!==v?(C=s.jsx(ht,{open:a,onOpenChange:h,children:v}),e[32]=a,e[33]=h,e[34]=v,e[35]=C):C=e[35],C}function Gt(){Te.error("Erreur lors de l'envoi de la demande")}async function Jt(t){return be.entities.HelpRequest.create(t)}function et(t){const e=ze.c(28),{title:a,icon:h,count:o,color:f,children:A}=t;let p;e[0]!==f?(p=Ue("rounded-2xl border p-2.5 shadow-sm",f),e[0]=f,e[1]=p):p=e[1];let i;e[2]!==h?(i=s.jsx(h,{className:"h-5 w-5"}),e[2]=h,e[3]=i):i=e[3];let w;e[4]!==p||e[5]!==i?(w=s.jsx("div",{className:p,children:i}),e[4]=p,e[5]=i,e[6]=w):w=e[6];let l;e[7]!==a?(l=s.jsx("h3",{className:"text-xl leading-none font-black tracking-tight text-slate-800",children:a}),e[7]=a,e[8]=l):l=e[8];const _=o>1?"Clients":"Client";let n;e[9]!==o||e[10]!==_?(n=s.jsxs("p",{className:"mt-1.5 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[o," ",_]}),e[9]=o,e[10]=_,e[11]=n):n=e[11];let b;e[12]!==l||e[13]!==n?(b=s.jsxs("div",{children:[l,n]}),e[12]=l,e[13]=n,e[14]=b):b=e[14];let g;e[15]!==w||e[16]!==b?(g=s.jsxs("div",{className:"flex items-center gap-3",children:[w,b]}),e[15]=w,e[16]=b,e[17]=g):g=e[17];let m;e[18]!==o?(m=s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-slate-200 bg-slate-100 text-sm font-black text-slate-400 shadow-inner",children:o}),e[18]=o,e[19]=m):m=e[19];let c;e[20]!==g||e[21]!==m?(c=s.jsxs("div",{className:"mb-6 flex items-center justify-between px-1",children:[g,m]}),e[20]=g,e[21]=m,e[22]=c):c=e[22];let d;e[23]!==A?(d=s.jsx("div",{className:"scrollbar-none custom-kanban-scroll flex-1 overflow-y-auto pr-2",children:s.jsx("div",{className:"space-y-4 pb-12",children:A})}),e[23]=A,e[24]=d):d=e[24];let u;return e[25]!==c||e[26]!==d?(u=s.jsxs("div",{className:"flex h-full max-w-[450px] min-w-[320px] flex-1 flex-col",children:[c,d]}),e[25]=c,e[26]=d,e[27]=u):u=e[27],u}const rt={depot:{label:"Dépôt",icon:Pt,color:"text-green-500",action:"Déposer"},retrait:{label:"Retrait",icon:St,color:"text-blue-500",action:"Retirer"},change:{label:"Change",icon:vt,color:"text-amber-500",action:"Changer"},transfert:{label:"Transfert",icon:st,color:"text-purple-500",action:"Transférer"},paiement:{label:"Paiement",icon:kt,color:"text-pink-500",action:"Payer"}};function Xt(t){const e=ze.c(133),{client:a,open:h,onClose:o}=t,f=it(),A=a?.amount?String(a.amount):"",p=a?.currency_from||"USD",i=a?.currency_to||"CDF";let w;e[0]!==A||e[1]!==p||e[2]!==i?(w={amount_from:A,amount_given:"",currency_from:p,currency_to:i,exchange_rate:"",commission:"0",notes:""},e[0]=A,e[1]=p,e[2]=i,e[3]=w):w=e[3];const[l,_]=xe.useState(w),[n,b]=xe.useState(0);let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g={queryKey:["rates"],queryFn:Yt},e[4]=g):g=e[4];const{data:m}=Be(g);let c;e[5]!==m?(c=m===void 0?[]:m,e[5]=m,e[6]=c):c=e[6];const d=c;let u,k;e[7]!==a?(u=()=>{a&&_(j=>({...j,amount_from:a.amount?String(a.amount):"",currency_from:a.currency_from||"USD",currency_to:a.currency_to||"CDF",amount_given:"",exchange_rate:"",commission:"0"}))},k=[a],e[7]=a,e[8]=u,e[9]=k):(u=e[8],k=e[9]),xe.useEffect(u,k);let x;e[10]!==a?.operation_type||e[11]!==l.currency_from||e[12]!==l.currency_to||e[13]!==d?(x=()=>{if(a?.operation_type==="change"){const j=`${l.currency_from}_${l.currency_to}`,U=d.find(B=>B.currency_pair===j||B.currency_from===l.currency_from&&B.currency_to===l.currency_to);U&&_(B=>({...B,exchange_rate:String(U.buy_rate||U.rate)}))}},e[10]=a?.operation_type,e[11]=l.currency_from,e[12]=l.currency_to,e[13]=d,e[14]=x):x=e[14];const S=a?.operation_type;let v;e[15]!==l.currency_from||e[16]!==l.currency_to||e[17]!==d||e[18]!==S?(v=[l.currency_from,l.currency_to,d,S],e[15]=l.currency_from,e[16]=l.currency_to,e[17]=d,e[18]=S,e[19]=v):v=e[19],xe.useEffect(x,v);let C;e[20]!==a?.operation_type||e[21]!==l.amount_from||e[22]!==l.amount_given||e[23]!==l.commission||e[24]!==l.exchange_rate?(C=()=>{if(!l.amount_from)return;const j=parseFloat(l.amount_from),U=parseFloat(l.amount_given)||0,B=parseFloat(l.exchange_rate)||1,fe=parseFloat(l.commission)||0;a?.operation_type==="change"?b(j*B-fe):["depot","transfert"].includes(a?.operation_type||"")&&U>0?b(U-j-fe):b(0)},e[20]=a?.operation_type,e[21]=l.amount_from,e[22]=l.amount_given,e[23]=l.commission,e[24]=l.exchange_rate,e[25]=C):C=e[25];const F=a?.operation_type;let H;e[26]!==l.amount_from||e[27]!==l.amount_given||e[28]!==l.commission||e[29]!==l.exchange_rate||e[30]!==F?(H=[l.amount_from,l.amount_given,l.exchange_rate,l.commission,F],e[26]=l.amount_from,e[27]=l.amount_given,e[28]=l.commission,e[29]=l.exchange_rate,e[30]=F,e[31]=H):H=e[31],xe.useEffect(C,H);let K;e[32]!==n||e[33]!==a||e[34]!==l.amount_from||e[35]!==l.commission||e[36]!==l.currency_from||e[37]!==l.currency_to||e[38]!==l.exchange_rate||e[39]!==l.notes?(K=async()=>{if(!a)return;const j=isNaN(n)?0:n,U=a.operation_type==="change"?parseFloat(l.exchange_rate)||0:1;if(isNaN(U)||a.operation_type==="change"&&U===0)throw new Error("Taux de change invalide");await be.entities.Transaction.create({client_id:a.id,ticket_number:a.ticket_number,operation_type:a.operation_type,service:a.service,currency_from:l.currency_from,currency_to:a.operation_type==="change"?l.currency_to:l.currency_from,amount_from:parseFloat(l.amount_from)||0,amount_to:a.operation_type==="change"?j:parseFloat(l.amount_from)||0,exchange_rate:U,commission:parseFloat(l.commission)||0,client_phone:a.phone}),await be.entities.Client.update(a.id,{status:"completed",completed_at:new Date().toISOString(),notes:l.notes})},e[32]=n,e[33]=a,e[34]=l.amount_from,e[35]=l.commission,e[36]=l.currency_from,e[37]=l.currency_to,e[38]=l.exchange_rate,e[39]=l.notes,e[40]=K):K=e[40];let M;e[41]!==o||e[42]!==f?(M=()=>{f.invalidateQueries({queryKey:["clients"]}),f.invalidateQueries({queryKey:["transactions"]}),o()},e[41]=o,e[42]=f,e[43]=M):M=e[43];let I;e[44]!==K||e[45]!==M?(I={mutationFn:K,onSuccess:M},e[44]=K,e[45]=M,e[46]=I):I=e[46];const P=We(I);if(!a)return null;const te=a.operation_type,N=rt[te]||rt.depot,L=N.icon;let R;e[47]!==a.ticket_number?(R=s.jsx("span",{className:"text-2xl font-black text-slate-800",children:a.ticket_number}),e[47]=a.ticket_number,e[48]=R):R=e[48];const y=`flex items-center gap-1 rounded-md bg-slate-100 px-2 py-1 text-sm font-medium ${N.color}`;let E;e[49]!==L?(E=s.jsx(L,{className:"h-4 w-4"}),e[49]=L,e[50]=E):E=e[50];let $;e[51]!==N.label||e[52]!==y||e[53]!==E?($=s.jsxs("span",{className:y,children:[E,N.label]}),e[51]=N.label,e[52]=y,e[53]=E,e[54]=$):$=e[54];let q;e[55]!==R||e[56]!==$?(q=s.jsxs("div",{className:"flex items-center gap-3",children:[R,$]}),e[55]=R,e[56]=$,e[57]=q):q=e[57];let D;e[58]!==a.phone?(D=s.jsx("span",{className:"text-sm font-normal text-slate-500",children:a.phone}),e[58]=a.phone,e[59]=D):D=e[59];let T;e[60]!==q||e[61]!==D?(T=s.jsx(mt,{children:s.jsxs(ut,{className:"flex items-center justify-between",children:[q,D]})}),e[60]=q,e[61]=D,e[62]=T):T=e[62];let z;e[63]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx("div",{className:"text-xs font-semibold tracking-wider text-slate-500 uppercase",children:"Service"}),e[63]=z):z=e[63];const ge=a.service==="bureau"?"Bureau de Change":a.service;let _e;e[64]!==ge?(_e=s.jsxs("div",{children:[z,s.jsx("div",{className:"text-lg font-bold text-slate-800",children:ge})]}),e[64]=ge,e[65]=_e):_e=e[65];let se;e[66]!==a.operation_type||e[67]!==l.currency_from?(se=["depot","transfert","retrait"].includes(a.operation_type)&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs font-semibold tracking-wider text-slate-500 uppercase",children:"Devise"}),s.jsx("div",{className:"text-lg font-bold text-slate-800",children:l.currency_from})]}),e[66]=a.operation_type,e[67]=l.currency_from,e[68]=se):se=e[68];let ye;e[69]!==_e||e[70]!==se?(ye=s.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-slate-50 p-4",children:[_e,se]}),e[69]=_e,e[70]=se,e[71]=ye):ye=e[71];const je=a.operation_type==="retrait"?"Montant à retirer":"Montant de l'opération";let ue;e[72]!==je?(ue=s.jsx($e,{children:je}),e[72]=je,e[73]=ue):ue=e[73];let le;e[74]!==l?(le=j=>_({...l,amount_from:j.target.value}),e[74]=l,e[75]=le):le=e[75];let ae;e[76]!==l.amount_from||e[77]!==le?(ae=s.jsx(Qe,{type:"number",value:l.amount_from,onChange:le,className:"text-lg font-bold"}),e[76]=l.amount_from,e[77]=le,e[78]=ae):ae=e[78];let ne;e[79]!==a.operation_type||e[80]!==l?(ne=["depot","transfert","retrait"].includes(a.operation_type)&&s.jsxs(Je,{value:l.currency_from,onValueChange:j=>_({...l,currency_from:j}),children:[s.jsx(Xe,{className:"w-24",children:s.jsx(Ye,{})}),s.jsxs(Ze,{children:[s.jsx(pe,{value:"USD",children:"USD"}),s.jsx(pe,{value:"CDF",children:"CDF"}),s.jsx(pe,{value:"EUR",children:"EUR"})]})]}),e[79]=a.operation_type,e[80]=l,e[81]=ne):ne=e[81];let re;e[82]!==ae||e[83]!==ne?(re=s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[ae,ne]}),e[82]=ae,e[83]=ne,e[84]=re):re=e[84];let ie;e[85]!==ue||e[86]!==re?(ie=s.jsxs("div",{children:[ue,re]}),e[85]=ue,e[86]=re,e[87]=ie):ie=e[87];let oe;e[88]!==n||e[89]!==a.operation_type||e[90]!==l?(oe=["depot","transfert"].includes(a.operation_type)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx($e,{children:"Montant reçu du client"}),s.jsx(Qe,{type:"number",value:l.amount_given,onChange:j=>_({...l,amount_given:j.target.value}),className:"mt-1",placeholder:"Combien le client a donné ?"})]}),n>0&&s.jsxs("div",{className:"rounded-xl border border-yellow-200 bg-yellow-50 p-4",children:[s.jsxs("div",{className:"mb-1 flex items-center gap-2 text-yellow-700",children:[s.jsx(Dt,{className:"h-4 w-4"}),s.jsx("span",{className:"font-bold",children:"A rendre au client"})]}),s.jsxs("div",{className:"text-2xl font-black text-yellow-600",children:[n.toLocaleString()," ",l.currency_from]})]})]}),e[88]=n,e[89]=a.operation_type,e[90]=l,e[91]=oe):oe=e[91];let ce;e[92]!==n||e[93]!==a.operation_type||e[94]!==l?(ce=a.operation_type==="change"&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx($e,{children:"Devise Source"}),s.jsxs(Je,{value:l.currency_from,onValueChange:j=>_({...l,currency_from:j}),children:[s.jsx(Xe,{className:"mt-1",children:s.jsx(Ye,{})}),s.jsxs(Ze,{children:[s.jsx(pe,{value:"USD",children:"USD"}),s.jsx(pe,{value:"CDF",children:"CDF"}),s.jsx(pe,{value:"EUR",children:"EUR"})]})]})]}),s.jsxs("div",{children:[s.jsx($e,{children:"Devise Cible"}),s.jsxs(Je,{value:l.currency_to,onValueChange:j=>_({...l,currency_to:j}),children:[s.jsx(Xe,{className:"mt-1",children:s.jsx(Ye,{})}),s.jsxs(Ze,{children:[s.jsx(pe,{value:"USD",children:"USD"}),s.jsx(pe,{value:"CDF",children:"CDF"}),s.jsx(pe,{value:"EUR",children:"EUR"})]})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx($e,{children:"Taux de change"}),s.jsx(Qe,{type:"number",value:l.exchange_rate,onChange:j=>_({...l,exchange_rate:j.target.value}),className:"mt-1"})]}),s.jsxs("div",{className:"col-span-2 rounded-xl border border-amber-200 bg-amber-50 p-4",children:[s.jsx("div",{className:"mb-1 font-bold text-amber-700",children:"Montant à remettre"}),s.jsxs("div",{className:"text-3xl font-black text-amber-600",children:[n.toLocaleString()," ",l.currency_to]})]})]}),e[92]=n,e[93]=a.operation_type,e[94]=l,e[95]=ce):ce=e[95];let Q;e[96]!==ie||e[97]!==oe||e[98]!==ce?(Q=s.jsxs("div",{className:"space-y-4",children:[ie,oe,ce]}),e[96]=ie,e[97]=oe,e[98]=ce,e[99]=Q):Q=e[99];let ve;e[100]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx($e,{children:"Notes (optionnel)"}),e[100]=ve):ve=e[100];let V;e[101]!==l?(V=j=>_({...l,notes:j.target.value}),e[101]=l,e[102]=V):V=e[102];let W;e[103]!==l.notes||e[104]!==V?(W=s.jsxs("div",{children:[ve,s.jsx(ft,{value:l.notes,onChange:V,className:"mt-1",placeholder:"Remarques..."})]}),e[103]=l.notes,e[104]=V,e[105]=W):W=e[105];let G;e[106]!==o?(G=s.jsx(he,{variant:"outline",onClick:o,className:"flex-1",children:"Annuler"}),e[106]=o,e[107]=G):G=e[107];let de;e[108]!==P?(de=()=>P.mutate(),e[108]=P,e[109]=de):de=e[109];const we=P.isPending||!l.amount_from,Ne=`flex-1 text-white ${a.operation_type==="depot"||a.operation_type==="transfert"?"bg-green-600 hover:bg-green-700":a.operation_type==="retrait"?"bg-blue-600 hover:bg-blue-700":"bg-amber-500 hover:bg-amber-600"}`;let J;e[110]!==P.isPending?(J=P.isPending?s.jsx(Et,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx($t,{className:"mr-2 h-4 w-4"}),e[110]=P.isPending,e[111]=J):J=e[111];let X;e[112]!==N.label||e[113]!==de||e[114]!==we||e[115]!==Ne||e[116]!==J?(X=s.jsxs(he,{onClick:de,disabled:we,className:Ne,children:[J,"Valider ",N.label]}),e[112]=N.label,e[113]=de,e[114]=we,e[115]=Ne,e[116]=J,e[117]=X):X=e[117];let Y;e[118]!==G||e[119]!==X?(Y=s.jsxs("div",{className:"flex gap-3 pt-4",children:[G,X]}),e[118]=G,e[119]=X,e[120]=Y):Y=e[120];let Z;e[121]!==ye||e[122]!==Q||e[123]!==W||e[124]!==Y?(Z=s.jsxs("div",{className:"space-y-6 py-4",children:[ye,Q,W,Y]}),e[121]=ye,e[122]=Q,e[123]=W,e[124]=Y,e[125]=Z):Z=e[125];let ee;e[126]!==T||e[127]!==Z?(ee=s.jsxs(xt,{className:"max-w-lg",children:[T,Z]}),e[126]=T,e[127]=Z,e[128]=ee):ee=e[128];let me;return e[129]!==o||e[130]!==h||e[131]!==ee?(me=s.jsx(ht,{open:h,onOpenChange:o,children:ee}),e[129]=o,e[130]=h,e[131]=ee,e[132]=me):me=e[132],me}function Yt(){return be.entities.ExchangeRate.filter({is_active:!0})}function Ds(){const t=ze.c(133),{auth:e}=gt().props,[a,h]=xe.useState(null),[o,f]=xe.useState(!1),[A,p]=xe.useState(!1),[i,w]=xe.useState(null),[l,_]=xe.useState(""),n=it();let b;t[0]===Symbol.for("react.memo_cache_sentinel")?(b={queryKey:["clients","waiting"],queryFn:ls,refetchInterval:5e3},t[0]=b):b=t[0];const{data:g}=Be(b);let m;t[1]!==g?(m=g===void 0?[]:g,t[1]=g,t[2]=m):m=t[2];const c=m;let d;t[3]!==e.user.id?(d={queryKey:["clients","called",e.user.id],queryFn:()=>be.entities.Client.filter({status:"called",cashier_id:e.user.id.toString()},"-called_at"),refetchInterval:5e3},t[3]=e.user.id,t[4]=d):d=t[4];const{data:u}=Be(d);let k;t[5]!==u?(k=u===void 0?[]:u,t[5]=u,t[6]=k):k=t[6];const x=k;let S;t[7]===Symbol.for("react.memo_cache_sentinel")?(S={queryKey:["clients","completed"],queryFn:ss,refetchInterval:1e4},t[7]=S):S=t[7];const{data:v}=Be(S);let C;t[8]!==v?(C=v===void 0?[]:v,t[8]=v,t[9]=C):C=t[9];const F=C;let H;if(t[10]!==l||t[11]!==c){let r;t[13]!==l?(r=O=>O.ticket_number?.toLowerCase().includes(l.toLowerCase())||O.phone?.includes(l),t[13]=l,t[14]=r):r=t[14],H=c.filter(r),t[10]=l,t[11]=c,t[12]=H}else H=t[12];const K=H;let M;if(t[15]!==x||t[16]!==l){let r;t[18]!==l?(r=O=>O.ticket_number?.toLowerCase().includes(l.toLowerCase())||O.phone?.includes(l),t[18]=l,t[19]=r):r=t[19],M=x.filter(r),t[15]=x,t[16]=l,t[17]=M}else M=t[17];const I=M;let P;if(t[20]!==F||t[21]!==l){let r;t[23]!==l?(r=O=>O.ticket_number.toLowerCase().includes(l.toLowerCase())||O.phone.includes(l),t[23]=l,t[24]=r):r=t[24],P=F.filter(r),t[20]=F,t[21]=l,t[22]=P}else P=t[22];const te=P;let N;t[25]!==e.user.counter_number||t[26]!==e.user.id?(N=async r=>(await be.entities.Client.update(r.id,{status:"called",called_at:new Date().toISOString(),counter_number:e.user.counter_number||1,cashier_id:e.user.id.toString()}),r),t[25]=e.user.counter_number,t[26]=e.user.id,t[27]=N):N=t[27];let L;t[28]!==n?(L=r=>{n.invalidateQueries({queryKey:["clients"]}),Te.success(`Client ${r.ticket_number} appelé`)},t[28]=n,t[29]=L):L=t[29];let R;t[30]!==N||t[31]!==L?(R={mutationFn:N,onSuccess:L},t[30]=N,t[31]=L,t[32]=R):R=t[32];const y=We(R);let E;t[33]===Symbol.for("react.memo_cache_sentinel")?(E={mutationFn:ts,onSuccess:es},t[33]=E):E=t[33];const $=We(E);let q;t[34]!==y?(q=r=>y.mutate(r),t[34]=y,t[35]=q):q=t[35];const D=q;let T;t[36]!==$?(T=r=>$.mutate(r),t[36]=$,t[37]=T):T=t[37];const z=T;let ge;t[38]===Symbol.for("react.memo_cache_sentinel")?(ge=r=>{h(r),f(!0)},t[38]=ge):ge=t[38];const _e=ge;let se;t[39]===Symbol.for("react.memo_cache_sentinel")?(se=r=>{w(r),p(!0)},t[39]=se):se=t[39];const ye=se;let je;t[40]!==n?(je=()=>{n.invalidateQueries({queryKey:["clients"]}),Te.info("Données actualisées")},t[40]=n,t[41]=je):je=t[41];const ue=je;let le;t[42]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(_t,{title:"Tableau de Bord Caissier"}),t[42]=le):le=t[42];let ae;t[43]===Symbol.for("react.memo_cache_sentinel")?(ae={scale:1.02},t[43]=ae):ae=t[43];let ne,re;t[44]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(Ve.div,{whileHover:ae,className:"relative flex h-16 w-36 items-center justify-center px-4",children:s.jsx("img",{src:"/logo-color.png",alt:"Havifin",className:"h-full w-full object-contain"})}),re=s.jsx("div",{className:"h-10 w-[1px] bg-slate-100"}),t[44]=ne,t[45]=re):(ne=t[44],re=t[45]);let ie;t[46]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsxs("div",{className:"flex items-center gap-6",children:[ne,re,s.jsx("div",{className:"hidden md:block",children:s.jsxs("h1",{className:"text-lg font-black tracking-tighter text-slate-800 uppercase",children:["Terminal"," ",s.jsx("span",{className:"text-brand-blue",children:"Caisse"})]})})]}),t[46]=ie):ie=t[46];let oe;t[47]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(Nt,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-slate-400 transition-colors group-focus-within:text-brand-blue"}),t[47]=oe):oe=t[47];let ce;t[48]===Symbol.for("react.memo_cache_sentinel")?(ce=r=>_(r.target.value),t[48]=ce):ce=t[48];let Q;t[49]!==l?(Q=s.jsx("div",{className:"mx-10 max-w-sm flex-1",children:s.jsxs("div",{className:"group relative",children:[oe,s.jsx(Qe,{placeholder:"Rechercher ticket...",value:l,onChange:ce,className:"h-11 w-full rounded-2xl border-transparent bg-slate-50 pl-11 font-medium text-slate-700 transition-all focus:border-blue-500 focus:bg-white"})]})}),t[49]=l,t[50]=Q):Q=t[50];const ve=y.isPending&&"animate-spin";let V;t[51]!==ve?(V=Ue("mr-2 h-4 w-4",ve),t[51]=ve,t[52]=V):V=t[52];let W;t[53]!==V?(W=s.jsx(ct,{className:V}),t[53]=V,t[54]=W):W=t[54];let G;t[55]!==ue||t[56]!==W?(G=s.jsxs(he,{variant:"outline",onClick:ue,className:"h-12 rounded-2xl border-slate-200 bg-white px-6 font-bold shadow-sm transition-all hover:border-brand-blue hover:text-brand-blue",children:[W,"Actualiser"]}),t[55]=ue,t[56]=W,t[57]=G):G=t[57];let de;t[58]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx("div",{className:"h-10 w-[1px] bg-slate-200"}),t[58]=de):de=t[58];let we;t[59]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl border border-slate-100 bg-white text-slate-600 shadow-sm",children:s.jsx(Ht,{className:"h-6 w-6"})}),t[59]=we):we=t[59];const Ne=e.user.shop?`• ${e.user.shop}`:"";let J;t[60]!==e.user.role||t[61]!==Ne?(J=s.jsxs("div",{className:"text-[10px] font-black tracking-wider text-slate-400 uppercase",children:[e.user.role," ",Ne]}),t[60]=e.user.role,t[61]=Ne,t[62]=J):J=t[62];let X;t[63]!==e.user.name?(X=s.jsx("div",{className:"text-xs font-bold text-slate-700",children:e.user.name}),t[63]=e.user.name,t[64]=X):X=t[64];let Y;t[65]!==J||t[66]!==X?(Y=s.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 bg-slate-100 p-1.5 pr-4 shadow-inner",children:[we,s.jsxs("div",{children:[J,X]})]}),t[65]=J,t[66]=X,t[67]=Y):Y=t[67];let Z;t[68]!==e.user.counter?(Z=e.user.counter&&s.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-brand-blue/20 bg-brand-blue/10 px-4 py-2 font-bold text-brand-blue",children:[s.jsx("span",{className:"text-[10px] tracking-widest uppercase",children:"Guichet"}),s.jsx("span",{className:"text-sm",children:e.user.counter})]}),t[68]=e.user.counter,t[69]=Z):Z=t[69];let ee;t[70]!==G||t[71]!==Y||t[72]!==Z?(ee=s.jsxs("div",{className:"flex items-center gap-4",children:[G,de,Y,Z]}),t[70]=G,t[71]=Y,t[72]=Z,t[73]=ee):ee=t[73];let me;t[74]!==Q||t[75]!==ee?(me=s.jsxs("header",{className:"z-20 flex h-20 flex-shrink-0 items-center justify-between border-b border-slate-200 bg-white px-10 shadow-[0_1px_3px_rgba(0,0,0,0.02)]",children:[ie,Q,ee]}),t[74]=Q,t[75]=ee,t[76]=me):me=t[76];const j=c.length;let U;if(t[77]!==y.isPending||t[78]!==y.variables?.id||t[79]!==K||t[80]!==D){let r;t[82]!==y.isPending||t[83]!==y.variables?.id||t[84]!==D?(r=O=>s.jsx(lt,{client:O,onCall:D,isProcessing:y.isPending&&y.variables?.id===O.id},O.id),t[82]=y.isPending,t[83]=y.variables?.id,t[84]=D,t[85]=r):r=t[85],U=K.map(r),t[77]=y.isPending,t[78]=y.variables?.id,t[79]=K,t[80]=D,t[81]=U}else U=t[81];let B;t[86]!==U?(B=s.jsx(Ke,{mode:"popLayout",children:U}),t[86]=U,t[87]=B):B=t[87];let fe;t[88]!==c.length?(fe=c.length===0&&s.jsxs("div",{className:"mt-12 text-center opacity-30",children:[s.jsx(At,{className:"mx-auto mb-4 h-16 w-16"}),s.jsx("p",{className:"text-sm font-bold tracking-widest uppercase",children:"Aucun client"})]}),t[88]=c.length,t[89]=fe):fe=t[89];let Ce;t[90]!==B||t[91]!==fe||t[92]!==c.length?(Ce=s.jsxs(et,{title:"Clients en Attente",icon:ot,count:j,color:"bg-slate-900 text-white border-slate-900",children:[B,fe]}),t[90]=B,t[91]=fe,t[92]=c.length,t[93]=Ce):Ce=t[93];const pt=x.length;let ke;if(t[94]!==I||t[95]!==z){let r;t[97]!==z?(r=O=>s.jsx(lt,{client:O,onRecall:z,onProcess:_e,onHelp:ye},O.id),t[97]=z,t[98]=r):r=t[98],ke=I.map(r),t[94]=I,t[95]=z,t[96]=ke}else ke=t[96];let Se;t[99]!==ke?(Se=s.jsx(Ke,{mode:"popLayout",children:ke}),t[99]=ke,t[100]=Se):Se=t[100];let Pe;t[101]!==x.length?(Pe=x.length===0&&s.jsxs("div",{className:"mt-12 text-center opacity-20",children:[s.jsx(nt,{className:"mx-auto mb-4 h-16 w-16"}),s.jsx("p",{className:"text-sm font-bold tracking-widest uppercase",children:"Prenez un ticket"})]}),t[101]=x.length,t[102]=Pe):Pe=t[102];let De;t[103]!==x.length||t[104]!==Se||t[105]!==Pe?(De=s.jsxs(et,{title:"En Cours de Service",icon:nt,count:pt,color:"bg-brand-blue text-white border-brand-blue",children:[Se,Pe]}),t[103]=x.length,t[104]=Se,t[105]=Pe,t[106]=De):De=t[106];const bt=F.length;let Ae;t[107]!==te?(Ae=te.map(Zt),t[107]=te,t[108]=Ae):Ae=t[108];let Fe;t[109]!==Ae?(Fe=s.jsx(Ke,{mode:"popLayout",children:Ae}),t[109]=Ae,t[110]=Fe):Fe=t[110];let Me;t[111]!==F.length||t[112]!==Fe?(Me=s.jsx(et,{title:"Derniers Traités",icon:dt,count:bt,color:"bg-brand-cyan text-brand-dark border-brand-cyan shadow-lg shadow-brand-cyan/20",children:Fe}),t[111]=F.length,t[112]=Fe,t[113]=Me):Me=t[113];let Re;t[114]!==Ce||t[115]!==De||t[116]!==Me?(Re=s.jsx("main",{className:"flex-1 overflow-x-auto overflow-y-hidden bg-[url('/grid.svg')] bg-[length:40px_40px] bg-fixed px-10 py-8",children:s.jsxs("div",{className:"flex h-full min-w-max gap-10 pb-4",children:[Ce,De,Me]})}),t[114]=Ce,t[115]=De,t[116]=Me,t[117]=Re):Re=t[117];let Ee;t[118]!==n?(Ee=()=>{f(!1),h(null),n.invalidateQueries({queryKey:["clients"]})},t[118]=n,t[119]=Ee):Ee=t[119];let qe;t[120]!==o||t[121]!==a||t[122]!==Ee?(qe=s.jsx(Xt,{client:a,open:o,onClose:Ee}),t[120]=o,t[121]=a,t[122]=Ee,t[123]=qe):qe=t[123];let Ie;t[124]===Symbol.for("react.memo_cache_sentinel")?(Ie=()=>{p(!1),w(null)},t[124]=Ie):Ie=t[124];const Ge=i?.phone;let Le;t[125]!==A||t[126]!==Ge?(Le=s.jsx(Wt,{isOpen:A,onClose:Ie,clientPhone:Ge}),t[125]=A,t[126]=Ge,t[127]=Le):Le=t[127];let Oe;return t[128]!==me||t[129]!==Re||t[130]!==qe||t[131]!==Le?(Oe=s.jsxs(qt,{currentPageName:"Cashier",children:[le,s.jsxs("div",{className:"flex flex-col overflow-hidden bg-slate-50",children:[me,Re,qe,Le]})]}),t[128]=me,t[129]=Re,t[130]=qe,t[131]=Le,t[132]=Oe):Oe=t[132],Oe}function Zt(t){return s.jsx(lt,{client:t},t.id)}function es(){Te.info("Rappel envoyé à l'affichage")}async function ts(t){await be.entities.Client.update(t.id,{called_at:new Date().toISOString()})}function ss(){return be.entities.Client.filter({status:"completed"},"-completed_at",20)}function ls(){return be.entities.Client.filter({status:"waiting"},"created_date")}export{Ds as default};
