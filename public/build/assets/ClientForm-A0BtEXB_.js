import{c as O,r as _,j as t,R as G}from"./app-fKChV1ys.js";import{a as $,A as B,m as g,c as k,S as H,L as K,u as Q,b as L}from"./smartphone-E53GRGFn.js";import{L as P,I as T,B as z,d as F,g as U,A as J,C as Z,R as W,b as D,f as Y}from"./app-main--3To3elo.js";import{P as X,B as q}from"./plus-Bfho3FwE.js";import{P as V,c as ee,b as te,a as se,C as ae,A as le}from"./phone-B9pUz72V.js";/* empty css            */const ie=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],E=$("ChevronLeft",ie);const ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],oe=$("Globe",ne);const re=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],ce=$("Ticket",re);function de(f){const e=O.c(20),{phones:v,selectedPhone:o,onSelect:c,onAdd:x,isAdding:a}=f,u=a===void 0?!1:a,[n,r]=_.useState(!1),[d,b]=_.useState("");let j;e[0]!==d||e[1]!==x?(j=async()=>{d.length===10&&(await x(d),r(!1),b(""))},e[0]=d,e[1]=x,e[2]=j):j=e[2];const y=j;let h;if(e[3]!==c||e[4]!==v||e[5]!==o){let m;e[7]!==c||e[8]!==o?(m=N=>t.jsxs(g.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>c(N.phone_number),className:k("relative flex items-center gap-4 overflow-hidden rounded-2xl border-2 p-4 transition-all duration-200",o===N.phone_number?"border-blue-500 bg-blue-50/50 shadow-md":"border-slate-100 bg-white hover:border-slate-200"),children:[t.jsx("div",{className:k("flex h-10 w-10 items-center justify-center rounded-xl",o===N.phone_number?"bg-blue-500 text-white":"bg-slate-100 text-slate-400"),children:t.jsx(V,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("span",{className:k("block text-lg font-bold",o===N.phone_number?"text-blue-700":"text-slate-700"),children:N.phone_number}),N.is_primary&&t.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-0.5 text-[10px] font-black tracking-wider text-blue-500/60 uppercase",children:"Principal"})]}),o===N.phone_number&&t.jsx(g.div,{initial:{scale:0},animate:{scale:1},className:"flex h-6 w-6 items-center justify-center rounded-full bg-blue-500 text-white",children:t.jsx(U,{className:"h-4 w-4"})})]},N.id),e[7]=c,e[8]=o,e[9]=m):m=e[9],h=v.map(m),e[3]=c,e[4]=v,e[5]=o,e[6]=h}else h=e[6];let p;e[10]!==h?(p=t.jsx("div",{className:"grid grid-cols-1 gap-3",children:h}),e[10]=h,e[11]=p):p=e[11];let s;e[12]!==y||e[13]!==u||e[14]!==n||e[15]!==d?(s=t.jsx(B,{children:n?t.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"space-y-3 rounded-2xl border-2 border-blue-100 bg-blue-50/30 p-4",children:[t.jsx(P,{className:"mb-1 block font-bold text-blue-700",children:"Nouveau numéro"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(T,{value:d,onChange:m=>b(m.target.value.replace(/\D/g,"").slice(0,10)),placeholder:"0XXXXXXXXX",className:"h-12 rounded-xl bg-white focus:border-blue-500 focus:ring-blue-500",autoFocus:!0}),t.jsx(z,{onClick:y,disabled:d.length<10||u,className:"h-12 rounded-xl bg-blue-600 px-6 text-white hover:bg-blue-700",children:u?t.jsx(F,{className:"h-5 w-5 animate-spin"}):t.jsx(X,{className:"h-5 w-5"})})]}),t.jsx(z,{variant:"ghost",size:"sm",onClick:()=>r(!1),className:"w-full text-slate-500 hover:text-red-500",children:"Annuler"})]}):t.jsxs(g.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>r(!0),className:"flex w-full items-center justify-center gap-2 rounded-2xl border-2 border-dashed border-slate-200 p-4 font-bold text-slate-400 transition-all hover:border-blue-300 hover:bg-blue-50/30 hover:text-blue-500",children:[t.jsx(X,{className:"h-5 w-5"}),"Ajouter un nouveau numéro"]})}),e[12]=y,e[13]=u,e[14]=n,e[15]=d,e[16]=s):s=e[16];let l;return e[17]!==p||e[18]!==s?(l=t.jsxs("div",{className:"space-y-4",children:[p,s]}),e[17]=p,e[18]=s,e[19]=l):l=e[19],l}const me=[{id:"change",name:"Change Devises",icon:J,description:"USD ↔ CDF au meilleur taux",color:"from-amber-400 to-orange-500",hover:"shadow-orange-200"},{id:"depot",name:"Dépôt Cash",icon:ee,description:"Alimentez vos comptes",color:"from-green-400 to-emerald-600",hover:"shadow-green-200"},{id:"retrait",name:"Retrait Cash",icon:te,description:"Retirez vos fonds",color:"from-blue-400 to-indigo-600",hover:"shadow-blue-200"},{id:"paiement",name:"Paiement",icon:se,description:"Payez vos factures et services",color:"from-purple-400 to-pink-600",hover:"shadow-purple-200"}];function ue(f){const e=O.c(5),{selectedOperation:v,onSelect:o}=f;let c;e[0]!==o||e[1]!==v?(c=me.map(a=>{const u=a.icon,n=v===a.id;return t.jsxs(g.button,{whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},onClick:()=>o(a.id),className:k("group relative overflow-hidden rounded-[40px] border-4 p-8 text-center transition-all duration-300",n?"border-blue-500 bg-white shadow-2xl shadow-blue-500/20":"border-slate-50 bg-slate-50/50 hover:border-slate-200 hover:bg-white hover:shadow-xl"),children:[t.jsx("div",{className:k("absolute -top-12 -right-12 h-24 w-24 rounded-full blur-[40px] transition-opacity",n?"opacity-20":"opacity-0 group-hover:opacity-10",a.color.replace("from-","bg-"))}),t.jsx("div",{className:k("mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-[28px] bg-gradient-to-br shadow-lg transition-transform group-hover:rotate-6",a.color,n?"scale-110":""),children:t.jsx(u,{className:"h-10 w-10 text-white"})}),t.jsx("h3",{className:k("mb-2 text-xl font-black transition-colors",n?"text-slate-900":"text-slate-700"),children:a.name}),t.jsx("p",{className:"text-sm font-medium text-slate-400 group-hover:text-slate-500",children:a.description}),n&&t.jsx(g.div,{layoutId:"op-indicator",className:"absolute bottom-4 left-1/2 h-2 w-12 -translate-x-1/2 rounded-full bg-blue-500"})]},a.id)}),e[0]=o,e[1]=v,e[2]=c):c=e[2];let x;return e[3]!==c?(x=t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:c}),e[3]=c,e[4]=x):x=e[4],x}function xe(f){const e=O.c(24),{institutions:v,selectedId:o,onSelect:c,type:x}=f;let a,u,n,r;if(e[0]!==v||e[1]!==c||e[2]!==o||e[3]!==x){let j;e[8]!==x?(j=m=>m.type===x,e[8]=x,e[9]=j):j=e[9];const y=v.filter(j),h=x==="mobile_money"?H:q;n="space-y-4";let p;e[10]!==h?(p=t.jsx(h,{className:"h-5 w-5 text-blue-500"}),e[10]=h,e[11]=p):p=e[11];const s=x==="mobile_money"?"Opérateurs Mobile":"Banques";let l;e[12]!==s?(l=t.jsx("h3",{className:"text-lg font-bold text-slate-800",children:s}),e[12]=s,e[13]=l):l=e[13],e[14]!==p||e[15]!==l?(r=t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[p,l]}),e[14]=p,e[15]=l,e[16]=r):r=e[16],a="grid grid-cols-2 gap-4 md:grid-cols-4",u=y.length>0?y.map(m=>t.jsxs(g.button,{whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},onClick:()=>c(m.id),className:k("relative flex flex-col items-center justify-center rounded-[32px] border-2 p-6 transition-all duration-300",o===m.id?"border-blue-500 bg-white shadow-xl ring-4 shadow-blue-500/10 ring-blue-50":"border-slate-100 bg-slate-50/50 hover:border-slate-200 hover:bg-white"),children:[t.jsx("div",{className:k("mb-4 flex h-16 w-16 items-center justify-center rounded-2xl shadow-inner transition-colors",o===m.id?"bg-blue-50":"bg-white"),children:m.logo_url?t.jsx("img",{src:m.logo_url,alt:m.name,className:"h-10 w-10 object-contain"}):t.jsx(K,{className:k("h-8 w-8",o===m.id?"text-blue-500":"text-slate-300")})}),t.jsx("span",{className:k("text-center text-sm font-black tracking-tight",o===m.id?"text-blue-700":"text-slate-600"),children:m.name}),o===m.id&&t.jsx(g.div,{layoutId:"active-indicator",className:"absolute -top-1 -right-1 h-6 w-6 rounded-full border-4 border-white bg-blue-500 shadow-sm"})]},m.id)):t.jsxs("div",{className:"col-span-full py-12 text-center",children:[t.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-slate-100 text-slate-300",children:t.jsx(h,{className:"h-8 w-8"})}),t.jsx("p",{className:"text-sm font-bold tracking-widest text-slate-400 uppercase",children:"Aucun partenaire disponible"})]}),e[0]=v,e[1]=c,e[2]=o,e[3]=x,e[4]=a,e[5]=u,e[6]=n,e[7]=r}else a=e[4],u=e[5],n=e[6],r=e[7];let d;e[17]!==a||e[18]!==u?(d=t.jsx("div",{className:a,children:u}),e[17]=a,e[18]=u,e[19]=d):d=e[19];let b;return e[20]!==n||e[21]!==r||e[22]!==d?(b=t.jsxs("div",{className:n,children:[r,d]}),e[20]=n,e[21]=r,e[22]=d,e[23]=b):b=e[23],b}const he=[{id:"mobile_money",name:"Mobile Money",icon:H,color:"text-emerald-500"},{id:"bank",name:"Banques",icon:q,color:"text-blue-500"},{id:"other",name:"Autres",icon:oe,color:"text-amber-500"}];function pe(f){const e=O.c(20),{institutions:v,selectedId:o,onSelect:c,isLoading:x}=f,[a,u]=G.useState("mobile_money");if(x){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx("div",{className:"mb-4 h-12 w-12 animate-spin rounded-full border-4 border-slate-200 border-t-indigo-600"}),t.jsx("p",{className:"text-sm font-bold tracking-widest text-slate-400 uppercase",children:"Récupération des partenaires..."})]}),e[0]=l):l=e[0],l}let n;e[1]!==a?(n=he.map(l=>t.jsxs("button",{onClick:()=>u(l.id),className:k("flex flex-1 items-center justify-center gap-2 rounded-[18px] px-4 py-4 text-sm font-bold transition-all",a===l.id?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[t.jsx(l.icon,{className:k("h-5 w-5",a===l.id?l.color:"text-slate-400")}),l.name]},l.id)),e[1]=a,e[2]=n):n=e[2];let r;e[3]!==n?(r=t.jsx("div",{className:"flex gap-2 rounded-[24px] bg-slate-100 p-1.5",children:n}),e[3]=n,e[4]=r):r=e[4];let d,b,j,y;e[5]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:0,x:20},b={opacity:1,x:0},j={opacity:0,x:-20},y={duration:.2},e[5]=d,e[6]=b,e[7]=j,e[8]=y):(d=e[5],b=e[6],j=e[7],y=e[8]);let h;e[9]!==a||e[10]!==v||e[11]!==c||e[12]!==o?(h=t.jsx(xe,{institutions:v,selectedId:o,onSelect:c,type:a}),e[9]=a,e[10]=v,e[11]=c,e[12]=o,e[13]=h):h=e[13];let p;e[14]!==a||e[15]!==h?(p=t.jsx(B,{mode:"wait",children:t.jsx(g.div,{initial:d,animate:b,exit:j,transition:y,children:h},a)}),e[14]=a,e[15]=h,e[16]=p):p=e[16];let s;return e[17]!==r||e[18]!==p?(s=t.jsxs("div",{className:"space-y-8",children:[r,p]}),e[17]=r,e[18]=p,e[19]=s):s=e[19],s}function be(f){const e=O.c(29),{ticketNumber:v,onNewTicket:o}=f;let c,x;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:0,scale:.95},x={opacity:1,scale:1},e[0]=c,e[1]=x):(c=e[0],x=e[1]);let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(g.div,{initial:{scale:.8,opacity:0},animate:{scale:1.5,opacity:0},transition:{repeat:1/0,duration:2,ease:"easeOut"},className:"absolute inset-0 rounded-full bg-green-500/20"}),e[2]=a):a=e[2];let u,n,r;e[3]===Symbol.for("react.memo_cache_sentinel")?(u={scale:0},n={scale:1},r={type:"spring",stiffness:200,damping:20},e[3]=u,e[4]=n,e[5]=r):(u=e[3],n=e[4],r=e[5]);let d,b,j;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsxs("div",{className:"relative mb-12",children:[a,t.jsx(g.div,{initial:u,animate:n,transition:r,className:"relative mx-auto flex h-28 w-28 items-center justify-center rounded-[36px] bg-gradient-to-br from-emerald-400 to-green-600 shadow-2xl shadow-green-500/30",children:t.jsx(ae,{className:"h-14 w-14 text-white"})})]}),b=t.jsx("h2",{className:"mb-2 text-4xl font-black tracking-tight text-slate-900",children:"C'est fait !"}),j=t.jsx("p",{className:"mb-10 text-xl font-medium text-slate-500",children:"Votre ticket a été généré avec succès"}),e[6]=d,e[7]=b,e[8]=j):(d=e[6],b=e[7],j=e[8]);let y,h,p;e[9]===Symbol.for("react.memo_cache_sentinel")?(y={y:30,opacity:0},h={y:0,opacity:1},p={delay:.3,type:"spring"},e[9]=y,e[10]=h,e[11]=p):(y=e[9],h=e[10],p=e[11]);let s,l;e[12]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-8 -translate-y-8 rounded-full bg-white/5 blur-2xl transition-transform group-hover:scale-150"}),l=t.jsx("div",{className:"absolute bottom-0 left-0 h-24 w-24 -translate-x-8 translate-y-8 rounded-full bg-blue-500/10 blur-xl"}),e[12]=s,e[13]=l):(s=e[12],l=e[13]);let m;e[14]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs("div",{className:"mb-6 flex items-center justify-center gap-3 text-amber-400",children:[t.jsx(ce,{className:"h-6 w-6 rotate-12"}),t.jsx("span",{className:"text-sm font-black tracking-[0.2em] uppercase",children:"Ticket No."})]}),e[14]=m):m=e[14];let N;e[15]!==v?(N=t.jsx("div",{className:"mb-8 font-mono text-7xl font-black tracking-tighter text-white",children:v}),e[15]=v,e[16]=N):N=e[16];let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/5 bg-white/5 px-4 py-2 text-sm font-bold text-slate-400",children:[t.jsx(Z,{className:"h-4 w-4 text-amber-500"}),t.jsx("span",{children:"Attendez d'être appelé sur l'écran"})]}),e[17]=C):C=e[17];let S;e[18]!==N?(S=t.jsxs(g.div,{initial:y,animate:h,transition:p,className:"group relative mx-auto max-w-sm overflow-hidden rounded-[40px] bg-slate-900 p-10 shadow-2xl",children:[s,l,t.jsxs("div",{className:"relative z-10",children:[m,N,C]})]}),e[18]=N,e[19]=S):S=e[19];let M,I,R;e[20]===Symbol.for("react.memo_cache_sentinel")?(M={opacity:0},I={opacity:1},R={delay:.6},e[20]=M,e[21]=I,e[22]=R):(M=e[20],I=e[21],R=e[22]);let i;e[23]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx(W,{className:"mr-2 h-5 w-5 text-blue-500"}),e[23]=i):i=e[23];let w;e[24]!==o?(w=t.jsx(g.div,{initial:M,animate:I,transition:R,className:"mt-12",children:t.jsxs(z,{onClick:o,className:"h-14 rounded-2xl border-none bg-slate-100 px-10 font-black tracking-tight text-slate-900 shadow-none transition-all hover:scale-105 hover:bg-slate-200 active:scale-95",children:[i,"Nouvelle opération"]})}),e[24]=o,e[25]=w):w=e[25];let A;return e[26]!==S||e[27]!==w?(A=t.jsxs(g.div,{initial:c,animate:x,className:"py-8 text-center",children:[d,b,j,S,w]}),e[26]=S,e[27]=w,e[28]=A):A=e[28],A}const fe=()=>{const f=String.fromCharCode(65+Math.floor(Math.random()*26)),e=String(Math.floor(Math.random()*999)+1).padStart(3,"0");return`${f}${e}`};function ke(){const[f,e]=_.useState(1),[v,o]=_.useState(null),[c,x]=_.useState(!1),[a,u]=_.useState(null),[n,r]=_.useState(!1),[d,b]=_.useState(!1),[j,y]=_.useState(!1),{data:h=[],isPending:p}=Q({queryKey:["institutions","active"],queryFn:()=>L.entities.Institution.active()}),[s,l]=_.useState({phone:"",operation_type:"",institution_id:void 0,first_name:"",last_name:"",email:"",address:""});_.useEffect(()=>{(async()=>{if(s.phone.length===10&&!a&&!n){x(!0);try{const w=await L.entities.Client.verifyPhone(s.phone);w.exists&&w.client?(u(w.client),l(A=>({...A,phone:s.phone})),b(!1),r(!1)):(u(null),b(!0))}catch(w){console.error("Phone verification failed:",w)}finally{x(!1)}}})()},[s.phone,a,n]);const m=D({mutationFn:async()=>(await L.entities.Client.register({phone:s.phone,first_name:s.first_name,last_name:s.last_name,email:s.email,address:s.address})).client,onSuccess:i=>{u(i),r(!1),e(2)}}),N=D({mutationFn:async i=>a?(await L.entities.Client.addPhone(a.id,i)).phone:void 0,onSuccess:i=>{a&&i&&u({...a,phones:[...a.phones||[],i]})}}),C=D({mutationFn:async i=>{const w=fe(),A={...i,phone:s.phone,ticket_number:w,status:"waiting",first_name:a?.first_name||i.first_name||"Client",last_name:a?.last_name||i.last_name||"Anonyme",is_registered:!!a&&!j};return await L.entities.Client.create(A),w},onSuccess:i=>{o(i),e(3)}}),S=()=>{if(f===1)n?m.mutate():a&&e(2);else if(f===2){if(s.operation_type==="change")C.mutate({...s,service:"bureau"});else if(s.operation_type&&s.institution_id){const i=h.find(w=>w.id===s.institution_id);C.mutate({...s,operation_type:s.operation_type,service:i?.name||""})}}},M=()=>{e(1),o(null),u(null),r(!1),b(!1),y(!1),l({phone:"",operation_type:"",institution_id:void 0,first_name:"",last_name:"",email:"",address:""})},I=()=>f===1?n?s.first_name.trim()!==""&&s.last_name.trim()!=="":!!a:f===2?s.operation_type==="change"||s.operation_type==="paiement"?!0:!!(s.operation_type&&s.institution_id):!0,R=()=>{switch(f){case 1:return t.jsxs(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"group mx-auto mb-6 flex h-24 w-24 animate-in items-center justify-center rounded-[32px] bg-gradient-to-br from-blue-500 to-indigo-600 shadow-2xl shadow-blue-500/20 duration-500 fade-in zoom-in",children:t.jsx(V,{className:"h-12 w-12 text-white transition-transform group-hover:rotate-12"})}),t.jsx("h2",{className:"text-4xl font-black tracking-tight text-slate-900",children:n?"Nouvelle Inscription":"Bienvenue chez Havifin"}),t.jsx("p",{className:"mt-3 text-lg font-medium text-slate-400",children:n?"Laissez-nous faire connaissance pour mieux vous servir":"Identifiez-vous pour commencer votre opération"})]}),t.jsxs("div",{className:"mx-auto max-w-lg space-y-6",children:[!a&&!n&&!d&&t.jsxs("div",{className:"group relative",children:[t.jsx("div",{className:"absolute -inset-1 rounded-[28px] bg-gradient-to-r from-blue-500 to-indigo-600 opacity-25 blur transition duration-1000 group-hover:opacity-40 group-hover:duration-200"}),t.jsx(T,{type:"tel",value:s.phone,onChange:i=>l({...s,phone:i.target.value.replace(/\D/g,"").slice(0,10)}),placeholder:"Entrez votre numéro (10 chiffres)",className:"relative h-20 rounded-[24px] border-2 border-slate-100 bg-white text-center font-mono text-2xl font-black shadow-lg transition-all focus:border-blue-500 focus:ring-blue-500",autoFocus:!0,disabled:c}),c&&t.jsx("div",{className:"absolute top-1/2 right-6 -translate-y-1/2",children:t.jsx(F,{className:"h-6 w-6 animate-spin text-blue-500"})})]}),d&&t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[t.jsxs("div",{className:"rounded-[32px] border-2 border-blue-100 bg-blue-50/50 p-8 text-center ring-4 ring-blue-50/20",children:[t.jsx("div",{className:"mb-4 text-sm font-black tracking-widest text-blue-600 uppercase",children:"Nouveau Numéro"}),t.jsx("div",{className:"mb-4 font-mono text-4xl font-black text-slate-900",children:s.phone}),t.jsx("p",{className:"text-lg font-medium text-slate-500",children:"Souhaitez-vous vous enregistrer pour profiter de nos services personnalisés ?"})]}),t.jsxs("div",{className:"grid gap-4",children:[t.jsx(z,{onClick:()=>{b(!1),r(!0)},className:"h-20 rounded-[24px] bg-blue-600 text-xl font-bold text-white shadow-xl shadow-blue-500/20 hover:bg-blue-700",children:"Oui, m'enregistrer"}),t.jsx(z,{variant:"ghost",onClick:()=>{b(!1),y(!0),e(2)},className:"h-20 rounded-[24px] border-2 border-slate-200 bg-white text-xl font-bold text-slate-600 hover:bg-slate-50",children:"Non, continuer ainsi"}),t.jsx(z,{variant:"link",onClick:()=>{b(!1),l({...s,phone:""})},className:"text-slate-400",children:"Changer de numéro"})]})]}),a&&t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between px-2",children:[t.jsx(P,{className:"text-lg font-black text-slate-800",children:"Vos numéros"}),t.jsxs("button",{onClick:()=>{u(null),l({...s,phone:""})},className:"flex items-center gap-1 text-sm font-bold text-blue-500 hover:text-blue-700",children:[t.jsx(E,{className:"h-4 w-4"})," ","Changer"]})]}),t.jsx(de,{phones:a.phones||[],selectedPhone:s.phone,onSelect:i=>l({...s,phone:i}),onAdd:async i=>{await N.mutateAsync(i)},isAdding:N.isPending}),t.jsxs("div",{className:"group relative mt-8 overflow-hidden rounded-[32px] bg-gradient-to-br from-blue-600 to-indigo-700 p-8 text-white shadow-xl",children:[t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-8 -translate-y-8 rounded-full bg-white/10 blur-2xl transition-transform duration-700 group-hover:scale-150"}),t.jsxs("div",{className:"relative z-10 text-center",children:[t.jsxs("p",{className:"mb-1 text-4xl font-black",children:["Bonjour"," ",a.first_name," !"]}),t.jsx("p",{className:"font-medium text-blue-100",children:"On continue avec ce numéro de téléphone ?"})]})]})]}),n&&t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4 pt-6",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-2xl bg-slate-50 px-6 py-4",children:[t.jsx("span",{className:"text-sm font-bold text-slate-500",children:"Numéro à enregistrer"}),t.jsx("span",{className:"font-mono text-xl font-black text-blue-600",children:s.phone})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{className:"ml-2 font-bold text-slate-600",children:"Prénom"}),t.jsx(T,{placeholder:"Jean",value:s.first_name,onChange:i=>l({...s,first_name:i.target.value}),className:"h-14 rounded-2xl border-slate-200 focus:border-blue-500 focus:ring-blue-50"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{className:"ml-2 font-bold text-slate-600",children:"Nom"}),t.jsx(T,{placeholder:"Lozé",value:s.last_name,onChange:i=>l({...s,last_name:i.target.value}),className:"h-14 rounded-2xl border-slate-200 focus:border-blue-500 focus:ring-blue-50"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{className:"ml-2 font-bold text-slate-600",children:"Email (Optionnel)"}),t.jsx(T,{placeholder:"jean.loze@example.com",type:"email",value:s.email,onChange:i=>l({...s,email:i.target.value}),className:"h-14 rounded-2xl border-slate-200 focus:border-blue-500 focus:ring-blue-50"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{className:"ml-2 font-bold text-slate-600",children:"Adresse (Optionnelle)"}),t.jsx(T,{placeholder:"Gombe, Kinshasa",value:s.address,onChange:i=>l({...s,address:i.target.value}),className:"h-14 rounded-2xl border-slate-200 focus:border-blue-500 focus:ring-blue-50"})]}),t.jsxs(z,{variant:"ghost",onClick:()=>{r(!1),l({...s,phone:""})},className:"h-14 w-full rounded-2xl font-bold text-slate-500 transition-colors hover:bg-slate-100",children:[t.jsx(E,{className:"mr-2 h-5 w-5"})," ","Retour"]})]})]})]});case 2:return t.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-12",children:[t.jsxs("div",{className:"space-y-2 text-center",children:[t.jsx(g.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-2 inline-block rounded-full bg-blue-50 px-4 py-1 text-xs font-black tracking-widest text-blue-600 uppercase",children:"Étape 2 • Opération"}),t.jsxs("h2",{className:"text-4xl font-black tracking-tight text-slate-900",children:["Bonjour"," ",t.jsx("span",{className:"text-blue-600",children:a?.first_name||s.first_name}),","]}),t.jsx("p",{className:"text-xl font-medium text-slate-500",children:"Quelle opération souhaitez-vous effectuer aujourd'hui ?"})]}),t.jsxs("div",{className:"grid gap-10",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx(P,{className:"ml-4 block text-sm font-black tracking-widest text-slate-400 uppercase",children:"Type d'Opération"}),t.jsx(ue,{selectedOperation:s.operation_type,onSelect:i=>l({...s,operation_type:i,institution_id:void 0})})]}),t.jsx(B,{children:s.operation_type&&s.operation_type!=="change"&&t.jsxs(g.div,{initial:{opacity:0,height:0,y:20},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:20},className:"space-y-4 overflow-hidden",children:[t.jsx(P,{className:"ml-4 block text-sm font-black tracking-widest text-slate-400 uppercase",children:"Partenaire Bancaire / Mobile"}),t.jsx(pe,{institutions:h,selectedId:s.institution_id,onSelect:i=>l({...s,institution_id:i})})]})})]})]});case 3:return t.jsx(be,{ticketNumber:v,onNewTicket:M});default:return null}};return t.jsx(Y,{currentPageName:"Client",children:t.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-50",children:[t.jsxs("div",{className:"pointer-events-none absolute top-0 left-0 h-full w-full overflow-hidden",children:[t.jsx("div",{className:"absolute top-[-10%] left-[-10%] h-[40%] w-[40%] animate-pulse rounded-full bg-blue-100 opacity-50 blur-[100px]"}),t.jsx("div",{className:"absolute right-[-10%] bottom-[-10%] h-[40%] w-[40%] animate-pulse rounded-full bg-purple-100 opacity-50 blur-[100px] delay-1000"})]}),t.jsxs("div",{className:"relative z-10 mx-auto max-w-3xl px-4 py-12",children:[t.jsx("div",{className:"mb-12 text-center",children:t.jsxs(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col items-center",children:[t.jsxs("div",{className:"group relative mb-8",children:[t.jsx("div",{className:"absolute -inset-6 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-600 opacity-20 blur-3xl transition-opacity group-hover:opacity-30"}),t.jsx("div",{className:"relative flex h-32 w-32 items-center justify-center rounded-[40px] bg-white p-6 shadow-2xl ring-1 ring-slate-100 transition-transform duration-500 group-hover:scale-110 group-hover:rotate-3",children:t.jsx("img",{src:"/logo.svg",alt:"Havifin",className:"h-full w-full object-contain"})})]}),t.jsxs("h1",{className:"mb-2 text-5xl font-black tracking-tight text-slate-900",children:[t.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Havifin"}),t.jsx("span",{className:"mx-2 text-slate-200",children:"|"}),t.jsx("span",{className:"text-slate-600",children:"Smart Ticket"})]}),t.jsx("p",{className:"text-lg font-bold tracking-widest text-slate-400 uppercase",children:"Bureau de Change & Services"})]})}),t.jsxs("div",{className:"rounded-[40px] border border-white/20 bg-white/80 p-8 shadow-2xl shadow-slate-200/50 backdrop-blur-xl md:p-12",children:[t.jsx(B,{mode:"wait",children:R()}),f<3&&!d&&t.jsx("div",{className:"mt-12 flex justify-center",children:t.jsx(z,{onClick:S,disabled:!I()||C.isPending||m.isPending||c,size:"lg",className:"h-16 rounded-3xl bg-gradient-to-r from-[#1f61e4] to-[#2000ff] px-16 text-xl font-bold text-white shadow-xl shadow-blue-500/20 transition-all hover:scale-[1.02] active:scale-[0.98]",children:C.isPending||m.isPending?t.jsx(F,{className:"h-6 w-6 animate-spin"}):t.jsxs(t.Fragment,{children:[f===1&&n?"S'enregistrer":f===2?"Confirmer":"Continuer",t.jsx(le,{className:"ml-3 h-6 w-6"})]})})})]}),f<3&&t.jsx("div",{className:"mt-12 flex justify-center gap-4",children:[1,2].map(i=>t.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${f===i?"w-12 bg-blue-600":"w-2 bg-slate-200"}`},i))})]})]})})}export{ke as default};
