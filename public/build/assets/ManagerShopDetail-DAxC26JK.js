import{c as dl,u as ml,r as f,j as s,L as Jt,H as ul}from"./app-ZCVcWHBw.js";import{u as Zs,b as h,M as hl}from"./base44Client-BNl0UU2e.js";import{B as Ut,c as et,d as st,D as tt,a as lt}from"./index-gaBAzvHK.js";import{B as c}from"./button-0-m3FkQp.js";import{I as v,L as g}from"./label-DBNBirpG.js";import{S as Wt,c as Yt,a as Zt,b as el,d as at}from"./select-ByTMFRn-.js";import{a as sl,A as Qt}from"./app-main-UKJC7V_L.js";import{c as Vt,m as Ce,a as xl}from"./createLucideIcon-DMMdWEHt.js";import{u as N}from"./check-Bf4iBBJ-.js";import{t as u}from"./index-ChCbcm14.js";import{M as fl}from"./map-pin-Bq5wb2C3.js";import{T as tl}from"./trash-2-D1uArQ_d.js";import{P as it}from"./plus-Ck8ojNBg.js";import{A as pl}from"./arrow-left-aJLIJEn9.js";import{U as gl}from"./users-Cgpd6jQx.js";/* empty css            */const bl=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],zt=Vt("Image",bl);const jl=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],$t=Vt("UserCheck",jl);const yl=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],vl=Vt("UserX",yl);function Zl(l){const e=dl.c(264),{id:je}=l,i=parseInt(je),r=ml(),[rt,ye]=f.useState(!1);f.useState(null);const[nt,ct]=f.useState(!1),[b,Bt]=f.useState(null);let we;e[0]===Symbol.for("react.memo_cache_sentinel")?(we={counter_number:1,name:""},e[0]=we):we=e[0];const[o,ot]=f.useState(we);let ke;e[1]===Symbol.for("react.memo_cache_sentinel")?(ke={queryKey:["shops"],queryFn:h.entities.Shop.list},e[1]=ke):ke=e[1];const{data:dt,isLoading:ll}=Zs(ke);let Ae;e[2]!==dt||e[3]!==i?(Ae=dt?.find(t=>t.id===i),e[2]=dt,e[3]=i,e[4]=Ae):Ae=e[4];const m=Ae;let _,S;e[5]!==i?(_=["counters",i],S=()=>h.entities.Counter.list(i),e[5]=i,e[6]=_,e[7]=S):(_=e[6],S=e[7]);const mt=!!i;let qe;e[8]!==_||e[9]!==S||e[10]!==mt?(qe={queryKey:_,queryFn:S,enabled:mt},e[8]=_,e[9]=S,e[10]=mt,e[11]=qe):qe=e[11];const{data:d,isLoading:il}=Zs(qe);let Pe;e[12]===Symbol.for("react.memo_cache_sentinel")?(Pe={queryKey:["users"],queryFn:h.entities.User.list},e[12]=Pe):Pe=e[12];const{data:al}=Zs(Pe),Ht=al?.filter(t=>t.role==="cashier"&&t.shops?.some(n=>n.id===i));let C;e[13]!==i?(C=t=>h.entities.Counter.create(i,t),e[13]=i,e[14]=C):C=e[14];let w;e[15]!==r||e[16]!==i?(w=()=>{r.invalidateQueries({queryKey:["counters",i]}),u.success("Guichet créé avec succès"),ye(!1),ot({counter_number:1,name:""})},e[15]=r,e[16]=i,e[17]=w):w=e[17];let Ie;e[18]!==w||e[19]!==C?(Ie={mutationFn:C,onSuccess:w,onError:Ll},e[18]=w,e[19]=C,e[20]=Ie):Ie=e[20];const j=N(Ie);let Me;e[21]!==r||e[22]!==i?(Me={mutationFn:Dl,onSuccess:()=>{r.invalidateQueries({queryKey:["counters",i]}),u.success("Guichet mis à jour avec succès"),ct(!1),Bt(null)},onError:El},e[21]=r,e[22]=i,e[23]=Me):Me=e[23];const ut=N(Me);let Fe;e[24]!==r||e[25]!==i?(Fe={mutationFn:Fl,onSuccess:()=>{r.invalidateQueries({queryKey:["counters",i]}),u.success("Guichet supprimé avec succès")},onError:Ml},e[24]=r,e[25]=i,e[26]=Fe):Fe=e[26];const ht=N(Fe);let Ee;e[27]!==o||e[28]!==j?(Ee=t=>{t.preventDefault(),j.mutate(o)},e[27]=o,e[28]=j,e[29]=Ee):Ee=e[29];const xt=Ee,[ft,De]=f.useState(!1);let Le;e[30]===Symbol.for("react.memo_cache_sentinel")?(Le={name:"",email:"",password:"",counter_id:""},e[30]=Le):Le=e[30];const[a,ve]=f.useState(Le);let k;e[31]!==i?(k=async t=>{const n=await h.entities.User.create({name:t.name,email:t.email,password:t.password,role:"cashier",is_active:!0,shop_ids:[i]});return t.counter_id&&await h.entities.Counter.update(parseInt(t.counter_id),{cashier_id:n.id}),n},e[31]=i,e[32]=k):k=e[32];let A;e[33]!==r||e[34]!==i?(A=()=>{r.invalidateQueries({queryKey:["users"]}),r.invalidateQueries({queryKey:["counters",i]}),u.success("Caissier créé avec succès"),De(!1),ve({name:"",email:"",password:"",counter_id:""})},e[33]=r,e[34]=i,e[35]=A):A=e[35];let Ge;e[36]!==k||e[37]!==A?(Ge={mutationFn:k,onSuccess:A,onError:Il},e[36]=k,e[37]=A,e[38]=Ge):Ge=e[38];const y=N(Ge);let Ke;e[39]!==a||e[40]!==y?(Ke=t=>{t.preventDefault(),y.mutate(a)},e[39]=a,e[40]=y,e[41]=Ke):Ke=e[41];const pt=Ke;let Te;e[42]!==b||e[43]!==ut?(Te=t=>{b&&ut.mutate({id:b.id,data:{cashier_id:t}})},e[42]=b,e[43]=ut,e[44]=Te):Te=e[44];const gt=Te,[bt,Ne]=f.useState(!1);let Ue;e[45]===Symbol.for("react.memo_cache_sentinel")?(Ue={title:"",image_url:"",display_order:1},e[45]=Ue):Ue=e[45];const[p,Ot]=f.useState(Ue),[,Rt]=f.useState(null),[x,Xt]=f.useState("");let Qe;e[46]===Symbol.for("react.memo_cache_sentinel")?(Qe={queryKey:["advertisements"],queryFn:h.entities.Advertisement.list},e[46]=Qe):Qe=e[46];const{data:ze}=Zs(Qe);let $e;e[47]!==ze?($e=ze===void 0?[]:ze,e[47]=ze,e[48]=$e):$e=e[48];const _e=$e;let q;e[49]!==x?(q=async t=>h.entities.Advertisement.create({title:t.title,image_url:t.image_url||x,display_order:t.display_order,is_active:!0}),e[49]=x,e[50]=q):q=e[50];let P;e[51]!==r?(P=()=>{r.invalidateQueries({queryKey:["advertisements"]}),u.success("Publicité créée avec succès"),Ne(!1),Ot({title:"",image_url:"",display_order:1}),Rt(null),Xt("")},e[51]=r,e[52]=P):P=e[52];let Ve;e[53]!==q||e[54]!==P?(Ve={mutationFn:q,onSuccess:P,onError:Pl},e[53]=q,e[54]=P,e[55]=Ve):Ve=e[55];const Se=N(Ve);let Be;e[56]!==r?(Be={mutationFn:ql,onSuccess:()=>{r.invalidateQueries({queryKey:["advertisements"]}),u.success("Publicité mise à jour")},onError:Al},e[56]=r,e[57]=Be):Be=e[57];const jt=N(Be);let He;e[58]!==r?(He={mutationFn:kl,onSuccess:()=>{r.invalidateQueries({queryKey:["advertisements"]}),u.success("Publicité supprimée")},onError:wl},e[58]=r,e[59]=He):He=e[59];const yt=N(He);let Oe;e[60]===Symbol.for("react.memo_cache_sentinel")?(Oe=t=>{const n=t.target.files?.[0];if(n){Rt(n);const Tt=new FileReader;Tt.onloadend=()=>{Xt(Tt.result)},Tt.readAsDataURL(n)}},e[60]=Oe):Oe=e[60];const rl=Oe;let Re;e[61]!==p||e[62]!==Se?(Re=t=>{t.preventDefault(),Se.mutate(p)},e[61]=p,e[62]=Se,e[63]=Re):Re=e[63];const vt=Re;let Xe;e[64]!==jt?(Xe=t=>{jt.mutate({id:t.id,data:{is_active:!t.is_active}})},e[64]=jt,e[65]=Xe):Xe=e[65];const Nt=Xe;let Je;e[66]!==yt?(Je=t=>{confirm(`Supprimer la publicité "${t.title}" ?`)&&yt.mutate(t.id)},e[66]=yt,e[67]=Je):Je=e[67];const _t=Je;let We;e[68]!==ht?(We=t=>{confirm(`Êtes-vous sûr de vouloir supprimer le guichet "${t.name}" ?`)&&ht.mutate(t.id)},e[68]=ht,e[69]=We):We=e[69];const St=We;if(ll||il){let t;return e[70]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(Qt,{currentPageName:"Manager",children:s.jsx("div",{className:"flex h-screen items-center justify-center",children:s.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-indigo-600 border-t-transparent"})})}),e[70]=t):t=e[70],t}if(!m){let t;e[71]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("h2",{className:"mb-4 text-2xl font-black text-slate-900",children:"Boutique introuvable"}),e[71]=t):t=e[71];let n;return e[72]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(Qt,{currentPageName:"Manager",children:s.jsxs("div",{className:"flex h-screen flex-col items-center justify-center",children:[t,s.jsx(Jt,{href:"/manager/shops",children:s.jsx(c,{children:"Retour aux boutiques"})})]})}),e[72]=n):n=e[72],n}let Ye;e[73]!==d?(Ye=d?.filter(Cl)||[],e[73]=d,e[74]=Ye):Ye=e[74];const Ct=Ye;let Ze;e[75]!==d?(Ze=d?.filter(Sl)||[],e[75]=d,e[76]=Ze):Ze=e[76];const wt=Ze,kt=`Gestion - ${m.name}`;let es;e[77]!==kt?(es=s.jsx(ul,{title:kt}),e[77]=kt,e[78]=es):es=e[78];let ss,ts;e[79]===Symbol.for("react.memo_cache_sentinel")?(ss=s.jsx(Jt,{href:"/manager/shops",children:s.jsx(c,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-2xl bg-white shadow-sm hover:bg-slate-50",children:s.jsx(pl,{className:"h-5 w-5 text-slate-600"})})}),ts=s.jsx("div",{className:"h-12 w-[1px] bg-slate-200"}),e[79]=ss,e[80]=ts):(ss=e[79],ts=e[80]);let I;e[81]!==m.name?(I=s.jsx("h1",{className:"text-3xl font-black tracking-tight text-slate-900",children:m.name}),e[81]=m.name,e[82]=I):I=e[82];let M;e[83]!==m.address?(M=m.address&&s.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm font-medium text-slate-500",children:[s.jsx(fl,{className:"h-4 w-4"}),m.address]}),e[83]=m.address,e[84]=M):M=e[84];const At=`/display?shop_id=${m.id}`;let ls;e[85]===Symbol.for("react.memo_cache_sentinel")?(ls=s.jsxs(Ut,{className:"cursor-pointer bg-slate-900 px-3 py-1 font-bold text-white hover:bg-slate-800",children:[s.jsx(hl,{className:"mr-1 h-3 w-3"}),"Lancer l'écran TV"]}),e[85]=ls):ls=e[85];let F;e[86]!==At?(F=s.jsx("a",{href:At,target:"_blank",rel:"noopener noreferrer",children:ls}),e[86]=At,e[87]=F):F=e[87];let E;e[88]!==M||e[89]!==F?(E=s.jsxs("div",{className:"flex items-center gap-4",children:[M,F]}),e[88]=M,e[89]=F,e[90]=E):E=e[90];let D;e[91]!==I||e[92]!==E?(D=s.jsxs("div",{className:"flex items-center gap-4",children:[ss,ts,s.jsxs("div",{children:[I,E]})]}),e[91]=I,e[92]=E,e[93]=D):D=e[93];let is;e[94]===Symbol.for("react.memo_cache_sentinel")?(is=()=>De(!0),e[94]=is):is=e[94];let as;e[95]===Symbol.for("react.memo_cache_sentinel")?(as=s.jsxs(c,{onClick:is,className:"h-12 rounded-2xl bg-indigo-50 px-6 font-bold text-indigo-600 hover:bg-indigo-100",children:[s.jsx($t,{className:"mr-2 h-4 w-4"}),"Nouveau Caissier"]}),e[95]=as):as=e[95];let rs;e[96]===Symbol.for("react.memo_cache_sentinel")?(rs=()=>ye(!0),e[96]=rs):rs=e[96];const qt=(d?.length||0)>=m.counter_count;let ns;e[97]===Symbol.for("react.memo_cache_sentinel")?(ns=s.jsx(it,{className:"mr-2 h-4 w-4"}),e[97]=ns):ns=e[97];let L;e[98]!==qt?(L=s.jsxs("div",{className:"flex gap-3",children:[as,s.jsxs(c,{onClick:rs,disabled:qt,className:"h-12 rounded-2xl bg-gradient-to-r from-indigo-600 to-purple-600 px-6 font-bold text-white shadow-lg shadow-indigo-500/30 hover:shadow-xl",children:[ns,"Nouveau Guichet"]})]}),e[98]=qt,e[99]=L):L=e[99];let cs;e[100]!==D||e[101]!==L?(cs=s.jsxs("div",{className:"mb-10 flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[D,L]}),e[100]=D,e[101]=L,e[102]=cs):cs=e[102];let os,ds;e[103]===Symbol.for("react.memo_cache_sentinel")?(os={opacity:0,y:20},ds={opacity:1,y:0},e[103]=os,e[104]=ds):(os=e[103],ds=e[104]);let ms,us;e[105]===Symbol.for("react.memo_cache_sentinel")?(ms=s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-indigo-100",children:s.jsx(sl,{className:"h-6 w-6 text-indigo-600"})}),us=s.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase",children:"Guichets Actifs"}),e[105]=ms,e[106]=us):(ms=e[105],us=e[106]);let hs;e[107]!==Ct.length||e[108]!==m.counter_count?(hs=s.jsx(Ce.div,{initial:os,animate:ds,className:"rounded-3xl border border-slate-200/60 bg-white p-6 shadow-sm",children:s.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[ms,s.jsxs("div",{children:[us,s.jsxs("p",{className:"text-2xl font-black text-slate-900",children:[Ct.length," /"," ",m.counter_count]})]})]})}),e[107]=Ct.length,e[108]=m.counter_count,e[109]=hs):hs=e[109];let xs,fs,ps;e[110]===Symbol.for("react.memo_cache_sentinel")?(xs={opacity:0,y:20},fs={opacity:1,y:0},ps={delay:.1},e[110]=xs,e[111]=fs,e[112]=ps):(xs=e[110],fs=e[111],ps=e[112]);let gs,bs;e[113]===Symbol.for("react.memo_cache_sentinel")?(gs=s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-100",children:s.jsx($t,{className:"h-6 w-6 text-emerald-600"})}),bs=s.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase",children:"Guichets Assignés"}),e[113]=gs,e[114]=bs):(gs=e[113],bs=e[114]);let js;e[115]!==wt.length?(js=s.jsx(Ce.div,{initial:xs,animate:fs,transition:ps,className:"rounded-3xl border border-slate-200/60 bg-white p-6 shadow-sm",children:s.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[gs,s.jsxs("div",{children:[bs,s.jsx("p",{className:"text-2xl font-black text-slate-900",children:wt.length})]})]})}),e[115]=wt.length,e[116]=js):js=e[116];let ys,vs,Ns;e[117]===Symbol.for("react.memo_cache_sentinel")?(ys={opacity:0,y:20},vs={opacity:1,y:0},Ns={delay:.2},e[117]=ys,e[118]=vs,e[119]=Ns):(ys=e[117],vs=e[118],Ns=e[119]);let _s,Ss;e[120]===Symbol.for("react.memo_cache_sentinel")?(_s=s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-purple-100",children:s.jsx(gl,{className:"h-6 w-6 text-purple-600"})}),Ss=s.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase",children:"Caissiers Disponibles"}),e[120]=_s,e[121]=Ss):(_s=e[120],Ss=e[121]);let Cs;e[122]===Symbol.for("react.memo_cache_sentinel")?(Cs=s.jsx("h2",{className:"mb-6 text-2xl font-black text-slate-900",children:"Configuration des Guichets"}),e[122]=Cs):Cs=e[122];let ws;e[123]!==d||e[124]!==St?(ws=s.jsxs("div",{children:[Cs,d&&d.length>0?s.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:d.map((t,n)=>s.jsxs(Ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:n*.05},className:"group relative overflow-hidden rounded-3xl border border-slate-200/60 bg-white p-6 shadow-sm transition-all hover:shadow-lg",children:[s.jsxs("div",{className:"mb-4 flex items-start justify-between",children:[s.jsx("div",{children:s.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 text-lg font-black text-white",children:t.counter_number}),s.jsx("h3",{className:"text-xl font-black text-slate-900",children:t.name})]})}),s.jsx(c,{variant:"ghost",size:"icon",onClick:()=>St(t),className:"h-8 w-8 text-slate-400 hover:text-red-600",children:s.jsx(tl,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"mb-4",children:t.cashier?s.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-emerald-50 p-3",children:[s.jsx($t,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs font-bold text-emerald-600 uppercase",children:"Caissier Assigné"}),s.jsx("p",{className:"font-bold text-slate-900",children:t.cashier.name})]})]}):s.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-slate-50 p-3",children:[s.jsx(vl,{className:"h-5 w-5 text-slate-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Non Assigné"}),s.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Aucun caissier"})]})]})}),s.jsx(c,{onClick:()=>{Bt(t),ct(!0)},variant:"outline",className:"w-full rounded-xl border-slate-200 font-bold hover:border-indigo-500 hover:bg-indigo-50 hover:text-indigo-600",children:t.cashier?"Changer le caissier":"Assigner un caissier"}),s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx(Ut,{className:`rounded-full px-2 py-1 text-xs font-black uppercase ${t.is_active?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"}`,children:t.is_active?"Actif":"Inactif"})})]},t.id))}):s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-3xl border-2 border-dashed border-slate-200 bg-white/50 p-16 text-center",children:[s.jsx(sl,{className:"mb-4 h-16 w-16 text-slate-300"}),s.jsx("h3",{className:"mb-2 text-xl font-black text-slate-900",children:"Aucun guichet configuré"}),s.jsx("p",{className:"mb-6 text-slate-600",children:"Créez votre premier guichet pour commencer"}),s.jsxs(c,{onClick:()=>ye(!0),className:"rounded-xl bg-indigo-600 font-bold",children:[s.jsx(it,{className:"mr-2 h-4 w-4"}),"Créer un guichet"]})]})]}),e[123]=d,e[124]=St,e[125]=ws):ws=e[125];let ks;e[126]===Symbol.for("react.memo_cache_sentinel")?(ks=s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Publicités"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Gérez les publicités affichées sur l'écran TV"})]}),e[126]=ks):ks=e[126];let As;e[127]===Symbol.for("react.memo_cache_sentinel")?(As=()=>Ne(!0),e[127]=As):As=e[127];let qs;e[128]===Symbol.for("react.memo_cache_sentinel")?(qs=s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[ks,s.jsxs(c,{onClick:As,className:"h-12 rounded-2xl bg-gradient-to-r from-indigo-600 to-purple-600 px-6 font-bold text-white shadow-lg shadow-indigo-500/30 hover:shadow-xl",children:[s.jsx(it,{className:"mr-2 h-4 w-4"}),"Nouvelle Publicité"]})]}),e[128]=qs):qs=e[128];let Ps;e[129]!==_e||e[130]!==_t||e[131]!==Nt?(Ps=s.jsxs("div",{className:"mt-16",children:[qs,_e&&_e.length>0?s.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:_e.map((t,n)=>s.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.05},className:"group relative overflow-hidden rounded-3xl border border-slate-200/60 bg-white shadow-sm transition-all hover:shadow-lg",children:[s.jsxs("div",{className:"relative h-48 overflow-hidden bg-gradient-to-br from-indigo-100 to-purple-100",children:[t.image_url?s.jsx("img",{src:t.image_url,alt:t.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"}):s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsx(zt,{className:"h-16 w-16 text-indigo-300"})}),s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx(Ut,{className:xl("rounded-full px-3 py-1 text-xs font-black uppercase",t.is_active?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"),children:t.is_active?"Actif":"Inactif"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"mb-4 text-xl font-black text-slate-900",children:t.title}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(c,{onClick:()=>Nt(t),variant:"outline",size:"sm",className:"flex-1 rounded-xl font-bold",children:t.is_active?"Désactiver":"Activer"}),s.jsx(c,{onClick:()=>_t(t),variant:"ghost",size:"sm",className:"rounded-xl text-red-600 hover:bg-red-50 hover:text-red-700",children:s.jsx(tl,{className:"h-4 w-4"})})]})]})]},t.id))}):s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-3xl border-2 border-dashed border-slate-200 bg-white/50 p-16 text-center",children:[s.jsx(zt,{className:"mb-4 h-16 w-16 text-slate-300"}),s.jsx("h3",{className:"mb-2 text-xl font-black text-slate-900",children:"Aucune publicité"}),s.jsx("p",{className:"mb-6 text-slate-600",children:"Créez votre première publicité pour l'écran TV"}),s.jsxs(c,{onClick:()=>Ne(!0),className:"rounded-xl bg-indigo-600 font-bold",children:[s.jsx(it,{className:"mr-2 h-4 w-4"}),"Créer une publicité"]})]})]}),e[129]=_e,e[130]=_t,e[131]=Nt,e[132]=Ps):Ps=e[132];let Is;e[133]===Symbol.for("react.memo_cache_sentinel")?(Is=s.jsx(tt,{children:s.jsx(lt,{className:"text-2xl font-black",children:"Nouvelle Publicité"})}),e[133]=Is):Is=e[133];let Ms;e[134]===Symbol.for("react.memo_cache_sentinel")?(Ms=s.jsx(g,{children:"Titre de la publicité"}),e[134]=Ms):Ms=e[134];let G;e[135]!==p?(G=t=>Ot({...p,title:t.target.value}),e[135]=p,e[136]=G):G=e[136];let K;e[137]!==p.title||e[138]!==G?(K=s.jsxs("div",{className:"space-y-2",children:[Ms,s.jsx(v,{value:p.title,onChange:G,placeholder:"ex: Promotion Spéciale",className:"rounded-xl",required:!0})]}),e[137]=p.title,e[138]=G,e[139]=K):K=e[139];let Fs;e[140]===Symbol.for("react.memo_cache_sentinel")?(Fs=s.jsx(g,{children:"Image"}),e[140]=Fs):Fs=e[140];let Es;e[141]===Symbol.for("react.memo_cache_sentinel")?(Es=s.jsx(v,{type:"file",accept:"image/*",onChange:rl,className:"rounded-xl"}),e[141]=Es):Es=e[141];let T;e[142]!==x?(T=x&&s.jsx("div",{className:"relative overflow-hidden rounded-2xl border-2 border-dashed border-indigo-200 bg-indigo-50 p-4",children:s.jsx("img",{src:x,alt:"Preview",className:"h-48 w-full rounded-xl object-cover"})}),e[142]=x,e[143]=T):T=e[143];let U;e[144]!==x?(U=!x&&s.jsx("div",{className:"flex h-48 items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(zt,{className:"mx-auto mb-2 h-12 w-12 text-slate-300"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Aucune image sélectionnée"})]})}),e[144]=x,e[145]=U):U=e[145];let Q;e[146]!==T||e[147]!==U?(Q=s.jsxs("div",{className:"space-y-2",children:[Fs,s.jsxs("div",{className:"space-y-4",children:[Es,T,U]})]}),e[146]=T,e[147]=U,e[148]=Q):Q=e[148];let Ds;e[149]===Symbol.for("react.memo_cache_sentinel")?(Ds=s.jsx(c,{type:"button",variant:"outline",onClick:()=>Ne(!1),className:"rounded-xl",children:"Annuler"}),e[149]=Ds):Ds=e[149];const Pt=Se.isPending||!x,It=Se.isPending?"Création...":"Créer la publicité";let z;e[150]!==Pt||e[151]!==It?(z=s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[Ds,s.jsx(c,{type:"submit",className:"rounded-xl bg-purple-600",disabled:Pt,children:It})]}),e[150]=Pt,e[151]=It,e[152]=z):z=e[152];let $;e[153]!==vt||e[154]!==K||e[155]!==Q||e[156]!==z?($=s.jsxs(et,{className:"rounded-3xl sm:max-w-[600px]",children:[Is,s.jsxs("form",{onSubmit:vt,className:"space-y-6",children:[K,Q,z]})]}),e[153]=vt,e[154]=K,e[155]=Q,e[156]=z,e[157]=$):$=e[157];let Ls;e[158]!==bt||e[159]!==$?(Ls=s.jsx(st,{open:bt,onOpenChange:Ne,children:$}),e[158]=bt,e[159]=$,e[160]=Ls):Ls=e[160];let Gs;e[161]===Symbol.for("react.memo_cache_sentinel")?(Gs=s.jsx(tt,{children:s.jsx(lt,{className:"text-2xl font-black",children:"Nouveau Caissier"})}),e[161]=Gs):Gs=e[161];let Ks;e[162]===Symbol.for("react.memo_cache_sentinel")?(Ks=s.jsx(g,{children:"Nom complet"}),e[162]=Ks):Ks=e[162];let V;e[163]!==a?(V=t=>ve({...a,name:t.target.value}),e[163]=a,e[164]=V):V=e[164];let B;e[165]!==a.name||e[166]!==V?(B=s.jsxs("div",{className:"space-y-2",children:[Ks,s.jsx(v,{value:a.name,onChange:V,placeholder:"ex: Jean Dupont",className:"rounded-xl",required:!0})]}),e[165]=a.name,e[166]=V,e[167]=B):B=e[167];let Ts;e[168]===Symbol.for("react.memo_cache_sentinel")?(Ts=s.jsx(g,{children:"Email"}),e[168]=Ts):Ts=e[168];let H;e[169]!==a?(H=t=>ve({...a,email:t.target.value}),e[169]=a,e[170]=H):H=e[170];let O;e[171]!==a.email||e[172]!==H?(O=s.jsxs("div",{className:"space-y-2",children:[Ts,s.jsx(v,{type:"email",value:a.email,onChange:H,placeholder:"jean.dupont@example.com",className:"rounded-xl",required:!0})]}),e[171]=a.email,e[172]=H,e[173]=O):O=e[173];let Us;e[174]===Symbol.for("react.memo_cache_sentinel")?(Us=s.jsx(g,{children:"Mot de passe"}),e[174]=Us):Us=e[174];let R;e[175]!==a?(R=t=>ve({...a,password:t.target.value}),e[175]=a,e[176]=R):R=e[176];let X;e[177]!==a.password||e[178]!==R?(X=s.jsxs("div",{className:"space-y-2",children:[Us,s.jsx(v,{type:"password",value:a.password,onChange:R,className:"rounded-xl",required:!0})]}),e[177]=a.password,e[178]=R,e[179]=X):X=e[179];let Qs;e[180]===Symbol.for("react.memo_cache_sentinel")?(Qs=s.jsx(g,{children:"Assigner à un guichet (optionnel)"}),e[180]=Qs):Qs=e[180];let J;e[181]!==a?(J=t=>ve({...a,counter_id:t==="none"?"":t}),e[181]=a,e[182]=J):J=e[182];let zs;e[183]===Symbol.for("react.memo_cache_sentinel")?(zs=s.jsx(Zt,{className:"rounded-xl",children:s.jsx(el,{placeholder:"Choisir un guichet (optionnel)"})}),e[183]=zs):zs=e[183];let $s;e[184]===Symbol.for("react.memo_cache_sentinel")?($s=s.jsx(at,{value:"none",children:"Ne pas assigner pour le moment"}),e[184]=$s):$s=e[184];let W;e[185]!==d?(W=d?.map(_l),e[185]=d,e[186]=W):W=e[186];let Y;e[187]!==W?(Y=s.jsxs(Yt,{children:[$s,W]}),e[187]=W,e[188]=Y):Y=e[188];let Z;e[189]!==a.counter_id||e[190]!==J||e[191]!==Y?(Z=s.jsxs(Wt,{value:a.counter_id,onValueChange:J,children:[zs,Y]}),e[189]=a.counter_id,e[190]=J,e[191]=Y,e[192]=Z):Z=e[192];let Vs;e[193]===Symbol.for("react.memo_cache_sentinel")?(Vs=s.jsx("p",{className:"text-xs text-slate-500",children:"Seuls les guichets libres peuvent être sélectionnés."}),e[193]=Vs):Vs=e[193];let ee;e[194]!==Z?(ee=s.jsxs("div",{className:"space-y-2",children:[Qs,Z,Vs]}),e[194]=Z,e[195]=ee):ee=e[195];let Bs;e[196]===Symbol.for("react.memo_cache_sentinel")?(Bs=s.jsx(c,{type:"button",variant:"outline",onClick:()=>De(!1),className:"rounded-xl",children:"Annuler"}),e[196]=Bs):Bs=e[196];const Mt=y.isPending?"Création...":"Créer le caissier";let se;e[197]!==y.isPending||e[198]!==Mt?(se=s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[Bs,s.jsx(c,{type:"submit",className:"rounded-xl bg-indigo-600",disabled:y.isPending,children:Mt})]}),e[197]=y.isPending,e[198]=Mt,e[199]=se):se=e[199];let te;e[200]!==pt||e[201]!==X||e[202]!==ee||e[203]!==se||e[204]!==B||e[205]!==O?(te=s.jsxs(et,{className:"rounded-3xl",children:[Gs,s.jsxs("form",{onSubmit:pt,className:"space-y-4",children:[B,O,X,ee,se]})]}),e[200]=pt,e[201]=X,e[202]=ee,e[203]=se,e[204]=B,e[205]=O,e[206]=te):te=e[206];let Hs;e[207]!==ft||e[208]!==te?(Hs=s.jsx(st,{open:ft,onOpenChange:De,children:te}),e[207]=ft,e[208]=te,e[209]=Hs):Hs=e[209];let Os;e[210]===Symbol.for("react.memo_cache_sentinel")?(Os=s.jsx(tt,{children:s.jsx(lt,{className:"text-2xl font-black",children:"Nouveau Guichet"})}),e[210]=Os):Os=e[210];let Rs;e[211]===Symbol.for("react.memo_cache_sentinel")?(Rs=s.jsx(g,{children:"Numéro du Guichet"}),e[211]=Rs):Rs=e[211];let le;e[212]!==o?(le=t=>ot({...o,counter_number:parseInt(t.target.value)}),e[212]=o,e[213]=le):le=e[213];let ie;e[214]!==o.counter_number||e[215]!==le?(ie=s.jsxs("div",{className:"space-y-2",children:[Rs,s.jsx(v,{type:"number",min:"1",value:o.counter_number,onChange:le,className:"rounded-xl",required:!0})]}),e[214]=o.counter_number,e[215]=le,e[216]=ie):ie=e[216];let Xs;e[217]===Symbol.for("react.memo_cache_sentinel")?(Xs=s.jsx(g,{children:"Nom du Guichet"}),e[217]=Xs):Xs=e[217];let ae;e[218]!==o?(ae=t=>ot({...o,name:t.target.value}),e[218]=o,e[219]=ae):ae=e[219];let re;e[220]!==o.name||e[221]!==ae?(re=s.jsxs("div",{className:"space-y-2",children:[Xs,s.jsx(v,{value:o.name,onChange:ae,placeholder:"ex: Guichet Principal",className:"rounded-xl",required:!0})]}),e[220]=o.name,e[221]=ae,e[222]=re):re=e[222];let Js;e[223]===Symbol.for("react.memo_cache_sentinel")?(Js=s.jsx(c,{type:"button",variant:"outline",onClick:()=>ye(!1),className:"rounded-xl",children:"Annuler"}),e[223]=Js):Js=e[223];const Ft=j.isPending?"Création...":"Créer";let ne;e[224]!==j.isPending||e[225]!==Ft?(ne=s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[Js,s.jsx(c,{type:"submit",className:"rounded-xl bg-indigo-600",disabled:j.isPending,children:Ft})]}),e[224]=j.isPending,e[225]=Ft,e[226]=ne):ne=e[226];let ce;e[227]!==xt||e[228]!==ie||e[229]!==re||e[230]!==ne?(ce=s.jsxs(et,{className:"rounded-3xl",children:[Os,s.jsxs("form",{onSubmit:xt,className:"space-y-4",children:[ie,re,ne]})]}),e[227]=xt,e[228]=ie,e[229]=re,e[230]=ne,e[231]=ce):ce=e[231];let Ws;e[232]!==rt||e[233]!==ce?(Ws=s.jsx(st,{open:rt,onOpenChange:ye,children:ce}),e[232]=rt,e[233]=ce,e[234]=Ws):Ws=e[234];const Et=st,Dt=et,nl="rounded-3xl";let oe;e[235]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(tt,{children:s.jsx(lt,{className:"text-2xl font-black",children:"Assigner un Caissier"})}),e[235]=oe):oe=e[235];const cl="space-y-4",ol="space-y-2";let de;e[236]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(g,{children:"Sélectionner un caissier"}),e[236]=de):de=e[236];const Lt=Wt;let me;e[237]!==b?.cashier_id?(me=b?.cashier_id?.toString()||"",e[237]=b?.cashier_id,e[238]=me):me=e[238];let ue;e[239]!==gt?(ue=t=>gt(t&&t!=="unassign"?parseInt(t):null),e[239]=gt,e[240]=ue):ue=e[240];let he;e[241]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(Zt,{className:"rounded-xl",children:s.jsx(el,{placeholder:"Choisir un caissier"})}),e[241]=he):he=e[241];const Gt=Yt;let xe;e[242]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(at,{value:"unassign",children:"Aucun (désassigner)"}),e[242]=xe):xe=e[242];const Kt=Ht?.map(Nl);let fe;e[243]!==Gt||e[244]!==xe||e[245]!==Kt?(fe=s.jsxs(Gt,{children:[xe,Kt]}),e[243]=Gt,e[244]=xe,e[245]=Kt,e[246]=fe):fe=e[246];let pe;e[247]!==Lt||e[248]!==me||e[249]!==ue||e[250]!==he||e[251]!==fe?(pe=s.jsxs(Lt,{value:me,onValueChange:ue,children:[he,fe]}),e[247]=Lt,e[248]=me,e[249]=ue,e[250]=he,e[251]=fe,e[252]=pe):pe=e[252];let ge;e[253]!==de||e[254]!==pe?(ge=s.jsx("div",{className:cl,children:s.jsxs("div",{className:ol,children:[de,pe]})}),e[253]=de,e[254]=pe,e[255]=ge):ge=e[255];let be;e[256]!==Dt||e[257]!==oe||e[258]!==ge?(be=s.jsxs(Dt,{className:nl,children:[oe,ge]}),e[256]=Dt,e[257]=oe,e[258]=ge,e[259]=be):be=e[259];let Ys;return e[260]!==Et||e[261]!==nt||e[262]!==be?(Ys=s.jsx(Et,{open:nt,onOpenChange:ct,children:be}),e[260]=Et,e[261]=nt,e[262]=be,e[263]=Ys):Ys=e[263],s.jsxs(Qt,{currentPageName:"Manager",children:[es,s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50/30 px-6 py-8 md:px-10",children:[cs,s.jsxs("div",{className:"mb-10 grid grid-cols-1 gap-6 md:grid-cols-3",children:[hs,js,s.jsx(Ce.div,{initial:ys,animate:vs,transition:Ns,className:"rounded-3xl border border-slate-200/60 bg-white p-6 shadow-sm",children:s.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[_s,s.jsxs("div",{children:[Ss,s.jsx("p",{className:"text-2xl font-black text-slate-900",children:Ht?.length||0})]})]})})]}),ws,Ps]}),Ls,Hs,Ws,Ys]})}function Nl(l){return s.jsx(at,{value:l.id.toString(),children:l.name},l.id)}function _l(l){return s.jsxs(at,{value:l.id.toString(),disabled:!!l.cashier_id,className:l.cashier_id?"text-slate-400":"",children:[l.counter_number," -"," ",l.name,l.cashier_id?" (Occupé)":" (Libre)"]},l.id)}function Sl(l){return l.cashier_id}function Cl(l){return l.is_active}function wl(){u.error("Erreur lors de la suppression")}function kl(l){return h.entities.Advertisement.delete(l)}function Al(){u.error("Erreur lors de la mise à jour")}function ql(l){const{id:e,data:je}=l;return h.entities.Advertisement.update(e,je)}function Pl(l){u.error(l.response?.data?.message||"Erreur lors de la création de la publicité")}function Il(l){u.error(l.response?.data?.message||"Erreur lors de la création du caissier")}function Ml(){u.error("Erreur lors de la suppression du guichet")}function Fl(l){return h.entities.Counter.delete(l)}function El(){u.error("Erreur lors de la mise à jour du guichet")}function Dl(l){const{id:e,data:je}=l;return h.entities.Counter.update(e,je)}function Ll(l){u.error(l.response?.data?.message||"Erreur lors de la création du guichet")}export{Zl as default};
