import{c as Qe,j as t,L as Ie,H as Ge}from"./app-pbanxzkV.js";import{b as ze}from"./base44Client-79Pkw9ID.js";import{S as _e,A as Je,a as Xe,C as Ze,T as et,H as tt}from"./TransactionsTable-atC4BjRX.js";import{B as Ee}from"./index-TiLAn61d.js";import{S as o}from"./skeleton-DEY2Nd8B.js";import{A as He,U as Ve,W as st}from"./app-main-q-9un8_Z.js";import{u as Ye}from"./users-DA9SA4A4.js";import{h as We}from"./moment-B-YVwB4U.js";import{M as lt}from"./mail-wclLswB9.js";import{c as at}from"./createLucideIcon-Ds7Ig1I2.js";import{C as Be}from"./credit-card-CZe13kOY.js";import{A as it}from"./arrow-left-TFHqvlCV.js";import{P as rt}from"./phone-BLy_DPN8.js";import{T as nt}from"./trending-up-6ZHgFs7r.js";import{M as ct}from"./map-pin-C7op9r2r.js";import{C as ot}from"./clock-DhbgHvtU.js";/* empty css            */import"./axios-Y0uNCsH3.js";const dt=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],mt=at("Layers",dt);function Rt(i){const e=Qe.c(141),{id:Ke}=i,r=parseInt(Ke);let d,m;e[0]!==r?(d=["client",r],m=()=>ze.entities.Client.show(r),e[0]=r,e[1]=d,e[2]=m):(d=e[1],m=e[2]);const ve=!!r;let E;e[3]!==d||e[4]!==m||e[5]!==ve?(E={queryKey:d,queryFn:m,enabled:ve},e[3]=d,e[4]=m,e[5]=ve,e[6]=E):E=e[6];const{data:s,isLoading:Oe}=Ye(E);let x,f;e[7]!==r?(x=["client-transactions",r],f=()=>ze.entities.Transaction.list({client_id:r,sort:"-created_at"}),e[7]=r,e[8]=x,e[9]=f):(x=e[8],f=e[9]);const ye=!!r;let V;e[10]!==x||e[11]!==f||e[12]!==ye?(V={queryKey:x,queryFn:f,enabled:ye},e[10]=x,e[11]=f,e[12]=ye,e[13]=V):V=e[13];const{data:Y,isLoading:ke}=Ye(V);let W;e[14]!==Y?(W=Y===void 0?[]:Y,e[14]=Y,e[15]=W):W=e[15];const l=W;let B;e[16]!==l?(B=l.filter(bt),e[16]=l,e[17]=B):B=e[17];const Se=B.length;let K;e[18]!==l?(K=l.filter(jt),e[18]=l,e[19]=K):K=e[19];const Ce=K.length;let O;e[20]!==l?(O=l.filter(gt),e[20]=l,e[21]=O):O=e[21];const De=O.length;let Q;e[22]!==l?(Q=l.filter(ut).reduce(pt,0),e[22]=l,e[23]=Q):Q=e[23];const Fe=Q;let G;e[24]!==l?(G=l.filter(ht).reduce(ft,0),e[24]=l,e[25]=G):G=e[25];const Ae=G;let J;e[26]!==Se||e[27]!==De||e[28]!==Ae||e[29]!==Fe||e[30]!==Ce||e[31]!==l.length?(J={count:l.length,deposits:Se,withdrawals:Ce,exchanges:De,volumeUSD:Fe,volumeCDF:Ae},e[26]=Se,e[27]=De,e[28]=Ae,e[29]=Fe,e[30]=Ce,e[31]=l.length,e[32]=J):J=e[32];const a=J;if(Oe&&!s){let n;e[33]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(o,{className:"h-40 w-full rounded-[2.5rem]"}),e[33]=n):n=e[33];let c;return e[34]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(He,{currentPageName:"Détails Client",children:t.jsxs("div",{className:"space-y-8 p-10",children:[n,t.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[t.jsx(o,{className:"h-32 rounded-3xl"}),t.jsx(o,{className:"h-32 rounded-3xl"}),t.jsx(o,{className:"h-32 rounded-3xl"}),t.jsx(o,{className:"h-32 rounded-3xl"})]}),t.jsx(o,{className:"h-96 rounded-[2.5rem]"})]})}),e[34]=c):c=e[34],c}if(!s){let n,c,Ne;e[35]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(Ve,{className:"mb-4 h-16 w-16 text-slate-200"}),c=t.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Client introuvable"}),Ne=t.jsx("p",{className:"mb-6 text-sm text-slate-500",children:"Ce client n'existe pas ou a été supprimé."}),e[35]=n,e[36]=c,e[37]=Ne):(n=e[35],c=e[36],Ne=e[37]);let we;return e[38]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(He,{currentPageName:"Détails Client",children:t.jsxs("div",{className:"flex h-[60vh] flex-col items-center justify-center",children:[n,c,Ne,t.jsx(Ie,{href:"/manager",children:t.jsx(Ee,{className:"rounded-xl",children:"Retour au tableau de bord"})})]})}),e[38]=we):we=e[38],we}const Me=`Client - ${s.full_name||s.phone}`;let h;e[39]!==Me?(h=t.jsx(Ge,{title:Me}),e[39]=Me,e[40]=h):h=e[40];let X;e[41]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("div",{className:"absolute top-0 right-0 h-64 w-64 translate-x-1/2 -translate-y-1/2 bg-indigo-500/10 blur-[100px]"}),e[41]=X):X=e[41];let Z;e[42]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(Ie,{href:"/manager",children:t.jsx(Ee,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-2xl bg-slate-100 transition-all hover:bg-slate-200",children:t.jsx(it,{className:"h-5 w-5 text-slate-600"})})}),e[42]=Z):Z=e[42];let ee;e[43]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-[2rem] bg-slate-900 shadow-2xl shadow-slate-900/20",children:t.jsx(Ve,{className:"h-10 w-10 text-white"})}),e[43]=ee):ee=e[43];let p;e[44]!==s.first_name||e[45]!==s.full_name||e[46]!==s.last_name?(p=s.full_name||`${s.first_name||""} ${s.last_name||""}`.trim()||"Client Non Enregistré",e[44]=s.first_name,e[45]=s.full_name,e[46]=s.last_name,e[47]=p):p=e[47];let u;e[48]!==p?(u=t.jsx("h1",{className:"text-3xl font-black tracking-tight text-slate-900",children:p}),e[48]=p,e[49]=u):u=e[49];let te;e[50]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(rt,{className:"h-4 w-4 text-indigo-500"}),e[50]=te):te=e[50];let g;e[51]!==s.phone?(g=t.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-slate-500",children:[te,s.phone]}),e[51]=s.phone,e[52]=g):g=e[52];let j;e[53]!==s.email?(j=s.email&&t.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-slate-500",children:[t.jsx(lt,{className:"h-4 w-4 text-indigo-500"}),s.email]}),e[53]=s.email,e[54]=j):j=e[54];let se;e[55]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(Ze,{className:"h-4 w-4 text-indigo-500"}),e[55]=se):se=e[55];let b;e[56]!==s.created_date?(b=We(s.created_date).format("DD MMMM YYYY"),e[56]=s.created_date,e[57]=b):b=e[57];let N;e[58]!==b?(N=t.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-slate-500",children:[se,"Inscrit le"," ",b]}),e[58]=b,e[59]=N):N=e[59];let w;e[60]!==g||e[61]!==j||e[62]!==N?(w=t.jsxs("div",{className:"mt-2 flex flex-wrap gap-4",children:[g,j,N]}),e[60]=g,e[61]=j,e[62]=N,e[63]=w):w=e[63];let _;e[64]!==u||e[65]!==w?(_=t.jsxs("div",{className:"flex items-center gap-6",children:[Z,ee,t.jsxs("div",{children:[u,w]})]}),e[64]=u,e[65]=w,e[66]=_):_=e[66];const Te=`rounded-full px-4 py-1.5 text-xs font-black tracking-widest uppercase ${s.is_registered?"border border-emerald-100 bg-emerald-50 text-emerald-600":"border border-amber-100 bg-amber-50 text-amber-600"}`,Le=s.is_registered?"Statut: Confirmé":"Statut: Temporaire";let v;e[67]!==Te||e[68]!==Le?(v=t.jsx("div",{className:"flex gap-3",children:t.jsx("span",{className:Te,children:Le})}),e[67]=Te,e[68]=Le,e[69]=v):v=e[69];let y;e[70]!==_||e[71]!==v?(y=t.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] border border-white bg-white/80 p-8 shadow-xl shadow-slate-200/50 backdrop-blur-xl",children:[X,t.jsxs("div",{className:"relative z-10 flex flex-col items-start justify-between gap-8 md:flex-row md:items-center",children:[_,v]})]}),e[70]=_,e[71]=v,e[72]=y):y=e[72];const Ue=`${a.deposits} Dépôts • ${a.withdrawals} Paiements`;let k;e[73]!==a.count||e[74]!==Ue?(k=t.jsx(_e,{title:"Total Opérations",value:a.count,subtitle:Ue,icon:mt,color:"blue"}),e[73]=a.count,e[74]=Ue,e[75]=k):k=e[75];let le;e[76]!==a.volumeUSD?(le=a.volumeUSD.toLocaleString(),e[76]=a.volumeUSD,e[77]=le):le=e[77];const $e=`$ ${le}`;let S;e[78]!==$e?(S=t.jsx(_e,{title:"Volume USD",value:$e,icon:st,color:"emerald"}),e[78]=$e,e[79]=S):S=e[79];let ae;e[80]!==a.volumeCDF?(ae=a.volumeCDF.toLocaleString(),e[80]=a.volumeCDF,e[81]=ae):ae=e[81];const qe=`${ae} FC`;let C;e[82]!==qe?(C=t.jsx(_e,{title:"Volume CDF",value:qe,icon:nt,color:"amber"}),e[82]=qe,e[83]=C):C=e[83];let ie;e[84]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(_e,{title:"Taux Moyen",value:"Calcul...",icon:Be,color:"indigo"}),e[84]=ie):ie=e[84];let D;e[85]!==k||e[86]!==S||e[87]!==C?(D=t.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[k,S,C,ie]}),e[85]=k,e[86]=S,e[87]=C,e[88]=D):D=e[88];let re;e[89]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black tracking-tight text-slate-800",children:"Historique Complet"}),t.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Toutes les transactions effectuées par ce client."})]}),e[89]=re):re=e[89];let F;e[90]!==l.length?(F=t.jsx("div",{className:"border-b border-slate-100 p-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[re,t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"rounded-xl border border-slate-100 bg-slate-50 px-4 py-2 text-xs font-bold tracking-wider text-slate-600 uppercase",children:[l.length," Transactions"]})})]})}),e[90]=l.length,e[91]=F):F=e[91];let A;e[92]!==ke||e[93]!==l?(A=t.jsx("div",{className:"p-8",children:ke?t.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(xt)}):t.jsx(et,{transactions:l})}),e[92]=ke,e[93]=l,e[94]=A):A=e[94];let M;e[95]!==F||e[96]!==A?(M=t.jsxs("div",{className:"overflow-hidden rounded-[2.5rem] border border-white bg-white/80 shadow-xl shadow-slate-200/50 backdrop-blur-xl",children:[F,A]}),e[95]=F,e[96]=A,e[97]=M):M=e[97];let ne;e[98]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx("h4",{className:"mb-6 text-[11px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Information de Profil"}),e[98]=ne):ne=e[98];let ce,oe;e[99]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("div",{className:"mt-1 flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-indigo-50 text-indigo-600",children:t.jsx(ct,{className:"h-5 w-5"})}),oe=t.jsx("p",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Adresse"}),e[99]=ce,e[100]=oe):(ce=e[99],oe=e[100]);const Pe=s.address||"Non spécifiée";let T;e[101]!==Pe?(T=t.jsxs("div",{className:"flex items-start gap-4",children:[ce,t.jsxs("div",{children:[oe,t.jsx("p",{className:"font-bold text-slate-700",children:Pe})]})]}),e[101]=Pe,e[102]=T):T=e[102];let de,me;e[103]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("div",{className:"mt-1 flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-indigo-50 text-indigo-600",children:t.jsx(tt,{className:"h-5 w-5"})}),me=t.jsx("p",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Numéro Ticket Récent"}),e[103]=de,e[104]=me):(de=e[103],me=e[104]);const Re=s.ticket_number||"N/A";let L;e[105]!==Re?(L=t.jsxs("div",{className:"flex items-start gap-4",children:[de,t.jsxs("div",{children:[me,t.jsxs("p",{className:"font-bold text-slate-700",children:["#",Re]})]})]}),e[105]=Re,e[106]=L):L=e[106];let U;e[107]!==T||e[108]!==L?(U=t.jsxs("div",{className:"col-span-1 rounded-[2.5rem] border border-white bg-white/60 p-8 shadow-lg backdrop-blur-md",children:[ne,t.jsxs("div",{className:"space-y-6",children:[T,L]})]}),e[107]=T,e[108]=L,e[109]=U):U=e[109];let xe;e[110]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("h4",{className:"text-[11px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Analyse Rapide"}),e[110]=xe):xe=e[110];let fe;e[111]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[xe,t.jsxs("div",{className:"flex items-center gap-1.5 rounded-full bg-emerald-500/10 px-3 py-1 text-[10px] font-black text-emerald-400 uppercase",children:[t.jsx("div",{className:"h-1.5 w-1.5 animate-pulse rounded-full bg-emerald-400"}),"Actif"]})]}),e[111]=fe):fe=e[111];let he;e[112]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx("p",{className:"text-[10px] font-black tracking-widest text-slate-500 uppercase",children:"Opération Favorite"}),e[112]=he):he=e[112];let $;e[113]!==a.deposits||e[114]!==a.exchanges||e[115]!==a.withdrawals?($=t.jsxs("div",{className:"space-y-2",children:[he,t.jsx("div",{className:"flex items-center gap-2",children:a.deposits>=a.withdrawals&&a.deposits>=a.exchanges?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-emerald-500/20 text-emerald-400",children:t.jsx(Je,{className:"h-4 w-4"})}),t.jsx("span",{className:"text-lg font-black italic",children:"Dépôt"})]}):a.withdrawals>=a.deposits&&a.withdrawals>=a.exchanges?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-orange-500/20 text-orange-400",children:t.jsx(Xe,{className:"h-4 w-4"})}),t.jsx("span",{className:"text-lg font-black italic",children:"Retrait"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-indigo-500/20 text-indigo-400",children:t.jsx(Be,{className:"h-4 w-4"})}),t.jsx("span",{className:"text-lg font-black italic",children:"Change"})]})})]}),e[113]=a.deposits,e[114]=a.exchanges,e[115]=a.withdrawals,e[116]=$):$=e[116];let pe;e[117]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-[10px] font-black tracking-widest text-slate-500 uppercase",children:"Fréquence"}),t.jsx("p",{className:"text-lg font-black italic",children:"Régulière"})]}),e[117]=pe):pe=e[117];let ue;e[118]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("p",{className:"text-[10px] font-black tracking-widest text-slate-500 uppercase",children:"Dernière visite"}),e[118]=ue):ue=e[118];let q;e[119]!==l[0]?.created_date?(q=We(l[0]?.created_date).fromNow(),e[119]=l[0]?.created_date,e[120]=q):q=e[120];let P;e[121]!==q?(P=t.jsxs("div",{className:"space-y-2",children:[ue,t.jsx("p",{className:"text-lg font-black italic",children:q})]}),e[121]=q,e[122]=P):P=e[122];let R;e[123]!==$||e[124]!==P?(R=t.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[$,pe,P]}),e[123]=$,e[124]=P,e[125]=R):R=e[125];let ge;e[126]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx("div",{className:"mt-8 h-[1px] w-full bg-white/10"}),e[126]=ge):ge=e[126];let je;e[127]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("div",{className:"mt-8 flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/10",children:t.jsx(ot,{className:"h-5 w-5 text-indigo-300"})}),t.jsx("p",{className:"text-xs font-medium text-slate-400",children:"Note: Ce client préfère les transactions en USD le matin."})]})}),e[127]=je):je=e[127];let H;e[128]!==R?(H=t.jsxs("div",{className:"col-span-2 rounded-[2.5rem] border border-white bg-slate-900 p-8 text-white shadow-2xl",children:[fe,R,ge,je]}),e[128]=R,e[129]=H):H=e[129];let I;e[130]!==U||e[131]!==H?(I=t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[U,H]}),e[130]=U,e[131]=H,e[132]=I):I=e[132];let z;e[133]!==y||e[134]!==D||e[135]!==M||e[136]!==I?(z=t.jsxs("div",{className:"flex flex-col space-y-8 p-10",children:[y,D,M,I]}),e[133]=y,e[134]=D,e[135]=M,e[136]=I,e[137]=z):z=e[137];let be;return e[138]!==h||e[139]!==z?(be=t.jsxs(He,{currentPageName:"Détails Client",children:[h,z]}),e[138]=h,e[139]=z,e[140]=be):be=e[140],be}function xt(i){return t.jsx(o,{className:"h-16 w-full rounded-2xl"},i)}function ft(i,e){return i+(e.amount_from||0)}function ht(i){return i.currency_from==="CDF"}function pt(i,e){return i+(e.amount_from||0)}function ut(i){return i.currency_from==="USD"}function gt(i){return i.operation_type==="change"}function jt(i){return i.operation_type==="retrait"||i.operation_type==="paiement"}function bt(i){return i.operation_type==="depot"}export{Rt as default};
