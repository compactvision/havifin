import{c as ne,j as t,r as V,L as ws,u as bt,R as ys,b as Jt,a as Kt,H as ks}from"./app-Cxt9o3Ni.js";import{b as X}from"./base44Client-DmNi4SLu.js";import{B as ce}from"./badge-CR7ZYRZw.js";import{b as Ue,c as lt}from"./card-BFvogdOn.js";import{u as be,A as pt,U as mt}from"./users-N9kzuMsT.js";import{h as Z}from"./moment-B-YVwB4U.js";import{T as _s,f as Ss,C as Cs,R as Ds,P as Fs,g as Ms,O as As,c as os,d as qs,b as ds,e as $s,a as xs,D as ms}from"./dialog-jwl-8dtj.js";import{c as Ce,a as G,m as Se}from"./createLucideIcon-DKGtSlCQ.js";import{X as jt,U as nt,a as Qt,S as Xt,b as ts,A as Rs}from"./app-main-BA-8pEG-.js";import{C as rt}from"./clock-Dg7t4-9j.js";import{A as hs,a as us,C as Ot,H as Us,S as Rt,T as ss}from"./TransactionsTable-DgQbJRe-.js";import{T as Ee}from"./trending-up-CMI3yigi.js";import{H as Es}from"./history-Ckt2LLIO.js";import{C as Wt,T as as,A as ct}from"./trending-down-8zSao-AU.js";import{T as ht,a as ke,b as ps,c as _e,d as fs,e as gs}from"./table-DNhAI4A8.js";import{B as bs}from"./banknote-c8RyUxNW.js";import{B as P,t as K}from"./index-DuH3KfOy.js";import{S as at}from"./skeleton-BWRiQj2Z.js";import{P as Ts}from"./phone-B5yKAvee.js";import{E as Yt}from"./eye-BktZcjHa.js";import{L as de,I as fe}from"./label-Crfn3rDI.js";import{S as Et,a as Tt,b as It,c as Lt,d as Fe}from"./select-Cln87ae0.js";import{c as ot}from"./axios-DaOL9Jop.js";import{u as ge}from"./useMutation-Cv3eKr3X.js";import{L as ft,R as gt}from"./refresh-cw-BfFMYUc9.js";import{B as Vt}from"./building-2-BiA6sZQ2.js";import{C as ls}from"./circle-check-CDfo5YK2.js";import{P as it}from"./plus-Caj-40gV.js";import{T as Pt}from"./trash-2-CX7kCfQc.js";import{G as is,C as Is}from"./globe-D_dGwY4U.js";import{S as Ls,a as ut}from"./smartphone-D-UKisHc.js";import{L as js}from"./loader-circle-B7OAP-r0.js";import{T as Ps}from"./textarea-8svmIBQp.js";import{D as Os}from"./dollar-sign-DtJCluRq.js";import{L as Ys}from"./lock-open-C-O4MdUU.js";import{C as zs}from"./circle-alert-CwhZqXBQ.js";import{S as Hs,a as Bs}from"./ShopManager-DX949BHS.js";/* empty css            */import"./index-Dboi62kf.js";import"./check-BBrG0uQh.js";import"./ManagerModal-KovaTqbU.js";const Ks=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Zt=Ce("Activity",Ks);const Vs=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ns=Ce("ChartPie",Vs);const Qs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],es=Ce("CircleStop",Qs);const Gs=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Js=Ce("Download",Gs);const Xs=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Ws=Ce("Filter",Xs);const Zs=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ea=Ce("LayoutGrid",Zs);const ta=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],sa=Ce("List",ta);const aa=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],la=Ce("Pencil",aa);const ia=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],zt=Ce("Play",ia);const na=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ns=Ce("Save",na);const ra=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gt=Ce("Settings",ra);const ca=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],oa=Ce("Shield",ca);function da(e){const s=ne.c(4);let a;s[0]!==e?({...a}=e,s[0]=e,s[1]=a):a=s[1];let i;return s[2]!==a?(i=t.jsx(Ds,{"data-slot":"sheet",...a}),s[2]=a,s[3]=i):i=s[3],i}function xa(e){const s=ne.c(4);let a;s[0]!==e?({...a}=e,s[0]=e,s[1]=a):a=s[1];let i;return s[2]!==a?(i=t.jsx(Fs,{"data-slot":"sheet-portal",...a}),s[2]=a,s[3]=i):i=s[3],i}function ma(e){const s=ne.c(8);let a,i;s[0]!==e?({className:a,...i}=e,s[0]=e,s[1]=a,s[2]=i):(a=s[1],i=s[2]);let r;s[3]!==a?(r=G("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",a),s[3]=a,s[4]=r):r=s[4];let l;return s[5]!==i||s[6]!==r?(l=t.jsx(As,{"data-slot":"sheet-overlay",className:r,...i}),s[5]=i,s[6]=r,s[7]=l):l=s[7],l}function ha(e){const s=ne.c(17);let a,i,r,l;s[0]!==e?({className:i,children:a,side:l,...r}=e,s[0]=e,s[1]=a,s[2]=i,s[3]=r,s[4]=l):(a=s[1],i=s[2],r=s[3],l=s[4]);const d=l===void 0?"right":l;let x;s[5]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(ma,{}),s[5]=x):x=s[5];const c=d==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",y=d==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",m=d==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n=d==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t";let p;s[6]!==i||s[7]!==c||s[8]!==y||s[9]!==m||s[10]!==n?(p=G("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",c,y,m,n,i),s[6]=i,s[7]=c,s[8]=y,s[9]=m,s[10]=n,s[11]=p):p=s[11];let b;s[12]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsxs(Ms,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[t.jsx(jt,{className:"size-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]}),s[12]=b):b=s[12];let N;return s[13]!==a||s[14]!==r||s[15]!==p?(N=t.jsxs(xa,{children:[x,t.jsxs(Cs,{"data-slot":"sheet-content",className:p,...r,children:[a,b]})]}),s[13]=a,s[14]=r,s[15]=p,s[16]=N):N=s[16],N}function ua(e){const s=ne.c(8);let a,i;s[0]!==e?({className:a,...i}=e,s[0]=e,s[1]=a,s[2]=i):(a=s[1],i=s[2]);let r;s[3]!==a?(r=G("flex flex-col gap-1.5 p-4",a),s[3]=a,s[4]=r):r=s[4];let l;return s[5]!==i||s[6]!==r?(l=t.jsx("div",{"data-slot":"sheet-header",className:r,...i}),s[5]=i,s[6]=r,s[7]=l):l=s[7],l}function pa(e){const s=ne.c(8);let a,i;s[0]!==e?({className:a,...i}=e,s[0]=e,s[1]=a,s[2]=i):(a=s[1],i=s[2]);let r;s[3]!==a?(r=G("text-foreground font-semibold",a),s[3]=a,s[4]=r):r=s[4];let l;return s[5]!==i||s[6]!==r?(l=t.jsx(_s,{"data-slot":"sheet-title",className:r,...i}),s[5]=i,s[6]=r,s[7]=l):l=s[7],l}function fa(e){const s=ne.c(8);let a,i;s[0]!==e?({className:a,...i}=e,s[0]=e,s[1]=a,s[2]=i):(a=s[1],i=s[2]);let r;s[3]!==a?(r=G("text-muted-foreground text-sm",a),s[3]=a,s[4]=r):r=s[4];let l;return s[5]!==i||s[6]!==r?(l=t.jsx(Ss,{"data-slot":"sheet-description",className:r,...i}),s[5]=i,s[6]=r,s[7]=l):l=s[7],l}function ga(e){const s=ne.c(78),{user:a,isOpen:i,onClose:r}=e;if(!a)return null;const l=a.detailed_stats;let d;s[0]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx("div",{className:"h-2 w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),s[0]=d):d=s[0];let x;s[1]!==a.cashier_name?(x=a.cashier_name.charAt(0),s[1]=a.cashier_name,s[2]=x):x=s[2];let c;s[3]!==x?(c=t.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-[2rem] bg-indigo-600 text-3xl font-black text-white shadow-xl shadow-indigo-200",children:x}),s[3]=x,s[4]=c):c=s[4];let y;s[5]!==a.cashier_name?(y=t.jsx(pa,{className:"mb-1 text-3xl leading-none font-black text-slate-900",children:a.cashier_name}),s[5]=a.cashier_name,s[6]=y):y=s[6];let m;s[7]!==a.cashier_email?(m=t.jsx(fa,{className:"text-xs font-bold tracking-widest text-indigo-500 uppercase",children:a.cashier_email}),s[7]=a.cashier_email,s[8]=m):m=s[8];let n;s[9]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(rt,{className:"mr-1.5 h-3 w-3"}),s[9]=n):n=s[9];const p=a.connection_time||"--:--";let b;s[10]!==p?(b=t.jsx("div",{className:"mt-4 flex items-center gap-2",children:t.jsxs(ce,{variant:"outline",className:"rounded-xl border-emerald-100 bg-emerald-50 font-bold text-emerald-600",children:[n,"Connecté à"," ",p]})}),s[10]=p,s[11]=b):b=s[11];let N;s[12]!==y||s[13]!==m||s[14]!==b?(N=t.jsxs("div",{children:[y,m,b]}),s[12]=y,s[13]=m,s[14]=b,s[15]=N):N=s[15];let k;s[16]!==c||s[17]!==N?(k=t.jsx(ua,{className:"mb-10",children:t.jsxs("div",{className:"mb-4 flex items-center gap-6",children:[c,N]})}),s[16]=c,s[17]=N,s[18]=k):k=s[18];let T;s[19]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("div",{className:"rounded-xl bg-emerald-50 p-2",children:t.jsx(hs,{className:"h-5 w-5 text-emerald-600"})}),t.jsx("span",{className:"text-[10px] font-black tracking-wider text-emerald-600 uppercase",children:"Dépôts"})]}),s[19]=T):T=s[19];let h;s[20]!==l.deposits?(h=t.jsx("h4",{className:"text-2xl font-black text-slate-900",children:l.deposits}),s[20]=l.deposits,s[21]=h):h=s[21];let q;s[22]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx("p",{className:"mt-1 text-[10px] font-bold text-slate-400 uppercase",children:"Actions aujourd'hui"}),s[22]=q):q=s[22];let w;s[23]!==h?(w=t.jsx(Ue,{className:"overflow-hidden rounded-3xl border-none bg-white shadow-sm",children:t.jsxs(lt,{className:"p-6",children:[T,h,q]})}),s[23]=h,s[24]=w):w=s[24];let g;s[25]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("div",{className:"rounded-xl bg-rose-50 p-2",children:t.jsx(us,{className:"h-5 w-5 text-rose-600"})}),t.jsx("span",{className:"text-[10px] font-black tracking-wider text-rose-600 uppercase",children:"Retraits"})]}),s[25]=g):g=s[25];let D;s[26]!==l.withdrawals?(D=t.jsx("h4",{className:"text-2xl font-black text-slate-900",children:l.withdrawals}),s[26]=l.withdrawals,s[27]=D):D=s[27];let _;s[28]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx("p",{className:"mt-1 text-[10px] font-bold text-slate-400 uppercase",children:"Actions aujourd'hui"}),s[28]=_):_=s[28];let v;s[29]!==D?(v=t.jsx(Ue,{className:"overflow-hidden rounded-3xl border-none bg-white shadow-sm",children:t.jsxs(lt,{className:"p-6",children:[g,D,_]})}),s[29]=D,s[30]=v):v=s[30];let R;s[31]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("div",{className:"rounded-xl bg-amber-50 p-2",children:t.jsx(Ee,{className:"h-5 w-5 text-amber-600"})}),t.jsx("span",{className:"text-[10px] font-black tracking-wider text-amber-600 uppercase",children:"Changes"})]}),s[31]=R):R=s[31];let j;s[32]!==l.exchanges?(j=t.jsx("h4",{className:"text-2xl font-black text-slate-900",children:l.exchanges}),s[32]=l.exchanges,s[33]=j):j=s[33];let S;s[34]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx("p",{className:"mt-1 text-[10px] font-bold text-slate-400 uppercase",children:"Opérations"}),s[34]=S):S=s[34];let u;s[35]!==j?(u=t.jsx(Ue,{className:"overflow-hidden rounded-3xl border-none bg-white shadow-sm",children:t.jsxs(lt,{className:"p-6",children:[R,j,S]})}),s[35]=j,s[36]=u):u=s[36];let U;s[37]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("div",{className:"rounded-xl bg-indigo-50 p-2",children:t.jsx(Es,{className:"h-5 w-5 text-indigo-600"})}),t.jsx("span",{className:"text-[10px] font-black tracking-wider text-indigo-600 uppercase",children:"Mouvements"})]}),s[37]=U):U=s[37];const F=l.adjustments_in+l.adjustments_out;let C;s[38]!==F?(C=t.jsx("h4",{className:"text-2xl font-black text-slate-900",children:F}),s[38]=F,s[39]=C):C=s[39];let M;s[40]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("p",{className:"mt-1 text-[10px] font-bold text-slate-400 uppercase",children:"Manuels (In/Out)"}),s[40]=M):M=s[40];let I;s[41]!==C?(I=t.jsx(Ue,{className:"overflow-hidden rounded-3xl border-none bg-white shadow-sm",children:t.jsxs(lt,{className:"p-6",children:[U,C,M]})}),s[41]=C,s[42]=I):I=s[42];let E;s[43]!==w||s[44]!==v||s[45]!==u||s[46]!==I?(E=t.jsxs("div",{className:"mb-10 grid grid-cols-2 gap-4",children:[w,v,u,I]}),s[43]=w,s[44]=v,s[45]=u,s[46]=I,s[47]=E):E=s[47];let O;s[48]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("p",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Volume Traité (USD)"}),s[48]=O):O=s[48];let z;s[49]!==l.total_amount_usd?(z=l.total_amount_usd.toLocaleString(),s[49]=l.total_amount_usd,s[50]=z):z=s[50];let Y;s[51]!==z?(Y=t.jsxs("div",{children:[O,t.jsxs("h3",{className:"text-2xl font-black",children:["$ ",z]})]}),s[51]=z,s[52]=Y):Y=s[52];let H,B;s[53]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("div",{className:"h-10 w-[1px] bg-slate-800"}),B=t.jsx("p",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Volume Traité (CDF)"}),s[53]=H,s[54]=B):(H=s[53],B=s[54]);let f;s[55]!==l.total_amount_cdf?(f=l.total_amount_cdf.toLocaleString(),s[55]=l.total_amount_cdf,s[56]=f):f=s[56];let L;s[57]!==f?(L=t.jsxs("div",{children:[B,t.jsxs("h3",{className:"text-2xl font-black",children:[f," FC"]})]}),s[57]=f,s[58]=L):L=s[58];let A;s[59]!==Y||s[60]!==L?(A=t.jsx("div",{className:"mb-10 space-y-4",children:t.jsxs("div",{className:"flex items-center justify-between rounded-2xl bg-slate-900 p-6 text-white shadow-xl",children:[Y,H,L]})}),s[59]=Y,s[60]=L,s[61]=A):A=s[61];let te;s[62]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Zt,{className:"h-5 w-5 text-indigo-600"}),t.jsx("h4",{className:"text-lg font-black tracking-tight text-slate-800",children:"Dernières Activités"})]}),s[62]=te):te=s[62];let se;if(s[63]!==a.recent_activities){let ae;s[65]!==a.recent_activities.length?(ae=(W,me)=>t.jsxs("div",{className:"relative flex gap-4",children:[me!==a.recent_activities.length-1&&t.jsx("div",{className:"absolute top-10 left-[19px] h-full w-[2px] bg-slate-100"}),t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl border border-slate-100 bg-white text-[10px] font-black text-slate-400 shadow-sm",children:W.time}),t.jsxs("div",{className:"flex-1 rounded-2xl border border-slate-100 bg-white p-4 shadow-sm",children:[t.jsx("p",{className:"mb-1 text-xs font-bold tracking-wider text-indigo-500 uppercase",children:W.type}),t.jsx("p",{className:"text-sm leading-snug font-medium text-slate-600",children:W.description})]})]},W.id),s[65]=a.recent_activities.length,s[66]=ae):ae=s[66],se=a.recent_activities.map(ae),s[63]=a.recent_activities,s[64]=se}else se=s[64];let J;s[67]!==se?(J=t.jsxs("div",{className:"space-y-6",children:[te,t.jsx("div",{className:"space-y-4",children:se})]}),s[67]=se,s[68]=J):J=s[68];let ee;s[69]!==k||s[70]!==E||s[71]!==A||s[72]!==J?(ee=t.jsxs(ha,{className:"overflow-y-auto border-none bg-slate-50 p-0 sm:max-w-[600px]",children:[d,t.jsxs("div",{className:"px-8 py-10",children:[k,E,A,J]})]}),s[69]=k,s[70]=E,s[71]=A,s[72]=J,s[73]=ee):ee=s[73];let le;return s[74]!==i||s[75]!==r||s[76]!==ee?(le=t.jsx(da,{open:i,onOpenChange:r,children:ee}),s[74]=i,s[75]=r,s[76]=ee,s[77]=le):le=s[77],le}function ba(e){const s=ne.c(30),{selectedDate:a}=e,[i,r]=V.useState(null);let l;s[0]!==a?(l={queryKey:["cashier-stats",a],queryFn:()=>X.entities.CashierActivity.stats({date:a})},s[0]=a,s[1]=l):l=s[1];const{data:d,isLoading:x}=be(l);let c;s[2]!==d?(c=d===void 0?[]:d,s[2]=d,s[3]=c):c=s[3];const y=c;let m;s[4]!==a?(m={queryKey:["cashier-activities",a],queryFn:()=>X.entities.CashierActivity.list({date:a})},s[4]=a,s[5]=m):m=s[5];const{data:n,isLoading:p}=be(m);let b;s[6]!==n?(b=n===void 0?[]:n,s[6]=n,s[7]=b):b=s[7];const N=b,k=ja;if(x||p){let u;return s[8]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-indigo-600 border-t-transparent"}),t.jsx("p",{className:"mt-4 text-xs font-black tracking-widest text-slate-400 uppercase",children:"Calcul des performances..."})]}),s[8]=u):u=s[8],u}let T;s[9]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx("h3",{className:"mb-2 text-2xl font-black tracking-tight text-slate-800",children:"Journal d'activité"}),s[9]=T):T=s[9];let h;s[10]!==a?(h=Z(a).format("DD/MM/YYYY"),s[10]=a,s[11]=h):h=s[11];let q;s[12]!==h?(q=t.jsxs("div",{children:[T,t.jsxs("p",{className:"text-sm font-medium text-slate-400",children:["Performance et mouvements des utilisateurs pour le"," ",h]})]}),s[12]=h,s[13]=q):q=s[13];let w;s[14]!==y?(w=y.length>0?y.map(u=>t.jsx(Ue,{onClick:()=>r(u),className:"group cursor-pointer rounded-3xl border-slate-100 bg-white shadow-sm transition-all hover:border-indigo-500 hover:shadow-xl hover:shadow-indigo-500/10 active:scale-95",children:t.jsxs(lt,{className:"p-6",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-indigo-50 text-xl font-black text-indigo-600 transition-colors group-hover:bg-indigo-600 group-hover:text-white",children:u.cashier_name.charAt(0)}),t.jsx(Wt,{className:"h-5 w-5 text-slate-300 transition-all group-hover:translate-x-1 group-hover:text-indigo-600"})]}),t.jsx("h4",{className:"mb-1 text-lg font-black text-slate-900",children:u.cashier_name}),t.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[t.jsx(ce,{variant:"outline",className:"border-emerald-100 text-[10px] font-bold text-emerald-600",children:u.connection_time?`À ${u.connection_time}`:"Non connecté"}),t.jsxs(ce,{variant:"outline",className:"text-[10px] font-bold",children:[u.transactions_completed," Opérations"]})]}),t.jsx("div",{className:"space-y-2 border-t border-slate-50 pt-4",children:t.jsxs("div",{className:"flex justify-between text-[10px] font-bold tracking-wider text-slate-400 uppercase",children:[t.jsx("span",{children:"Volume USD"}),t.jsxs("span",{className:"font-black text-slate-900",children:["$"," ",u.detailed_stats.total_amount_usd.toLocaleString()]})]})})]})},u.cashier_id)):t.jsxs("div",{className:"col-span-full rounded-[2.5rem] border-2 border-dashed border-slate-100 py-10 text-center",children:[t.jsx(nt,{className:"mx-auto mb-3 h-12 w-12 text-slate-200"}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-300 uppercase",children:"Aucun utilisateur actif ce jour"})]}),s[14]=y,s[15]=w):w=s[15];let g;s[16]!==w?(g=t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:w}),s[16]=w,s[17]=g):g=s[17];let D;s[18]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h4",{className:"text-xl font-black tracking-tight text-slate-800",children:"Derniers Événements"})}),s[18]=D):D=s[18];let _;s[19]!==N?(_=t.jsxs("div",{className:"space-y-6 border-t border-slate-100 pt-10",children:[D,N.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-40",children:[t.jsx(Zt,{className:"mb-4 h-16 w-16 text-slate-200"}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucun événement enregistré"})]}):t.jsx("div",{className:"relative space-y-4",children:N.map((u,U)=>t.jsxs("div",{className:"relative flex gap-4",children:[U!==N.length-1&&t.jsx("div",{className:"absolute top-10 left-[19px] h-full w-[2px] bg-slate-100"}),t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-2 border-slate-100 bg-white",children:t.jsx(rt,{className:"h-4 w-4 text-slate-400"})}),t.jsxs("div",{className:"flex-1 rounded-2xl border border-slate-100 bg-white/50 p-5 shadow-sm transition-all hover:bg-white",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-black text-slate-900",children:Z(u.created_at).format("HH:mm:ss")}),k(u.activity_type,u.description)]}),t.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-400 uppercase",children:[t.jsx(nt,{className:"h-3 w-3"}),u.cashier?.name||u.cashier_name||"Système"]})]}),t.jsx("p",{className:"text-sm leading-relaxed font-medium text-slate-600",children:u.description})]})]},u.id))})]}),s[19]=N,s[20]=_):_=s[20];const v=!!i;let R;s[21]===Symbol.for("react.memo_cache_sentinel")?(R=()=>r(null),s[21]=R):R=s[21];let j;s[22]!==i||s[23]!==v?(j=t.jsx(ga,{user:i,isOpen:v,onClose:R}),s[22]=i,s[23]=v,s[24]=j):j=s[24];let S;return s[25]!==g||s[26]!==_||s[27]!==j||s[28]!==q?(S=t.jsxs("div",{className:"space-y-10",children:[q,g,_,j]}),s[25]=g,s[26]=_,s[27]=j,s[28]=q,s[29]=S):S=s[29],S}function ja(e,s){const a=s?.toLowerCase()||"";if(e==="complete_transaction")return a.includes("taux")?t.jsx(ce,{className:"border-none bg-amber-100 text-amber-600",children:"TAUX"}):a.includes("boutique")?t.jsx(ce,{className:"border-none bg-purple-100 text-purple-600",children:"BOUTIQUE"}):a.includes("utilisateur")?t.jsx(ce,{className:"border-none bg-blue-100 text-blue-600",children:"USER"}):a.includes("partenaire")?t.jsx(ce,{className:"border-none bg-pink-100 text-pink-600",children:"PARTENAIRE"}):a.includes("publicité")?t.jsx(ce,{className:"border-none bg-rose-100 text-rose-600",children:"PUB"}):a.includes("guichet")?t.jsx(ce,{className:"border-none bg-cyan-100 text-cyan-600",children:"GUICHET"}):t.jsx(ce,{className:"border-none bg-indigo-100 text-indigo-600",children:"OPÉRATION"});switch(e){case"login":return t.jsx(ce,{className:"border-none bg-emerald-100 text-emerald-600",children:"CONNEXION"});case"logout":return t.jsx(ce,{className:"border-none bg-slate-100 text-slate-600",children:"DÉCONNEXION"});default:return t.jsx(ce,{className:"border-none bg-slate-100 text-slate-500",children:e.toUpperCase()})}}function rs(e){const s=ne.c(6),{movements:a}=e;if(a.length===0){let d;return s[0]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsxs("div",{className:"flex h-48 flex-col items-center justify-center rounded-3xl border-2 border-dashed border-slate-100 bg-slate-50/50",children:[t.jsx(bs,{className:"mb-2 h-8 w-8 text-slate-200"}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucun mouvement manuel aujourd'hui"})]}),s[0]=d):d=s[0],d}let i;s[1]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx(ps,{children:t.jsxs(ht,{className:"border-b border-slate-50 bg-slate-50/50 hover:bg-slate-50/50",children:[t.jsx(_e,{className:"w-[120px] text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Heure"}),t.jsx(_e,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Type"}),t.jsx(_e,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Montant"}),t.jsx(_e,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Motif / Description"}),t.jsx(_e,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Caissier"}),t.jsx(_e,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Boutique"})]})}),s[1]=i):i=s[1];let r;s[2]!==a?(r=a.map(Na),s[2]=a,s[3]=r):r=s[3];let l;return s[4]!==r?(l=t.jsx("div",{className:"overflow-hidden rounded-3xl border border-slate-100 bg-white shadow-sm",children:t.jsxs(fs,{children:[i,t.jsx(gs,{children:r})]})}),s[4]=r,s[5]=l):l=s[5],l}function Na(e,s){const a=e.amount>0;return t.jsxs(ht,{className:"group transition-colors hover:bg-slate-50/50",children:[t.jsx(ke,{className:"py-4",children:t.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-400",children:[t.jsx(Ot,{className:"h-3 w-3"}),Z(e.created_at).format("HH:mm")]})}),t.jsx(ke,{children:t.jsxs("div",{className:`inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-[10px] font-black tracking-widest uppercase ${a?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[a?t.jsx(us,{className:"h-3 w-3"}):t.jsx(hs,{className:"h-3 w-3"}),a?"Entrée":"Sortie"]})}),t.jsx(ke,{children:t.jsxs("div",{className:`text-sm font-black ${a?"text-emerald-600":"text-rose-600"}`,children:[a?"+":"",parseFloat(e.amount).toLocaleString()," ",t.jsx("span",{className:"text-[10px] opacity-70",children:e.currency})]})}),t.jsx(ke,{children:t.jsx("div",{className:"max-w-[200px] truncate text-xs font-bold text-slate-600",children:e.description})}),t.jsx(ke,{children:t.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500",children:[t.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-slate-100",children:t.jsx(nt,{className:"h-3 w-3 text-slate-400"})}),e.user?.name||"Inconnu"]})}),t.jsx(ke,{children:t.jsx("div",{className:"text-[10px] font-black tracking-wider text-slate-400 uppercase",children:e.session?.register?.shop?.name||"-"})})]},e.id)}function va(e){const s=ne.c(7),{clients:a,isLoading:i}=e;if(i){let x;return s[0]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx("div",{className:"space-y-3",children:[...Array(5)].map(ya)}),s[0]=x):x=s[0],x}if(a.length===0){let x;return s[1]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsxs("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border-2 border-dashed border-slate-200 bg-slate-50/50 p-20",children:[t.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-2xl border border-slate-100 bg-white shadow-sm",children:t.jsx(nt,{className:"h-8 w-8 text-slate-300"})}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucun client trouvé"})]}),s[1]=x):x=s[1],x}let r;s[2]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx("thead",{children:t.jsxs("tr",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[t.jsx("th",{className:"px-6 py-4 font-black",children:"Client"}),t.jsx("th",{className:"px-6 py-4 font-black",children:"Numéro de téléphone"}),t.jsx("th",{className:"px-6 py-4 text-center font-black",children:"Statut"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Inscrit le"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Actions"})]})}),s[2]=r):r=s[2];let l;s[3]!==a?(l=a.map(wa),s[3]=a,s[4]=l):l=s[4];let d;return s[5]!==l?(d=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border-separate border-spacing-y-3 text-left",children:[r,t.jsx("tbody",{children:l})]})}),s[5]=l,s[6]=d):d=s[6],d}function wa(e){return t.jsxs("tr",{className:"group rounded-2xl border border-slate-100 bg-white transition-all duration-300 hover:bg-slate-50",children:[t.jsx("td",{className:"rounded-l-2xl border-y border-l border-slate-100 px-6 py-5 group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-slate-900 shadow-lg shadow-slate-900/10 transition-transform group-hover:scale-110",children:t.jsx(nt,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{className:"flex min-w-0 flex-col",children:[t.jsx("span",{className:"truncate text-sm font-black text-slate-900",children:e.full_name||`${e.first_name||""} ${e.last_name||""}`.trim()||"Client sans nom"}),t.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold tracking-tight text-slate-400 uppercase",children:[t.jsx(Us,{className:"h-2.5 w-2.5"})," ID-",e.id]})]})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ts,{className:"h-3.5 w-3.5 text-slate-400"}),t.jsx("span",{className:"text-sm font-bold text-slate-600",children:e.phone})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-center group-hover:border-indigo-100",children:t.jsx("div",{className:G("inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-[10px] font-black tracking-widest uppercase",e.is_registered?"bg-emerald-50 text-emerald-600":"bg-amber-50 text-amber-600"),children:e.is_registered?"Inscrit":"Temporaire"})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsx("span",{className:"text-sm font-black text-slate-700",children:Z(e.created_date).format("DD/MM/YYYY")})}),t.jsx("td",{className:"rounded-r-2xl border-y border-r border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsx(ws,{href:`/manager/clients/${e.id}`,children:t.jsxs(P,{variant:"outline",size:"sm",className:"h-9 rounded-xl border-slate-200 text-xs font-black tracking-widest uppercase hover:border-indigo-500 hover:text-indigo-600",children:[t.jsx(Yt,{className:"mr-2 h-3.5 w-3.5"}),"Détails"]})})})]},e.id)}function ya(e,s){return t.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-100 bg-white p-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(at,{className:"h-10 w-10 rounded-xl"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(at,{className:"h-4 w-32"}),t.jsx(at,{className:"h-3 w-20"})]})]}),t.jsx(at,{className:"h-4 w-24"}),t.jsx(at,{className:"h-6 w-20 rounded-full"}),t.jsx(at,{className:"h-4 w-10"})]},s)}function ka(){const e=ne.c(50),s=bt(),[a,i]=V.useState(!1),[r,l]=V.useState(null),[d,x]=V.useState(null),[c,y]=V.useState("all");let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={name:"",type:"bank",code:"",logo:null},e[0]=m):m=e[0];const[n,p]=V.useState(m),[b,N]=V.useState(""),[k,T]=V.useState("depot");let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h={queryKey:["institutions"],queryFn:Ta},e[1]=h):h=e[1];const{data:q,isLoading:w}=be(h),g=q===void 0?[]:q;let D;e[2]!==c?(D=o=>c==="all"?!0:o.type===c,e[2]=c,e[3]=D):D=e[3];const _=g.filter(D),v=ge({mutationFn:Ea,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),u(),K.success("Institution ajoutée avec succès")},onError:Ua}),R=ge({mutationFn:Ra,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),u(),K.success("Institution mise à jour avec succès")},onError:$a});let j;e[4]!==s?(j={mutationFn:qa,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),K.success("Configuration mise à jour")}},e[4]=s,e[5]=j):j=e[5];const S=ge(j),u=()=>{p({name:"",type:"bank",code:"",logo:null}),l(null),i(!1)};let U;e[6]===Symbol.for("react.memo_cache_sentinel")?(U=o=>{p({name:o.name,type:o.type,code:o.code,logo:null}),l(o.id),i(!0)},e[6]=U):U=e[6];const F=U;let C;e[7]!==s?(C={mutationFn:Aa,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),K.success("Institution supprimée")}},e[7]=s,e[8]=C):C=e[8];const M=ge(C);let I;e[9]!==s?(I={mutationFn:Ma,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),K.success("Statut mis à jour")}},e[9]=s,e[10]=I):I=e[10];const E=ge(I);let O;e[11]!==s?(O={mutationFn:Fa,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),N(""),T("depot"),K.success("Champ ajouté")},onError:Da},e[11]=s,e[12]=O):O=e[12];const z=ge(O);let Y;e[13]!==s?(Y={mutationFn:Ca,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),K.success("Champ supprimé")}},e[13]=s,e[14]=Y):Y=e[14];const H=ge(Y);let B;e[15]!==s?(B={mutationFn:Sa,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),K.success("Infos agent mises à jour")}},e[15]=s,e[16]=B):B=e[16];const f=ge(B);let L,A;e[17]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600 shadow-lg shadow-indigo-600/20",children:t.jsx(Vt,{className:"h-5 w-5 text-white"})}),A=t.jsx("h4",{className:"text-sm font-black tracking-tight text-slate-800 uppercase",children:"Partenaires & Institutions"}),e[17]=L,e[18]=A):(L=e[17],A=e[18]);let te;e[19]!==a?(te=()=>i(!a),e[19]=a,e[20]=te):te=e[20];const se=a?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 hover:bg-indigo-700";let J;e[21]!==se?(J=G("h-11 rounded-xl px-6 text-xs font-black tracking-widest uppercase transition-all",se),e[21]=se,e[22]=J):J=e[22];let ee;e[23]!==a?(ee=a?t.jsx(jt,{className:"mr-2 h-4 w-4"}):t.jsx(it,{className:"mr-2 h-4 w-4"}),e[23]=a,e[24]=ee):ee=e[24];const le=a?"Fermer":"Nouvelle Institution";let ae;e[25]!==te||e[26]!==J||e[27]!==ee||e[28]!==le?(ae=t.jsxs(P,{onClick:te,className:J,children:[ee,le]}),e[25]=te,e[26]=J,e[27]=ee,e[28]=le,e[29]=ae):ae=e[29];let W;e[30]!==v||e[31]!==r||e[32]!==n||e[33]!==u||e[34]!==a||e[35]!==R?(W=a&&t.jsx(Se.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsxs("div",{className:"relative rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-64 w-64 bg-indigo-500/10 blur-[100px]"}),t.jsxs("h5",{className:"mb-8 flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(ft,{className:"h-6 w-6 text-indigo-400"}),r?"Modifier l'institution":"Configurer un nouveau partenaire"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(de,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Nom de l'institution"}),t.jsx(fe,{placeholder:"ex: Bank of Africa",value:n.name,onChange:o=>p({...n,name:o.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(de,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Type de service"}),t.jsxs(Et,{value:n.type,onValueChange:o=>p({...n,type:o}),children:[t.jsx(Tt,{className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500",children:t.jsx(It,{})}),t.jsxs(Lt,{className:"border-slate-800 bg-slate-900 text-white",children:[t.jsx(Fe,{value:"bank",className:"focus:bg-slate-800",children:"Banque Classique"}),t.jsx(Fe,{value:"mobile_money",className:"focus:bg-slate-800",children:"Mobile Money"}),t.jsx(Fe,{value:"payment",className:"focus:bg-slate-800",children:"Service de Paiement"}),t.jsx(Fe,{value:"other",className:"focus:bg-slate-800",children:"Autre Service (MoneyGram, etc.)"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(de,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Code Identifiant"}),t.jsx(fe,{placeholder:"ex: BOA-CD",value:n.code,onChange:o=>p({...n,code:o.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 font-mono font-black text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),t.jsxs("div",{className:"mt-6 space-y-2",children:[t.jsx(de,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Logo de l'institution (Optionnel)"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"relative flex h-16 w-16 items-center justify-center overflow-hidden rounded-xl border border-white/10 bg-white/5",children:n.logo?t.jsx("img",{src:URL.createObjectURL(n.logo),alt:"Preview",className:"h-full w-full object-cover"}):t.jsx(Vt,{className:"h-6 w-6 text-white/20"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx(fe,{type:"file",accept:"image/*",onChange:o=>{o.target.files&&o.target.files[0]&&p({...n,logo:o.target.files[0]})},className:"h-12 w-full cursor-pointer rounded-xl border-white/10 bg-white/5 pt-2 text-sm font-bold text-white file:mr-4 file:rounded-lg file:border-0 file:bg-indigo-600 file:px-4 file:py-1 file:text-xs file:font-bold file:text-white hover:file:bg-indigo-700"}),t.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Format recommandé: PNG ou JPG, fond transparent. Max 2MB."})]})]})]}),t.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[t.jsx(P,{variant:"ghost",onClick:u,className:"h-12 rounded-xl px-8 text-xs font-black tracking-widest text-slate-400 uppercase hover:bg-white/5 hover:text-white",children:"Annuler"}),t.jsx(P,{onClick:()=>{r?R.mutate({id:r,data:n}):v.mutate(n)},disabled:v.isPending||R.isPending||!n.name||!n.code,className:"h-12 rounded-xl bg-white px-10 text-xs font-black tracking-widest text-slate-900 uppercase transition-all hover:bg-slate-100",children:v.isPending?t.jsx(gt,{className:"h-4 w-4 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Ns,{className:"mr-2 h-4 w-4"}),r?"Mettre à jour":"Enregistrer Partenaire"]})})]})]})}),e[30]=v,e[31]=r,e[32]=n,e[33]=u,e[34]=a,e[35]=R,e[36]=W):W=e[36];let me;e[37]!==W?(me=t.jsx(pt,{children:W}),e[37]=W,e[38]=me):me=e[38];let he;e[39]===Symbol.for("react.memo_cache_sentinel")?(he=[{id:"all",label:"Tout"},{id:"bank",label:"Banques"},{id:"mobile_money",label:"Mobile Money"},{id:"payment",label:"Paiement"},{id:"other",label:"Autres"}],e[39]=he):he=e[39];let je;e[40]!==c?(je=t.jsx("div",{className:"flex gap-2",children:he.map(o=>t.jsx("button",{onClick:()=>y(o.id),className:G("rounded-xl px-4 py-2 text-xs font-black tracking-widest uppercase transition-all",c===o.id?"bg-slate-900 text-white shadow-lg shadow-slate-900/10":"bg-white text-slate-400 hover:bg-slate-50 hover:text-slate-600"),children:o.label},o.id))}),e[40]=c,e[41]=je):je=e[41];let oe;e[42]!==M||e[43]!==E?(oe=o=>t.jsxs(Se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative overflow-hidden rounded-[2rem] border-2 border-slate-50 bg-white p-6 shadow-xl shadow-slate-200/50 transition-all duration-300 hover:border-indigo-100",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("div",{className:G("flex h-14 w-14 items-center justify-center rounded-2xl shadow-lg transition-transform group-hover:rotate-6",o.type==="bank"?"bg-slate-900 text-white shadow-slate-900/10":o.type==="payment"?"bg-indigo-500 text-white shadow-indigo-500/10":o.type==="other"?"bg-amber-500 text-white shadow-amber-500/10":"bg-emerald-500 text-white shadow-emerald-500/10"),children:o.logo_url?t.jsx("img",{src:o.logo_url,alt:o.name,className:"h-9 w-9 object-contain"}):o.type==="bank"?t.jsx(Vt,{className:"h-7 w-7"}):o.type==="payment"?t.jsx(is,{className:"h-7 w-7"}):o.type==="other"?t.jsx(is,{className:"h-7 w-7"}):t.jsx(Ls,{className:"h-7 w-7"})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(P,{variant:"ghost",size:"icon",onClick:()=>E.mutate({id:o.id,is_active:!o.is_active}),className:G("h-10 w-10 rounded-xl transition-all",o.is_active?"bg-emerald-50 text-emerald-500":"bg-slate-50 text-slate-300"),children:t.jsx(Qt,{className:"h-5 w-5"})}),t.jsx(P,{variant:"ghost",size:"icon",onClick:()=>M.mutate(o.id),className:"h-10 w-10 rounded-xl text-slate-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500",children:t.jsx(Pt,{className:"h-5 w-5"})}),t.jsx(P,{variant:"ghost",size:"icon",onClick:()=>x(o.id),className:"h-10 w-10 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-emerald-50 hover:text-emerald-600",children:t.jsx(Gt,{className:"h-5 w-5"})}),t.jsx(P,{variant:"ghost",size:"icon",onClick:()=>F(o),className:"h-10 w-10 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-indigo-50 hover:text-indigo-600",children:t.jsx(la,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-lg font-black tracking-tight text-slate-900",children:o.name}),!o.is_active&&t.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[8px] font-black tracking-widest text-slate-400 uppercase",children:"Inactif"}),o.settings?.required_fields&&o.settings.required_fields.length>0&&t.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[8px] font-black tracking-widest text-emerald-600 uppercase",children:[t.jsx(ls,{className:"h-2 w-2"}),"Configuré"]})]}),t.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[t.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:o.code}),t.jsx("span",{className:"h-1 w-1 rounded-full bg-slate-200"}),t.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase",children:o.type==="bank"?"Banque":o.type==="payment"?"Service de Paiement":o.type==="other"?"Autre Service":"Mobile Money"})]})]}),t.jsx("div",{className:G("absolute -right-6 -bottom-6 h-24 w-24 rounded-full opacity-[0.03] transition-transform group-hover:scale-150",o.type==="bank"?"bg-slate-900":"bg-emerald-500")})]},o.id),e[42]=M,e[43]=E,e[44]=oe):oe=e[44];let Ne;e[45]!==w?(Ne=w&&t.jsx("div",{className:"flex justify-center p-20",children:t.jsx(js,{className:"h-10 w-10 animate-spin text-indigo-600"})}),e[45]=w,e[46]=Ne):Ne=e[46];const pe=pt,xe=d&&t.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 p-4 backdrop-blur-sm",onClick:()=>x(null),children:t.jsxs(Se.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"w-full max-w-md overflow-hidden rounded-[2.5rem] bg-white shadow-2xl",onClick:_a,children:[t.jsxs("div",{className:"relative bg-slate-900 p-8 text-white",children:[t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 bg-indigo-500/10 blur-3xl"}),t.jsxs("h3",{className:"flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(Gt,{className:"h-6 w-6 text-indigo-400"}),"Champs Requis"]}),t.jsxs("p",{className:"mt-2 text-xs font-medium text-slate-400",children:["Configurez les informations obligatoires pour"," ",t.jsx("span",{className:"text-white",children:g.find(o=>o.id===d)?.name})]})]}),t.jsxs("div",{className:"p-8",children:[t.jsx("div",{className:"space-y-3",children:[{id:"account_number",label:"Numéro de Compte"},{id:"beneficiary",label:"Nom du Bénéficiaire"},{id:"beneficiary_number",label:"Numéro du Bénéficiaire"},{id:"reason",label:"Motif / Raison"}].map(o=>{const Q=g.find(Me=>Me.id===d),ie=(Q?.settings?.required_fields||[]).includes(o.id);return t.jsxs("button",{onClick:()=>S.mutate({institution:Q,field:o.id}),className:G("flex w-full items-center justify-between rounded-2xl border-2 p-5 transition-all",ie?"border-indigo-100 bg-indigo-50/50 text-indigo-900 shadow-sm":"border-slate-100 bg-slate-50/50 text-slate-500 hover:border-slate-200"),children:[t.jsx("span",{className:"text-sm font-black tracking-tight",children:o.label}),ie?t.jsx(ls,{className:"h-6 w-6 text-indigo-600"}):t.jsx("div",{className:"h-6 w-6 rounded-full border-2 border-slate-200 bg-white"})]},o.id)})}),t.jsxs("div",{className:"mt-8 space-y-4",children:[t.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[t.jsx(it,{className:"h-3 w-3"}),"Ajouter un champ personnalisé"]}),t.jsx("div",{className:"flex flex-col gap-2",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{placeholder:"ex: Code Agence...",value:b,onChange:o=>N(o.target.value),className:"h-12 rounded-xl border-slate-200"}),t.jsxs(Et,{value:k,onValueChange:o=>T(o),children:[t.jsx(Tt,{className:"h-12 w-32 rounded-xl border-slate-200",children:t.jsx(It,{})}),t.jsxs(Lt,{className:"bg-white",children:[t.jsx(Fe,{value:"depot",children:"Dépôt"}),t.jsx(Fe,{value:"retrait",children:"Retrait"}),t.jsx(Fe,{value:"both",children:"Les deux"})]})]}),t.jsx(P,{onClick:()=>{if(b.trim()){const o=g.find(Q=>Q.id===d);z.mutate({institution:o,label:b,operation_type:k})}},disabled:!b.trim()||z.isPending,className:"h-12 rounded-xl bg-indigo-600 px-4 text-white hover:bg-indigo-700",children:z.isPending?t.jsx(gt,{className:"h-4 w-4 animate-spin"}):t.jsx(it,{className:"h-4 w-4"})})]})}),t.jsx("div",{className:"space-y-2",children:(g.find(o=>o.id===d)?.settings?.custom_fields||[]).map(o=>t.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-100 bg-slate-50 p-3",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-bold text-slate-700",children:o.label}),t.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:o.operation_type==="depot"?"Dépôt":o.operation_type==="retrait"?"Retrait":"Les deux"})]}),t.jsx(P,{variant:"ghost",size:"icon",onClick:()=>{const Q=g.find(ie=>ie.id===d);H.mutate({institution:Q,fieldId:o.id})},className:"h-8 w-8 text-slate-400 hover:text-red-500",children:t.jsx(Pt,{className:"h-4 w-4"})})]},o.id))})]}),t.jsxs("div",{className:"mt-8 space-y-4 border-t border-slate-100 pt-6",children:[t.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[t.jsx(Qt,{className:"h-3 w-3"}),"Infos Agent (Retrait)"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(de,{className:"ml-1 text-[10px] font-bold text-slate-500",children:"Nom de l'Agent"}),t.jsx(fe,{placeholder:"ex: HAVIFIN BOUTIQUE",defaultValue:g.find(o=>o.id===d)?.settings?.withdrawal_agent_name||"",onBlur:o=>{const Q=g.find(ie=>ie.id===d);Q&&o.target.value!==(Q.settings?.withdrawal_agent_name||"")&&f.mutate({institution:Q,name:o.target.value,number:Q.settings?.withdrawal_agent_number||""})},className:"h-10 rounded-xl border-slate-200 text-sm"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx(de,{className:"ml-1 text-[10px] font-bold text-slate-500",children:"Numéro de l'Agent"}),t.jsx(fe,{placeholder:"ex: 123456",defaultValue:g.find(o=>o.id===d)?.settings?.withdrawal_agent_number||"",onBlur:o=>{const Q=g.find(ie=>ie.id===d);Q&&o.target.value!==(Q.settings?.withdrawal_agent_number||"")&&f.mutate({institution:Q,name:Q.settings?.withdrawal_agent_name||"",number:o.target.value})},className:"h-10 rounded-xl border-slate-200 text-sm"})]})]})]}),t.jsx(P,{onClick:()=>x(null),className:"mt-8 h-14 w-full rounded-2xl bg-slate-900 text-sm font-black tracking-widest text-white uppercase transition-all hover:bg-slate-800",children:"Terminer"})]})]})});let ue;return e[47]!==pe||e[48]!==xe?(ue=t.jsx(pe,{children:xe}),e[47]=pe,e[48]=xe,e[49]=ue):ue=e[49],t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-[1.5rem] border border-slate-100 bg-slate-100/50 p-4",children:[t.jsxs("div",{className:"ml-2 flex items-center gap-3",children:[L,t.jsxs("div",{children:[A,t.jsxs("p",{className:"text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:[g.length," Entités Enregistrées"]})]})]}),ae]}),me,je,t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:[_.map(oe),g.length===0&&!w&&t.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-slate-200 bg-slate-50/50 py-20",children:[t.jsx(ft,{className:"mb-4 h-16 w-16 text-slate-200"}),t.jsx("p",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Aucune institution configurée"})]})]}),Ne,ue]})}function _a(e){return e.stopPropagation()}function Sa(e){const{institution:s,name:a,number:i}=e,r=s.settings||{required_fields:[]};return ot.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...r,withdrawal_agent_name:a,withdrawal_agent_number:i}})}function Ca(e){const{institution:s,fieldId:a}=e,i=s.settings||{required_fields:[]},l=(i.custom_fields||[]).filter(d=>d.id!==a);return ot.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...i,custom_fields:l}})}function Da(e){return K.error(typeof e=="string"?e:"Erreur lors de l’ajout")}function Fa(e){const{institution:s,label:a,operation_type:i}=e,r=s.settings||{required_fields:[]},l=r.custom_fields||[],d=a.toLowerCase().replace(/\s+/g,"_").replace(/[^\w]/g,"");if(l.find(c=>c.id===d))return Promise.reject("Ce champ existe déjà");const x=[...l,{id:d,label:a,type:"text",operation_type:i}];return ot.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...r,custom_fields:x}})}function Ma(e){const{id:s,is_active:a}=e;return X.entities.Institution.update(s,{is_active:a})}function Aa(e){return X.entities.Institution.delete(e)}function qa(e){const{institution:s,field:a}=e,i=s.settings||{required_fields:[]},r=i.required_fields||[],l=r.includes(a)?r.filter(d=>d!==a):[...r,a];return ot.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...i,required_fields:l}})}function $a(){return K.error("Erreur lors de la mise à jour")}function Ra(e){const{id:s,data:a}=e,i=new FormData;return i.append("_method","PUT"),i.append("name",a.name),i.append("type",a.type),i.append("code",a.code),a.logo&&i.append("logo",a.logo),ot.post(`/api/institutions/${s}`,i,{headers:{"Content-Type":"multipart/form-data"}})}function Ua(){return K.error("Erreur lors de l'ajout de l'institution")}function Ea(e){const s=new FormData;return s.append("name",e.name),s.append("type",e.type),s.append("code",e.code),e.logo&&s.append("logo",e.logo),ot.post("/api/institutions",s,{headers:{"Content-Type":"multipart/form-data"}})}function Ta(){return X.entities.Institution.list()}const cs=[{id:"USD_CDF",label:"USD → CDF",from:"USD",to:"CDF"},{id:"EUR_CDF",label:"EUR → CDF",from:"EUR",to:"CDF"},{id:"EUR_USD",label:"EUR → USD",from:"EUR",to:"USD"},{id:"CDF_USD",label:"CDF → USD",from:"CDF",to:"USD"}];function Ia(){const e=ne.c(56),s=bt();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={currency_pair:"",buy_rate:"",sell_rate:""},e[0]=a):a=e[0];const[i,r]=V.useState(a),[l,d]=V.useState(!1);let x;e[1]===Symbol.for("react.memo_cache_sentinel")?(x={queryKey:["rates"],queryFn:Ha},e[1]=x):x=e[1];const{data:c,isLoading:y}=be(x);let m;e[2]!==c?(m=c===void 0?[]:c,e[2]=c,e[3]=m):m=e[3];const n=m;let p;e[4]!==s?(p={mutationFn:za,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),K.success("Taux mis à jour")}},e[4]=s,e[5]=p):p=e[5];const b=ge(p);let N;e[6]!==s?(N={mutationFn:Ya,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),r({currency_pair:"",buy_rate:"",sell_rate:""}),d(!1),K.success("Nouveau taux de change configuré")},onError:Oa},e[6]=s,e[7]=N):N=e[7];const k=ge(N);let T;e[8]!==s?(T={mutationFn:Pa,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),K.success("Configuration supprimée")}},e[8]=s,e[9]=T):T=e[9];const h=ge(T);let q;e[10]!==b?(q=(H,B,f)=>{f&&b.mutate({id:H.id,data:{[B]:parseFloat(f)}})},e[10]=b,e[11]=q):q=e[11];const w=q;let g,D;e[12]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600 shadow-lg shadow-indigo-600/20",children:t.jsx(ct,{className:"h-5 w-5 text-white"})}),D=t.jsx("h4",{className:"text-sm font-black tracking-tight text-slate-800 uppercase",children:"Marché des Devises"}),e[12]=g,e[13]=D):(g=e[12],D=e[13]);let _;e[14]!==n.length?(_=t.jsxs("div",{className:"ml-2 flex items-center gap-3",children:[g,t.jsxs("div",{children:[D,t.jsxs("p",{className:"text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:[n.length," Paires Actives"]})]})]}),e[14]=n.length,e[15]=_):_=e[15];let v;e[16]!==l?(v=()=>d(!l),e[16]=l,e[17]=v):v=e[17];const R=l?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 hover:bg-indigo-700";let j;e[18]!==R?(j=G("h-11 rounded-xl px-6 text-xs font-black tracking-widest uppercase transition-all",R),e[18]=R,e[19]=j):j=e[19];let S;e[20]!==l?(S=l?t.jsx(jt,{className:"mr-2 h-4 w-4"}):t.jsx(it,{className:"mr-2 h-4 w-4"}),e[20]=l,e[21]=S):S=e[21];const u=l?"Fermer":"Ajouter une Paire";let U;e[22]!==v||e[23]!==j||e[24]!==S||e[25]!==u?(U=t.jsxs(P,{onClick:v,className:j,children:[S,u]}),e[22]=v,e[23]=j,e[24]=S,e[25]=u,e[26]=U):U=e[26];let F;e[27]!==_||e[28]!==U?(F=t.jsxs("div",{className:"flex items-center justify-between rounded-[1.5rem] border border-slate-100 bg-slate-100/50 p-4",children:[_,U]}),e[27]=_,e[28]=U,e[29]=F):F=e[29];let C;e[30]!==k||e[31]!==i||e[32]!==l?(C=l&&t.jsx(Se.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsxs("div",{className:"relative rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-64 w-64 bg-indigo-500/10 blur-[100px]"}),t.jsxs("h5",{className:"mb-8 flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(it,{className:"h-6 w-6 text-indigo-400"}),"Nouvelle Configuration"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(de,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Paire de devises"}),t.jsxs(Et,{value:i.currency_pair,onValueChange:H=>r({...i,currency_pair:H}),children:[t.jsx(Tt,{className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500",children:t.jsx(It,{placeholder:"Choisir une paire"})}),t.jsx(Lt,{className:"border-slate-800 bg-slate-900 text-white",children:cs.map(La)})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(de,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:["Taux d'Achat (Le client donne"," ",i.currency_pair==="CDF_USD"?"CDF":"USD",", 1"," ",i.currency_pair==="CDF_USD"?"USD":i.currency_pair.split("_")[0]||"Unité"," ","=)"]}),t.jsxs("div",{className:"relative",children:[t.jsx(as,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-emerald-400"}),t.jsx(fe,{type:"number",placeholder:"0.00",value:i.buy_rate,onChange:H=>r({...i,buy_rate:H.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 pl-11 font-mono font-black text-white"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(de,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:["Taux de Vente (Le bureau donne"," ",i.currency_pair==="CDF_USD"?"CDF":"USD",", 1"," ",i.currency_pair==="CDF_USD"?"USD":i.currency_pair.split("_")[0]||"Unité"," ","=)"]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ee,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-blue-400"}),t.jsx(fe,{type:"number",placeholder:"0.00",value:i.sell_rate,onChange:H=>r({...i,sell_rate:H.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 pl-11 font-mono font-black text-white"})]})]})]}),t.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[t.jsx(P,{variant:"ghost",onClick:()=>d(!1),className:"h-12 rounded-xl px-8 text-xs font-black tracking-widest text-slate-400 uppercase hover:bg-white/5 hover:text-white",children:"Annuler"}),t.jsx(P,{onClick:()=>k.mutate(i),disabled:k.isPending||!i.currency_pair,className:"h-12 rounded-xl bg-white px-10 text-xs font-black tracking-widest text-slate-900 uppercase transition-all hover:bg-slate-100",children:k.isPending?t.jsx(gt,{className:"h-4 w-4 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Activer le Taux"]})})]})]})}),e[30]=k,e[31]=i,e[32]=l,e[33]=C):C=e[33];let M;e[34]!==C?(M=t.jsx(pt,{children:C}),e[34]=C,e[35]=M):M=e[35];let I;if(e[36]!==h||e[37]!==w||e[38]!==n){let H;e[40]!==h||e[41]!==w?(H=B=>{const f=cs.find(L=>L.id===B.currency_pair);return t.jsxs(Se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group rounded-[2rem] border-2 border-slate-50 bg-white p-8 shadow-xl shadow-slate-200/50 transition-all duration-300 hover:border-indigo-100",children:[t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-900 shadow-lg shadow-slate-900/10 transition-transform group-hover:rotate-6",children:t.jsx("span",{className:"text-sm font-black text-white",children:f?.from||B.currency_pair.split("_")[0]})}),t.jsx(Ee,{className:"h-4 w-4 text-slate-300"}),t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl border border-indigo-100 bg-indigo-50",children:t.jsx("span",{className:"text-sm font-black text-indigo-600",children:f?.to||B.currency_pair.split("_")[1]})})]}),t.jsx(P,{variant:"ghost",size:"icon",onClick:()=>h.mutate(B.id),className:"h-10 w-10 rounded-xl text-slate-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500",children:t.jsx(Pt,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between px-1",children:[t.jsxs("span",{className:"text-[9px] font-black tracking-widest text-slate-400 uppercase",children:["Achat (1"," ",B.currency_pair.split("_")[0]," ","=)"]}),t.jsx(as,{className:"h-3 w-3 text-emerald-500"})]}),t.jsx("div",{className:"relative",children:t.jsx(fe,{type:"number",value:B.buy_rate,onChange:L=>w(B,"buy_rate",L.target.value),className:"h-14 rounded-2xl border-transparent bg-slate-50 font-mono text-xl font-black text-slate-900 focus:border-indigo-500 focus:bg-white"})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between px-1",children:[t.jsxs("span",{className:"text-[9px] font-black tracking-widest text-slate-400 uppercase",children:["Vente (1"," ",B.currency_pair.split("_")[0]," ","=)"]}),t.jsx(Ee,{className:"h-3 w-3 text-blue-500"})]}),t.jsx("div",{className:"relative",children:t.jsx(fe,{type:"number",value:B.sell_rate,onChange:L=>w(B,"sell_rate",L.target.value),className:"h-14 rounded-2xl border-transparent bg-slate-50 font-mono text-xl font-black text-slate-900 focus:border-indigo-500 focus:bg-white"})})]})]})]},B.id)},e[40]=h,e[41]=w,e[42]=H):H=e[42],I=n.map(H),e[36]=h,e[37]=w,e[38]=n,e[39]=I}else I=e[39];let E;e[43]!==y||e[44]!==n.length?(E=n.length===0&&!y&&t.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-slate-200 bg-slate-50/50 py-20",children:[t.jsx(ct,{className:"mb-4 h-16 w-16 text-slate-200"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Aucun taux configuré"})]}),e[43]=y,e[44]=n.length,e[45]=E):E=e[45];let O;e[46]!==I||e[47]!==E?(O=t.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[I,E]}),e[46]=I,e[47]=E,e[48]=O):O=e[48];let z;e[49]!==y?(z=y&&t.jsx("div",{className:"flex justify-center p-20",children:t.jsx(js,{className:"h-10 w-10 animate-spin text-indigo-600"})}),e[49]=y,e[50]=z):z=e[50];let Y;return e[51]!==F||e[52]!==M||e[53]!==O||e[54]!==z?(Y=t.jsxs("div",{className:"space-y-8",children:[F,M,O,z]}),e[51]=F,e[52]=M,e[53]=O,e[54]=z,e[55]=Y):Y=e[55],Y}function La(e){return t.jsx(Fe,{value:e.id,className:"hover:bg-slate-800 focus:bg-slate-800",children:e.label},e.id)}async function Pa(e){await X.entities.ExchangeRate.delete(e)}function Oa(){return K.error("Erreur lors de la création du taux")}async function Ya(e){await X.entities.ExchangeRate.create({...e,buy_rate:parseFloat(e.buy_rate),sell_rate:parseFloat(e.sell_rate),is_active:!0})}async function za(e){const{id:s,data:a}=e;await X.entities.ExchangeRate.update(s,a)}function Ha(){return X.entities.ExchangeRate.filter({is_active:!0})}const Ba=["USD","CDF","EUR"];function Ka(e){const s=ne.c(43),{isOpen:a,onClose:i,onConfirm:r,shopName:l,isLoading:d}=e;let x;s[0]===Symbol.for("react.memo_cache_sentinel")?(x={USD:"0",CDF:"0",EUR:"0"},s[0]=x):x=s[0];const[c,y]=V.useState(x),[m,n]=V.useState("");let p;s[1]!==c||s[2]!==m||s[3]!==r?(p=E=>{E.preventDefault(),r({notes:m,globalAmounts:c})},s[1]=c,s[2]=m,s[3]=r,s[4]=p):p=s[4];const b=p;let N;s[5]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(Xt,{className:"h-6 w-6 text-indigo-600"}),s[5]=N):N=s[5];let k;s[6]!==l?(k=t.jsxs(os,{className:"flex items-center gap-2 text-2xl font-black",children:[N,"Ouvrir la Boutique : ",l]}),s[6]=l,s[7]=k):k=s[7];let T;s[8]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(qs,{children:"Initialisez la session de travail et le fond de caisse global."}),s[8]=T):T=s[8];let h;s[9]!==k?(h=t.jsxs(ds,{children:[k,T]}),s[9]=k,s[10]=h):h=s[10];let q;s[11]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(de,{htmlFor:"notes",className:"font-bold text-slate-700",children:"Note d'ouverture"}),s[11]=q):q=s[11];let w;s[12]===Symbol.for("react.memo_cache_sentinel")?(w=E=>n(E.target.value),s[12]=w):w=s[12];let g;s[13]!==m?(g=t.jsxs("div",{className:"space-y-2",children:[q,t.jsx(Ps,{id:"notes",value:m,onChange:w,placeholder:"Ex: Équipe du jour...",className:"rounded-xl bg-slate-50"})]}),s[13]=m,s[14]=g):g=s[14];let D;s[15]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsxs("h4",{className:"flex items-center gap-2 text-lg font-black text-slate-900",children:[t.jsx(Os,{className:"h-5 w-5 text-emerald-600"}),"Fond de Caisse (Global)"]}),s[15]=D):D=s[15];let _;s[16]!==c?(_=Ba.map(E=>t.jsxs("div",{className:"space-y-1",children:[t.jsx(de,{className:"text-xs font-bold text-slate-400",children:E}),t.jsx(fe,{type:"number",min:"0",value:c[E],onChange:O=>y(z=>({...z,[E]:O.target.value})),className:"h-9 text-sm font-bold"})]},E)),s[16]=c,s[17]=_):_=s[17];let v;s[18]!==_?(v=t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:t.jsx("div",{className:"grid grid-cols-3 gap-3",children:_})}),s[18]=_,s[19]=v):v=s[19];let R;s[20]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx("p",{className:"text-xs text-slate-500",children:"Ce montant sera disponible pour tous les guichets de la boutique."}),s[20]=R):R=s[20];let j;s[21]!==v?(j=t.jsxs("div",{className:"space-y-4",children:[D,v,R]}),s[21]=v,s[22]=j):j=s[22];let S;s[23]!==i?(S=t.jsx(P,{type:"button",variant:"outline",onClick:i,children:"Annuler"}),s[23]=i,s[24]=S):S=s[24];const u=d?"Ouverture...":"Ouvrir la Session";let U;s[25]!==d||s[26]!==u?(U=t.jsx(P,{type:"submit",disabled:d,className:"bg-indigo-600 font-bold hover:bg-indigo-700",children:u}),s[25]=d,s[26]=u,s[27]=U):U=s[27];let F;s[28]!==S||s[29]!==U?(F=t.jsxs($s,{children:[S,U]}),s[28]=S,s[29]=U,s[30]=F):F=s[30];let C;s[31]!==b||s[32]!==j||s[33]!==F||s[34]!==g?(C=t.jsxs("form",{onSubmit:b,className:"space-y-6 py-4",children:[g,j,F]}),s[31]=b,s[32]=j,s[33]=F,s[34]=g,s[35]=C):C=s[35];let M;s[36]!==C||s[37]!==h?(M=t.jsxs(xs,{className:"sm:max-w-[500px]",children:[h,C]}),s[36]=C,s[37]=h,s[38]=M):M=s[38];let I;return s[39]!==a||s[40]!==i||s[41]!==M?(I=t.jsx(ms,{open:a,onOpenChange:i,children:M}),s[39]=a,s[40]=i,s[41]=M,s[42]=I):I=s[42],I}function Va(){const e=bt(),[s,a]=V.useState("grid"),[i,r]=V.useState(null),[l,d]=V.useState(!1),[x,c]=V.useState(!1),[y,m]=V.useState(!1),[n,p]=V.useState(1),[b,N]=V.useState("all"),[k,T]=V.useState(""),[h,q]=V.useState(null),[w,g]=V.useState(""),{data:D=[]}=be({queryKey:["manager-shops"],queryFn:()=>X.entities.Shop.list()});ys.useEffect(()=>{D.length>0&&!h&&q(D[0].id)},[D,h]);const{data:_,isLoading:v}=be({queryKey:["sessions",h,n,b,k],queryFn:()=>X.entities.Session.list({shop_id:h?.toString(),status:b==="all"?void 0:b,date:k||void 0,page:n.toString()}),enabled:!!h}),{data:R}=be({queryKey:["counters",h],queryFn:()=>X.entities.Counter.list(h),enabled:!!h}),j=_?.data||[],S=_,{data:u,isLoading:U}=be({queryKey:["session-report",i],queryFn:()=>X.entities.Session.report(i),enabled:!!i}),F=j.find(f=>f.status==="open"),[C,M]=V.useState(!1),{data:I}=be({queryKey:["registers",h],queryFn:()=>Kt.get(`/api/cash/registers?shop_id=${h}`).then(f=>f.data),enabled:!!h&&C}),E=async f=>{if(h){d(!0);try{await X.entities.Session.create({session_date:Z().format("YYYY-MM-DD"),shop_id:h,notes:f.notes});let L=I?.[0]?.id;if(!L)try{K.info("Configuration automatique de la caisse principale..."),L=(await Kt.post("/api/cash/registers",{shop_id:h,name:"Caisse Principale"})).data.id,K.success("Caisse principale créée avec succès"),e.invalidateQueries({queryKey:["registers",h]})}catch(A){console.error("Failed to auto-create register",A),K.error("Impossible de créer la caisse automatique.")}if(L)try{await Kt.post("/api/cash/sessions",{cash_register_id:L,opening_amounts:f.globalAmounts,notes:"Session Caisse Globale"}),K.success("Session ouverte avec succès (Globale)")}catch(A){console.error("Failed to open global cash session",A),K.error("Erreur ouverture caisse globale")}else K.warning("Attention: Aucune caisse n’a pu être configurée. Seule la session administrative est ouverte.");e.invalidateQueries({queryKey:["sessions"]}),M(!1),g("")}catch(L){const A=L.response?.data?.error||L.response?.data?.message||"Erreur lors de l’ouverture";K.error(A)}finally{d(!1)}}},O=async f=>{c(!0);try{await X.entities.Session.close(f),K.success("Session fermée avec succès"),e.invalidateQueries({queryKey:["sessions"]})}catch(L){const A=L.response?.data?.error||L.response?.data?.message||"Erreur lors de la fermeture";K.error(A)}finally{c(!1)}},z=async f=>{try{await X.entities.Session.reopen(f),K.success("Session réouverte avec succès"),e.invalidateQueries({queryKey:["sessions"]})}catch(L){const A=L.response?.data?.error||L.response?.data?.message||"Erreur lors de la réouverture de la session";K.error(A)}},Y=D.find(f=>f.id===h),{auth:H}=Jt().props,B=H.user;return t.jsxs("div",{className:"animate-in space-y-8 pb-10 font-sans duration-500 fade-in slide-in-from-bottom-4",children:[t.jsxs("div",{className:"flex flex-col justify-between gap-6 md:flex-row md:items-center",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-3xl font-black tracking-tighter text-slate-900 uppercase",children:["Console"," ",t.jsx("span",{className:"text-indigo-600",children:"Sessions"})]}),t.jsx("p",{className:"mt-1 text-sm font-medium text-slate-400",children:"Pilotez l'activité journalière de vos guichets."})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[D.length>1&&t.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 bg-white p-1 shadow-sm",children:[t.jsx("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-2",children:t.jsx(Xt,{className:"h-4 w-4 text-slate-500"})}),t.jsx("select",{className:"cursor-pointer border-none bg-transparent pr-10 text-sm font-black text-slate-700 uppercase focus:ring-0",value:h||"",onChange:f=>q(Number(f.target.value)),children:D.map(f=>t.jsx("option",{value:f.id,children:f.name},f.id))})]}),t.jsxs("div",{className:"flex rounded-2xl border border-slate-200 bg-slate-100 p-1 shadow-inner",children:[t.jsxs("button",{onClick:()=>a("grid"),className:G("flex items-center gap-2 rounded-xl p-2 px-4 text-[10px] font-black tracking-widest uppercase transition-all duration-300",s==="grid"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"),children:[t.jsx(ea,{className:"h-4 w-4"})," Grille"]}),t.jsxs("button",{onClick:()=>a("list"),className:G("flex items-center gap-2 rounded-xl p-2 px-4 text-[10px] font-black tracking-widest uppercase transition-all duration-300",s==="list"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"),children:[t.jsx(sa,{className:"h-4 w-4"})," Liste"]})]})]})]}),t.jsxs(Ue,{className:"relative overflow-hidden rounded-[3rem] border-none bg-white shadow-2xl",children:[t.jsx("div",{className:G("absolute inset-0 z-0 opacity-[0.04]",F?"bg-emerald-500":"bg-indigo-600")}),t.jsx(lt,{className:"relative z-10 p-10",children:F?t.jsxs("div",{className:"flex flex-col items-center justify-between gap-12 lg:flex-row",children:[t.jsx("div",{className:"flex-1 space-y-8",children:t.jsxs("div",{className:"inline-flex items-center gap-6 rounded-[2.5rem] border border-slate-100 bg-slate-50 p-8 shadow-sm",children:[t.jsx("div",{className:"rounded-3xl bg-emerald-500 p-5 shadow-xl shadow-emerald-500/30",children:t.jsx(Ys,{className:"h-10 w-10 text-white"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-[9px] font-bold tracking-tighter text-emerald-600 uppercase",children:"Session Active"}),t.jsxs("span",{className:"text-[9px] font-bold tracking-widest text-slate-400 uppercase",children:["• ",Y?.name]})]}),t.jsx("div",{className:"text-4xl font-black tracking-tighter text-slate-900",children:Z(F.session_date).format("DD MMMM YYYY")}),t.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm font-bold text-slate-400",children:[t.jsxs("span",{className:"flex items-center gap-1.5",children:[t.jsx(rt,{className:"h-4 w-4 text-indigo-500"})," ",Z(F.opened_at).format("HH:mm")]}),t.jsx("span",{className:"h-4 w-[1px] bg-slate-200"}),t.jsxs("span",{className:"flex items-center gap-1.5",children:[t.jsx(mt,{className:"h-4 w-4 text-indigo-500"})," ",F.opened_by," ","(Opérateur)"]})]})]})]})}),t.jsxs("div",{className:"flex w-full flex-col items-center gap-4 lg:w-96",children:[t.jsxs(P,{onClick:()=>O(F.id),disabled:x,className:"flex h-24 w-full flex-col items-center justify-center gap-2 rounded-[2.5rem] bg-slate-900 text-sm font-black tracking-widest text-white uppercase shadow-2xl transition-all hover:bg-black active:scale-95",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(es,{className:G("h-7 w-7 text-red-500",x&&"animate-pulse")}),"Fermer la Boutique"]}),t.jsx("span",{className:"text-[9px] font-bold opacity-40",children:"Arrêter le flux de transactions"})]}),t.jsxs("div",{className:"flex w-full gap-4",children:[t.jsxs(P,{variant:"outline",onClick:()=>m(!0),className:"h-14 flex-1 rounded-2xl border-slate-200 bg-white font-black tracking-widest text-slate-900 uppercase shadow-sm transition-all hover:border-indigo-500 hover:text-indigo-600",children:[t.jsx(ct,{className:"mr-2 h-4 w-4 text-indigo-500"}),"Ajustement"]}),t.jsxs(P,{variant:"outline",onClick:()=>r(F.id),className:"h-14 flex-1 rounded-2xl border-slate-200 bg-white font-black tracking-widest text-slate-900 uppercase shadow-sm transition-all hover:border-indigo-500 hover:text-indigo-600",children:[t.jsx(Yt,{className:"mr-2 h-4 w-4 text-indigo-500"}),"Stats"]})]})]})]}):t.jsxs("div",{className:"flex flex-col items-center justify-between gap-12 lg:flex-row",children:[t.jsxs("div",{className:"flex-1 space-y-8",children:[t.jsxs("div",{className:"flex items-start gap-6",children:[t.jsx("div",{className:"rounded-[2rem] border border-slate-100 bg-slate-50 p-6",children:t.jsx(zs,{className:"h-10 w-10 text-slate-300"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"mb-2 text-3xl font-black tracking-tight text-slate-900",children:"Prêt pour l'ouverture ?"}),t.jsxs("p",{className:"max-w-lg leading-relaxed font-medium text-slate-500",children:["Aucune session n'est ouverte pour"," ",t.jsx("span",{className:"font-bold text-indigo-600",children:Y?.name})," ","aujourd'hui. Ouvrez une session pour autoriser les caissiers à traiter les tickets."]})]})]}),t.jsxs("div",{className:"max-w-xl space-y-4",children:[t.jsx(de,{className:"ml-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Commentaire d'ouverture"}),t.jsx(fe,{value:w,onChange:f=>g(f.target.value),placeholder:"Ex: Fond de caisse, équipe du jour...",className:"h-16 rounded-3xl border-slate-200 bg-slate-50 px-8 font-bold text-slate-700 transition-colors focus:bg-white"})]})]}),t.jsxs("div",{className:"group relative w-full overflow-hidden rounded-[3rem] bg-indigo-600 p-8 text-white shadow-2xl shadow-indigo-600/20 lg:w-96",children:[t.jsx("div",{className:"absolute top-0 right-0 h-40 w-40 translate-x-1/2 -translate-y-1/2 bg-white/10 blur-[60px]"}),t.jsxs("div",{className:"relative z-10 space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"rounded-2xl bg-white/20 p-4",children:t.jsx(Ot,{className:"h-8 w-8 text-white"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] leading-none font-black tracking-widest uppercase opacity-60",children:"Session du"}),t.jsx("div",{className:"text-2xl font-black",children:Z().format("DD/MM/YYYY")})]})]}),t.jsxs(P,{onClick:()=>M(!0),disabled:l||!h,className:"flex h-20 w-full items-center justify-center gap-3 rounded-[2rem] bg-white text-xs font-black tracking-[0.2em] text-indigo-600 uppercase shadow-xl transition-all hover:bg-slate-50 active:scale-95",children:[l?t.jsx(rt,{className:"h-5 w-5 animate-spin"}):t.jsx(zt,{className:"h-5 w-5 fill-indigo-600"}),"Ouvrir Session"]}),t.jsx("p",{className:"text-center text-[9px] font-black tracking-widest uppercase opacity-60",children:"Active le terminal client immédiatement"})]})]})]})}),t.jsx(Ka,{isOpen:C,onClose:()=>M(!1),onConfirm:E,shopName:Y?.name||"Boutique",counters:R||[],isLoading:l})]}),t.jsxs("div",{className:"space-y-8 pt-10",children:[t.jsxs("div",{className:"flex flex-col items-end justify-between gap-6 border-b border-slate-100 pb-8 lg:flex-row",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-12 w-1.5 rounded-full bg-indigo-500 shadow-[0_0_15px_rgba(79,70,229,0.5)]"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-2xl font-black tracking-tight text-slate-900 uppercase",children:"Registre Historique"}),t.jsxs("p",{className:"mt-0.5 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:[S?.total||0," sessions enregistrées au total"]})]})]}),t.jsxs("div",{className:"flex w-full flex-wrap items-center gap-4 lg:w-auto",children:[t.jsxs("div",{className:"flex h-14 flex-1 items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 shadow-sm transition-all focus-within:border-indigo-500 lg:min-w-[200px] lg:flex-none",children:[t.jsx(ut,{className:"h-4 w-4 text-slate-400"}),t.jsx("input",{type:"date",value:k,onChange:f=>{T(f.target.value),p(1)},className:"w-full border-none bg-transparent text-xs font-bold text-slate-600 focus:ring-0"})]}),t.jsxs("div",{className:"flex h-14 flex-1 items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 shadow-sm transition-all focus-within:border-indigo-500 lg:min-w-[200px] lg:flex-none",children:[t.jsx(Ws,{className:"h-4 w-4 text-slate-400"}),t.jsxs("select",{value:b,onChange:f=>{N(f.target.value),p(1)},className:"w-full border-none bg-transparent text-xs font-bold text-slate-600 uppercase focus:ring-0",children:[t.jsx("option",{value:"all",children:"Tous les Statuts"}),t.jsx("option",{value:"open",children:"En Cours"}),t.jsx("option",{value:"closed",children:"Clôturées"})]})]}),(k||b!=="all")&&t.jsx(P,{variant:"ghost",size:"icon",onClick:()=>{T(""),N("all")},className:"h-14 w-14 rounded-2xl text-red-500 hover:bg-red-50 hover:text-red-600",children:t.jsx(jt,{className:"h-5 w-5"})})]})]}),t.jsx(pt,{mode:"wait",children:v?t.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex h-96 flex-col items-center justify-center space-y-6",children:[t.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-indigo-100 border-t-indigo-600"}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Chargement du registre..."})]},"loading"):j.length===0?t.jsxs(Se.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex h-96 flex-col items-center justify-center space-y-4 rounded-[3rem] border-2 border-dashed border-slate-100",children:[t.jsx("div",{className:"rounded-full bg-slate-50 p-6 text-slate-300",children:t.jsx(ut,{className:"h-12 w-12"})}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucune session trouvée"})]},"empty"):t.jsx(Se.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:s==="grid"?t.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3",children:j.map(f=>t.jsx(Qa,{session:f,userRole:B?.role,onView:()=>r(f.id),onClose:()=>O(f.id),onReopen:()=>z(f.id)},f.id))}):t.jsx(Ga,{sessions:j,userRole:B?.role,onView:f=>r(f),onClose:f=>O(f),onReopen:f=>z(f)})},s)}),S&&S.last_page>1&&t.jsxs("div",{className:"mt-12 flex items-center justify-center gap-4 self-center rounded-3xl border border-white bg-white/50 p-4 backdrop-blur-sm",children:[t.jsx(P,{variant:"ghost",disabled:n===1,onClick:()=>p(n-1),className:"h-12 w-12 rounded-2xl border border-slate-100 hover:bg-white",children:t.jsx(Is,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[Array.from({length:Math.min(S.last_page,5)}).map((f,L)=>{const A=L+1;return t.jsx("button",{onClick:()=>p(A),className:G("h-12 w-12 rounded-2xl text-xs font-black transition-all",n===A?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"text-slate-400 hover:bg-white hover:text-slate-600"),children:A},A)}),S.last_page>5&&t.jsx("span",{className:"mx-2 text-slate-300",children:"•••"})]}),t.jsx(P,{variant:"ghost",disabled:n===S.last_page,onClick:()=>p(n+1),className:"h-12 w-12 rounded-2xl border border-slate-100 hover:bg-white",children:t.jsx(Wt,{className:"h-5 w-5"})})]})]}),t.jsx(pt,{children:i&&u&&t.jsx(Ja,{session:u?.session,stats:u?.statistics,clients:u?.clients,transactions:u?.transactions,activities:u?.activities,loading:U,onClose:()=>r(null)})})]})}function Qa(e){const s=ne.c(61),{session:a,userRole:i,onView:r,onClose:l,onReopen:d}=e;let x;s[0]!==a.session_date?(x=Z(a.session_date).isSame(Z(),"day"),s[0]=a.session_date,s[1]=x):x=s[1];const c=x,y=a.status==="open"?"animate-pulse bg-emerald-500":"bg-slate-200";let m;s[2]!==y?(m=G("absolute top-0 right-0 h-2 w-full",y),s[2]=y,s[3]=m):m=s[3];let n;s[4]!==m?(n=t.jsx("div",{className:m}),s[4]=m,s[5]=n):n=s[5];let p;s[6]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx("div",{className:"rounded-2xl bg-slate-50 p-4 transition-colors duration-500 group-hover:bg-indigo-50",children:t.jsx(Ot,{className:"h-7 w-7 text-slate-400 group-hover:text-indigo-500"})}),s[6]=p):p=s[6];const b=a.status==="open"?"border border-emerald-500/20 bg-emerald-500/10 text-emerald-600":"border border-slate-200 bg-slate-100 text-slate-500";let N;s[7]!==b?(N=G("flex items-center gap-1.5 rounded-full px-4 py-1.5 text-[10px] font-black tracking-widest uppercase",b),s[7]=b,s[8]=N):N=s[8];let k;s[9]!==a.status?(k=a.status==="open"?t.jsx("div",{className:"h-1.5 w-1.5 animate-ping rounded-full bg-emerald-500"}):null,s[9]=a.status,s[10]=k):k=s[10];const T=a.status==="open"?"En cours":"Terminé";let h;s[11]!==N||s[12]!==k||s[13]!==T?(h=t.jsxs("div",{className:"mb-8 flex items-start justify-between",children:[p,t.jsxs("div",{className:N,children:[k,T]})]}),s[11]=N,s[12]=k,s[13]=T,s[14]=h):h=s[14];let q;s[15]!==a.session_date?(q=Z(a.session_date).format("DD MMMM YYYY"),s[15]=a.session_date,s[16]=q):q=s[16];let w;s[17]!==q?(w=t.jsx("div",{className:"mb-1 text-2xl font-black tracking-tight text-slate-900",children:q}),s[17]=q,s[18]=w):w=s[18];let g;s[19]!==c?(g=c&&t.jsx("p",{className:"text-[10px] leading-none font-black tracking-widest text-indigo-500 uppercase",children:"Aujourd'hui"}),s[19]=c,s[20]=g):g=s[20];let D;s[21]!==w||s[22]!==g?(D=t.jsxs("div",{children:[w,g]}),s[21]=w,s[22]=g,s[23]=D):D=s[23];let _;s[24]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] uppercase opacity-60",children:"Ouverture"}),s[24]=_):_=s[24];let v;s[25]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx(rt,{className:"h-3 w-3"}),s[25]=v):v=s[25];let R;s[26]!==a.opened_at?(R=Z(a.opened_at).format("HH:mm"),s[26]=a.opened_at,s[27]=R):R=s[27];let j;s[28]!==R?(j=t.jsxs("div",{className:"flex flex-col gap-1",children:[_,t.jsxs("span",{className:"flex items-center gap-1.5 text-slate-700",children:[v,R]})]}),s[28]=R,s[29]=j):j=s[29];let S;s[30]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx("div",{className:"h-8 w-[1px] bg-slate-200"}),s[30]=S):S=s[30];let u;s[31]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] uppercase opacity-60",children:"Clôture"}),s[31]=u):u=s[31];let U;s[32]!==a.closed_at?(U=a.closed_at?t.jsxs(t.Fragment,{children:[t.jsx(rt,{className:"h-3 w-3"}),Z(a.closed_at).format("HH:mm")]}):"--:--",s[32]=a.closed_at,s[33]=U):U=s[33];let F;s[34]!==U?(F=t.jsxs("div",{className:"flex flex-col items-end gap-1",children:[u,t.jsx("span",{className:"flex items-center gap-1.5 text-slate-700",children:U})]}),s[34]=U,s[35]=F):F=s[35];let C;s[36]!==j||s[37]!==F?(C=t.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-50 bg-slate-50/50 p-4 text-xs font-bold text-slate-400",children:[j,S,F]}),s[36]=j,s[37]=F,s[38]=C):C=s[38];let M;s[39]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(Yt,{className:"mr-2 h-4 w-4"}),s[39]=M):M=s[39];let I;s[40]!==r?(I=t.jsxs(P,{onClick:r,className:"h-14 flex-1 rounded-2xl bg-indigo-600 text-[10px] font-black tracking-widest text-white uppercase shadow-lg shadow-indigo-600/20 transition-all hover:scale-105 hover:bg-indigo-700 active:scale-95",children:[M," Rapport"]}),s[40]=r,s[41]=I):I=s[41];let E;s[42]!==l||s[43]!==a.status?(E=a.status==="open"&&t.jsx(P,{onClick:l,variant:"outline",className:"h-14 w-14 rounded-2xl border-slate-200 text-red-500 transition-all hover:border-red-100 hover:bg-red-50 active:scale-95",children:t.jsx(es,{className:"h-5 w-5"})}),s[42]=l,s[43]=a.status,s[44]=E):E=s[44];let O;s[45]!==d||s[46]!==a.status||s[47]!==i?(O=a.status==="closed"&&i==="super-admin"&&t.jsx(P,{onClick:d,variant:"outline",className:"h-14 w-14 rounded-2xl border-indigo-200 text-indigo-500 transition-all hover:bg-indigo-50 active:scale-95",title:"Réouvrir la session",children:t.jsx(zt,{className:"h-5 w-5"})}),s[45]=d,s[46]=a.status,s[47]=i,s[48]=O):O=s[48];let z;s[49]!==I||s[50]!==E||s[51]!==O?(z=t.jsxs("div",{className:"flex gap-3 pt-4",children:[I,E,O]}),s[49]=I,s[50]=E,s[51]=O,s[52]=z):z=s[52];let Y;s[53]!==D||s[54]!==C||s[55]!==z?(Y=t.jsxs("div",{className:"space-y-6",children:[D,C,z]}),s[53]=D,s[54]=C,s[55]=z,s[56]=Y):Y=s[56];let H;return s[57]!==h||s[58]!==Y||s[59]!==n?(H=t.jsxs(Ue,{className:"group hover:shadow-3xl relative overflow-hidden rounded-[2.5rem] border border-none border-transparent bg-white p-8 shadow-xl shadow-slate-200/50 transition-all duration-500 hover:-translate-y-2 hover:border-indigo-100",children:[n,h,Y]}),s[57]=h,s[58]=Y,s[59]=n,s[60]=H):H=s[60],H}function Ga(e){const s=ne.c(14),{sessions:a,userRole:i,onView:r,onClose:l,onReopen:d}=e;let x;s[0]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase first:rounded-tl-[2.5rem]",children:"Date"}),t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Boutique / Guichet"}),t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Statut"}),t.jsx("th",{className:"p-8 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:"Horaire"}),t.jsx("th",{className:"p-8 text-right text-[11px] font-black tracking-widest text-slate-400 uppercase last:rounded-tr-[2.5rem]",children:"Actions"})]})}),s[0]=x):x=s[0];let c;if(s[1]!==l||s[2]!==d||s[3]!==r||s[4]!==a||s[5]!==i){let m;s[7]!==l||s[8]!==d||s[9]!==r||s[10]!==i?(m=n=>t.jsxs("tr",{className:"group transition-colors hover:bg-slate-50/50",children:[t.jsx("td",{className:"p-8 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-100 text-slate-400 transition-colors group-hover:bg-indigo-100 group-hover:text-indigo-600",children:t.jsx(Ot,{className:"h-5 w-5"})}),t.jsx("span",{className:"text-sm font-black tracking-tight text-slate-700",children:Z(n.session_date).format("DD/MM/YYYY")})]})}),t.jsx("td",{className:"p-8",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs font-bold text-slate-700",children:n.shop?.name||"Agence Centrale"}),t.jsxs("span",{className:"mt-0.5 text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:["ID: ",n.shop_id]})]})}),t.jsx("td",{className:"p-8",children:t.jsx("span",{className:G("rounded-full px-4 py-1.5 text-[9px] font-black tracking-widest uppercase",n.status==="open"?"border border-emerald-100 bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-400"),children:n.status==="open"?"En Cours":"Clôturé"})}),t.jsx("td",{className:"p-8",children:t.jsxs("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"mb-0.5 text-[9px] uppercase opacity-50",children:"Ouvert"}),t.jsx("span",{className:"text-slate-600",children:Z(n.opened_at).format("HH:mm")})]}),t.jsx(ct,{className:"h-3 w-3 opacity-20"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"mb-0.5 text-[9px] uppercase opacity-50",children:"Fermé"}),t.jsx("span",{className:"text-slate-600",children:n.closed_at?Z(n.closed_at).format("HH:mm"):"--:--"})]})]})}),t.jsx("td",{className:"p-8 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsxs(P,{onClick:()=>r(n.id),className:"h-10 rounded-xl bg-indigo-50 px-4 text-[10px] font-black tracking-widest text-indigo-600 uppercase shadow-none transition-all hover:bg-indigo-600 hover:text-white",children:[t.jsx(Yt,{className:"mr-2 h-3.5 w-3.5"})," ","Rapport"]}),n.status==="open"&&t.jsx(P,{onClick:()=>l(n.id),size:"icon",className:"h-10 w-10 rounded-xl bg-red-50 text-red-500 shadow-none transition-all hover:bg-red-500 hover:text-white",children:t.jsx(es,{className:"h-4 w-4"})}),n.status==="closed"&&i==="super-admin"&&t.jsx(P,{onClick:()=>d(n.id),size:"icon",className:"h-10 w-10 rounded-xl bg-indigo-50 text-indigo-500 shadow-none transition-all hover:bg-indigo-500 hover:text-white",title:"Réouvrir la session",children:t.jsx(zt,{className:"h-4 w-4"})})]})})]},n.id),s[7]=l,s[8]=d,s[9]=r,s[10]=i,s[11]=m):m=s[11],c=a.map(m),s[1]=l,s[2]=d,s[3]=r,s[4]=a,s[5]=i,s[6]=c}else c=s[6];let y;return s[12]!==c?(y=t.jsx("div",{className:"w-full overflow-hidden rounded-[2.5rem] border border-slate-100 bg-white shadow-xl shadow-slate-200/30",children:t.jsxs("table",{className:"w-full border-collapse text-left",children:[x,t.jsx("tbody",{className:"divide-y divide-slate-100",children:c})]})}),s[12]=c,s[13]=y):y=s[13],y}function Ja(e){const s=ne.c(47),{session:a,stats:i,transactions:r,loading:l,onClose:d}=e;let x,c,y;s[0]===Symbol.for("react.memo_cache_sentinel")?(x={opacity:0},c={opacity:1},y={opacity:0},s[0]=x,s[1]=c,s[2]=y):(x=s[0],c=s[1],y=s[2]);let m;s[3]!==d?(m=t.jsx(Se.div,{initial:x,animate:c,exit:y,onClick:d,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-xl"}),s[3]=d,s[4]=m):m=s[4];let n,p,b;s[5]===Symbol.for("react.memo_cache_sentinel")?(n={opacity:0,scale:.9,y:30},p={opacity:1,scale:1,y:0},b={opacity:0,scale:.9,y:30},s[5]=n,s[6]=p,s[7]=b):(n=s[5],p=s[6],b=s[7]);let N;s[8]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx("div",{className:"rounded-[2rem] bg-indigo-600 p-5 shadow-xl shadow-indigo-600/30",children:t.jsx(Ee,{className:"h-10 w-10 text-white"})}),s[8]=N):N=s[8];let k;s[9]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx("h3",{className:"text-3xl font-black tracking-tighter text-slate-900 uppercase",children:"Rapport de Session"}),s[9]=k):k=s[9];const T=a?.status==="open"?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-500";let h;s[10]!==T?(h=G("rounded-full px-4 py-1.5 text-[10px] font-black tracking-widest uppercase",T),s[10]=T,s[11]=h):h=s[11];const q=a?.status==="open"?"Live":"Archivé";let w;s[12]!==h||s[13]!==q?(w=t.jsxs("div",{className:"mb-1 flex items-center gap-3",children:[k,t.jsx("span",{className:h,children:q})]}),s[12]=h,s[13]=q,s[14]=w):w=s[14];let g;s[15]!==a?(g=a?Z(a.session_date).format("dddd DD MMMM YYYY"):"Chargement...",s[15]=a,s[16]=g):g=s[16];const D=a?.shop?.name;let _;s[17]!==g||s[18]!==D?(_=t.jsxs("p",{className:"text-sm font-bold text-slate-400",children:[g," ","• Guichet ",D]}),s[17]=g,s[18]=D,s[19]=_):_=s[19];let v;s[20]!==w||s[21]!==_?(v=t.jsxs("div",{className:"flex items-center gap-6",children:[N,t.jsxs("div",{children:[w,_]})]}),s[20]=w,s[21]=_,s[22]=v):v=s[22];let R;s[23]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(jt,{className:"h-8 w-8"}),s[23]=R):R=s[23];let j;s[24]!==d?(j=t.jsx(P,{onClick:d,variant:"ghost",className:"h-16 w-16 rounded-[2rem] bg-slate-50 text-slate-400 transition-all hover:bg-red-50 hover:text-red-500",children:R}),s[24]=d,s[25]=j):j=s[25];let S;s[26]!==v||s[27]!==j?(S=t.jsxs("div",{className:"flex shrink-0 items-center justify-between border-b border-slate-100 bg-white p-8 md:p-12",children:[v,j]}),s[26]=v,s[27]=j,s[28]=S):S=s[28];let u;s[29]!==l||s[30]!==i?.cashier_stats||s[31]!==i?.total_clients||s[32]!==i?.total_transactions||s[33]!==i?.volume_cdf||s[34]!==i?.volume_usd||s[35]!==r?(u=t.jsx("div",{className:"flex-1 space-y-12 overflow-y-auto p-8 md:p-12",children:l?t.jsxs("div",{className:"flex h-96 flex-col items-center justify-center space-y-6",children:[t.jsx("div",{className:"h-20 w-20 animate-spin rounded-full border-4 border-indigo-100 border-t-indigo-600"}),t.jsx("p",{className:"animate-pulse text-sm font-black tracking-widest text-slate-400 uppercase",children:"Synthèse des données..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4",children:[t.jsx(Ut,{title:"Clients",value:i?.total_clients,icon:mt,color:"blue"}),t.jsx(Ut,{title:"Transactions",value:i?.total_transactions,icon:ct,color:"emerald"}),t.jsx(Ut,{title:"Volume USD",value:`$ ${i?.volume_usd?.toLocaleString()}`,icon:Ee,color:"indigo"}),t.jsx(Ut,{title:"Volume CDF",value:`${i?.volume_cdf?.toLocaleString()} FC`,icon:ft,color:"amber"})]}),t.jsxs("div",{className:"space-y-12",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-10 w-1 rounded-full bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.5)]"}),t.jsx("h5",{className:"text-xl font-black tracking-tight text-slate-900 uppercase",children:"Flux Financier"})]}),t.jsx("div",{className:"overflow-hidden rounded-[2.5rem] border border-slate-100 bg-white shadow-xl shadow-slate-200/20",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50/50",children:[t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Heure"}),t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Opération"}),t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Montant Envoyé"}),t.jsx("th",{className:"p-6 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Montant Reçu"}),t.jsx("th",{className:"p-6 text-right text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Commission"})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[r?.map(Wa),r?.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"p-12 text-center text-xs font-black tracking-widest text-slate-300 uppercase",children:"Aucune transaction"})})]})]})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-10 w-1 rounded-full bg-indigo-500"}),t.jsx("h5",{className:"text-xl font-black tracking-tight text-slate-900 uppercase",children:"Performance Opérateurs"})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i?.cashier_stats?.map(Xa)})]})]})]})}),s[29]=l,s[30]=i?.cashier_stats,s[31]=i?.total_clients,s[32]=i?.total_transactions,s[33]=i?.volume_cdf,s[34]=i?.volume_usd,s[35]=r,s[36]=u):u=s[36];let U;s[37]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsxs("div",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:["Document généré le ",Z().format("DD/MM/YYYY HH:mm")]}),s[37]=U):U=s[37];let F;s[38]!==d?(F=t.jsxs("div",{className:"flex shrink-0 items-center justify-between border-t border-slate-100 bg-white p-8 md:p-12",children:[U,t.jsx(P,{onClick:d,className:"h-14 rounded-2xl bg-slate-900 px-10 text-xs font-black tracking-widest text-white uppercase",children:"Fermer le Rapport"})]}),s[38]=d,s[39]=F):F=s[39];let C;s[40]!==S||s[41]!==u||s[42]!==F?(C=t.jsxs(Se.div,{initial:n,animate:p,exit:b,className:"relative flex max-h-[90vh] w-full max-w-6xl flex-col overflow-hidden rounded-[3.5rem] border border-white/20 bg-[#f8fafc] shadow-[0_40px_100px_rgba(0,0,0,0.5)]",children:[S,u,F]}),s[40]=S,s[41]=u,s[42]=F,s[43]=C):C=s[43];let M;return s[44]!==C||s[45]!==m?(M=t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 font-sans md:p-12",children:[m,C]}),s[44]=C,s[45]=m,s[46]=M):M=s[46],M}function Xa(e,s){return t.jsxs("div",{className:"group rounded-[2rem] border border-slate-100 bg-white p-8 shadow-lg shadow-slate-200/30 transition-all hover:border-indigo-200",children:[t.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[t.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-indigo-50 text-xl font-black text-indigo-600 transition-all group-hover:bg-indigo-600 group-hover:text-white",children:e.cashier.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-black tracking-tighter text-slate-800",children:e.cashier}),t.jsx("div",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Opérateur"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"rounded-xl bg-slate-50 p-4",children:[t.jsx("div",{className:"mb-1 text-[9px] font-black text-slate-400 uppercase",children:"Appels"}),t.jsx("div",{className:"text-xl font-black text-slate-700",children:e.clients_called})]}),t.jsxs("div",{className:"rounded-xl bg-slate-50 p-4",children:[t.jsx("div",{className:"mb-1 text-[9px] font-black text-slate-400 uppercase",children:"Succès"}),t.jsx("div",{className:"text-xl font-black text-emerald-600",children:e.transactions_completed})]})]})]},s)}function Wa(e){return t.jsxs("tr",{className:"transition-colors hover:bg-slate-50/30",children:[t.jsx("td",{className:"p-6 text-xs font-bold text-slate-500",children:Z(e.created_at).format("HH:mm:ss")}),t.jsx("td",{className:"p-6",children:t.jsx("span",{className:"text-xs font-black tracking-tighter text-slate-800 uppercase",children:e.operation_type})}),t.jsx("td",{className:"p-6",children:t.jsxs("span",{className:"text-sm font-black text-emerald-600",children:[e.amount_from?.toLocaleString()," ",e.currency_from]})}),t.jsx("td",{className:"p-6",children:t.jsxs("span",{className:"text-sm font-black text-slate-600",children:[e.amount_to?.toLocaleString()," ",e.currency_to]})}),t.jsx("td",{className:"p-6 text-right",children:t.jsxs("span",{className:"text-xs font-black text-indigo-600",children:["$"," ",e.commission]})})]},e.id)}function Ut(e){const s=ne.c(21),{title:a,value:i,icon:r,color:l}=e;let d,x,c,y;if(s[0]!==r||s[1]!==l){const k={blue:"bg-blue-500 text-blue-500 border-blue-100 shadow-blue-500/20",emerald:"bg-emerald-500 text-emerald-500 border-emerald-100 shadow-emerald-500/20",indigo:"bg-indigo-500 text-indigo-500 border-indigo-100 shadow-indigo-500/20",amber:"bg-amber-500 text-amber-500 border-amber-100 shadow-amber-500/20"};y="flex flex-col items-center rounded-[2.5rem] border border-slate-100 bg-white p-8 text-center shadow-xl shadow-slate-200/30",c=G("mb-6 rounded-2xl p-5 shadow-xl",k[l].split(" ")[0],"bg-opacity-10"),d=r,x=G("h-8 w-8",k[l].split(" ")[1]),s[0]=r,s[1]=l,s[2]=d,s[3]=x,s[4]=c,s[5]=y}else d=s[2],x=s[3],c=s[4],y=s[5];let m;s[6]!==d||s[7]!==x?(m=t.jsx(d,{className:x}),s[6]=d,s[7]=x,s[8]=m):m=s[8];let n;s[9]!==c||s[10]!==m?(n=t.jsx("div",{className:c,children:m}),s[9]=c,s[10]=m,s[11]=n):n=s[11];let p;s[12]!==a?(p=t.jsx("div",{className:"mb-2 text-[11px] font-black tracking-widest text-slate-400 uppercase",children:a}),s[12]=a,s[13]=p):p=s[13];let b;s[14]!==i?(b=t.jsx("div",{className:"text-3xl leading-none font-black tracking-tighter text-slate-900",children:i}),s[14]=i,s[15]=b):b=s[15];let N;return s[16]!==y||s[17]!==n||s[18]!==p||s[19]!==b?(N=t.jsxs("div",{className:y,children:[n,p,b]}),s[16]=y,s[17]=n,s[18]=p,s[19]=b,s[20]=N):N=s[20],N}function Za(){const e=ne.c(96),{auth:s}=Jt().props,a=s.user?.role==="super-admin",[i,r]=V.useState(!1),[l,d]=V.useState(null),x=bt(),c=a?"manager":"cashier";let y;e[0]===Symbol.for("react.memo_cache_sentinel")?(y=[],e[0]=y):y=e[0];let m;e[1]!==c?(m={name:"",email:"",password:"",role:c,is_active:!0,shop_ids:y},e[1]=c,e[2]=m):m=e[2];const[n,p]=V.useState(m);let b;e[3]===Symbol.for("react.memo_cache_sentinel")?(b=["shops"],e[3]=b):b=e[3];let N;e[4]!==a?(N={queryKey:b,queryFn:X.entities.Shop.list,enabled:a},e[4]=a,e[5]=N):N=e[5];const{data:k}=be(N);let T;e[6]===Symbol.for("react.memo_cache_sentinel")?(T={queryKey:["users"],queryFn:X.entities.User.list},e[6]=T):T=e[6];const{data:h,isLoading:q}=be(T);let w;e[7]!==x?(w={mutationFn:X.entities.User.create,onSuccess:()=>{x.invalidateQueries({queryKey:["users"]}),r(!1),p({name:"",email:"",password:"",role:"cashier",is_active:!0}),K.success("Utilisateur créé avec succès")},onError:nl},e[7]=x,e[8]=w):w=e[8];const g=ge(w);let D;e[9]!==x?(D={mutationFn:il,onSuccess:()=>{x.invalidateQueries({queryKey:["users"]}),d(null),p({name:"",email:"",password:"",role:"cashier",is_active:!0}),K.success("Utilisateur mis à jour avec succès")},onError:ll},e[9]=x,e[10]=D):D=e[10];const _=ge(D);let v;e[11]!==x?(v={mutationFn:al,onSuccess:()=>{x.invalidateQueries({queryKey:["users"]}),K.success("Utilisateur supprimé avec succès")},onError:sl},e[11]=x,e[12]=v):v=e[12];const R=ge(v);let j;e[13]!==g||e[14]!==l||e[15]!==n||e[16]!==_?(j=$=>{$.preventDefault(),l?_.mutate({id:l.id,data:n}):g.mutate(n)},e[13]=g,e[14]=l,e[15]=n,e[16]=_,e[17]=j):j=e[17];const S=j;let u;e[18]===Symbol.for("react.memo_cache_sentinel")?(u=$=>{d($),p({name:$.name,email:$.email,role:$.role,is_active:$.is_active}),r(!0)},e[18]=u):u=e[18];const U=u;let F;e[19]!==R?(F=$=>{confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?")&&R.mutate($)},e[19]=R,e[20]=F):F=e[20];const C=F,M=tl;let I;e[21]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Gestion des utilisateurs"}),t.jsx("p",{className:"text-slate-500",children:"Gérez les accès et les rôles des utilisateurs"})]}),e[21]=I):I=e[21];let E;e[22]!==a?(E=()=>{d(null),p({name:"",email:"",password:"",role:a?"manager":"cashier",is_active:!0}),r(!0)},e[22]=a,e[23]=E):E=e[23];let O;e[24]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(it,{className:"mr-2 h-4 w-4"}),e[24]=O):O=e[24];const z=a?"Nouvel utilisateur":"Nouveau Caissier";let Y;e[25]!==E||e[26]!==z?(Y=t.jsxs("div",{className:"flex items-center justify-between",children:[I,t.jsxs(P,{onClick:E,className:"bg-[#1f61e4] hover:bg-[#1f61e4]/90",children:[O,z]})]}),e[25]=E,e[26]=z,e[27]=Y):Y=e[27];let H;e[28]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(ps,{children:t.jsxs(ht,{children:[t.jsx(_e,{children:"Nom"}),t.jsx(_e,{children:"Email"}),t.jsx(_e,{children:"Boutique"}),t.jsx(_e,{children:"Rôle"}),t.jsx(_e,{children:"Statut"}),t.jsx(_e,{className:"text-right",children:"Actions"})]})}),e[28]=H):H=e[28];let B;e[29]!==C||e[30]!==q||e[31]!==h?(B=q?t.jsx(ht,{children:t.jsx(ke,{colSpan:5,className:"h-24 text-center",children:"Chargement..."})}):h?.map($=>t.jsxs(ht,{children:[t.jsx(ke,{className:"font-medium",children:$.name}),t.jsx(ke,{children:$.email}),t.jsx(ke,{children:t.jsx("div",{className:"flex flex-wrap gap-1",children:$.shops&&$.shops.length>0?$.shops.map(el):t.jsx("span",{className:"text-[10px] text-slate-400 italic",children:"Aucune"})})}),t.jsx(ke,{children:M($.role)}),t.jsx(ke,{children:t.jsx(ce,{variant:$.is_active?"default":"destructive",className:$.is_active?"bg-green-500 hover:bg-green-600":"",children:$.is_active?"Actif":"Inactif"})}),t.jsx(ke,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(P,{variant:"ghost",size:"icon",onClick:()=>U($),className:"h-8 w-8 text-slate-500 hover:text-[#1f61e4]",children:t.jsx(Hs,{className:"h-4 w-4"})}),t.jsx(P,{variant:"ghost",size:"icon",onClick:()=>C($.id),className:"h-8 w-8 text-slate-500 hover:text-red-600",children:t.jsx(Pt,{className:"h-4 w-4"})})]})})]},$.id)),e[29]=C,e[30]=q,e[31]=h,e[32]=B):B=e[32];let f;e[33]!==B?(f=t.jsx("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:t.jsxs(fs,{children:[H,t.jsx(gs,{children:B})]})}),e[33]=B,e[34]=f):f=e[34];const L=l?"Modifier l'utilisateur":"Nouvel utilisateur";let A;e[35]!==L?(A=t.jsx(ds,{children:t.jsx(os,{children:L})}),e[35]=L,e[36]=A):A=e[36];let te;e[37]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(de,{htmlFor:"name",children:"Nom complet"}),e[37]=te):te=e[37];let se;e[38]!==n?(se=$=>p({...n,name:$.target.value}),e[38]=n,e[39]=se):se=e[39];let J;e[40]!==n.name||e[41]!==se?(J=t.jsxs("div",{className:"space-y-2",children:[te,t.jsx(fe,{id:"name",value:n.name,onChange:se,required:!0})]}),e[40]=n.name,e[41]=se,e[42]=J):J=e[42];let ee;e[43]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(de,{htmlFor:"email",children:"Email"}),e[43]=ee):ee=e[43];let le;e[44]!==n?(le=$=>p({...n,email:$.target.value}),e[44]=n,e[45]=le):le=e[45];let ae;e[46]!==n.email||e[47]!==le?(ae=t.jsxs("div",{className:"space-y-2",children:[ee,t.jsx(fe,{id:"email",type:"email",value:n.email,onChange:le,required:!0})]}),e[46]=n.email,e[47]=le,e[48]=ae):ae=e[48];let W;e[49]!==l||e[50]!==n?(W=!l&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(de,{htmlFor:"password",children:"Mot de passe"}),t.jsx(fe,{id:"password",type:"password",value:n.password,onChange:$=>p({...n,password:$.target.value}),required:!l})]}),e[49]=l,e[50]=n,e[51]=W):W=e[51];let me;e[52]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(de,{htmlFor:"role",children:"Rôle"}),e[52]=me):me=e[52];let he;e[53]!==n?(he=$=>p({...n,role:$}),e[53]=n,e[54]=he):he=e[54];let je;e[55]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(Tt,{children:t.jsx(It,{placeholder:"Sélectionner un rôle"})}),e[55]=je):je=e[55];let oe;e[56]!==a?(oe=a&&t.jsx(Fe,{value:"manager",children:"Manager"}),e[56]=a,e[57]=oe):oe=e[57];let Ne,pe;e[58]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(Fe,{value:"cashier",children:"Caissier"}),pe=t.jsx(Fe,{value:"client",children:"Client"}),e[58]=Ne,e[59]=pe):(Ne=e[58],pe=e[59]);let xe;e[60]!==oe?(xe=t.jsxs(Lt,{children:[oe,Ne,pe]}),e[60]=oe,e[61]=xe):xe=e[61];let ue;e[62]!==n.role||e[63]!==he||e[64]!==xe?(ue=t.jsxs("div",{className:"space-y-2",children:[me,t.jsxs(Et,{value:n.role,onValueChange:he,disabled:!1,children:[je,xe]})]}),e[62]=n.role,e[63]=he,e[64]=xe,e[65]=ue):ue=e[65];let o;e[66]!==k||e[67]!==n||e[68]!==a?(o=a&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(de,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Assigner aux Boutiques"}),t.jsx("div",{className:"grid max-h-32 grid-cols-2 gap-2 overflow-y-auto rounded-lg border p-1",children:k?.map($=>t.jsxs("div",{onClick:()=>{const $e=n.shop_ids||[],dt=$e.includes($.id)?$e.filter(Re=>Re!==$.id):[...$e,$.id];p({...n,shop_ids:dt})},className:`flex cursor-pointer items-center gap-2 rounded-md border p-2 transition-colors ${n.shop_ids?.includes($.id)?"border-indigo-200 bg-indigo-50":"bg-white hover:bg-slate-50"}`,children:[t.jsx("div",{className:`h-3 w-3 rounded-sm border ${n.shop_ids?.includes($.id)?"border-indigo-600 bg-indigo-600":"border-slate-300"}`}),t.jsx("span",{className:"text-xs font-bold",children:$.name})]},$.id))})]}),e[66]=k,e[67]=n,e[68]=a,e[69]=o):o=e[69];let Q;e[70]!==l||e[71]!==n?(Q=l&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"is_active",checked:n.is_active,onChange:$=>p({...n,is_active:$.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),t.jsx(de,{htmlFor:"is_active",children:"Compte actif"})]}),e[70]=l,e[71]=n,e[72]=Q):Q=e[72];let ie;e[73]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(P,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Annuler"}),e[73]=ie):ie=e[73];const Me=g.isPending||_.isPending,Ae=g.isPending||_.isPending?"Enregistrement...":"Enregistrer";let ve;e[74]!==Me||e[75]!==Ae?(ve=t.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[ie,t.jsx(P,{type:"submit",className:"bg-[#1f61e4] hover:bg-[#1f61e4]/90",disabled:Me,children:Ae})]}),e[74]=Me,e[75]=Ae,e[76]=ve):ve=e[76];let De;e[77]!==S||e[78]!==J||e[79]!==ae||e[80]!==W||e[81]!==ue||e[82]!==o||e[83]!==Q||e[84]!==ve?(De=t.jsxs("form",{onSubmit:S,className:"space-y-4",children:[J,ae,W,ue,o,Q,ve]}),e[77]=S,e[78]=J,e[79]=ae,e[80]=W,e[81]=ue,e[82]=o,e[83]=Q,e[84]=ve,e[85]=De):De=e[85];let we;e[86]!==A||e[87]!==De?(we=t.jsxs(xs,{children:[A,De]}),e[86]=A,e[87]=De,e[88]=we):we=e[88];let ye;e[89]!==i||e[90]!==we?(ye=t.jsx(ms,{open:i,onOpenChange:r,children:we}),e[89]=i,e[90]=we,e[91]=ye):ye=e[91];let qe;return e[92]!==Y||e[93]!==f||e[94]!==ye?(qe=t.jsxs("div",{className:"space-y-6",children:[Y,f,ye]}),e[92]=Y,e[93]=f,e[94]=ye,e[95]=qe):qe=e[95],qe}function el(e){return t.jsx(ce,{variant:"outline",className:"py-0 text-[10px]",children:e.name},e.id)}function tl(e){switch(e){case"manager":return t.jsxs(ce,{className:"bg-purple-500 hover:bg-purple-600",children:[t.jsx(Qt,{className:"mr-1 h-3 w-3"})," Manager"]});case"cashier":return t.jsxs(ce,{className:"bg-pink-500 hover:bg-pink-600",children:[t.jsx(oa,{className:"mr-1 h-3 w-3"})," Caissier"]});case"client":return t.jsxs(ce,{className:"bg-cyan-500 hover:bg-cyan-600",children:[t.jsx(nt,{className:"mr-1 h-3 w-3"})," Client"]});default:return t.jsx(ce,{variant:"secondary",children:e})}}function sl(e){K.error(e.message||"Erreur lors de la suppression")}function al(e){return X.entities.User.delete(e)}function ll(e){K.error(e.message||"Erreur lors de la mise à jour")}function il(e){const{id:s,data:a}=e;return X.entities.User.update(s,a)}function nl(e){K.error(e.message||"Erreur lors de la création")}function ei(){const e=ne.c(159),{auth:s}=Jt().props,i=s.user?.role==="super-admin",r=bt(),[l,d]=V.useState(i?"shops":"overview");let x;e[0]===Symbol.for("react.memo_cache_sentinel")?(x=Z().format("YYYY-MM-DD"),e[0]=x):x=e[0];const[c,y]=V.useState(x),[m,n]=V.useState("");let p;e[1]!==m||e[2]!==c?(p=["all-clients",c,m],e[1]=m,e[2]=c,e[3]=p):p=e[3];let b;e[4]!==l||e[5]!==m||e[6]!==c?(b=()=>X.entities.Client.list({sort:"-created_at",limit:500,date:l==="clients"?void 0:c,search:m}),e[4]=l,e[5]=m,e[6]=c,e[7]=b):b=e[7];let N;e[8]!==p||e[9]!==b?(N={queryKey:p,queryFn:b,refetchInterval:3e4},e[8]=p,e[9]=b,e[10]=N):N=e[10];const{data:k,isLoading:T}=be(N);let h;e[11]!==k?(h=k===void 0?[]:k,e[11]=k,e[12]=h):h=e[12];const q=h;let w;e[13]!==c?(w={queryKey:["all-transactions",c],queryFn:()=>X.entities.Transaction.list({sort:"-created_at",limit:500,date:c}),refetchInterval:3e4},e[13]=c,e[14]=w):w=e[14];const{data:g,isLoading:D}=be(w);let _;e[15]!==g?(_=g===void 0?[]:g,e[15]=g,e[16]=_):_=e[16];const v=_;let R;e[17]!==c?(R={queryKey:["all-cash-movements",c],queryFn:async()=>(await X.entities.CashSession.listMovements({date:c})).data||[],refetchInterval:3e4},e[17]=c,e[18]=R):R=e[18];const{data:j}=be(R);let S;e[19]!==j?(S=j===void 0?[]:j,e[19]=j,e[20]=S):S=e[20];const u=S;let U;e[21]!==c?(U=Z(c).startOf("day").isSame(Z().startOf("day")),e[21]=c,e[22]=U):U=e[22];const F=U,C=q,M=v;let I;e[23]!==M?(I=M.filter(ml).reduce(xl,0),e[23]=M,e[24]=I):I=e[24];const E=I;let O;e[25]!==M?(O=M.filter(dl).reduce(ol,0),e[25]=M,e[26]=O):O=e[26];const z=O;let Y;e[27]!==M?(Y=M.reduce(cl,0),e[27]=M,e[28]=Y):Y=e[28];const H=Y,B=C.length;let f;e[29]!==C?(f=C.filter(rl),e[29]=C,e[30]=f):f=e[30];let L;e[31]!==C.length||e[32]!==F||e[33]!==f.length||e[34]!==H||e[35]!==z||e[36]!==E?(L={todayClients:B,waiting:f.length,volumeUSD:E,volumeCDF:z,commissions:H,isCurrentDay:F},e[31]=C.length,e[32]=F,e[33]=f.length,e[34]=H,e[35]=z,e[36]=E,e[37]=L):L=e[37];const A=L;let te;if(e[38]!==q){const re=new Map;q.forEach(st=>{const xt=st.phone;if(xt)if(!re.has(xt))re.set(xt,st);else{const vs=re.get(xt);st.is_registered&&!vs.is_registered&&re.set(xt,st)}}),te=Array.from(re.values()),e[38]=q,e[39]=te}else te=e[39];const se=te;let J;e[40]!==r?(J=()=>{r.invalidateQueries({queryKey:["all-clients"]}),r.invalidateQueries({queryKey:["all-transactions"]}),r.invalidateQueries({queryKey:["all-cash-movements"]}),K.success("Tableau de bord actualisé")},e[40]=r,e[41]=J):J=e[41];const ee=J;let le;e[42]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(ks,{title:"Manager"}),e[42]=le):le=e[42];let ae;e[43]===Symbol.for("react.memo_cache_sentinel")?(ae={scale:1.02},e[43]=ae):ae=e[43];let W,me;e[44]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx(Se.div,{whileHover:ae,className:"relative flex h-16 w-38 items-center justify-center px-4",children:t.jsx("img",{src:"/logo-color.png",alt:"Havifin",className:"h-full w-full object-contain"})}),me=t.jsx("div",{className:"h-10 w-[1px] bg-slate-100"}),e[44]=W,e[45]=me):(W=e[44],me=e[45]);let he;e[46]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("h1",{className:"text-2xl font-black tracking-tight text-slate-900 uppercase",children:["Console"," ",t.jsx("span",{className:"text-indigo-600",children:"Manager"})]}),t.jsx("span",{className:"rounded-full border border-emerald-500/20 bg-emerald-500/10 px-3 py-1 text-[10px] font-black tracking-widest text-emerald-600 uppercase",children:"Live"})]}),e[46]=he):he=e[46];const je=s.user.shop||"Supervision & Reporting";let oe;e[47]!==s.user.role||e[48]!==je?(oe=t.jsxs("div",{className:"flex items-center gap-6",children:[W,me,t.jsxs("div",{children:[he,t.jsxs("p",{className:"mt-1 flex items-center gap-2 text-[10px] font-black tracking-[0.15em] text-slate-400 uppercase",children:[s.user.role," •"," ",je]})]})]}),e[47]=s.user.role,e[48]=je,e[49]=oe):oe=e[49];const Ne=(T||D)&&"animate-spin";let pe;e[50]!==Ne?(pe=G("h-5 w-5",Ne),e[50]=Ne,e[51]=pe):pe=e[51];let xe;e[52]!==pe?(xe=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-slate-100 bg-white text-slate-400 shadow-sm",children:t.jsx(gt,{className:pe})}),e[52]=pe,e[53]=xe):xe=e[53];let ue;e[54]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] font-black tracking-wider text-slate-400 uppercase",children:"Dernier Sync"}),t.jsx("div",{className:"text-xs font-bold text-slate-600",children:"A l'instant"})]}),e[54]=ue):ue=e[54];let o;e[55]!==xe?(o=t.jsxs("div",{className:"hidden items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-1.5 pr-5 xl:flex",children:[xe,ue]}),e[55]=xe,e[56]=o):o=e[56];let Q;e[57]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(gt,{className:"mr-2 h-4 w-4"}),e[57]=Q):Q=e[57];let ie;e[58]!==ee?(ie=t.jsxs(P,{variant:"outline",onClick:ee,className:"h-12 rounded-2xl border-slate-200 bg-white px-6 text-xs font-black tracking-widest uppercase shadow-sm transition-all hover:border-indigo-500 hover:text-indigo-600",children:[Q,"Actualiser"]}),e[58]=ee,e[59]=ie):ie=e[59];let Me;e[60]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsx(ut,{className:"h-4 w-4 text-slate-400"}),e[60]=Me):Me=e[60];let Ae;e[61]===Symbol.for("react.memo_cache_sentinel")?(Ae=re=>y(re.target.value),e[61]=Ae):Ae=e[61];let ve;e[62]!==c?(ve=t.jsxs("div",{className:"flex h-12 items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 shadow-sm transition-all focus-within:border-indigo-500",children:[Me,t.jsx("input",{type:"date",value:c,onChange:Ae,className:"border-none bg-transparent text-xs font-black tracking-widest text-slate-600 uppercase focus:ring-0"})]}),e[62]=c,e[63]=ve):ve=e[63];let De;e[64]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsxs(P,{className:"h-12 rounded-2xl bg-slate-900 px-6 text-xs font-black tracking-widest text-white uppercase shadow-xl shadow-slate-900/10 transition-all hover:bg-black active:scale-95",children:[t.jsx(Js,{className:"mr-2 h-4 w-4 text-emerald-400"}),"Exporter Rapport"]}),e[64]=De):De=e[64];let we;e[65]!==o||e[66]!==ie||e[67]!==ve?(we=t.jsxs("div",{className:"flex items-center gap-4",children:[o,ie,ve,De]}),e[65]=o,e[66]=ie,e[67]=ve,e[68]=we):we=e[68];let ye;e[69]!==oe||e[70]!==we?(ye=t.jsxs("header",{className:"z-20 flex h-24 flex-shrink-0 items-center justify-between border-b border-slate-200 bg-white px-10 shadow-[0_1px_3px_rgba(0,0,0,0.02)]",children:[oe,we]}),e[69]=oe,e[70]=we,e[71]=ye):ye=e[71];const qe=`${A.waiting} en attente`;let $;e[72]!==A.todayClients||e[73]!==qe?($=t.jsx(Rt,{title:"Clients Aujourd'hui",value:A.todayClients,subtitle:qe,icon:mt,color:"blue"}),e[72]=A.todayClients,e[73]=qe,e[74]=$):$=e[74];let $e;e[75]!==A.volumeUSD?($e=A.volumeUSD.toLocaleString(),e[75]=A.volumeUSD,e[76]=$e):$e=e[76];const dt=`$ ${$e}`;let Re;e[77]!==dt?(Re=t.jsx(Rt,{title:"Volume USD",value:dt,icon:Ee,color:"emerald"}),e[77]=dt,e[78]=Re):Re=e[78];let Nt;e[79]!==A.volumeCDF?(Nt=A.volumeCDF.toLocaleString(),e[79]=A.volumeCDF,e[80]=Nt):Nt=e[80];const Ht=`${Nt} FC`;let Te;e[81]!==Ht?(Te=t.jsx(Rt,{title:"Volume CDF",value:Ht,icon:ft,color:"amber"}),e[81]=Ht,e[82]=Te):Te=e[82];let vt;e[83]!==A.commissions?(vt=A.commissions.toLocaleString(),e[83]=A.commissions,e[84]=vt):vt=e[84];const Bt=`$ ${vt}`;let Ie;e[85]!==Bt?(Ie=t.jsx(Rt,{title:"Commissions Estimées",value:Bt,icon:ns,color:"indigo"}),e[85]=Bt,e[86]=Ie):Ie=e[86];let Le;e[87]!==$||e[88]!==Re||e[89]!==Te||e[90]!==Ie?(Le=t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[$,Re,Te,Ie]}),e[87]=$,e[88]=Re,e[89]=Te,e[90]=Ie,e[91]=Le):Le=e[91];let wt;e[92]===Symbol.for("react.memo_cache_sentinel")?(wt=t.jsx("h3",{className:"mb-6 px-2 text-[11px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Navigation"}),e[92]=wt):wt=e[92];let yt,kt,_t,St,Ct,Dt,Ft,Mt,At;e[93]===Symbol.for("react.memo_cache_sentinel")?(yt={id:"overview",label:"Vue d'ensemble",icon:ts},kt={id:"transactions",label:"Flux Transactions",icon:ct},_t={id:"movements",label:"Mouvements Manuels",icon:bs},St={id:"rates",label:"Gestion Taux",icon:Gt},Ct={id:"users",label:"Utilisateurs",icon:mt},Dt={id:"clients",label:"Base Clients",icon:mt},Ft={id:"institutions",label:"Banques & Partenaires",icon:ft},Mt={id:"logs",label:"Journal Activité",icon:Zt},At={id:"sessions",label:"Gestion Sessions",icon:zt},e[93]=yt,e[94]=kt,e[95]=_t,e[96]=St,e[97]=Ct,e[98]=Dt,e[99]=Ft,e[100]=Mt,e[101]=At):(yt=e[93],kt=e[94],_t=e[95],St=e[96],Ct=e[97],Dt=e[98],Ft=e[99],Mt=e[100],At=e[101]);let Pe;e[102]!==i?(Pe=[yt,kt,_t,St,Ct,Dt,Ft,Mt,At,...i?[{id:"shops",label:"Gestion Boutiques",icon:Xt}]:[]],e[102]=i,e[103]=Pe):Pe=e[103];let Oe;e[104]!==l||e[105]!==Pe?(Oe=t.jsxs("div",{className:"rounded-[2rem] border border-white bg-white/50 p-6 shadow-sm backdrop-blur-xl",children:[wt,t.jsx("nav",{className:"space-y-2",children:Pe.map(re=>{const st=re.icon;return t.jsxs("button",{onClick:()=>d(re.id),className:G("flex w-full items-center justify-between rounded-2xl border p-4 text-sm font-bold transition-all duration-300",l===re.id?"border-indigo-600 bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"border-slate-100 bg-white/40 text-slate-500 hover:border-slate-200 hover:bg-white"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(st,{className:G("h-5 w-5",l===re.id?"text-white":"text-slate-400")}),re.label]}),t.jsx(Wt,{className:G("h-4 w-4 transition-transform",l===re.id?"translate-x-1":"opacity-0")})]},re.id)})})]}),e[104]=l,e[105]=Pe,e[106]=Oe):Oe=e[106];let qt;e[107]===Symbol.for("react.memo_cache_sentinel")?(qt=t.jsxs("div",{className:"group relative overflow-hidden rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-1/2 -translate-y-1/2 bg-indigo-500/20 blur-[80px]"}),t.jsx("h4",{className:"relative z-10 mb-2 text-xl font-black",children:"Besoin d'aide ?"}),t.jsx("p",{className:"relative z-10 mb-6 text-xs font-medium text-slate-400",children:"Consultez la documentation technique du bureau de change."}),t.jsx(P,{className:"relative z-10 w-full rounded-xl bg-white text-[10px] font-black tracking-widest text-slate-900 uppercase hover:bg-slate-100",children:"Guide Manager"})]}),e[107]=qt):qt=e[107];let Ye;e[108]!==Oe?(Ye=t.jsxs("div",{className:"col-span-12 space-y-4 lg:col-span-3",children:[Oe,qt]}),e[108]=Oe,e[109]=Ye):Ye=e[109];let ze;e[110]!==l||e[111]!==u||e[112]!==c||e[113]!==v?(ze=l==="overview"&&t.jsxs("div",{className:"animate-in space-y-8 duration-500 fade-in slide-in-from-bottom-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsxs("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:["Performances du"," ",Z(c).format("DD/MM/YYYY")]}),t.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Aperçu des flux financiers et des clients."})]})}),t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[t.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border border-slate-100 bg-slate-50 p-8 opacity-50",children:[t.jsx(ns,{className:"mb-4 h-16 w-16 text-slate-300"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Graphique des Flux (Soon)"})]}),t.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border border-slate-100 bg-slate-50 p-8 opacity-50",children:[t.jsx(ts,{className:"mb-4 h-16 w-16 text-slate-300"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Volume par Guichet (Soon)"})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("h4",{className:"text-lg font-black tracking-tight text-slate-800",children:"Activités Récentes"}),t.jsx(P,{variant:"ghost",className:"font-bold text-indigo-600 hover:bg-indigo-50",onClick:()=>d("transactions"),children:"Voir tout"})]}),t.jsx(ss,{transactions:v.slice(0,5)})]}),t.jsxs("div",{className:"border-t border-slate-100 pt-8",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("h4",{className:"text-lg font-black tracking-tight text-slate-800",children:"Mouvements de Caisse Récents"}),t.jsx(P,{variant:"ghost",className:"font-bold text-indigo-600 hover:bg-indigo-50",onClick:()=>d("movements"),children:"Voir tout"})]}),t.jsx(rs,{movements:u.slice(0,5)})]})]}),e[110]=l,e[111]=u,e[112]=c,e[113]=v,e[114]=ze):ze=e[114];let He;e[115]!==l||e[116]!==v?(He=l==="transactions"&&t.jsxs("div",{className:"animate-in space-y-6 duration-300 fade-in",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Journal Complet"}),t.jsxs("div",{className:"relative w-72",children:[t.jsx(ut,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-slate-400"}),t.jsx("input",{placeholder:"Filtrer...",className:"h-10 w-full rounded-xl border-slate-200 pr-4 pl-10 text-sm focus:ring-indigo-500"})]})]}),t.jsx(ss,{transactions:v})]}),e[115]=l,e[116]=v,e[117]=He):He=e[117];let Be;e[118]!==l||e[119]!==u?(Be=l==="movements"&&t.jsxs("div",{className:"animate-in space-y-6 duration-300 fade-in",children:[t.jsx("div",{className:"mb-4 flex items-center justify-between",children:t.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Mouvements Manuels (Ajustements)"})}),t.jsx(rs,{movements:u})]}),e[118]=l,e[119]=u,e[120]=Be):Be=e[120];let Ke;e[121]!==l?(Ke=l==="rates"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Ia,{})}),e[121]=l,e[122]=Ke):Ke=e[122];let Ve;e[123]!==l?(Ve=l==="institutions"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(ka,{})}),e[123]=l,e[124]=Ve):Ve=e[124];let Qe;e[125]!==l?(Qe=l==="users"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Za,{})}),e[125]=l,e[126]=Qe):Qe=e[126];let Ge;e[127]!==l?(Ge=l==="shops"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Bs,{})}),e[127]=l,e[128]=Ge):Ge=e[128];let Je;e[129]!==l||e[130]!==m||e[131]!==T||e[132]!==se?(Je=l==="clients"&&t.jsxs("div",{className:"animate-in space-y-6 duration-300 fade-in",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Base de Données Clients"}),t.jsxs("div",{className:"relative w-72",children:[t.jsx(ut,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-slate-400"}),t.jsx("input",{placeholder:"Rechercher un client...",className:"h-10 w-full rounded-xl border-slate-200 pr-4 pl-10 text-sm focus:ring-indigo-500",value:m,onChange:re=>n(re.target.value)})]})]}),t.jsx(va,{clients:se,isLoading:T})]}),e[129]=l,e[130]=m,e[131]=T,e[132]=se,e[133]=Je):Je=e[133];let Xe;e[134]!==l?(Xe=l==="sessions"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Va,{})}),e[134]=l,e[135]=Xe):Xe=e[135];let We;e[136]!==l||e[137]!==c?(We=l==="logs"&&t.jsx(ba,{selectedDate:c}),e[136]=l,e[137]=c,e[138]=We):We=e[138];let Ze;e[139]!==ze||e[140]!==He||e[141]!==Be||e[142]!==Ke||e[143]!==Ve||e[144]!==Qe||e[145]!==Ge||e[146]!==Je||e[147]!==Xe||e[148]!==We?(Ze=t.jsx("div",{className:"col-span-12 lg:col-span-9",children:t.jsx("div",{className:"min-h-[600px] overflow-hidden rounded-[2.5rem] border border-white bg-white/80 shadow-xl shadow-slate-200/50 backdrop-blur-xl",children:t.jsxs("div",{className:"p-10",children:[ze,He,Be,Ke,Ve,Qe,Ge,Je,Xe,We]})})}),e[139]=ze,e[140]=He,e[141]=Be,e[142]=Ke,e[143]=Ve,e[144]=Qe,e[145]=Ge,e[146]=Je,e[147]=Xe,e[148]=We,e[149]=Ze):Ze=e[149];let et;e[150]!==Ye||e[151]!==Ze?(et=t.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[Ye,Ze]}),e[150]=Ye,e[151]=Ze,e[152]=et):et=e[152];let tt;e[153]!==Le||e[154]!==et?(tt=t.jsx("main",{className:"flex-1 overflow-y-auto bg-[url('/grid.svg')] bg-[length:40px_40px] px-10 py-10",children:t.jsxs("div",{className:"w-full max-w-none space-y-10",children:[Le,et]})}),e[153]=Le,e[154]=et,e[155]=tt):tt=e[155];let $t;return e[156]!==ye||e[157]!==tt?($t=t.jsxs(Rs,{currentPageName:"Manager",children:[le,t.jsxs("div",{className:"flex flex-col overflow-hidden bg-[#f8fafc]",children:[ye,tt]})]}),e[156]=ye,e[157]=tt,e[158]=$t):$t=e[158],$t}function rl(e){return e.status==="waiting"}function cl(e,s){return e+(parseFloat(s.commission)||0)}function ol(e,s){return e+(s.amount_from||0)}function dl(e){return e.currency_from==="CDF"}function xl(e,s){return e+(s.amount_from||0)}function ml(e){return e.currency_from==="USD"}export{ei as default};
