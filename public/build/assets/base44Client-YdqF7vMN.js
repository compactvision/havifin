import{S as te,p as H,k as E,s as F,l as _,f as $,m as D,o as z,t as se,q as Q,v as ie,w as ne,x as B,n as G,r as l,i as J,u as re,j as k,y as ae}from"./app-a7J7c-td.js";import{M as oe,i as he,u as Y,P as ce,d as ue,e as le,L as pe,c as L}from"./createLucideIcon-0EOPhbEy.js";var de=class extends te{constructor(e,t){super(),this.options=t,this.#s=e,this.#n=null,this.#i=H(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#f=void 0;#t=void 0;#a;#u;#i;#n;#g;#l;#p;#o;#h;#r;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),W(this.#e,this.options)?this.#c():this.updateResult(),this.#R())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return j(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return j(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#C(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,s=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof E(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#b(),this.#e.setOptions(this.options),t._defaulted&&!F(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const i=this.hasListeners();i&&q(this.#e,s,this.options,t)&&this.#c(),this.updateResult(),i&&(this.#e!==s||E(this.options.enabled,this.#e)!==E(t.enabled,this.#e)||_(this.options.staleTime,this.#e)!==_(t.staleTime,this.#e))&&this.#m();const n=this.#y();i&&(this.#e!==s||E(this.options.enabled,this.#e)!==E(t.enabled,this.#e)||n!==this.#r)&&this.#v(n)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),s=this.createResult(t,e);return ge(this,s)&&(this.#t=s,this.#u=this.options,this.#a=this.#e.state),s}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(s,i)=>(this.trackProp(i),t?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,i))})}trackProp(e){this.#d.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),s=this.#s.getQueryCache().build(this.#s,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#b();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch($)),t}#m(){this.#x();const e=_(this.options.staleTime,this.#e);if(D||this.#t.isStale||!z(e))return;const s=se(this.#t.dataUpdatedAt,e)+1;this.#o=Q.setTimeout(()=>{this.#t.isStale||this.updateResult()},s)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(e){this.#C(),this.#r=e,!(D||E(this.options.enabled,this.#e)===!1||!z(this.#r)||this.#r===0)&&(this.#h=Q.setInterval(()=>{(this.options.refetchIntervalInBackground||ie.isFocused())&&this.#c()},this.#r))}#R(){this.#m(),this.#v(this.#y())}#x(){this.#o&&(Q.clearTimeout(this.#o),this.#o=void 0)}#C(){this.#h&&(Q.clearInterval(this.#h),this.#h=void 0)}createResult(e,t){const s=this.#e,i=this.options,n=this.#t,o=this.#a,h=this.#u,x=e!==s?e.state:this.#f,{state:p}=e;let c={...p},f=!1,d;if(t._optimisticResults){const u=this.hasListeners(),S=!u&&W(e,t),O=u&&q(e,s,t,i);(S||O)&&(c={...c,...ne(p.data,e.options)}),t._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:v,errorUpdatedAt:C,status:m}=c;d=c.data;let R=!1;if(t.placeholderData!==void 0&&d===void 0&&m==="pending"){let u;n?.isPlaceholderData&&t.placeholderData===h?.placeholderData?(u=n.data,R=!0):u=typeof t.placeholderData=="function"?t.placeholderData(this.#p?.state.data,this.#p):t.placeholderData,u!==void 0&&(m="success",d=B(n?.data,u,t),f=!0)}if(t.select&&d!==void 0&&!R)if(n&&d===o?.data&&t.select===this.#g)d=this.#l;else try{this.#g=t.select,d=t.select(d),d=B(n?.data,d,t),this.#l=d,this.#n=null}catch(u){this.#n=u}this.#n&&(v=this.#n,d=this.#l,C=Date.now(),m="error");const w=c.fetchStatus==="fetching",T=m==="pending",b=m==="error",P=T&&w,M=d!==void 0,g={status:m,fetchStatus:c.fetchStatus,isPending:T,isSuccess:m==="success",isError:b,isInitialLoading:P,isLoading:P,data:d,dataUpdatedAt:c.dataUpdatedAt,error:v,errorUpdatedAt:C,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>x.dataUpdateCount||c.errorUpdateCount>x.errorUpdateCount,isFetching:w,isRefetching:w&&!T,isLoadingError:b&&!M,isPaused:c.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:b&&M,isStale:N(e,t),refetch:this.refetch,promise:this.#i,isEnabled:E(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const u=I=>{g.status==="error"?I.reject(g.error):g.data!==void 0&&I.resolve(g.data)},S=()=>{const I=this.#i=g.promise=H();u(I)},O=this.#i;switch(O.status){case"pending":e.queryHash===s.queryHash&&u(O);break;case"fulfilled":(g.status==="error"||g.data!==O.value)&&S();break;case"rejected":(g.status!=="error"||g.error!==O.reason)&&S();break}}return g}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#a=this.#e.state,this.#u=this.options,this.#a.data!==void 0&&(this.#p=this.#e),F(t,e))return;this.#t=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,n=typeof i=="function"?i():i;if(n==="all"||!n&&!this.#d.size)return!0;const o=new Set(n??this.#d);return this.options.throwOnError&&o.add("error"),Object.keys(this.#t).some(h=>{const y=h;return this.#t[y]!==e[y]&&o.has(y)})};this.#S({listeners:s()})}#b(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#f=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#R()}#S(e){G.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function fe(e,t){return E(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function W(e,t){return fe(e,t)||e.state.data!==void 0&&j(e,t,t.refetchOnMount)}function j(e,t,s){if(E(t.enabled,e)!==!1&&_(t.staleTime,e)!=="static"){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&N(e,t)}return!1}function q(e,t,s,i){return(e!==t||E(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&N(e,s)}function N(e,t){return E(t.enabled,e)!==!1&&e.isStaleByTime(_(t.staleTime,e))}function ge(e,t){return!F(e.getCurrentResult(),t)}var Z=l.createContext(!1),me=()=>l.useContext(Z);Z.Provider;function ye(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ve=l.createContext(ye()),Re=()=>l.useContext(ve),xe=(e,t,s)=>{const i=s?.state.error&&typeof e.throwOnError=="function"?J(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||i)&&(t.isReset()||(e.retryOnMount=!1))},Ce=e=>{l.useEffect(()=>{e.clearReset()},[e])},be=({result:e,errorResetBoundary:t,throwOnError:s,query:i,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(n&&e.data===void 0||J(s,[e.error,i])),Se=e=>{if(e.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...n)=>s(i(...n)):s(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ee=(e,t)=>e.isLoading&&e.isFetching&&!t,Oe=(e,t)=>e?.suspense&&t.isPending,V=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function we(e,t,s){const i=me(),n=Re(),o=re(),h=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(h);const y=o.getQueryCache().get(h.queryHash);h._optimisticResults=i?"isRestoring":"optimistic",Se(h),xe(h,n,y),Ce(n);const x=!o.getQueryCache().get(h.queryHash),[p]=l.useState(()=>new t(o,h)),c=p.getOptimisticResult(h),f=!i&&e.subscribed!==!1;if(l.useSyncExternalStore(l.useCallback(d=>{const v=f?p.subscribe(G.batchCalls(d)):$;return p.updateResult(),v},[p,f]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),l.useEffect(()=>{p.setOptions(h)},[h,p]),Oe(h,c))throw V(h,p,n);if(be({result:c,errorResetBoundary:n,throwOnError:h.throwOnError,query:y,suspense:h.suspense}))throw c.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(h,c),h.experimental_prefetchInRender&&!D&&Ee(c,i)&&(x?V(h,p,n):y?.promise)?.catch($).finally(()=>{p.updateResult()}),h.notifyOnChangeProps?c:p.trackResult(c)}function je(e,t){return we(e,de)}function X(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ie(...e){return t=>{let s=!1;const i=e.map(n=>{const o=X(n,t);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let n=0;n<i.length;n++){const o=i[n];typeof o=="function"?o():X(e[n],null)}}}}function Me(...e){return l.useCallback(Ie(...e),e)}class ke extends l.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const i=s.offsetParent,n=he(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft,o.right=n-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Te({children:e,isPresent:t,anchorX:s,root:i}){const n=l.useId(),o=l.useRef(null),h=l.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=l.useContext(oe),x=e.props?.ref??e?.ref,p=Me(o,x);return l.useInsertionEffect(()=>{const{width:c,height:f,top:d,left:v,right:C}=h.current;if(t||!o.current||!c||!f)return;const m=s==="left"?`left: ${v}`:`right: ${C}`;o.current.dataset.motionPopId=n;const R=document.createElement("style");y&&(R.nonce=y);const w=i??document.head;return w.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{w.contains(R)&&w.removeChild(R)}},[t]),k.jsx(ke,{isPresent:t,childRef:o,sizeRef:h,children:l.cloneElement(e,{ref:p})})}const Pe=({children:e,initial:t,isPresent:s,onExitComplete:i,custom:n,presenceAffectsLayout:o,mode:h,anchorX:y,root:x})=>{const p=Y(_e),c=l.useId();let f=!0,d=l.useMemo(()=>(f=!1,{id:c,initial:t,isPresent:s,custom:n,onExitComplete:v=>{p.set(v,!0);for(const C of p.values())if(!C)return;i&&i()},register:v=>(p.set(v,!1),()=>p.delete(v))}),[s,p,i]);return o&&f&&(d={...d}),l.useMemo(()=>{p.forEach((v,C)=>p.set(C,!1))},[s]),l.useEffect(()=>{!s&&!p.size&&i&&i()},[s]),h==="popLayout"&&(e=k.jsx(Te,{isPresent:s,anchorX:y,root:x,children:e})),k.jsx(ce.Provider,{value:d,children:e})};function _e(){return new Map}const U=e=>e.key||"";function K(e){const t=[];return l.Children.forEach(e,s=>{l.isValidElement(s)&&t.push(s)}),t}const Ne=({children:e,custom:t,initial:s=!0,onExitComplete:i,presenceAffectsLayout:n=!0,mode:o="sync",propagate:h=!1,anchorX:y="left",root:x})=>{const[p,c]=ue(h),f=l.useMemo(()=>K(e),[e]),d=h&&!p?[]:f.map(U),v=l.useRef(!0),C=l.useRef(f),m=Y(()=>new Map),R=l.useRef(new Set),[w,T]=l.useState(f),[b,P]=l.useState(f);le(()=>{v.current=!1,C.current=f;for(let g=0;g<b.length;g++){const u=U(b[g]);d.includes(u)?(m.delete(u),R.current.delete(u)):m.get(u)!==!0&&m.set(u,!1)}},[b,d.length,d.join("-")]);const M=[];if(f!==w){let g=[...f];for(let u=0;u<b.length;u++){const S=b[u],O=U(S);d.includes(O)||(g.splice(u,0,S),M.push(S))}return o==="wait"&&M.length&&(g=M),P(K(g)),T(f),null}const{forceRender:A}=l.useContext(pe);return k.jsx(k.Fragment,{children:b.map(g=>{const u=U(g),S=h&&!p?!1:f===b||d.includes(u),O=()=>{if(R.current.has(u))return;if(R.current.add(u),m.has(u))m.set(u,!0);else return;let I=!0;m.forEach(ee=>{ee||(I=!1)}),I&&(A?.(),P(C.current),h&&c?.(),i&&i())};return k.jsx(Pe,{isPresent:S,initial:!v.current||s?void 0:!1,custom:t,presenceAffectsLayout:n,mode:o,root:x,onExitComplete:S?void 0:O,anchorX:y,children:g},u)})})};const Qe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ae=L("ChevronRight",Qe);const Ue=[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]],He=L("Landmark",Ue);const Le=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ze=L("Monitor",Le);const Fe=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Be=L("Smartphone",Fe),r=ae.create({headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},withCredentials:!0,withXSRFToken:!0}),a=e=>e.data,We={entities:{Client:{create:e=>r.post("/api/clients",e).then(a),update:(e,t)=>r.put(`/api/clients/${e}`,t).then(a),list:(e,t)=>r.get("/api/clients",{params:{sort:e,limit:t}}).then(a),filter:(e,t,s)=>r.get("/api/clients",{params:{...e,sort:t,limit:s}}).then(a),verifyPhone:e=>r.post("/api/clients/verify-phone",{phone:e}).then(a),register:e=>r.post("/api/clients/register",e).then(a),addPhone:(e,t)=>r.post("/api/clients/add-phone",{client_id:e,phone_number:t}).then(a)},Transaction:{create:e=>r.post("/api/transactions",e).then(a),list:(e,t)=>r.get("/api/transactions",{params:{sort:e,limit:t}}).then(a)},ExchangeRate:{getAll:()=>r.get("/api/exchange-rates").then(a),create:e=>r.post("/api/exchange-rates",e).then(a),update:(e,t)=>r.put(`/api/exchange-rates/${e}`,t).then(a),delete:e=>r.delete(`/api/exchange-rates/${e}`).then(a),filter:(e,t,s)=>r.get("/api/exchange-rates",{params:{...e,sort:t,limit:s}}).then(a)},Institution:{list:e=>r.get("/api/institutions",{params:e}).then(a),active:()=>r.get("/api/institutions/active").then(a),create:e=>r.post("/api/institutions",e).then(a),update:(e,t)=>r.put(`/api/institutions/${e}`,t).then(a),delete:e=>r.delete(`/api/institutions/${e}`).then(a)},Session:{current:()=>r.get("/api/sessions/current").then(a),list:e=>r.get("/api/sessions",{params:e}).then(a),create:e=>r.post("/api/sessions",e).then(a),close:e=>r.post(`/api/sessions/${e}/close`).then(a),report:e=>r.get(`/api/sessions/${e}/report`).then(a)},ExchangeRateHistory:{list:e=>r.get("/api/exchange-rate-history",{params:e}).then(a),active:()=>r.get("/api/exchange-rate-history/active").then(a),create:e=>r.post("/api/exchange-rate-history",e).then(a),currentRate:(e,t)=>r.post("/api/exchange-rate-history/current-rate",{currency_from:e,currency_to:t}).then(a)},CashierActivity:{list:e=>r.get("/api/cashier-activities",{params:e}).then(a),create:e=>r.post("/api/cashier-activities",e).then(a),stats:e=>r.get("/api/cashier-activities/stats",{params:e}).then(a)},HelpRequest:{list:e=>r.get("/api/help-requests",{params:e}).then(a),create:e=>r.post("/api/help-requests",e).then(a),resolve:e=>r.post(`/api/help-requests/${e}/resolve`).then(a)},Advertisement:{list:()=>r.get("/api/advertisements").then(a),active:()=>r.get("/api/advertisements/active").then(a),create:e=>r.post("/api/advertisements",e).then(a),update:(e,t)=>r.put(`/api/advertisements/${e}`,t).then(a),delete:e=>r.delete(`/api/advertisements/${e}`).then(a)}}};export{Ne as A,Ae as C,He as L,ze as M,Be as S,We as b,je as u};
