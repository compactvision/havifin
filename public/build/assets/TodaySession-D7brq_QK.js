import{c as le,b as ae,j as s,H as W,L as X}from"./app-Cxt9o3Ni.js";import{b as ie}from"./base44Client-DmNi4SLu.js";import{B as Z}from"./badge-CR7ZYRZw.js";import{B as ee}from"./index-DuH3KfOy.js";import{A as J,S as se,L as re}from"./app-main-BA-8pEG-.js";import{u as ne}from"./users-N9kzuMsT.js";import{h as B}from"./moment-B-YVwB4U.js";import{B as oe}from"./banknote-c8RyUxNW.js";import{L as ce}from"./lock-open-C-O4MdUU.js";import{C as me}from"./clock-Dg7t4-9j.js";import{D as de}from"./dollar-sign-DtJCluRq.js";import{A as xe}from"./arrow-right-CHwIZAkA.js";/* empty css            */import"./axios-DaOL9Jop.js";import"./createLucideIcon-DKGtSlCQ.js";function De(){const e=le.c(77),{auth:G}=ae().props;let A;e[0]===Symbol.for("react.memo_cache_sentinel")?(A={queryKey:["cash-session-current"],queryFn:he,retry:!1},e[0]=A):A=e[0];const{data:t,isLoading:te}=ne(A);if(te){let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(J,{currentPageName:"Cashier",children:s.jsx("div",{className:"flex h-screen items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-indigo-600 border-t-transparent"}),s.jsx("p",{className:"font-bold text-slate-500",children:"Chargement de votre session..."})]})})}),e[1]=l):l=e[1],l}if(!t){let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(W,{title:"Aucune Session"}),e[2]=l):l=e[2];let T,q,F;e[3]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx("div",{className:"mb-6 rounded-full bg-indigo-100 p-6 text-indigo-600",children:s.jsx(se,{className:"h-12 w-12"})}),q=s.jsx("h1",{className:"mb-2 text-2xl font-black text-slate-900",children:"Aucune session active"}),F=s.jsx("p",{className:"mb-8 max-w-md text-slate-500",children:"Vous n'avez pas de session de caisse ouverte pour le moment. Veuillez demander √† un manager de vous ouvrir une caisse."}),e[3]=T,e[4]=q,e[5]=F):(T=e[3],q=e[4],F=e[5]);let $;return e[6]===Symbol.for("react.memo_cache_sentinel")?($=s.jsxs(J,{currentPageName:"Cashier",children:[l,s.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center bg-slate-50 p-4 text-center",children:[T,q,F,s.jsx(ee,{variant:"outline",className:"gap-2",asChild:!0,children:s.jsxs(X,{href:"/logout",method:"post",children:[s.jsx(re,{className:"h-4 w-4"}),"Se d√©connecter"]})})]})]}),e[6]=$):$=e[6],$}let D;e[7]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(W,{title:"Ma Session"}),e[7]=D):D=e[7];let a;e[8]!==G.user.name?(a=s.jsxs("h1",{className:"text-3xl font-black text-slate-900",children:["Bonjour, ",G.user.name," üëã"]}),e[8]=G.user.name,e[9]=a):a=e[9];let L;e[10]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx("p",{className:"mt-1 text-slate-500",children:"Voici le r√©sum√© de votre session d'aujourd'hui."}),e[10]=L):L=e[10];let i;e[11]!==a?(i=s.jsxs("div",{children:[a,L]}),e[11]=a,e[12]=i):i=e[12];let M;e[13]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Date"}),e[13]=M):M=e[13];let r,E;e[14]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsxs("div",{className:"flex flex-col items-end",children:[M,s.jsx("span",{className:"font-black text-slate-900",children:B().format("DD/MM/YYYY")})]}),E=s.jsx("div",{className:"h-8 w-[1px] bg-slate-200"}),e[14]=r,e[15]=E):(r=e[14],E=e[15]);const K=`h-2 w-2 rounded-full ${t.status==="open"?"bg-green-500":"bg-red-500"}`;let n;e[16]!==K?(n=s.jsx("span",{className:K}),e[16]=K,e[17]=n):n=e[17];const Q=t.status==="open"?"En ligne":"Hors ligne";let o;e[18]!==Q?(o=s.jsx("span",{className:"font-bold text-slate-700",children:Q}),e[18]=Q,e[19]=o):o=e[19];let c;e[20]!==o||e[21]!==n?(c=s.jsx("div",{className:"rounded-xl bg-white px-4 py-2 shadow-sm ring-1 ring-slate-200",children:s.jsxs("div",{className:"flex items-center gap-2",children:[n,o]})}),e[20]=o,e[21]=n,e[22]=c):c=e[22];let m;e[23]!==c||e[24]!==r?(m=s.jsxs("div",{className:"flex items-center gap-3",children:[r,E,c]}),e[23]=c,e[24]=r,e[25]=m):m=e[25];let d;e[26]!==m||e[27]!==i?(d=s.jsxs("header",{className:"mb-10 flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[i,m]}),e[26]=m,e[27]=i,e[28]=d):d=e[28];let H;e[29]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:s.jsx(se,{className:"h-64 w-64 rotate-12"})}),e[29]=H):H=e[29];let O;e[30]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-indigo-600 text-white shadow-lg shadow-indigo-500/30",children:s.jsx(oe,{className:"h-8 w-8"})}),e[30]=O):O=e[30];let x;e[31]!==t.id?(x=s.jsxs("h2",{className:"text-2xl font-black text-slate-900",children:["Session #",t.id]}),e[31]=t.id,e[32]=x):x=e[32];const U=t.register?.name,I=t.register?.shop?.name;let f;e[33]!==U||e[34]!==I?(f=s.jsxs("p",{className:"font-medium text-slate-500",children:[U," ‚Ä¢"," ",I]}),e[33]=U,e[34]=I,e[35]=f):f=e[35];let h;e[36]!==t.work_session?(h=t.work_session?.session_date&&B(t.work_session.session_date).isBefore(B(),"day")&&s.jsxs(Z,{variant:"destructive",className:"mt-1 text-[10px] font-black uppercase",children:["Session d'une date ant√©rieure (",B(t.work_session.session_date).format("DD/MM"),")"]}),e[36]=t.work_session,e[37]=h):h=e[37];let p;e[38]!==x||e[39]!==f||e[40]!==h?(p=s.jsxs("div",{className:"flex items-center gap-4",children:[O,s.jsxs("div",{children:[x,f,h]})]}),e[38]=x,e[39]=f,e[40]=h,e[41]=p):p=e[41];let P;e[42]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsxs(Z,{className:"bg-green-100 px-4 py-2 text-sm font-black text-green-700 hover:bg-green-100",children:[s.jsx(ce,{className:"mr-2 h-4 w-4"}),"OUVERTE"]}),e[42]=P):P=e[42];let u;e[43]!==p?(u=s.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[p,P]}),e[43]=p,e[44]=u):u=e[44];let R;e[45]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsxs("div",{className:"mb-2 flex items-center gap-2 text-slate-400",children:[s.jsx(me,{className:"h-4 w-4"}),s.jsx("span",{className:"text-xs font-bold uppercase",children:"Ouverture"})]}),e[45]=R):R=e[45];let j;e[46]!==t.opened_at?(j=B(t.opened_at).format("HH:mm"),e[46]=t.opened_at,e[47]=j):j=e[47];let g;e[48]!==j?(g=s.jsx("p",{className:"text-xl font-black text-slate-900",children:j}),e[48]=j,e[49]=g):g=e[49];let b;e[50]!==t.opened_at?(b=B(t.opened_at).fromNow(),e[50]=t.opened_at,e[51]=b):b=e[51];let N;e[52]!==b?(N=s.jsx("p",{className:"text-xs text-slate-500",children:b}),e[52]=b,e[53]=N):N=e[53];let _;e[54]!==g||e[55]!==N?(_=s.jsxs("div",{className:"rounded-2xl bg-slate-50 p-4",children:[R,g,N]}),e[54]=g,e[55]=N,e[56]=_):_=e[56];let V;e[57]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsxs("div",{className:"mb-2 flex items-center gap-2 text-slate-400",children:[s.jsx(de,{className:"h-4 w-4"}),s.jsx("span",{className:"text-xs font-bold uppercase",children:"Fonds de caisse initial"})]}),e[57]=V):V=e[57];let v;e[58]!==t.amounts?(v=t.amounts?.map(fe),e[58]=t.amounts,e[59]=v):v=e[59];let w;e[60]!==v?(w=s.jsxs("div",{className:"col-span-2 rounded-2xl bg-slate-50 p-4",children:[V,s.jsx("div",{className:"flex flex-wrap gap-4",children:v})]}),e[60]=v,e[61]=w):w=e[61];let y;e[62]!==_||e[63]!==w?(y=s.jsxs("div",{className:"mb-10 grid grid-cols-1 gap-6 md:grid-cols-3",children:[_,w]}),e[62]=_,e[63]=w,e[64]=y):y=e[64];let Y;e[65]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(X,{href:"/cashier",className:"w-full md:w-auto",children:s.jsxs(ee,{className:"h-14 w-full rounded-2xl bg-gradient-to-r from-indigo-600 to-purple-600 px-8 text-lg font-bold text-white shadow-xl shadow-indigo-500/30 transition-all hover:scale-105 hover:shadow-indigo-500/50 active:scale-95 md:w-auto",children:["Acc√©der au Guichet (Transacter)",s.jsx(xe,{className:"ml-2 h-5 w-5"})]})}),e[65]=Y):Y=e[65];let S;e[66]!==t.work_session?.status?(S=t.work_session?.status==="closed"&&s.jsx("p",{className:"text-center text-xs font-bold text-red-500 italic md:text-right",children:"Note: Cette session appartient √† une journ√©e cl√¥tur√©e par le manager."}),e[66]=t.work_session?.status,e[67]=S):S=e[67];let k;e[68]!==S?(k=s.jsxs("div",{className:"mt-8 flex flex-col gap-4 md:flex-row md:justify-end",children:[Y,S]}),e[68]=S,e[69]=k):k=e[69];let C;e[70]!==u||e[71]!==y||e[72]!==k?(C=s.jsx("div",{className:"mx-auto max-w-4xl",children:s.jsxs("div",{className:"relative overflow-hidden rounded-[32px] bg-white p-8 shadow-xl ring-1 shadow-indigo-100 ring-slate-100",children:[H,s.jsxs("div",{className:"relative z-10",children:[u,y,k]})]})}),e[70]=u,e[71]=y,e[72]=k,e[73]=C):C=e[73];let z;return e[74]!==d||e[75]!==C?(z=s.jsxs(J,{currentPageName:"Cashier",children:[D,s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50/30 px-6 py-8 md:px-10",children:[d,C]})]}),e[74]=d,e[75]=C,e[76]=z):z=e[76],z}function fe(e){return s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-xl font-black text-slate-900",children:e.opening_amount}),s.jsx("span",{className:"text-xs font-bold text-slate-500",children:e.currency})]},e.currency)}function he(){return ie.entities.CashSession.current()}export{De as default};
