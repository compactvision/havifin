import{c as O,r as _,j as t,R as G}from"./app-a7J7c-td.js";import{A as B,S as H,L as K,u as Q,b as L}from"./base44Client-YdqF7vMN.js";import{L as P,I as T,B as M}from"./label-CTzJbwtw.js";import{c as $,m as g,a as k}from"./createLucideIcon-0EOPhbEy.js";import{P as X,B as q}from"./plus-CYXGX6kP.js";import{L as D,c as U,A as J,C as Z,R as W,u as F,b as Y}from"./app-main-DSmqVdbl.js";import{P as V,c as ee,b as te,a as se,C as ae,A as ie}from"./phone-BUuCINMK.js";/* empty css            */const le=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],E=$("ChevronLeft",le);const ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],re=$("Globe",ne);const oe=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],ce=$("Ticket",oe);function de(f){const e=O.c(20),{phones:w,selectedPhone:r,onSelect:c,onAdd:x,isAdding:a}=f,m=a===void 0?!1:a,[n,o]=_.useState(!1),[d,b]=_.useState("");let v;e[0]!==d||e[1]!==x?(v=async()=>{d.length===10&&(await x(d),o(!1),b(""))},e[0]=d,e[1]=x,e[2]=v):v=e[2];const y=v;let u;if(e[3]!==c||e[4]!==w||e[5]!==r){let h;e[7]!==c||e[8]!==r?(h=j=>t.jsxs(g.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>c(j.phone_number),className:k("relative flex items-center gap-4 overflow-hidden rounded-2xl border-2 p-4 transition-all duration-200",r===j.phone_number?"border-blue-500 bg-blue-50/50 shadow-md":"border-slate-100 bg-white hover:border-slate-200"),children:[t.jsx("div",{className:k("flex h-10 w-10 items-center justify-center rounded-xl",r===j.phone_number?"bg-blue-500 text-white":"bg-slate-100 text-slate-400"),children:t.jsx(V,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("span",{className:k("block text-lg font-bold",r===j.phone_number?"text-blue-700":"text-slate-700"),children:j.phone_number}),j.is_primary&&t.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-0.5 text-[10px] font-black tracking-wider text-blue-500/60 uppercase",children:"Principal"})]}),r===j.phone_number&&t.jsx(g.div,{initial:{scale:0},animate:{scale:1},className:"flex h-6 w-6 items-center justify-center rounded-full bg-blue-500 text-white",children:t.jsx(U,{className:"h-4 w-4"})})]},j.id),e[7]=c,e[8]=r,e[9]=h):h=e[9],u=w.map(h),e[3]=c,e[4]=w,e[5]=r,e[6]=u}else u=e[6];let p;e[10]!==u?(p=t.jsx("div",{className:"grid grid-cols-1 gap-3",children:u}),e[10]=u,e[11]=p):p=e[11];let s;e[12]!==y||e[13]!==m||e[14]!==n||e[15]!==d?(s=t.jsx(B,{children:n?t.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"space-y-3 rounded-2xl border-2 border-blue-100 bg-blue-50/30 p-4",children:[t.jsx(P,{className:"mb-1 block font-bold text-blue-700",children:"Nouveau numéro"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(T,{type:"tel",inputMode:"numeric",pattern:"[0-9]*",value:d,onChange:h=>b(h.target.value.replace(/\D/g,"").slice(0,10)),placeholder:"0XXXXXXXXX",className:"h-12 rounded-xl bg-white focus:border-blue-500 focus:ring-blue-500",autoFocus:!0}),t.jsx(M,{onClick:y,disabled:d.length<10||m,className:"h-12 rounded-xl bg-blue-600 px-6 text-white hover:bg-blue-700",children:m?t.jsx(D,{className:"h-5 w-5 animate-spin"}):t.jsx(X,{className:"h-5 w-5"})})]}),t.jsx(M,{variant:"ghost",size:"sm",onClick:()=>o(!1),className:"w-full text-slate-500 hover:text-red-500",children:"Annuler"})]}):t.jsxs(g.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>o(!0),className:"flex w-full items-center justify-center gap-2 rounded-2xl border-2 border-dashed border-slate-200 p-4 font-bold text-slate-400 transition-all hover:border-blue-300 hover:bg-blue-50/30 hover:text-blue-500",children:[t.jsx(X,{className:"h-5 w-5"}),"Ajouter un nouveau numéro"]})}),e[12]=y,e[13]=m,e[14]=n,e[15]=d,e[16]=s):s=e[16];let i;return e[17]!==p||e[18]!==s?(i=t.jsxs("div",{className:"space-y-4",children:[p,s]}),e[17]=p,e[18]=s,e[19]=i):i=e[19],i}const he=[{id:"change",name:"Change Devises",icon:J,description:"USD ↔ CDF au meilleur taux",color:"from-amber-400 to-orange-500",hover:"shadow-orange-200"},{id:"depot",name:"Dépôt Cash",icon:ee,description:"Alimentez vos comptes",color:"from-green-400 to-emerald-600",hover:"shadow-green-200"},{id:"retrait",name:"Retrait Cash",icon:te,description:"Retirez vos fonds",color:"from-blue-400 to-indigo-600",hover:"shadow-blue-200"},{id:"paiement",name:"Paiement",icon:se,description:"Payez vos factures et services",color:"from-purple-400 to-pink-600",hover:"shadow-purple-200"}];function me(f){const e=O.c(5),{selectedOperation:w,onSelect:r}=f;let c;e[0]!==r||e[1]!==w?(c=he.map(a=>{const m=a.icon,n=w===a.id;return t.jsxs(g.button,{whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},onClick:()=>r(a.id),className:k("group relative overflow-hidden rounded-[40px] border-4 p-8 text-center transition-all duration-300",n?"border-blue-500 bg-white shadow-2xl shadow-blue-500/20":"border-slate-50 bg-slate-50/50 hover:border-slate-200 hover:bg-white hover:shadow-xl"),children:[t.jsx("div",{className:k("absolute -top-12 -right-12 h-24 w-24 rounded-full blur-[40px] transition-opacity",n?"opacity-20":"opacity-0 group-hover:opacity-10",a.color.replace("from-","bg-"))}),t.jsx("div",{className:k("mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-[28px] bg-gradient-to-br shadow-lg transition-transform group-hover:rotate-6",a.color,n?"scale-110":""),children:t.jsx(m,{className:"h-10 w-10 text-white"})}),t.jsx("h3",{className:k("mb-2 text-xl font-black transition-colors",n?"text-slate-900":"text-slate-700"),children:a.name}),t.jsx("p",{className:"text-sm font-medium text-slate-400 group-hover:text-slate-500",children:a.description}),n&&t.jsx(g.div,{layoutId:"op-indicator",className:"absolute bottom-4 left-1/2 h-2 w-12 -translate-x-1/2 rounded-full bg-blue-500"})]},a.id)}),e[0]=r,e[1]=w,e[2]=c):c=e[2];let x;return e[3]!==c?(x=t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:c}),e[3]=c,e[4]=x):x=e[4],x}function xe(f){const e=O.c(24),{institutions:w,selectedId:r,onSelect:c,type:x}=f;let a,m,n,o;if(e[0]!==w||e[1]!==c||e[2]!==r||e[3]!==x){let v;e[8]!==x?(v=h=>h.type===x,e[8]=x,e[9]=v):v=e[9];const y=w.filter(v),u=x==="mobile_money"?H:q;n="space-y-4";let p;e[10]!==u?(p=t.jsx(u,{className:"h-5 w-5 text-blue-500"}),e[10]=u,e[11]=p):p=e[11];const s=x==="mobile_money"?"Opérateurs Mobile":"Banques";let i;e[12]!==s?(i=t.jsx("h3",{className:"text-lg font-bold text-slate-800",children:s}),e[12]=s,e[13]=i):i=e[13],e[14]!==p||e[15]!==i?(o=t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[p,i]}),e[14]=p,e[15]=i,e[16]=o):o=e[16],a="grid grid-cols-2 gap-4 md:grid-cols-4",m=y.length>0?y.map(h=>t.jsxs(g.button,{whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},onClick:()=>c(h.id),className:k("relative flex flex-col items-center justify-center rounded-[32px] border-2 p-6 transition-all duration-300",r===h.id?"border-blue-500 bg-white shadow-xl ring-4 shadow-blue-500/10 ring-blue-50":"border-slate-100 bg-slate-50/50 hover:border-slate-200 hover:bg-white"),children:[t.jsx("div",{className:k("mb-4 flex h-16 w-16 items-center justify-center rounded-2xl shadow-inner transition-colors",r===h.id?"bg-blue-50":"bg-white"),children:h.logo_url?t.jsx("img",{src:h.logo_url,alt:h.name,className:"h-10 w-10 object-contain"}):t.jsx(K,{className:k("h-8 w-8",r===h.id?"text-blue-500":"text-slate-300")})}),t.jsx("span",{className:k("text-center text-sm font-black tracking-tight",r===h.id?"text-blue-700":"text-slate-600"),children:h.name}),r===h.id&&t.jsx(g.div,{layoutId:"active-indicator",className:"absolute -top-1 -right-1 h-6 w-6 rounded-full border-4 border-white bg-blue-500 shadow-sm"})]},h.id)):t.jsxs("div",{className:"col-span-full py-12 text-center",children:[t.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-slate-100 text-slate-300",children:t.jsx(u,{className:"h-8 w-8"})}),t.jsx("p",{className:"text-sm font-bold tracking-widest text-slate-400 uppercase",children:"Aucun partenaire disponible"})]}),e[0]=w,e[1]=c,e[2]=r,e[3]=x,e[4]=a,e[5]=m,e[6]=n,e[7]=o}else a=e[4],m=e[5],n=e[6],o=e[7];let d;e[17]!==a||e[18]!==m?(d=t.jsx("div",{className:a,children:m}),e[17]=a,e[18]=m,e[19]=d):d=e[19];let b;return e[20]!==n||e[21]!==o||e[22]!==d?(b=t.jsxs("div",{className:n,children:[o,d]}),e[20]=n,e[21]=o,e[22]=d,e[23]=b):b=e[23],b}const ue=[{id:"mobile_money",name:"Mobile Money",icon:H,color:"text-emerald-500"},{id:"bank",name:"Banques",icon:q,color:"text-blue-500"},{id:"other",name:"Autres",icon:re,color:"text-amber-500"}];function pe(f){const e=O.c(20),{institutions:w,selectedId:r,onSelect:c,isLoading:x}=f,[a,m]=G.useState("mobile_money");if(x){let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx("div",{className:"mb-4 h-12 w-12 animate-spin rounded-full border-4 border-slate-200 border-t-indigo-600"}),t.jsx("p",{className:"text-sm font-bold tracking-widest text-slate-400 uppercase",children:"Récupération des partenaires..."})]}),e[0]=i):i=e[0],i}let n;e[1]!==a?(n=ue.map(i=>t.jsxs("button",{onClick:()=>m(i.id),className:k("flex flex-1 items-center justify-center gap-2 rounded-[18px] px-4 py-4 text-sm font-bold transition-all",a===i.id?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[t.jsx(i.icon,{className:k("h-5 w-5",a===i.id?i.color:"text-slate-400")}),i.name]},i.id)),e[1]=a,e[2]=n):n=e[2];let o;e[3]!==n?(o=t.jsx("div",{className:"flex gap-2 rounded-[24px] bg-slate-100 p-1.5",children:n}),e[3]=n,e[4]=o):o=e[4];let d,b,v,y;e[5]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:0,x:20},b={opacity:1,x:0},v={opacity:0,x:-20},y={duration:.2},e[5]=d,e[6]=b,e[7]=v,e[8]=y):(d=e[5],b=e[6],v=e[7],y=e[8]);let u;e[9]!==a||e[10]!==w||e[11]!==c||e[12]!==r?(u=t.jsx(xe,{institutions:w,selectedId:r,onSelect:c,type:a}),e[9]=a,e[10]=w,e[11]=c,e[12]=r,e[13]=u):u=e[13];let p;e[14]!==a||e[15]!==u?(p=t.jsx(B,{mode:"wait",children:t.jsx(g.div,{initial:d,animate:b,exit:v,transition:y,children:u},a)}),e[14]=a,e[15]=u,e[16]=p):p=e[16];let s;return e[17]!==o||e[18]!==p?(s=t.jsxs("div",{className:"space-y-8",children:[o,p]}),e[17]=o,e[18]=p,e[19]=s):s=e[19],s}function be(f){const e=O.c(29),{ticketNumber:w,onNewTicket:r}=f;let c,x;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:0,scale:.95},x={opacity:1,scale:1},e[0]=c,e[1]=x):(c=e[0],x=e[1]);let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(g.div,{initial:{scale:.8,opacity:0},animate:{scale:1.5,opacity:0},transition:{repeat:1/0,duration:2,ease:"easeOut"},className:"absolute inset-0 rounded-full bg-green-500/20"}),e[2]=a):a=e[2];let m,n,o;e[3]===Symbol.for("react.memo_cache_sentinel")?(m={scale:0},n={scale:1},o={type:"spring",stiffness:200,damping:20},e[3]=m,e[4]=n,e[5]=o):(m=e[3],n=e[4],o=e[5]);let d,b,v;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsxs("div",{className:"relative mb-12",children:[a,t.jsx(g.div,{initial:m,animate:n,transition:o,className:"relative mx-auto flex h-28 w-28 items-center justify-center rounded-[36px] bg-gradient-to-br from-emerald-400 to-green-600 shadow-2xl shadow-green-500/30",children:t.jsx(ae,{className:"h-14 w-14 text-white"})})]}),b=t.jsx("h2",{className:"mb-2 text-4xl font-black tracking-tight text-slate-900",children:"C'est fait !"}),v=t.jsx("p",{className:"mb-10 text-xl font-medium text-slate-500",children:"Votre ticket a été généré avec succès"}),e[6]=d,e[7]=b,e[8]=v):(d=e[6],b=e[7],v=e[8]);let y,u,p;e[9]===Symbol.for("react.memo_cache_sentinel")?(y={y:30,opacity:0},u={y:0,opacity:1},p={delay:.3,type:"spring"},e[9]=y,e[10]=u,e[11]=p):(y=e[9],u=e[10],p=e[11]);let s,i;e[12]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-8 -translate-y-8 rounded-full bg-white/5 blur-2xl transition-transform group-hover:scale-150"}),i=t.jsx("div",{className:"absolute bottom-0 left-0 h-24 w-24 -translate-x-8 translate-y-8 rounded-full bg-blue-500/10 blur-xl"}),e[12]=s,e[13]=i):(s=e[12],i=e[13]);let h;e[14]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsxs("div",{className:"mb-6 flex items-center justify-center gap-3 text-amber-400",children:[t.jsx(ce,{className:"h-6 w-6 rotate-12"}),t.jsx("span",{className:"text-sm font-black tracking-[0.2em] uppercase",children:"Ticket No."})]}),e[14]=h):h=e[14];let j;e[15]!==w?(j=t.jsx("div",{className:"mb-8 font-mono text-7xl font-black tracking-tighter text-white",children:w}),e[15]=w,e[16]=j):j=e[16];let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/5 bg-white/5 px-4 py-2 text-sm font-bold text-slate-400",children:[t.jsx(Z,{className:"h-4 w-4 text-amber-500"}),t.jsx("span",{children:"Attendez d'être appelé sur l'écran"})]}),e[17]=C):C=e[17];let S;e[18]!==j?(S=t.jsxs(g.div,{initial:y,animate:u,transition:p,className:"group relative mx-auto max-w-sm overflow-hidden rounded-[40px] bg-slate-900 p-10 shadow-2xl",children:[s,i,t.jsxs("div",{className:"relative z-10",children:[h,j,C]})]}),e[18]=j,e[19]=S):S=e[19];let z,I,R;e[20]===Symbol.for("react.memo_cache_sentinel")?(z={opacity:0},I={opacity:1},R={delay:.6},e[20]=z,e[21]=I,e[22]=R):(z=e[20],I=e[21],R=e[22]);let l;e[23]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(W,{className:"mr-2 h-5 w-5 text-blue-500"}),e[23]=l):l=e[23];let N;e[24]!==r?(N=t.jsx(g.div,{initial:z,animate:I,transition:R,className:"mt-12",children:t.jsxs(M,{onClick:r,className:"h-14 rounded-2xl border-none bg-slate-100 px-10 font-black tracking-tight text-slate-900 shadow-none transition-all hover:scale-105 hover:bg-slate-200 active:scale-95",children:[l,"Nouvelle opération"]})}),e[24]=r,e[25]=N):N=e[25];let A;return e[26]!==S||e[27]!==N?(A=t.jsxs(g.div,{initial:c,animate:x,className:"py-8 text-center",children:[d,b,v,S,N]}),e[26]=S,e[27]=N,e[28]=A):A=e[28],A}const fe=()=>{const f=String.fromCharCode(65+Math.floor(Math.random()*26)),e=String(Math.floor(Math.random()*999)+1).padStart(3,"0");return`${f}${e}`};function Ce(){const[f,e]=_.useState(1),[w,r]=_.useState(null),[c,x]=_.useState(!1),[a,m]=_.useState(null),[n,o]=_.useState(!1),[d,b]=_.useState(!1),[v,y]=_.useState(!1),{data:u=[],isPending:p}=Q({queryKey:["institutions","active"],queryFn:()=>L.entities.Institution.active()}),[s,i]=_.useState({phone:"",operation_type:"",institution_id:void 0,first_name:"",last_name:"",email:"",address:""});_.useEffect(()=>{(async()=>{if(s.phone.length===10&&!a&&!n){x(!0);try{const N=await L.entities.Client.verifyPhone(s.phone);N.exists&&N.client?(m(N.client),i(A=>({...A,phone:s.phone})),b(!1),o(!1)):(m(null),b(!0))}catch(N){console.error("Phone verification failed:",N)}finally{x(!1)}}})()},[s.phone,a,n]);const h=F({mutationFn:async()=>(await L.entities.Client.register({phone:s.phone,first_name:s.first_name,last_name:s.last_name,email:s.email,address:s.address})).client,onSuccess:l=>{m(l),o(!1),e(2)}}),j=F({mutationFn:async l=>a?(await L.entities.Client.addPhone(a.id,l)).phone:void 0,onSuccess:l=>{a&&l&&m({...a,phones:[...a.phones||[],l]})}}),C=F({mutationFn:async l=>{const N=fe(),A={...l,phone:s.phone,ticket_number:N,status:"waiting",first_name:a?.first_name||l.first_name||"Client",last_name:a?.last_name||l.last_name||"Anonyme",is_registered:!!a&&!v};return await L.entities.Client.create(A),N},onSuccess:l=>{r(l),e(3)}}),S=()=>{if(f===1)n?h.mutate():a&&e(2);else if(f===2){if(s.operation_type==="change")C.mutate({...s,service:"bureau"});else if(s.operation_type&&s.institution_id){const l=u.find(N=>N.id===s.institution_id);C.mutate({...s,operation_type:s.operation_type,service:l?.name||""})}}},z=()=>{e(1),r(null),m(null),o(!1),b(!1),y(!1),i({phone:"",operation_type:"",institution_id:void 0,first_name:"",last_name:"",email:"",address:""})},I=()=>f===1?n?s.first_name.trim()!==""&&s.last_name.trim()!=="":!!a:f===2?s.operation_type==="change"||s.operation_type==="paiement"?!0:!!(s.operation_type&&s.institution_id):!0,R=()=>{switch(f){case 1:return t.jsxs(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mb-8 flex h-20 w-20 items-center justify-center rounded-[24px] border border-white/20 bg-gradient-to-br from-cyan-400/20 to-purple-500/20 shadow-xl shadow-purple-500/20 backdrop-blur-xl transition-transform group-hover:scale-110",children:t.jsx(V,{className:"h-12 w-12 text-white transition-transform group-hover:rotate-12"})}),t.jsx("h2",{className:"text-4xl font-black tracking-tight text-white drop-shadow-lg",children:n?"Nouvelle Inscription":"Bienvenue chez Havifin"}),t.jsx("p",{className:"mt-3 text-lg font-medium text-white/70",children:n?"Laissez-nous faire connaissance pour mieux vous servir":"Identifiez-vous pour commencer votre opération"})]}),t.jsxs("div",{className:"mx-auto max-w-lg space-y-6",children:[!a&&!n&&!d&&t.jsxs("div",{className:"group relative",children:[t.jsx("div",{className:"absolute -inset-1 rounded-[28px] bg-gradient-to-r from-cyan-400/40 via-purple-500/40 to-pink-500/40 opacity-60 blur-xl transition duration-1000 group-hover:opacity-100 group-hover:duration-200"}),t.jsx(T,{type:"tel",inputMode:"numeric",pattern:"[0-9]*",value:s.phone,onChange:l=>i({...s,phone:l.target.value.replace(/\D/g,"").slice(0,10)}),placeholder:"Entrez votre numéro (10 chiffres)",className:"relative h-20 rounded-[24px] border-2 border-white/30 bg-white/10 text-center font-mono text-2xl font-black text-white shadow-2xl shadow-purple-500/20 backdrop-blur-2xl transition-all placeholder:text-white/40 focus:border-white/60 focus:bg-white/20 focus:ring-4 focus:ring-cyan-400/30",autoFocus:!0,disabled:c}),c&&t.jsx("div",{className:"absolute top-1/2 right-6 -translate-y-1/2",children:t.jsx(D,{className:"h-6 w-6 animate-spin text-cyan-300"})})]}),d&&t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[t.jsxs("div",{className:"rounded-[32px] border-2 border-white/30 bg-white/10 p-8 text-center shadow-2xl ring-4 shadow-cyan-500/20 ring-white/10 backdrop-blur-2xl",children:[t.jsx("div",{className:"mb-4 text-sm font-black tracking-widest text-cyan-300 uppercase",children:"Nouveau Numéro"}),t.jsx("div",{className:"mb-4 font-mono text-4xl font-black text-white",children:s.phone}),t.jsx("p",{className:"text-lg font-medium text-white/80",children:"Souhaitez-vous vous enregistrer pour profiter de nos services personnalisés ?"})]}),t.jsxs("div",{className:"grid gap-4",children:[t.jsx(M,{onClick:()=>{b(!1),o(!0)},className:"h-20 rounded-[24px] border border-white/30 bg-gradient-to-r from-cyan-500 to-blue-600 text-xl font-bold text-white shadow-2xl shadow-cyan-500/30 backdrop-blur-xl hover:border-white/50 hover:from-cyan-400 hover:to-blue-500",children:"Oui, m'enregistrer"}),t.jsx(M,{variant:"ghost",onClick:()=>{b(!1),y(!0),e(2)},className:"h-20 rounded-[24px] border-2 border-white/30 bg-white/10 text-xl font-bold text-white shadow-xl backdrop-blur-xl hover:bg-white/20",children:"Non, continuer ainsi"}),t.jsx(M,{variant:"link",onClick:()=>{b(!1),i({...s,phone:""})},className:"text-white/60 hover:text-white",children:"Changer de numéro"})]})]}),a&&t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between px-2",children:[t.jsx(P,{className:"text-lg font-black text-white",children:"Vos numéros"}),t.jsxs("button",{onClick:()=>{m(null),i({...s,phone:""})},className:"flex items-center gap-1 text-sm font-bold text-cyan-300 hover:text-cyan-200",children:[t.jsx(E,{className:"h-4 w-4"})," ","Changer"]})]}),t.jsx(de,{phones:a.phones||[],selectedPhone:s.phone,onSelect:l=>i({...s,phone:l}),onAdd:async l=>{await j.mutateAsync(l)},isAdding:j.isPending}),t.jsxs("div",{className:"group relative mt-8 overflow-hidden rounded-[32px] border border-white/30 bg-gradient-to-br from-cyan-500/20 via-purple-500/20 to-pink-500/20 p-8 text-white shadow-2xl shadow-purple-500/20 backdrop-blur-2xl",children:[t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-8 -translate-y-8 rounded-full bg-white/10 blur-2xl transition-transform duration-700 group-hover:scale-150"}),t.jsxs("div",{className:"relative z-10 text-center",children:[t.jsxs("p",{className:"mb-1 text-4xl font-black",children:["Bonjour"," ",a.first_name," !"]}),t.jsx("p",{className:"font-medium text-white/70",children:"On continue avec ce numéro de téléphone ?"})]})]})]}),n&&t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4 pt-6",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-white/30 bg-white/10 px-6 py-4 shadow-xl backdrop-blur-xl",children:[t.jsx("span",{className:"text-sm font-bold text-white/70",children:"Numéro à enregistrer"}),t.jsx("span",{className:"font-mono text-xl font-black text-cyan-300",children:s.phone})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{className:"ml-2 font-bold text-white",children:"Prénom"}),t.jsx(T,{placeholder:"Jean",value:s.first_name,onChange:l=>i({...s,first_name:l.target.value}),className:"h-14 rounded-2xl border-2 border-white/30 bg-white/10 text-white shadow-xl backdrop-blur-xl placeholder:text-white/40 focus:border-white/60 focus:bg-white/20 focus:ring-4 focus:ring-cyan-400/30"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{className:"ml-2 font-bold text-white",children:"Nom"}),t.jsx(T,{placeholder:"Lozé",value:s.last_name,onChange:l=>i({...s,last_name:l.target.value}),className:"h-14 rounded-2xl border-2 border-white/30 bg-white/10 text-white shadow-xl backdrop-blur-xl placeholder:text-white/40 focus:border-white/60 focus:bg-white/20 focus:ring-4 focus:ring-cyan-400/30"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{className:"ml-2 font-bold text-white",children:"Email (Optionnel)"}),t.jsx(T,{placeholder:"jean.loze@example.com",type:"email",value:s.email,onChange:l=>i({...s,email:l.target.value}),className:"h-14 rounded-2xl border-2 border-white/30 bg-white/10 text-white shadow-xl backdrop-blur-xl placeholder:text-white/40 focus:border-white/60 focus:bg-white/20 focus:ring-4 focus:ring-cyan-400/30"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{className:"ml-2 font-bold text-white",children:"Adresse (Optionnelle)"}),t.jsx(T,{placeholder:"Gombe, Kinshasa",value:s.address,onChange:l=>i({...s,address:l.target.value}),className:"h-14 rounded-2xl border-2 border-white/30 bg-white/10 text-white shadow-xl backdrop-blur-xl placeholder:text-white/40 focus:border-white/60 focus:bg-white/20 focus:ring-4 focus:ring-cyan-400/30"})]}),t.jsxs(M,{variant:"ghost",onClick:()=>{o(!1),i({...s,phone:""})},className:"h-14 w-full rounded-2xl font-bold text-slate-500 transition-colors hover:bg-slate-100",children:[t.jsx(E,{className:"mr-2 h-5 w-5"})," ","Retour"]})]})]})]});case 2:return t.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-12",children:[t.jsxs("div",{className:"space-y-2 text-center",children:[t.jsx(g.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-2 inline-block rounded-full bg-blue-50 px-4 py-1 text-xs font-black tracking-widest text-blue-600 uppercase",children:"Étape 2 • Opération"}),t.jsxs("h2",{className:"text-4xl font-black tracking-tight text-slate-900",children:["Bonjour"," ",t.jsx("span",{className:"text-blue-600",children:a?.first_name||s.first_name}),","]}),t.jsx("p",{className:"text-xl font-medium text-slate-500",children:"Quelle opération souhaitez-vous effectuer aujourd'hui ?"})]}),t.jsxs("div",{className:"grid gap-10",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx(P,{className:"ml-4 block text-sm font-black tracking-widest text-slate-400 uppercase",children:"Type d'Opération"}),t.jsx(me,{selectedOperation:s.operation_type,onSelect:l=>i({...s,operation_type:l,institution_id:void 0})})]}),t.jsx(B,{children:s.operation_type&&s.operation_type!=="change"&&t.jsxs(g.div,{initial:{opacity:0,height:0,y:20},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:20},className:"space-y-4 overflow-hidden",children:[t.jsx(P,{className:"ml-4 block text-sm font-black tracking-widest text-slate-400 uppercase",children:"Partenaire Bancaire / Mobile"}),t.jsx(pe,{institutions:u,selectedId:s.institution_id,onSelect:l=>i({...s,institution_id:l})})]})})]})]});case 3:return t.jsx(be,{ticketNumber:w,onNewTicket:z});default:return null}};return t.jsx(Y,{currentPageName:"Client",children:t.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[t.jsxs("div",{className:"fixed inset-0 z-0",children:[t.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/images/background1.png)"}}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-900/20 to-slate-900/40"})]}),t.jsxs("div",{className:"relative z-10 mx-auto max-w-3xl px-4 py-12",children:[t.jsx("div",{className:"mb-12 text-center",children:t.jsxs(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col items-center",children:[t.jsxs("div",{className:"group relative mb-12",children:[t.jsx("div",{className:"absolute -inset-12 rounded-full bg-gradient-to-tr from-cyan-400/30 via-purple-500/30 to-pink-500/30 opacity-60 blur-3xl transition-all duration-700 group-hover:scale-110 group-hover:opacity-100"}),t.jsxs("div",{className:"relative flex h-40 w-40 items-center justify-center rounded-[48px] border border-white/30 bg-white/10 p-8 shadow-2xl shadow-purple-500/20 backdrop-blur-2xl transition-all duration-500 group-hover:scale-110 group-hover:rotate-3 group-hover:border-white/50 group-hover:bg-white/20",children:[t.jsx("img",{src:"/logo.png",alt:"Havifin",className:"h-full w-full object-contain drop-shadow-2xl"}),t.jsx("div",{className:"absolute inset-0 rounded-[48px] bg-gradient-to-tr from-cyan-400/10 via-purple-500/10 to-pink-500/10 opacity-0 transition-opacity group-hover:opacity-100"})]})]}),t.jsxs("h1",{className:"mb-2 text-5xl font-black tracking-tight drop-shadow-lg",children:[t.jsx("span",{className:"bg-gradient-to-r from-cyan-300 via-blue-300 to-purple-300 bg-clip-text text-transparent",children:"Havifin"}),t.jsx("span",{className:"mx-2 text-white/40",children:"|"}),t.jsx("span",{className:"text-white/90",children:"Smart Ticket"})]}),t.jsx("p",{className:"text-lg font-bold tracking-widest text-white/60 uppercase",children:"Bureau de Change & Services"})]})}),t.jsxs("div",{className:"rounded-[40px] border border-white/20 bg-white/10 p-8 shadow-2xl shadow-purple-500/20 backdrop-blur-2xl md:p-12",children:[t.jsx(B,{mode:"wait",children:R()}),f<3&&!d&&t.jsx("div",{className:"mt-12 flex justify-center",children:t.jsx(M,{onClick:S,disabled:!I()||C.isPending||h.isPending||c,size:"lg",className:"h-16 rounded-3xl border border-white/30 bg-gradient-to-r from-cyan-500 via-blue-600 to-purple-600 px-16 text-xl font-bold text-white shadow-2xl shadow-cyan-500/30 backdrop-blur-xl transition-all hover:scale-[1.02] hover:border-white/50 hover:shadow-cyan-500/50 active:scale-[0.98]",children:C.isPending||h.isPending?t.jsxs(t.Fragment,{children:[t.jsx(D,{className:"mr-3 h-6 w-6 animate-spin"}),"Traitement..."]}):t.jsxs(t.Fragment,{children:[f===1&&"Continuer",f===2&&"Confirmer",t.jsx(ie,{className:"ml-3 h-6 w-6"})]})})})]}),f<3&&t.jsx("div",{className:"mt-12 flex justify-center gap-4",children:[1,2].map(l=>t.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${f===l?"w-12 bg-blue-600":"w-2 bg-slate-200"}`},l))})]})]})})}export{Ce as default};
