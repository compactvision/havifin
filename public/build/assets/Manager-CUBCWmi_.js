import{c as ze,u as Oe,r as je,j as t,a as gt}from"./app-BUBAR6mp.js";import{u as Le,A as Ze,c as tt,b as ee}from"./base44Client-BRWKJVoH.js";import{B as I}from"./button-DQPY1J5R.js";import{L as le,I as ve}from"./label-Cq-_ITRY.js";import{S as st,a as at,b as lt,c as it,d as Pe}from"./select-aRbn3rVS.js";import{c as we,a as X,m as Fe}from"./createLucideIcon-DiijWqkp.js";import{u as pe}from"./check-DPHV9BA1.js";import{t as G}from"./index-Bjb_2Sif.js";import{L as Ve}from"./landmark-CGCnV--u.js";import{B as Xe}from"./building-2-CpsUUJYP.js";import{R as Qe,a as nt,C as kt,A as _t}from"./refresh-cw-D8IcEwVZ.js";import{X as bt,S as jt,U as vt,L as ot,a as St,A as Ct}from"./app-main-IIWJvfV0.js";import{P as Ge}from"./plus-Ks8pmOux.js";import{S as Ft}from"./smartphone-CdfVBbkC.js";import{T as rt}from"./trash-2-DuP-Uv3X.js";import{L as wt}from"./loader-circle-i-VjIt21.js";import{a as ct,T as He,A as dt,C as Mt}from"./trending-up-Bvf-hBD0.js";import{T as We,a as Me,S as Dt,b as qt,c as Re,d as At,e as $t,f as Ut}from"./ShopManager-DcyfaYrR.js";import{h as Ie}from"./moment-B-YVwB4U.js";import{B as Te}from"./badge-_ZTT_2SB.js";import{D as Et,a as Rt,c as Tt,d as Pt}from"./index-CQedTPk2.js";import{U as mt}from"./users-C9zFItm_.js";import{S as Lt}from"./search-gk2Q5sVs.js";/* empty css            */import"./ManagerModal-Cg-JIblS.js";const zt=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],xt=we("Activity",zt);const It=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],Bt=we("ArrowDownLeft",It);const Kt=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Ht=we("ArrowUpRight",Kt);const Vt=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ht=we("ChartPie",Vt);const Qt=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Gt=we("Download",Qt);const Ot=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Nt=we("Hash",Ot);const Jt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Yt=we("Pencil",Jt);const Xt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yt=we("Save",Xt);const Wt=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],et=we("Settings",Wt);const Zt=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],es=we("Shield",Zt);function ts(){const e=ze.c(65),s=Oe(),[i,n]=je.useState(!1),[o,a]=je.useState(null),[A,b]=je.useState(null);let x;e[0]===Symbol.for("react.memo_cache_sentinel")?(x={name:"",type:"bank",code:"",logo:null},e[0]=x):x=e[0];const[h,S]=je.useState(x);let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l={queryKey:["institutions"],queryFn:ds},e[1]=l):l=e[1];const{data:p,isLoading:y}=Le(l);let E;e[2]!==p?(E=p===void 0?[]:p,e[2]=p,e[3]=E):E=e[3];const m=E,f=pe({mutationFn:cs,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),j(),G.success("Institution ajoutée avec succès")},onError:os}),C=pe({mutationFn:ns,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),j(),G.success("Institution mise à jour avec succès")},onError:rs});let k;e[4]!==s?(k={mutationFn:is,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),G.success("Configuration mise à jour")}},e[4]=s,e[5]=k):k=e[5];const w=pe(k),j=()=>{S({name:"",type:"bank",code:"",logo:null}),a(null),n(!1)};let M;e[6]===Symbol.for("react.memo_cache_sentinel")?(M=c=>{S({name:c.name,type:c.type,code:c.code,logo:null}),a(c.id),n(!0)},e[6]=M):M=e[6];const R=M;let v;e[7]!==s?(v={mutationFn:ls,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),G.success("Institution supprimée")}},e[7]=s,e[8]=v):v=e[8];const D=pe(v);let d;e[9]!==s?(d={mutationFn:as,onSuccess:()=>{s.invalidateQueries({queryKey:["institutions"]}),G.success("Statut mis à jour")}},e[9]=s,e[10]=d):d=e[10];const F=pe(d);let O,H;e[11]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600 shadow-lg shadow-indigo-600/20",children:t.jsx(Xe,{className:"h-5 w-5 text-white"})}),H=t.jsx("h4",{className:"text-sm font-black tracking-tight text-slate-800 uppercase",children:"Partenaires & Institutions"}),e[11]=O,e[12]=H):(O=e[11],H=e[12]);let T;e[13]!==m.length?(T=t.jsxs("div",{className:"ml-2 flex items-center gap-3",children:[O,t.jsxs("div",{children:[H,t.jsxs("p",{className:"text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:[m.length," Entités Enregistrées"]})]})]}),e[13]=m.length,e[14]=T):T=e[14];let L;e[15]!==i?(L=()=>n(!i),e[15]=i,e[16]=L):L=e[16];const J=i?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 hover:bg-indigo-700";let z;e[17]!==J?(z=X("h-11 rounded-xl px-6 text-xs font-black tracking-widest uppercase transition-all",J),e[17]=J,e[18]=z):z=e[18];let _;e[19]!==i?(_=i?t.jsx(bt,{className:"mr-2 h-4 w-4"}):t.jsx(Ge,{className:"mr-2 h-4 w-4"}),e[19]=i,e[20]=_):_=e[20];const K=i?"Fermer":"Nouvelle Institution";let $;e[21]!==L||e[22]!==z||e[23]!==_||e[24]!==K?($=t.jsxs(I,{onClick:L,className:z,children:[_,K]}),e[21]=L,e[22]=z,e[23]=_,e[24]=K,e[25]=$):$=e[25];let q;e[26]!==T||e[27]!==$?(q=t.jsxs("div",{className:"flex items-center justify-between rounded-[1.5rem] border border-slate-100 bg-slate-100/50 p-4",children:[T,$]}),e[26]=T,e[27]=$,e[28]=q):q=e[28];let N;e[29]!==f||e[30]!==o||e[31]!==h||e[32]!==j||e[33]!==i||e[34]!==C?(N=i&&t.jsx(Fe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsxs("div",{className:"relative rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-64 w-64 bg-indigo-500/10 blur-[100px]"}),t.jsxs("h5",{className:"mb-8 flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(Ve,{className:"h-6 w-6 text-indigo-400"}),o?"Modifier l'institution":"Configurer un nouveau partenaire"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(le,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Nom de l'institution"}),t.jsx(ve,{placeholder:"ex: Bank of Africa",value:h.name,onChange:c=>S({...h,name:c.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(le,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Type de service"}),t.jsxs(st,{value:h.type,onValueChange:c=>S({...h,type:c}),children:[t.jsx(at,{className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500",children:t.jsx(lt,{})}),t.jsxs(it,{className:"border-slate-800 bg-slate-900 text-white",children:[t.jsx(Pe,{value:"bank",className:"focus:bg-slate-800",children:"Banque Classique"}),t.jsx(Pe,{value:"mobile_money",className:"focus:bg-slate-800",children:"Mobile Money"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(le,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Code Identifiant"}),t.jsx(ve,{placeholder:"ex: BOA-CD",value:h.code,onChange:c=>S({...h,code:c.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 font-mono font-black text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),t.jsxs("div",{className:"mt-6 space-y-2",children:[t.jsx(le,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Logo de l'institution (Optionnel)"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"relative flex h-16 w-16 items-center justify-center overflow-hidden rounded-xl border border-white/10 bg-white/5",children:h.logo?t.jsx("img",{src:URL.createObjectURL(h.logo),alt:"Preview",className:"h-full w-full object-cover"}):t.jsx(Xe,{className:"h-6 w-6 text-white/20"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx(ve,{type:"file",accept:"image/*",onChange:c=>{c.target.files&&c.target.files[0]&&S({...h,logo:c.target.files[0]})},className:"h-12 w-full cursor-pointer rounded-xl border-white/10 bg-white/5 pt-2 text-sm font-bold text-white file:mr-4 file:rounded-lg file:border-0 file:bg-indigo-600 file:px-4 file:py-1 file:text-xs file:font-bold file:text-white hover:file:bg-indigo-700"}),t.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Format recommandé: PNG ou JPG, fond transparent. Max 2MB."})]})]})]}),t.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[t.jsx(I,{variant:"ghost",onClick:j,className:"h-12 rounded-xl px-8 text-xs font-black tracking-widest text-slate-400 uppercase hover:bg-white/5 hover:text-white",children:"Annuler"}),t.jsx(I,{onClick:()=>{o?C.mutate({id:o,data:h}):f.mutate(h)},disabled:f.isPending||C.isPending||!h.name||!h.code,className:"h-12 rounded-xl bg-white px-10 text-xs font-black tracking-widest text-slate-900 uppercase transition-all hover:bg-slate-100",children:f.isPending?t.jsx(Qe,{className:"h-4 w-4 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(yt,{className:"mr-2 h-4 w-4"}),o?"Mettre à jour":"Enregistrer Partenaire"]})})]})]})}),e[29]=f,e[30]=o,e[31]=h,e[32]=j,e[33]=i,e[34]=C,e[35]=N):N=e[35];let g;e[36]!==N?(g=t.jsx(Ze,{children:N}),e[36]=N,e[37]=g):g=e[37];let U;if(e[38]!==D||e[39]!==m||e[40]!==F){let c;e[42]!==D||e[43]!==F?(c=u=>t.jsxs(Fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative overflow-hidden rounded-[2rem] border-2 border-slate-50 bg-white p-6 shadow-xl shadow-slate-200/50 transition-all duration-300 hover:border-indigo-100",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("div",{className:X("flex h-14 w-14 items-center justify-center rounded-2xl shadow-lg transition-transform group-hover:rotate-6",u.type==="bank"?"bg-slate-900 text-white shadow-slate-900/10":"bg-emerald-500 text-white shadow-emerald-500/10"),children:u.logo_url?t.jsx("img",{src:u.logo_url,alt:u.name,className:"h-9 w-9 object-contain"}):u.type==="bank"?t.jsx(Xe,{className:"h-7 w-7"}):t.jsx(Ft,{className:"h-7 w-7"})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(I,{variant:"ghost",size:"icon",onClick:()=>F.mutate({id:u.id,is_active:!u.is_active}),className:X("h-10 w-10 rounded-xl transition-all",u.is_active?"bg-emerald-50 text-emerald-500":"bg-slate-50 text-slate-300"),children:t.jsx(jt,{className:"h-5 w-5"})}),t.jsx(I,{variant:"ghost",size:"icon",onClick:()=>D.mutate(u.id),className:"h-10 w-10 rounded-xl text-slate-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500",children:t.jsx(rt,{className:"h-5 w-5"})}),t.jsx(I,{variant:"ghost",size:"icon",onClick:()=>b(u.id),className:"h-10 w-10 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-emerald-50 hover:text-emerald-600",children:t.jsx(et,{className:"h-5 w-5"})}),t.jsx(I,{variant:"ghost",size:"icon",onClick:()=>R(u),className:"h-10 w-10 rounded-xl bg-slate-50 text-slate-400 transition-all hover:bg-indigo-50 hover:text-indigo-600",children:t.jsx(Yt,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-lg font-black tracking-tight text-slate-900",children:u.name}),!u.is_active&&t.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[8px] font-black tracking-widest text-slate-400 uppercase",children:"Inactif"}),u.settings?.required_fields&&u.settings.required_fields.length>0&&t.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[8px] font-black tracking-widest text-emerald-600 uppercase",children:[t.jsx(nt,{className:"h-2 w-2"}),"Configuré"]})]}),t.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[t.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:u.code}),t.jsx("span",{className:"h-1 w-1 rounded-full bg-slate-200"}),t.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase",children:u.type==="bank"?"Banque":"Mobile Money"})]})]}),t.jsx("div",{className:X("absolute -right-6 -bottom-6 h-24 w-24 rounded-full opacity-[0.03] transition-transform group-hover:scale-150",u.type==="bank"?"bg-slate-900":"bg-emerald-500")})]},u.id),e[42]=D,e[43]=F,e[44]=c):c=e[44],U=m.map(c),e[38]=D,e[39]=m,e[40]=F,e[41]=U}else U=e[41];let P;e[45]!==m.length||e[46]!==y?(P=m.length===0&&!y&&t.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-slate-200 bg-slate-50/50 py-20",children:[t.jsx(Ve,{className:"mb-4 h-16 w-16 text-slate-200"}),t.jsx("p",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Aucune institution configurée"})]}),e[45]=m.length,e[46]=y,e[47]=P):P=e[47];let V;e[48]!==U||e[49]!==P?(V=t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:[U,P]}),e[48]=U,e[49]=P,e[50]=V):V=e[50];let Q;e[51]!==y?(Q=y&&t.jsx("div",{className:"flex justify-center p-20",children:t.jsx(wt,{className:"h-10 w-10 animate-spin text-indigo-600"})}),e[51]=y,e[52]=Q):Q=e[52];let B;e[53]!==A||e[54]!==m||e[55]!==w?(B=A&&t.jsx(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 p-4 backdrop-blur-sm",onClick:()=>b(null),children:t.jsxs(Fe.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"w-full max-w-md overflow-hidden rounded-[2.5rem] bg-white shadow-2xl",onClick:ss,children:[t.jsxs("div",{className:"relative bg-slate-900 p-8 text-white",children:[t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 bg-indigo-500/10 blur-3xl"}),t.jsxs("h3",{className:"flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(et,{className:"h-6 w-6 text-indigo-400"}),"Champs Requis"]}),t.jsxs("p",{className:"mt-2 text-xs font-medium text-slate-400",children:["Configurez les informations obligatoires pour"," ",t.jsx("span",{className:"text-white",children:m.find(c=>c.id===A)?.name})]})]}),t.jsxs("div",{className:"p-8",children:[t.jsx("div",{className:"space-y-3",children:[{id:"account_number",label:"Numéro de Compte"},{id:"beneficiary",label:"Nom du Bénéficiaire"},{id:"beneficiary_number",label:"Numéro du Bénéficiaire"},{id:"reason",label:"Motif / Raison"}].map(c=>{const u=m.find(ie=>ie.id===A),Z=(u?.settings?.required_fields||[]).includes(c.id);return t.jsxs("button",{onClick:()=>w.mutate({institution:u,field:c.id}),className:X("flex w-full items-center justify-between rounded-2xl border-2 p-5 transition-all",Z?"border-indigo-100 bg-indigo-50/50 text-indigo-900 shadow-sm":"border-slate-100 bg-slate-50/50 text-slate-500 hover:border-slate-200"),children:[t.jsx("span",{className:"text-sm font-black tracking-tight",children:c.label}),Z?t.jsx(nt,{className:"h-6 w-6 text-indigo-600"}):t.jsx("div",{className:"h-6 w-6 rounded-full border-2 border-slate-200 bg-white"})]},c.id)})}),t.jsx(I,{onClick:()=>b(null),className:"mt-8 h-14 w-full rounded-2xl bg-slate-900 text-sm font-black tracking-widest text-white uppercase transition-all hover:bg-slate-800",children:"Terminer"})]})]})}),e[53]=A,e[54]=m,e[55]=w,e[56]=B):B=e[56];let Y;e[57]!==B?(Y=t.jsx(Ze,{children:B}),e[57]=B,e[58]=Y):Y=e[58];let W;return e[59]!==q||e[60]!==g||e[61]!==V||e[62]!==Q||e[63]!==Y?(W=t.jsxs("div",{className:"space-y-8",children:[q,g,V,Q,Y]}),e[59]=q,e[60]=g,e[61]=V,e[62]=Q,e[63]=Y,e[64]=W):W=e[64],W}function ss(e){return e.stopPropagation()}function as(e){const{id:s,is_active:i}=e;return ee.entities.Institution.update(s,{is_active:i})}function ls(e){return ee.entities.Institution.delete(e)}function is(e){const{institution:s,field:i}=e,n=s.settings||{required_fields:[]},o=n.required_fields||[],a=o.includes(i)?o.filter(A=>A!==i):[...o,i];return tt.post(`/api/institutions/${s.id}`,{_method:"PUT",settings:{...n,required_fields:a}})}function rs(){return G.error("Erreur lors de la mise à jour")}function ns(e){const{id:s,data:i}=e,n=new FormData;return n.append("_method","PUT"),n.append("name",i.name),n.append("type",i.type),n.append("code",i.code),i.logo&&n.append("logo",i.logo),tt.post(`/api/institutions/${s}`,n,{headers:{"Content-Type":"multipart/form-data"}})}function os(){return G.error("Erreur lors de l'ajout de l'institution")}function cs(e){const s=new FormData;return s.append("name",e.name),s.append("type",e.type),s.append("code",e.code),e.logo&&s.append("logo",e.logo),tt.post("/api/institutions",s,{headers:{"Content-Type":"multipart/form-data"}})}function ds(){return ee.entities.Institution.list()}const ut=[{id:"USD_CDF",label:"USD → CDF",from:"USD",to:"CDF"},{id:"EUR_CDF",label:"EUR → CDF",from:"EUR",to:"CDF"},{id:"EUR_USD",label:"EUR → USD",from:"EUR",to:"USD"},{id:"CDF_USD",label:"CDF → USD",from:"CDF",to:"USD"}];function ms(){const e=ze.c(56),s=Oe();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={currency_pair:"",buy_rate:"",sell_rate:""},e[0]=i):i=e[0];const[n,o]=je.useState(i),[a,A]=je.useState(!1);let b;e[1]===Symbol.for("react.memo_cache_sentinel")?(b={queryKey:["rates"],queryFn:gs},e[1]=b):b=e[1];const{data:x,isLoading:h}=Le(b);let S;e[2]!==x?(S=x===void 0?[]:x,e[2]=x,e[3]=S):S=e[3];const l=S;let p;e[4]!==s?(p={mutationFn:fs,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),G.success("Taux mis à jour")}},e[4]=s,e[5]=p):p=e[5];const y=pe(p);let E;e[6]!==s?(E={mutationFn:ps,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),o({currency_pair:"",buy_rate:"",sell_rate:""}),A(!1),G.success("Nouveau taux de change configuré")},onError:us},e[6]=s,e[7]=E):E=e[7];const m=pe(E);let f;e[8]!==s?(f={mutationFn:hs,onSuccess:()=>{s.invalidateQueries({queryKey:["rates"]}),G.success("Configuration supprimée")}},e[8]=s,e[9]=f):f=e[9];const C=pe(f);let k;e[10]!==y?(k=(N,g,U)=>{U&&y.mutate({id:N.id,data:{[g]:parseFloat(U)}})},e[10]=y,e[11]=k):k=e[11];const w=k;let j,M;e[12]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600 shadow-lg shadow-indigo-600/20",children:t.jsx(dt,{className:"h-5 w-5 text-white"})}),M=t.jsx("h4",{className:"text-sm font-black tracking-tight text-slate-800 uppercase",children:"Marché des Devises"}),e[12]=j,e[13]=M):(j=e[12],M=e[13]);let R;e[14]!==l.length?(R=t.jsxs("div",{className:"ml-2 flex items-center gap-3",children:[j,t.jsxs("div",{children:[M,t.jsxs("p",{className:"text-[10px] font-bold tracking-widest text-slate-400 uppercase",children:[l.length," Paires Actives"]})]})]}),e[14]=l.length,e[15]=R):R=e[15];let v;e[16]!==a?(v=()=>A(!a),e[16]=a,e[17]=v):v=e[17];const D=a?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 hover:bg-indigo-700";let d;e[18]!==D?(d=X("h-11 rounded-xl px-6 text-xs font-black tracking-widest uppercase transition-all",D),e[18]=D,e[19]=d):d=e[19];let F;e[20]!==a?(F=a?t.jsx(bt,{className:"mr-2 h-4 w-4"}):t.jsx(Ge,{className:"mr-2 h-4 w-4"}),e[20]=a,e[21]=F):F=e[21];const O=a?"Fermer":"Ajouter une Paire";let H;e[22]!==v||e[23]!==d||e[24]!==F||e[25]!==O?(H=t.jsxs(I,{onClick:v,className:d,children:[F,O]}),e[22]=v,e[23]=d,e[24]=F,e[25]=O,e[26]=H):H=e[26];let T;e[27]!==R||e[28]!==H?(T=t.jsxs("div",{className:"flex items-center justify-between rounded-[1.5rem] border border-slate-100 bg-slate-100/50 p-4",children:[R,H]}),e[27]=R,e[28]=H,e[29]=T):T=e[29];let L;e[30]!==m||e[31]!==n||e[32]!==a?(L=a&&t.jsx(Fe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsxs("div",{className:"relative rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-64 w-64 bg-indigo-500/10 blur-[100px]"}),t.jsxs("h5",{className:"mb-8 flex items-center gap-3 text-xl font-black tracking-tight",children:[t.jsx(Ge,{className:"h-6 w-6 text-indigo-400"}),"Nouvelle Configuration"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(le,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Paire de devises"}),t.jsxs(st,{value:n.currency_pair,onValueChange:N=>o({...n,currency_pair:N}),children:[t.jsx(at,{className:"h-12 rounded-xl border-white/10 bg-white/5 font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500",children:t.jsx(lt,{placeholder:"Choisir une paire"})}),t.jsx(it,{className:"border-slate-800 bg-slate-900 text-white",children:ut.map(xs)})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(le,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Taux d'Achat (Buy)"}),t.jsxs("div",{className:"relative",children:[t.jsx(ct,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-emerald-400"}),t.jsx(ve,{type:"number",placeholder:"0.00",value:n.buy_rate,onChange:N=>o({...n,buy_rate:N.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 pl-11 font-mono font-black text-white"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(le,{className:"ml-1 text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Taux de Vente (Sell)"}),t.jsxs("div",{className:"relative",children:[t.jsx(He,{className:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-blue-400"}),t.jsx(ve,{type:"number",placeholder:"0.00",value:n.sell_rate,onChange:N=>o({...n,sell_rate:N.target.value}),className:"h-12 rounded-xl border-white/10 bg-white/5 pl-11 font-mono font-black text-white"})]})]})]}),t.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[t.jsx(I,{variant:"ghost",onClick:()=>A(!1),className:"h-12 rounded-xl px-8 text-xs font-black tracking-widest text-slate-400 uppercase hover:bg-white/5 hover:text-white",children:"Annuler"}),t.jsx(I,{onClick:()=>m.mutate(n),disabled:m.isPending||!n.currency_pair,className:"h-12 rounded-xl bg-white px-10 text-xs font-black tracking-widest text-slate-900 uppercase transition-all hover:bg-slate-100",children:m.isPending?t.jsx(Qe,{className:"h-4 w-4 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(yt,{className:"mr-2 h-4 w-4"}),"Activer le Taux"]})})]})]})}),e[30]=m,e[31]=n,e[32]=a,e[33]=L):L=e[33];let J;e[34]!==L?(J=t.jsx(Ze,{children:L}),e[34]=L,e[35]=J):J=e[35];let z;if(e[36]!==C||e[37]!==w||e[38]!==l){let N;e[40]!==C||e[41]!==w?(N=g=>{const U=ut.find(P=>P.id===g.currency_pair);return t.jsxs(Fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group rounded-[2rem] border-2 border-slate-50 bg-white p-8 shadow-xl shadow-slate-200/50 transition-all duration-300 hover:border-indigo-100",children:[t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-900 shadow-lg shadow-slate-900/10 transition-transform group-hover:rotate-6",children:t.jsx("span",{className:"text-sm font-black text-white",children:U?.from||g.currency_pair.split("_")[0]})}),t.jsx(He,{className:"h-4 w-4 text-slate-300"}),t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl border border-indigo-100 bg-indigo-50",children:t.jsx("span",{className:"text-sm font-black text-indigo-600",children:U?.to||g.currency_pair.split("_")[1]})})]}),t.jsx(I,{variant:"ghost",size:"icon",onClick:()=>C.mutate(g.id),className:"h-10 w-10 rounded-xl text-slate-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500",children:t.jsx(rt,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between px-1",children:[t.jsx("span",{className:"text-[9px] font-black tracking-widest text-slate-400 uppercase",children:"Achat (Buy)"}),t.jsx(ct,{className:"h-3 w-3 text-emerald-500"})]}),t.jsx("div",{className:"relative",children:t.jsx(ve,{type:"number",value:g.buy_rate,onChange:P=>w(g,"buy_rate",P.target.value),className:"h-14 rounded-2xl border-transparent bg-slate-50 font-mono text-xl font-black text-slate-900 focus:border-indigo-500 focus:bg-white"})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between px-1",children:[t.jsx("span",{className:"text-[9px] font-black tracking-widest text-slate-400 uppercase",children:"Vente (Sell)"}),t.jsx(He,{className:"h-3 w-3 text-blue-500"})]}),t.jsx("div",{className:"relative",children:t.jsx(ve,{type:"number",value:g.sell_rate,onChange:P=>w(g,"sell_rate",P.target.value),className:"h-14 rounded-2xl border-transparent bg-slate-50 font-mono text-xl font-black text-slate-900 focus:border-indigo-500 focus:bg-white"})})]})]})]},g.id)},e[40]=C,e[41]=w,e[42]=N):N=e[42],z=l.map(N),e[36]=C,e[37]=w,e[38]=l,e[39]=z}else z=e[39];let _;e[43]!==h||e[44]!==l.length?(_=l.length===0&&!h&&t.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-slate-200 bg-slate-50/50 py-20",children:[t.jsx(dt,{className:"mb-4 h-16 w-16 text-slate-200"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Aucun taux configuré"})]}),e[43]=h,e[44]=l.length,e[45]=_):_=e[45];let K;e[46]!==z||e[47]!==_?(K=t.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[z,_]}),e[46]=z,e[47]=_,e[48]=K):K=e[48];let $;e[49]!==h?($=h&&t.jsx("div",{className:"flex justify-center p-20",children:t.jsx(wt,{className:"h-10 w-10 animate-spin text-indigo-600"})}),e[49]=h,e[50]=$):$=e[50];let q;return e[51]!==T||e[52]!==J||e[53]!==K||e[54]!==$?(q=t.jsxs("div",{className:"space-y-8",children:[T,J,K,$]}),e[51]=T,e[52]=J,e[53]=K,e[54]=$,e[55]=q):q=e[55],q}function xs(e){return t.jsx(Pe,{value:e.id,className:"hover:bg-slate-800 focus:bg-slate-800",children:e.label},e.id)}async function hs(e){await ee.entities.ExchangeRate.delete(e)}function us(){return G.error("Erreur lors de la création du taux")}async function ps(e){await ee.entities.ExchangeRate.create({...e,buy_rate:parseFloat(e.buy_rate),sell_rate:parseFloat(e.sell_rate),is_active:!0})}async function fs(e){const{id:s,data:i}=e;await ee.entities.ExchangeRate.update(s,i)}function gs(){return ee.entities.ExchangeRate.filter({is_active:!0})}const pt={blue:{bg:"bg-blue-50",icon:"bg-blue-600 text-white shadow-blue-200",text:"text-blue-600",border:"border-blue-100",accent:"bg-blue-600/5",glow:"shadow-blue-500/10"},emerald:{bg:"bg-emerald-50",icon:"bg-emerald-600 text-white shadow-emerald-200",text:"text-emerald-600",border:"border-emerald-100",accent:"bg-emerald-600/5",glow:"shadow-emerald-500/10"},amber:{bg:"bg-amber-50",icon:"bg-amber-500 text-white shadow-amber-200",text:"text-amber-600",border:"border-amber-100",accent:"bg-amber-600/5",glow:"shadow-amber-500/10"},indigo:{bg:"bg-indigo-50",icon:"bg-indigo-600 text-white shadow-indigo-200",text:"text-indigo-600",border:"border-indigo-100",accent:"bg-indigo-600/5",glow:"shadow-indigo-500/10"},purple:{bg:"bg-purple-50",icon:"bg-purple-600 text-white shadow-purple-200",text:"text-purple-600",border:"border-purple-100",accent:"bg-purple-600/5",glow:"shadow-purple-500/10"},rose:{bg:"bg-rose-50",icon:"bg-rose-600 text-white shadow-rose-200",text:"text-rose-600",border:"border-rose-100",accent:"bg-rose-600/5",glow:"shadow-rose-500/10"}};function Ke(e){const s=ze.c(43),{title:i,value:n,subtitle:o,icon:a,color:A,trend:b}=e,x=pt[A]||pt.blue;let h,S;s[0]===Symbol.for("react.memo_cache_sentinel")?(h={y:-5,scale:1.02},S={type:"spring",stiffness:400,damping:25},s[0]=h,s[1]=S):(h=s[0],S=s[1]);let l;s[2]!==x.glow?(l=X("group relative overflow-hidden rounded-[2.5rem] border border-white bg-white/70 p-8 shadow-xl backdrop-blur-xl transition-all",x.glow),s[2]=x.glow,s[3]=l):l=s[3];let p;s[4]!==x.bg?(p=X("absolute -top-12 -right-12 h-32 w-32 rounded-full opacity-20 blur-3xl",x.bg),s[4]=x.bg,s[5]=p):p=s[5];let y;s[6]!==p?(y=t.jsx("div",{className:p}),s[6]=p,s[7]=y):y=s[7];let E;s[8]!==x.icon?(E=X("flex h-14 w-14 items-center justify-center rounded-2xl shadow-lg transition-transform duration-500 group-hover:scale-110",x.icon),s[8]=x.icon,s[9]=E):E=s[9];let m;s[10]!==a?(m=t.jsx(a,{className:"h-8 w-8"}),s[10]=a,s[11]=m):m=s[11];let f;s[12]!==E||s[13]!==m?(f=t.jsx("div",{className:E,children:m}),s[12]=E,s[13]=m,s[14]=f):f=s[14];let C;s[15]!==b?(C=b&&t.jsxs("div",{className:X("flex items-center gap-1 rounded-full px-3 py-1 text-[10px] font-black tracking-widest uppercase",b.positive?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"),children:[b.positive?"↑":"↓"," ",b.value]}),s[15]=b,s[16]=C):C=s[16];let k;s[17]!==f||s[18]!==C?(k=t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[f,C]}),s[17]=f,s[18]=C,s[19]=k):k=s[19];let w;s[20]!==i?(w=t.jsx("p",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:i}),s[20]=i,s[21]=w):w=s[21];let j;s[22]!==n?(j=t.jsx("h2",{className:"text-3xl leading-tight font-black tracking-tight text-slate-900",children:n}),s[22]=n,s[23]=j):j=s[23];let M;s[24]!==x.text||s[25]!==o?(M=o&&t.jsxs("p",{className:"mt-2 flex items-center gap-1.5 text-[11px] font-bold tracking-wide text-slate-400 uppercase",children:[t.jsx("span",{className:X("h-1.5 w-1.5 rounded-full",x.text.replace("text","bg"))}),o]}),s[24]=x.text,s[25]=o,s[26]=M):M=s[26];let R;s[27]!==w||s[28]!==j||s[29]!==M?(R=t.jsxs("div",{className:"space-y-1",children:[w,j,M]}),s[27]=w,s[28]=j,s[29]=M,s[30]=R):R=s[30];let v;s[31]!==k||s[32]!==R?(v=t.jsxs("div",{className:"relative z-10 flex h-full flex-col",children:[k,R]}),s[31]=k,s[32]=R,s[33]=v):v=s[33];let D;s[34]!==x.text?(D=X("absolute bottom-0 left-0 h-1.5 w-full opacity-30",x.text.replace("text","bg")),s[34]=x.text,s[35]=D):D=s[35];let d;s[36]!==D?(d=t.jsx("div",{className:D}),s[36]=D,s[37]=d):d=s[37];let F;return s[38]!==v||s[39]!==d||s[40]!==l||s[41]!==y?(F=t.jsxs(Fe.div,{whileHover:h,transition:S,className:l,children:[y,v,d]}),s[38]=v,s[39]=d,s[40]=l,s[41]=y,s[42]=F):F=s[42],F}function ft(e){const s=ze.c(6),{transactions:i}=e;if(i.length===0){let A;return s[0]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsxs("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border-2 border-dashed border-slate-200 bg-slate-50/50 p-20",children:[t.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-2xl border border-slate-100 bg-white shadow-sm",children:t.jsx(Nt,{className:"h-8 w-8 text-slate-300"})}),t.jsx("p",{className:"text-xs font-black tracking-widest text-slate-400 uppercase",children:"Aucune transaction trouvée"})]}),s[0]=A):A=s[0],A}let n;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx("thead",{children:t.jsxs("tr",{className:"text-[10px] font-black tracking-[0.2em] text-slate-400 uppercase",children:[t.jsx("th",{className:"px-6 py-4 font-black",children:"Transaction / Client"}),t.jsx("th",{className:"px-6 py-4 text-center font-black",children:"Type"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Montant Entrée"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Montant Sortie"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Commission"}),t.jsx("th",{className:"px-6 py-4 text-right font-black",children:"Date / Heure"})]})}),s[1]=n):n=s[1];let o;s[2]!==i?(o=i.map(bs),s[2]=i,s[3]=o):o=s[3];let a;return s[4]!==o?(a=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border-separate border-spacing-y-3 text-left",children:[n,t.jsx("tbody",{children:o})]})}),s[4]=o,s[5]=a):a=s[5],a}function bs(e){return t.jsxs("tr",{className:"group rounded-2xl border border-slate-100 bg-white transition-all duration-300 hover:bg-slate-50",children:[t.jsx("td",{className:"rounded-l-2xl border-y border-l border-slate-100 px-6 py-5 group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-slate-900 shadow-lg shadow-slate-900/10 transition-transform group-hover:scale-110",children:t.jsx(vt,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{className:"flex min-w-0 flex-col",children:[t.jsx("span",{className:"truncate text-sm font-black text-slate-900",children:e.client_name||"Utilisateur"}),t.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold tracking-tight text-slate-400 uppercase",children:[t.jsx(Nt,{className:"h-2.5 w-2.5"})," ID-",e.id.toString().slice(-4).toUpperCase()]})]})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-center group-hover:border-indigo-100",children:t.jsxs("div",{className:X("inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-[10px] font-black tracking-widest uppercase",e.operation_type==="change"?"bg-indigo-50 text-indigo-600":"bg-amber-50 text-amber-600"),children:[e.operation_type==="change"?t.jsx(Ht,{className:"h-3 w-3"}):t.jsx(Bt,{className:"h-3 w-3"}),e.operation_type]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-black text-slate-900",children:e.amount_from?.toLocaleString()}),t.jsx("span",{className:"text-[10px] font-black tracking-tighter text-slate-400 uppercase",children:e.currency_from})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-black text-emerald-600",children:e.amount_to?.toLocaleString()}),t.jsx("span",{className:"text-[10px] font-black tracking-tighter text-emerald-600 uppercase opacity-60",children:e.currency_to})]})}),t.jsx("td",{className:"border-y border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("span",{className:"rounded-lg bg-slate-900 px-3 py-1 font-mono text-xs font-black text-white shadow-lg shadow-slate-900/10",children:["$",parseFloat(e.commission).toLocaleString()]})}),t.jsx("td",{className:"rounded-r-2xl border-y border-r border-slate-100 px-6 py-5 text-right group-hover:border-indigo-100",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-black text-slate-700",children:Ie(e.created_date).format("DD/MM/YYYY")}),t.jsxs("span",{className:"flex items-center justify-end gap-1 text-[10px] font-bold text-slate-400",children:[t.jsx(kt,{className:"h-2.5 w-2.5"})," ",Ie(e.created_date).format("HH:mm")]})]})})]},e.id)}function js(){const e=ze.c(96),{auth:s}=gt().props,i=s.user?.role==="super-admin",[n,o]=je.useState(!1),[a,A]=je.useState(null),b=Oe(),x=i?"manager":"cashier";let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],e[0]=h):h=e[0];let S;e[1]!==x?(S={name:"",email:"",password:"",role:x,is_active:!0,shop_ids:h},e[1]=x,e[2]=S):S=e[2];const[l,p]=je.useState(S);let y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=["shops"],e[3]=y):y=e[3];let E;e[4]!==i?(E={queryKey:y,queryFn:ee.entities.Shop.list,enabled:i},e[4]=i,e[5]=E):E=e[5];const{data:m}=Le(E);let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f={queryKey:["users"],queryFn:ee.entities.User.list},e[6]=f):f=e[6];const{data:C,isLoading:k}=Le(f);let w;e[7]!==b?(w={mutationFn:ee.entities.User.create,onSuccess:()=>{b.invalidateQueries({queryKey:["users"]}),o(!1),p({name:"",email:"",password:"",role:"cashier",is_active:!0}),G.success("Utilisateur créé avec succès")},onError:Ss},e[7]=b,e[8]=w):w=e[8];const j=pe(w);let M;e[9]!==b?(M={mutationFn:_s,onSuccess:()=>{b.invalidateQueries({queryKey:["users"]}),A(null),p({name:"",email:"",password:"",role:"cashier",is_active:!0}),G.success("Utilisateur mis à jour avec succès")},onError:ks},e[9]=b,e[10]=M):M=e[10];const R=pe(M);let v;e[11]!==b?(v={mutationFn:ys,onSuccess:()=>{b.invalidateQueries({queryKey:["users"]}),G.success("Utilisateur supprimé avec succès")},onError:Ns},e[11]=b,e[12]=v):v=e[12];const D=pe(v);let d;e[13]!==j||e[14]!==a||e[15]!==l||e[16]!==R?(d=r=>{r.preventDefault(),a?R.mutate({id:a.id,data:l}):j.mutate(l)},e[13]=j,e[14]=a,e[15]=l,e[16]=R,e[17]=d):d=e[17];const F=d;let O;e[18]===Symbol.for("react.memo_cache_sentinel")?(O=r=>{A(r),p({name:r.name,email:r.email,role:r.role,is_active:r.is_active}),o(!0)},e[18]=O):O=e[18];const H=O;let T;e[19]!==D?(T=r=>{confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?")&&D.mutate(r)},e[19]=D,e[20]=T):T=e[20];const L=T,J=ws;let z;e[21]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Gestion des utilisateurs"}),t.jsx("p",{className:"text-slate-500",children:"Gérez les accès et les rôles des utilisateurs"})]}),e[21]=z):z=e[21];let _;e[22]!==i?(_=()=>{A(null),p({name:"",email:"",password:"",role:i?"manager":"cashier",is_active:!0}),o(!0)},e[22]=i,e[23]=_):_=e[23];let K;e[24]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(Ge,{className:"mr-2 h-4 w-4"}),e[24]=K):K=e[24];const $=i?"Nouvel utilisateur":"Nouveau Caissier";let q;e[25]!==_||e[26]!==$?(q=t.jsxs("div",{className:"flex items-center justify-between",children:[z,t.jsxs(I,{onClick:_,className:"bg-[#1f61e4] hover:bg-[#1f61e4]/90",children:[K,$]})]}),e[25]=_,e[26]=$,e[27]=q):q=e[27];let N;e[28]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(qt,{children:t.jsxs(We,{children:[t.jsx(Re,{children:"Nom"}),t.jsx(Re,{children:"Email"}),t.jsx(Re,{children:"Boutique"}),t.jsx(Re,{children:"Rôle"}),t.jsx(Re,{children:"Statut"}),t.jsx(Re,{className:"text-right",children:"Actions"})]})}),e[28]=N):N=e[28];let g;e[29]!==L||e[30]!==k||e[31]!==C?(g=k?t.jsx(We,{children:t.jsx(Me,{colSpan:5,className:"h-24 text-center",children:"Chargement..."})}):C?.map(r=>t.jsxs(We,{children:[t.jsx(Me,{className:"font-medium",children:r.name}),t.jsx(Me,{children:r.email}),t.jsx(Me,{children:t.jsx("div",{className:"flex flex-wrap gap-1",children:r.shops&&r.shops.length>0?r.shops.map(vs):t.jsx("span",{className:"text-[10px] text-slate-400 italic",children:"Aucune"})})}),t.jsx(Me,{children:J(r.role)}),t.jsx(Me,{children:t.jsx(Te,{variant:r.is_active?"default":"destructive",className:r.is_active?"bg-green-500 hover:bg-green-600":"",children:r.is_active?"Actif":"Inactif"})}),t.jsx(Me,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(I,{variant:"ghost",size:"icon",onClick:()=>H(r),className:"h-8 w-8 text-slate-500 hover:text-[#1f61e4]",children:t.jsx(Dt,{className:"h-4 w-4"})}),t.jsx(I,{variant:"ghost",size:"icon",onClick:()=>L(r.id),className:"h-8 w-8 text-slate-500 hover:text-red-600",children:t.jsx(rt,{className:"h-4 w-4"})})]})})]},r.id)),e[29]=L,e[30]=k,e[31]=C,e[32]=g):g=e[32];let U;e[33]!==g?(U=t.jsx("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:t.jsxs(At,{children:[N,t.jsx($t,{children:g})]})}),e[33]=g,e[34]=U):U=e[34];const P=a?"Modifier l'utilisateur":"Nouvel utilisateur";let V;e[35]!==P?(V=t.jsx(Et,{children:t.jsx(Rt,{children:P})}),e[35]=P,e[36]=V):V=e[36];let Q;e[37]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(le,{htmlFor:"name",children:"Nom complet"}),e[37]=Q):Q=e[37];let B;e[38]!==l?(B=r=>p({...l,name:r.target.value}),e[38]=l,e[39]=B):B=e[39];let Y;e[40]!==l.name||e[41]!==B?(Y=t.jsxs("div",{className:"space-y-2",children:[Q,t.jsx(ve,{id:"name",value:l.name,onChange:B,required:!0})]}),e[40]=l.name,e[41]=B,e[42]=Y):Y=e[42];let W;e[43]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx(le,{htmlFor:"email",children:"Email"}),e[43]=W):W=e[43];let c;e[44]!==l?(c=r=>p({...l,email:r.target.value}),e[44]=l,e[45]=c):c=e[45];let u;e[46]!==l.email||e[47]!==c?(u=t.jsxs("div",{className:"space-y-2",children:[W,t.jsx(ve,{id:"email",type:"email",value:l.email,onChange:c,required:!0})]}),e[46]=l.email,e[47]=c,e[48]=u):u=e[48];let Z;e[49]!==a||e[50]!==l?(Z=!a&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(le,{htmlFor:"password",children:"Mot de passe"}),t.jsx(ve,{id:"password",type:"password",value:l.password,onChange:r=>p({...l,password:r.target.value}),required:!a})]}),e[49]=a,e[50]=l,e[51]=Z):Z=e[51];let ie;e[52]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(le,{htmlFor:"role",children:"Rôle"}),e[52]=ie):ie=e[52];let fe;e[53]!==l?(fe=r=>p({...l,role:r}),e[53]=l,e[54]=fe):fe=e[54];let re;e[55]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(at,{children:t.jsx(lt,{placeholder:"Sélectionner un rôle"})}),e[55]=re):re=e[55];let ne;e[56]!==i?(ne=i&&t.jsx(Pe,{value:"manager",children:"Manager"}),e[56]=i,e[57]=ne):ne=e[57];let ye,oe;e[58]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(Pe,{value:"cashier",children:"Caissier"}),oe=t.jsx(Pe,{value:"client",children:"Client"}),e[58]=ye,e[59]=oe):(ye=e[58],oe=e[59]);let te;e[60]!==ne?(te=t.jsxs(it,{children:[ne,ye,oe]}),e[60]=ne,e[61]=te):te=e[61];let ce;e[62]!==l.role||e[63]!==fe||e[64]!==te?(ce=t.jsxs("div",{className:"space-y-2",children:[ie,t.jsxs(st,{value:l.role,onValueChange:fe,disabled:!1,children:[re,te]})]}),e[62]=l.role,e[63]=fe,e[64]=te,e[65]=ce):ce=e[65];let de;e[66]!==m||e[67]!==l||e[68]!==i?(de=i&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(le,{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Assigner aux Boutiques"}),t.jsx("div",{className:"grid max-h-32 grid-cols-2 gap-2 overflow-y-auto rounded-lg border p-1",children:m?.map(r=>t.jsxs("div",{onClick:()=>{const ge=l.shop_ids||[],Se=ge.includes(r.id)?ge.filter(Ce=>Ce!==r.id):[...ge,r.id];p({...l,shop_ids:Se})},className:`flex cursor-pointer items-center gap-2 rounded-md border p-2 transition-colors ${l.shop_ids?.includes(r.id)?"border-indigo-200 bg-indigo-50":"bg-white hover:bg-slate-50"}`,children:[t.jsx("div",{className:`h-3 w-3 rounded-sm border ${l.shop_ids?.includes(r.id)?"border-indigo-600 bg-indigo-600":"border-slate-300"}`}),t.jsx("span",{className:"text-xs font-bold",children:r.name})]},r.id))})]}),e[66]=m,e[67]=l,e[68]=i,e[69]=de):de=e[69];let me;e[70]!==a||e[71]!==l?(me=a&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"is_active",checked:l.is_active,onChange:r=>p({...l,is_active:r.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),t.jsx(le,{htmlFor:"is_active",children:"Compte actif"})]}),e[70]=a,e[71]=l,e[72]=me):me=e[72];let Ne;e[73]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(I,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Annuler"}),e[73]=Ne):Ne=e[73];const ke=j.isPending||R.isPending,_e=j.isPending||R.isPending?"Enregistrement...":"Enregistrer";let xe;e[74]!==ke||e[75]!==_e?(xe=t.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[Ne,t.jsx(I,{type:"submit",className:"bg-[#1f61e4] hover:bg-[#1f61e4]/90",disabled:ke,children:_e})]}),e[74]=ke,e[75]=_e,e[76]=xe):xe=e[76];let se;e[77]!==F||e[78]!==Y||e[79]!==u||e[80]!==Z||e[81]!==ce||e[82]!==de||e[83]!==me||e[84]!==xe?(se=t.jsxs("form",{onSubmit:F,className:"space-y-4",children:[Y,u,Z,ce,de,me,xe]}),e[77]=F,e[78]=Y,e[79]=u,e[80]=Z,e[81]=ce,e[82]=de,e[83]=me,e[84]=xe,e[85]=se):se=e[85];let ae;e[86]!==V||e[87]!==se?(ae=t.jsxs(Tt,{children:[V,se]}),e[86]=V,e[87]=se,e[88]=ae):ae=e[88];let he;e[89]!==n||e[90]!==ae?(he=t.jsx(Pt,{open:n,onOpenChange:o,children:ae}),e[89]=n,e[90]=ae,e[91]=he):he=e[91];let ue;return e[92]!==q||e[93]!==U||e[94]!==he?(ue=t.jsxs("div",{className:"space-y-6",children:[q,U,he]}),e[92]=q,e[93]=U,e[94]=he,e[95]=ue):ue=e[95],ue}function vs(e){return t.jsx(Te,{variant:"outline",className:"py-0 text-[10px]",children:e.name},e.id)}function ws(e){switch(e){case"manager":return t.jsxs(Te,{className:"bg-purple-500 hover:bg-purple-600",children:[t.jsx(jt,{className:"mr-1 h-3 w-3"})," Manager"]});case"cashier":return t.jsxs(Te,{className:"bg-pink-500 hover:bg-pink-600",children:[t.jsx(es,{className:"mr-1 h-3 w-3"})," Caissier"]});case"client":return t.jsxs(Te,{className:"bg-cyan-500 hover:bg-cyan-600",children:[t.jsx(vt,{className:"mr-1 h-3 w-3"})," Client"]});default:return t.jsx(Te,{variant:"secondary",children:e})}}function Ns(e){G.error(e.message||"Erreur lors de la suppression")}function ys(e){return ee.entities.User.delete(e)}function ks(e){G.error(e.message||"Erreur lors de la mise à jour")}function _s(e){const{id:s,data:i}=e;return ee.entities.User.update(s,i)}function Ss(e){G.error(e.message||"Erreur lors de la création")}function ra(){const e=ze.c(114),{auth:s}=gt().props,n=s.user?.role==="super-admin",o=Oe(),[a,A]=je.useState(n?"shops":"overview");let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b={queryKey:["all-clients"],queryFn:Us,refetchInterval:3e4},e[0]=b):b=e[0];const{data:x,isLoading:h}=Le(b);let S;e[1]!==x?(S=x===void 0?[]:x,e[1]=x,e[2]=S):S=e[2];const l=S;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p={queryKey:["all-transactions"],queryFn:$s,refetchInterval:3e4},e[3]=p):p=e[3];const{data:y,isLoading:E}=Le(p);let m;e[4]!==y?(m=y===void 0?[]:y,e[4]=y,e[5]=m):m=e[5];const f=m;let C,k,w,j;if(e[6]!==l||e[7]!==f){const be=Ie().startOf("day");k=l.filter(Ye=>Ie(Ye.created_date).isSameOrAfter(be));const Je=f.filter(Ye=>Ie(Ye.created_date).isSameOrAfter(be));j=Je.filter(As).reduce(qs,0),w=Je.filter(Ds).reduce(Ms,0),C=Je.reduce(Fs,0),e[6]=l,e[7]=f,e[8]=C,e[9]=k,e[10]=w,e[11]=j}else C=e[8],k=e[9],w=e[10],j=e[11];const M=C,R=k.length;let v;e[12]!==l?(v=l.filter(Cs),e[12]=l,e[13]=v):v=e[13];let D;e[14]!==v.length||e[15]!==k.length||e[16]!==M||e[17]!==w||e[18]!==j?(D={todayClients:R,waiting:v.length,volumeUSD:j,volumeCDF:w,commissions:M},e[14]=v.length,e[15]=k.length,e[16]=M,e[17]=w,e[18]=j,e[19]=D):D=e[19];const d=D;let F;e[20]!==o?(F=()=>{o.invalidateQueries({queryKey:["all-clients"]}),o.invalidateQueries({queryKey:["all-transactions"]}),G.success("Tableau de bord actualisé")},e[20]=o,e[21]=F):F=e[21];const O=F;let H;e[22]===Symbol.for("react.memo_cache_sentinel")?(H={scale:1.02},e[22]=H):H=e[22];let T,L;e[23]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(Fe.div,{whileHover:H,className:"relative flex h-16 w-38 items-center justify-center px-4",children:t.jsx("img",{src:"/logo-color.png",alt:"Havifin",className:"h-full w-full object-contain"})}),L=t.jsx("div",{className:"h-10 w-[1px] bg-slate-100"}),e[23]=T,e[24]=L):(T=e[23],L=e[24]);let J;e[25]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("h1",{className:"text-2xl font-black tracking-tight text-slate-900 uppercase",children:["Console"," ",t.jsx("span",{className:"text-indigo-600",children:"Manager"})]}),t.jsx("span",{className:"rounded-full border border-emerald-500/20 bg-emerald-500/10 px-3 py-1 text-[10px] font-black tracking-widest text-emerald-600 uppercase",children:"Live"})]}),e[25]=J):J=e[25];const z=s.user.shop||"Supervision & Reporting";let _;e[26]!==s.user.role||e[27]!==z?(_=t.jsxs("div",{className:"flex items-center gap-6",children:[T,L,t.jsxs("div",{children:[J,t.jsxs("p",{className:"mt-1 flex items-center gap-2 text-[10px] font-black tracking-[0.15em] text-slate-400 uppercase",children:[s.user.role," •"," ",z]})]})]}),e[26]=s.user.role,e[27]=z,e[28]=_):_=e[28];const K=(h||E)&&"animate-spin";let $;e[29]!==K?($=X("h-5 w-5",K),e[29]=K,e[30]=$):$=e[30];let q;e[31]!==$?(q=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-slate-100 bg-white text-slate-400 shadow-sm",children:t.jsx(Qe,{className:$})}),e[31]=$,e[32]=q):q=e[32];let N;e[33]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] font-black tracking-wider text-slate-400 uppercase",children:"Dernier Sync"}),t.jsx("div",{className:"text-xs font-bold text-slate-600",children:"A l'instant"})]}),e[33]=N):N=e[33];let g;e[34]!==q?(g=t.jsxs("div",{className:"hidden items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-1.5 pr-5 xl:flex",children:[q,N]}),e[34]=q,e[35]=g):g=e[35];let U;e[36]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(Qe,{className:"mr-2 h-4 w-4"}),e[36]=U):U=e[36];let P;e[37]!==O?(P=t.jsxs(I,{variant:"outline",onClick:O,className:"h-12 rounded-2xl border-slate-200 bg-white px-6 text-xs font-black tracking-widest uppercase shadow-sm transition-all hover:border-indigo-500 hover:text-indigo-600",children:[U,"Actualiser"]}),e[37]=O,e[38]=P):P=e[38];let V;e[39]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsxs(I,{className:"h-12 rounded-2xl bg-slate-900 px-6 text-xs font-black tracking-widest text-white uppercase shadow-xl shadow-slate-900/10 transition-all hover:bg-black active:scale-95",children:[t.jsx(Gt,{className:"mr-2 h-4 w-4 text-emerald-400"}),"Exporter Rapport"]}),e[39]=V):V=e[39];let Q;e[40]!==g||e[41]!==P?(Q=t.jsxs("div",{className:"flex items-center gap-4",children:[g,P,V]}),e[40]=g,e[41]=P,e[42]=Q):Q=e[42];let B;e[43]!==_||e[44]!==Q?(B=t.jsxs("header",{className:"z-20 flex h-24 flex-shrink-0 items-center justify-between border-b border-slate-200 bg-white px-10 shadow-[0_1px_3px_rgba(0,0,0,0.02)]",children:[_,Q]}),e[43]=_,e[44]=Q,e[45]=B):B=e[45];const Y=`${d.waiting} en attente`;let W;e[46]!==d.todayClients||e[47]!==Y?(W=t.jsx(Ke,{title:"Clients Aujourd'hui",value:d.todayClients,subtitle:Y,icon:mt,color:"blue"}),e[46]=d.todayClients,e[47]=Y,e[48]=W):W=e[48];let c;e[49]!==d.volumeUSD?(c=d.volumeUSD.toLocaleString(),e[49]=d.volumeUSD,e[50]=c):c=e[50];const u=`$ ${c}`;let Z;e[51]!==u?(Z=t.jsx(Ke,{title:"Volume USD",value:u,icon:He,color:"emerald"}),e[51]=u,e[52]=Z):Z=e[52];let ie;e[53]!==d.volumeCDF?(ie=d.volumeCDF.toLocaleString(),e[53]=d.volumeCDF,e[54]=ie):ie=e[54];const fe=`${ie} FC`;let re;e[55]!==fe?(re=t.jsx(Ke,{title:"Volume CDF",value:fe,icon:Ve,color:"amber"}),e[55]=fe,e[56]=re):re=e[56];let ne;e[57]!==d.commissions?(ne=d.commissions.toLocaleString(),e[57]=d.commissions,e[58]=ne):ne=e[58];const ye=`$ ${ne}`;let oe;e[59]!==ye?(oe=t.jsx(Ke,{title:"Commissions Estimées",value:ye,icon:ht,color:"indigo"}),e[59]=ye,e[60]=oe):oe=e[60];let te;e[61]!==W||e[62]!==Z||e[63]!==re||e[64]!==oe?(te=t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[W,Z,re,oe]}),e[61]=W,e[62]=Z,e[63]=re,e[64]=oe,e[65]=te):te=e[65];let ce;e[66]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("h3",{className:"mb-6 px-2 text-[11px] font-black tracking-[0.2em] text-slate-400 uppercase",children:"Navigation"}),e[66]=ce):ce=e[66];let de,me,Ne,ke,_e,xe;e[67]===Symbol.for("react.memo_cache_sentinel")?(de={id:"overview",label:"Vue d'ensemble",icon:ot},me={id:"transactions",label:"Flux Transactions",icon:_t},Ne={id:"rates",label:"Gestion Taux",icon:et},ke={id:"users",label:"Utilisateurs",icon:mt},_e={id:"institutions",label:"Banques & Partenaires",icon:Ve},xe={id:"logs",label:"Journal Activité",icon:xt},e[67]=de,e[68]=me,e[69]=Ne,e[70]=ke,e[71]=_e,e[72]=xe):(de=e[67],me=e[68],Ne=e[69],ke=e[70],_e=e[71],xe=e[72]);let se;e[73]!==n?(se=[de,me,Ne,ke,_e,xe,...n?[{id:"shops",label:"Gestion Boutiques",icon:St}]:[]],e[73]=n,e[74]=se):se=e[74];let ae;e[75]!==a||e[76]!==se?(ae=t.jsxs("div",{className:"rounded-[2rem] border border-white bg-white/50 p-6 shadow-sm backdrop-blur-xl",children:[ce,t.jsx("nav",{className:"space-y-2",children:se.map(be=>t.jsxs("button",{onClick:()=>A(be.id),className:X("flex w-full items-center justify-between rounded-2xl border p-4 text-sm font-bold transition-all duration-300",a===be.id?"border-indigo-600 bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"border-slate-100 bg-white/40 text-slate-500 hover:border-slate-200 hover:bg-white"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be.icon,{className:X("h-5 w-5",a===be.id?"text-white":"text-slate-400")}),be.label]}),t.jsx(Mt,{className:X("h-4 w-4 transition-transform",a===be.id?"translate-x-1":"opacity-0")})]},be.id))})]}),e[75]=a,e[76]=se,e[77]=ae):ae=e[77];let he;e[78]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsxs("div",{className:"group relative overflow-hidden rounded-[2rem] bg-slate-900 p-8 text-white shadow-2xl",children:[t.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 translate-x-1/2 -translate-y-1/2 bg-indigo-500/20 blur-[80px]"}),t.jsx("h4",{className:"relative z-10 mb-2 text-xl font-black",children:"Besoin d'aide ?"}),t.jsx("p",{className:"relative z-10 mb-6 text-xs font-medium text-slate-400",children:"Consultez la documentation technique du bureau de change."}),t.jsx(I,{className:"relative z-10 w-full rounded-xl bg-white text-[10px] font-black tracking-widest text-slate-900 uppercase hover:bg-slate-100",children:"Guide Manager"})]}),e[78]=he):he=e[78];let ue;e[79]!==ae?(ue=t.jsxs("div",{className:"col-span-12 space-y-4 lg:col-span-3",children:[ae,he]}),e[79]=ae,e[80]=ue):ue=e[80];let r;e[81]!==a||e[82]!==f?(r=a==="overview"&&t.jsxs("div",{className:"animate-in space-y-8 duration-500 fade-in slide-in-from-bottom-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Performances du Jour"}),t.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Aperçu rapide des flux financiers et des clients."})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("span",{className:"rounded-xl border border-indigo-100 bg-indigo-50 px-4 py-2 text-xs font-black tracking-wider text-indigo-600 uppercase",children:"Hebdomadaire"}),t.jsx("span",{className:"cursor-pointer rounded-xl border border-slate-100 bg-white px-4 py-2 text-xs font-black tracking-wider text-slate-400 uppercase hover:bg-slate-50",children:"Mensuel"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[t.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border border-slate-100 bg-slate-50 p-8 opacity-50",children:[t.jsx(ht,{className:"mb-4 h-16 w-16 text-slate-300"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Graphique des Flux (Soon)"})]}),t.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border border-slate-100 bg-slate-50 p-8 opacity-50",children:[t.jsx(ot,{className:"mb-4 h-16 w-16 text-slate-300"}),t.jsx("p",{className:"text-xs font-black tracking-[0.2em] text-slate-400 uppercase",children:"Volume par Guichet (Soon)"})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("h4",{className:"text-lg font-black tracking-tight text-slate-800",children:"Activités Récentes"}),t.jsx(I,{variant:"ghost",className:"font-bold text-indigo-600 hover:bg-indigo-50",children:"Voir tout"})]}),t.jsx(ft,{transactions:f.slice(0,5)})]})]}),e[81]=a,e[82]=f,e[83]=r):r=e[83];let ge;e[84]!==a||e[85]!==f?(ge=a==="transactions"&&t.jsxs("div",{className:"animate-in space-y-6 duration-300 fade-in",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("h3",{className:"text-2xl font-black tracking-tight text-slate-800",children:"Journal Complet"}),t.jsxs("div",{className:"relative w-72",children:[t.jsx(Lt,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-slate-400"}),t.jsx("input",{placeholder:"Filtrer...",className:"h-10 w-full rounded-xl border-slate-200 pr-4 pl-10 text-sm focus:ring-indigo-500"})]})]}),t.jsx(ft,{transactions:f})]}),e[84]=a,e[85]=f,e[86]=ge):ge=e[86];let Se;e[87]!==a?(Se=a==="rates"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(ms,{})}),e[87]=a,e[88]=Se):Se=e[88];let Ce;e[89]!==a?(Ce=a==="institutions"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(ts,{})}),e[89]=a,e[90]=Ce):Ce=e[90];let De;e[91]!==a?(De=a==="users"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(js,{})}),e[91]=a,e[92]=De):De=e[92];let qe;e[93]!==a?(qe=a==="shops"&&t.jsx("div",{className:"animate-in duration-300 fade-in",children:t.jsx(Ut,{})}),e[93]=a,e[94]=qe):qe=e[94];let Ae;e[95]!==a?(Ae=a==="logs"&&t.jsxs("div",{className:"flex h-96 animate-in flex-col items-center justify-center space-y-4 opacity-40 duration-300 zoom-in-95",children:[t.jsx(xt,{className:"h-20 w-20 text-slate-200"}),t.jsx("p",{className:"text-xs font-black tracking-[0.3em] text-slate-400 uppercase",children:"Journal d'audit Manager bientôt disponible"})]}),e[95]=a,e[96]=Ae):Ae=e[96];let $e;e[97]!==r||e[98]!==ge||e[99]!==Se||e[100]!==Ce||e[101]!==De||e[102]!==qe||e[103]!==Ae?($e=t.jsx("div",{className:"col-span-12 lg:col-span-9",children:t.jsx("div",{className:"min-h-[600px] overflow-hidden rounded-[2.5rem] border border-white bg-white/80 shadow-xl shadow-slate-200/50 backdrop-blur-xl",children:t.jsxs("div",{className:"p-10",children:[r,ge,Se,Ce,De,qe,Ae]})})}),e[97]=r,e[98]=ge,e[99]=Se,e[100]=Ce,e[101]=De,e[102]=qe,e[103]=Ae,e[104]=$e):$e=e[104];let Ue;e[105]!==ue||e[106]!==$e?(Ue=t.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[ue,$e]}),e[105]=ue,e[106]=$e,e[107]=Ue):Ue=e[107];let Ee;e[108]!==te||e[109]!==Ue?(Ee=t.jsx("main",{className:"flex-1 overflow-y-auto bg-[url('/grid.svg')] bg-[length:40px_40px] px-10 py-10",children:t.jsxs("div",{className:"w-full max-w-none space-y-10",children:[te,Ue]})}),e[108]=te,e[109]=Ue,e[110]=Ee):Ee=e[110];let Be;return e[111]!==B||e[112]!==Ee?(Be=t.jsx(Ct,{currentPageName:"Manager",children:t.jsxs("div",{className:"flex flex-col overflow-hidden bg-[#f8fafc]",children:[B,Ee]})}),e[111]=B,e[112]=Ee,e[113]=Be):Be=e[113],Be}function Cs(e){return e.status==="waiting"}function Fs(e,s){return e+(parseFloat(s.commission)||0)}function Ms(e,s){return e+(s.amount_from||0)}function Ds(e){return e.currency_from==="CDF"}function qs(e,s){return e+(s.amount_from||0)}function As(e){return e.currency_from==="USD"}function $s(){return ee.entities.Transaction.list("-created_date",500)}function Us(){return ee.entities.Client.list("-created_date",500)}export{ra as default};
