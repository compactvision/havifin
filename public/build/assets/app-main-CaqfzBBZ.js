import{S as A,s as H,h as $,g as P,n as z,u as D,r as j,e as K,f as q,c as U,j as t,L}from"./app-DvaUKoe-.js";import{c as l,m as h,a as d}from"./createLucideIcon-WQ6Op3ka.js";import{B as I}from"./label-DYhpUyB5.js";import{M as T,C as W,A as B}from"./base44Client-C8CHlZcl.js";var V=class extends A{#t;#i=void 0;#e;#s;constructor(s,e){super(),this.#t=s,this.setOptions(e),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const e=this.options;this.options=this.#t.defaultMutationOptions(s),H(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#e,observer:this}),e?.mutationKey&&this.options.mutationKey&&$(e.mutationKey)!==$(this.options.mutationKey)?this.reset():this.#e?.state.status==="pending"&&this.#e.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#e?.removeObserver(this)}onMutationUpdate(s){this.#a(),this.#n(s)}getCurrentResult(){return this.#i}reset(){this.#e?.removeObserver(this),this.#e=void 0,this.#a(),this.#n()}mutate(s,e){return this.#s=e,this.#e?.removeObserver(this),this.#e=this.#t.getMutationCache().build(this.#t,this.options),this.#e.addObserver(this),this.#e.execute(s)}#a(){const s=this.#e?.state??P();this.#i={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#n(s){z.batch(()=>{if(this.#s&&this.hasListeners()){const e=this.#i.variables,c=this.#i.context,i={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};if(s?.type==="success"){try{this.#s.onSuccess?.(s.data,e,c,i)}catch(n){Promise.reject(n)}try{this.#s.onSettled?.(s.data,null,e,c,i)}catch(n){Promise.reject(n)}}else if(s?.type==="error"){try{this.#s.onError?.(s.error,e,c,i)}catch(n){Promise.reject(n)}try{this.#s.onSettled?.(void 0,s.error,e,c,i)}catch(n){Promise.reject(n)}}}this.listeners.forEach(e=>{e(this.#i)})})}};function fe(s,e){const c=D(),[i]=j.useState(()=>new V(c,s));j.useEffect(()=>{i.setOptions(s)},[i,s]);const n=j.useSyncExternalStore(j.useCallback(o=>i.subscribe(z.batchCalls(o)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),w=j.useCallback((o,O)=>{i.mutate(o,O).catch(K)},[i]);if(n.error&&q(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:w,mutateAsync:n.mutate}}const X=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],me=l("ArrowLeftRight",X);const F=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pe=l("Check",F);const Q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],be=l("Clock",Q);const G=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],E=l("LayoutDashboard",G);const J=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ye=l("LoaderCircle",J);const Y=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],R=l("LogOut",Y);const Z=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],ee=l("Menu",Z);const te=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ge=l("RefreshCw",te);const se=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ve=l("Search",se);const ie=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ae=l("User",ie);const ne=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],oe=l("Wallet",ne);const re=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],le=l("X",re),S=[{name:"Client",label:"Client",icon:ae,color:"text-[#00e2f6]"},{name:"Display",label:"Ecran",icon:T,color:"text-[#bf15cf]"},{name:"Cashier",label:"Caissier",icon:oe,color:"text-[#ff55ba]"},{name:"Manager",label:"Manager",icon:E,color:"text-[#1f61e4]"}];function je(s){const e=U.c(33),{children:c,currentPageName:i}=s,[n,w]=j.useState(!1),o=i==="Display",O=ce;let u;e[0]!==i||e[1]!==o?(u=!o&&t.jsxs("aside",{className:"fixed top-0 left-0 z-40 hidden h-screen w-20 flex-col items-center justify-between border-r border-[#1f61e4]/10 bg-white/80 py-8 backdrop-blur-xl xl:flex",children:[t.jsx(L,{href:"/",className:"mb-8",children:t.jsx(h.div,{whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:400,damping:10},className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-white p-2 shadow-xl ring-1 ring-slate-100",children:t.jsx("img",{src:"/logo.png",alt:"Havifin",className:"h-full w-full object-contain"})})}),t.jsx("nav",{className:"flex flex-col gap-6",children:S.map(a=>{const r=i===a.name;return t.jsxs(L,{href:a.name==="Client"?"/":`/${a.name.toLowerCase()}`,className:"group relative flex items-center justify-center",children:[r&&t.jsx(h.div,{layoutId:"activeNavDesktop",className:"absolute inset-0 rounded-2xl bg-[#1f61e4]/10",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),t.jsx("div",{className:d("relative z-10 rounded-2xl p-3 transition-all duration-300",r?a.color:"text-slate-400 group-hover:scale-110 group-hover:text-[#1f61e4]"),children:t.jsx(a.icon,{className:"h-6 w-6",strokeWidth:r?2.5:2})}),t.jsx("span",{className:"absolute left-16 z-50 ml-2 rounded-lg bg-slate-900 px-2 py-1 text-xs font-semibold whitespace-nowrap text-white opacity-0 shadow-xl transition-opacity group-hover:opacity-100",children:a.label})]},a.name)})}),t.jsx("button",{onClick:O,className:"rounded-xl p-3 text-slate-400 transition-colors duration-300 hover:bg-red-50 hover:text-[#dd281c]",children:t.jsx(R,{className:"h-5 w-5"})})]}),e[0]=i,e[1]=o,e[2]=u):u=e[2];let x;e[3]!==o||e[4]!==n?(x=!o&&t.jsx("div",{className:"fixed top-6 right-6 z-50 xl:hidden",children:t.jsx(h.button,{whileTap:{scale:.9},onClick:()=>w(!n),className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-[#1f61e4] text-white shadow-lg shadow-blue-500/30",children:n?t.jsx(le,{}):t.jsx(ee,{})})}),e[3]=o,e[4]=n,e[5]=x):x=e[5];let f;e[6]!==i||e[7]!==n?(f=n&&t.jsxs(t.Fragment,{children:[t.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>w(!1),className:"fixed inset-0 z-40 bg-slate-900/40 backdrop-blur-sm lg:hidden"}),t.jsxs(h.aside,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 right-0 z-50 h-screen w-80 border-l border-[#1f61e4]/10 bg-white p-8 shadow-2xl xl:hidden",children:[t.jsxs("div",{className:"mb-12 flex items-center gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-white p-2 shadow-xl ring-1 ring-slate-100",children:t.jsx("img",{src:"/logo.png",alt:"Havifin",className:"h-full w-full object-contain"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Havifin"}),t.jsx("p",{className:"text-[10px] font-black tracking-widest text-[#1f61e4] uppercase",children:"Navigation"})]})]}),t.jsx("nav",{className:"flex flex-col gap-4",children:S.map(a=>{const r=i===a.name;return t.jsxs(L,{href:a.name==="Client"?"/":`/${a.name.toLowerCase()}`,onClick:()=>w(!1),className:d("group relative flex items-center justify-between rounded-2xl border p-4 transition-all duration-300",r?"border-blue-500 bg-blue-50 shadow-sm":"border-transparent hover:bg-slate-50"),children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:d("rounded-xl p-2",r?"bg-blue-500 text-white":"bg-slate-100 text-slate-400"),children:t.jsx(a.icon,{className:"h-5 w-5"})}),t.jsx("span",{className:d("font-bold",r?"text-blue-900":"text-slate-600"),children:a.label})]}),r&&t.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-blue-500 text-white",children:t.jsx(W,{className:"h-4 w-4"})})]},a.name)})}),t.jsx("div",{className:"absolute right-8 bottom-10 left-8",children:t.jsxs(I,{variant:"outline",className:"h-14 w-full rounded-2xl border-red-100 font-bold text-red-500 hover:bg-red-50 hover:text-red-600",children:[t.jsx(R,{className:"mr-3 h-5 w-5"}),"DÃ©connexion"]})})]})]}),e[6]=i,e[7]=n,e[8]=f):f=e[8];let m;e[9]!==f?(m=t.jsx(B,{children:f}),e[9]=f,e[10]=m):m=e[10];const _=!o&&"xl:pl-20";let p;e[11]!==_?(p=d("min-h-screen transition-all duration-300",_),e[11]=_,e[12]=p):p=e[12];let b;e[13]!==o?(b=!o&&t.jsxs("div",{className:"sticky top-0 z-30 flex items-center justify-between border-b border-[#1f61e4]/10 bg-white/80 px-6 py-4 backdrop-blur-md md:hidden",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-white p-1.5 shadow-md ring-1 shadow-blue-500/5 ring-slate-100",children:t.jsx("img",{src:"/logo.svg",alt:"Havifin",className:"h-full w-full object-contain"})}),t.jsx("button",{className:"rounded-full bg-[#1f61e4]/5 p-2 text-[#1f61e4]",children:t.jsx(E,{className:"h-5 w-5"})})]}),e[13]=o,e[14]=b):b=e[14];let N,k,C;e[15]===Symbol.for("react.memo_cache_sentinel")?(k={opacity:0,y:20},C={opacity:1,y:0},N={duration:.5,ease:"easeOut"},e[15]=N,e[16]=k,e[17]=C):(N=e[15],k=e[16],C=e[17]);let y;e[18]!==c?(y=t.jsx(h.div,{initial:k,animate:C,transition:N,className:"h-full",children:c}),e[18]=c,e[19]=y):y=e[19];let g;e[20]!==i||e[21]!==o?(g=!o&&t.jsx("div",{className:"fixed right-4 bottom-4 left-4 z-40 md:hidden",children:t.jsx("nav",{className:"flex items-center justify-around rounded-3xl border border-white/20 bg-white/90 p-2 shadow-2xl shadow-indigo-500/10 backdrop-blur-xl",children:S.map(a=>{const r=i===a.name;return t.jsxs(L,{href:a.name==="Client"?"/":`/${a.name.toLowerCase()}`,className:"relative flex flex-1 flex-col items-center justify-center p-2",children:[r&&t.jsx(h.div,{layoutId:"activeNavMobile",className:"absolute inset-0 rounded-2xl bg-[#1f61e4]/10",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),t.jsx(a.icon,{className:d("relative z-10 h-6 w-6 transition-colors duration-300",r?a.color:"text-slate-400")}),t.jsx("span",{className:d("relative z-10 mt-1 text-[10px] font-medium transition-colors duration-300",r?"text-slate-900":"text-slate-400"),children:a.label})]},a.name)})})}),e[20]=i,e[21]=o,e[22]=g):g=e[22];let v;e[23]!==y||e[24]!==g||e[25]!==p||e[26]!==b?(v=t.jsxs("main",{className:p,children:[b,y,g]}),e[23]=y,e[24]=g,e[25]=p,e[26]=b,e[27]=v):v=e[27];let M;return e[28]!==u||e[29]!==v||e[30]!==x||e[31]!==m?(M=t.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-900 selection:bg-[#1f61e4] selection:text-white",children:[u,x,m,v]}),e[28]=u,e[29]=v,e[30]=x,e[31]=m,e[32]=M):M=e[32],M}async function ce(){try{await fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"}),window.location.href="/login"}catch(s){console.error("Logout error:",s),window.location.href="/login"}}export{me as A,be as C,ye as L,ge as R,ve as S,ae as U,le as X,E as a,je as b,pe as c,fe as u};
