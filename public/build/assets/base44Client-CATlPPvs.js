import{S as se,p as H,k as E,s as F,l as Q,f as L,m as D,o as B,t as ie,q as U,v as ne,w as re,x as W,n as J,r as l,i as Y,u as ae,j as P,y as oe}from"./app-BN2WBQBk.js";import{M as he,i as ce,u as Z,P as ue,d as le,e as pe,L as de,c as fe}from"./createLucideIcon-DARUc-ly.js";var ge=class extends se{constructor(e,t){super(),this.options=t,this.#s=e,this.#n=null,this.#i=H(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#f=void 0;#t=void 0;#a;#u;#i;#n;#g;#l;#p;#o;#h;#r;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),q(this.#e,this.options)?this.#c():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return j(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return j(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#C(),this.#b(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,s=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof E(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#e.setOptions(this.options),t._defaulted&&!F(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&V(this.#e,s,this.options,t)&&this.#c(),this.updateResult(),r&&(this.#e!==s||E(this.options.enabled,this.#e)!==E(t.enabled,this.#e)||Q(this.options.staleTime,this.#e)!==Q(t.staleTime,this.#e))&&this.#m();const a=this.#v();r&&(this.#e!==s||E(this.options.enabled,this.#e)!==E(t.enabled,this.#e)||a!==this.#r)&&this.#R(a)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),s=this.createResult(t,e);return ve(this,s)&&(this.#t=s,this.#u=this.options,this.#a=this.#e.state),s}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),t?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,r))})}trackProp(e){this.#d.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),s=this.#s.getQueryCache().build(this.#s,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#x();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(L)),t}#m(){this.#C();const e=Q(this.options.staleTime,this.#e);if(D||this.#t.isStale||!B(e))return;const s=ie(this.#t.dataUpdatedAt,e)+1;this.#o=U.setTimeout(()=>{this.#t.isStale||this.updateResult()},s)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#R(e){this.#b(),this.#r=e,!(D||E(this.options.enabled,this.#e)===!1||!B(this.#r)||this.#r===0)&&(this.#h=U.setInterval(()=>{(this.options.refetchIntervalInBackground||ne.isFocused())&&this.#c()},this.#r))}#y(){this.#m(),this.#R(this.#v())}#C(){this.#o&&(U.clearTimeout(this.#o),this.#o=void 0)}#b(){this.#h&&(U.clearInterval(this.#h),this.#h=void 0)}createResult(e,t){const s=this.#e,r=this.options,a=this.#t,o=this.#a,h=this.#u,C=e!==s?e.state:this.#f,{state:p}=e;let c={...p},f=!1,d;if(t._optimisticResults){const u=this.hasListeners(),S=!u&&q(e,t),w=u&&V(e,s,t,r);(S||w)&&(c={...c,...re(p.data,e.options)}),t._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:R,errorUpdatedAt:b,status:m}=c;d=c.data;let y=!1;if(t.placeholderData!==void 0&&d===void 0&&m==="pending"){let u;a?.isPlaceholderData&&t.placeholderData===h?.placeholderData?(u=a.data,y=!0):u=typeof t.placeholderData=="function"?t.placeholderData(this.#p?.state.data,this.#p):t.placeholderData,u!==void 0&&(m="success",d=W(a?.data,u,t),f=!0)}if(t.select&&d!==void 0&&!y)if(a&&d===o?.data&&t.select===this.#g)d=this.#l;else try{this.#g=t.select,d=t.select(d),d=W(a?.data,d,t),this.#l=d,this.#n=null}catch(u){this.#n=u}this.#n&&(R=this.#n,d=this.#l,b=Date.now(),m="error");const O=c.fetchStatus==="fetching",T=m==="pending",x=m==="error",_=T&&O,M=d!==void 0,g={status:m,fetchStatus:c.fetchStatus,isPending:T,isSuccess:m==="success",isError:x,isInitialLoading:_,isLoading:_,data:d,dataUpdatedAt:c.dataUpdatedAt,error:R,errorUpdatedAt:b,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>C.dataUpdateCount||c.errorUpdateCount>C.errorUpdateCount,isFetching:O,isRefetching:O&&!T,isLoadingError:x&&!M,isPaused:c.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&M,isStale:N(e,t),refetch:this.refetch,promise:this.#i,isEnabled:E(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const u=I=>{g.status==="error"?I.reject(g.error):g.data!==void 0&&I.resolve(g.data)},S=()=>{const I=this.#i=g.promise=H();u(I)},w=this.#i;switch(w.status){case"pending":e.queryHash===s.queryHash&&u(w);break;case"fulfilled":(g.status==="error"||g.data!==w.value)&&S();break;case"rejected":(g.status!=="error"||g.error!==w.reason)&&S();break}}return g}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#a=this.#e.state,this.#u=this.options,this.#a.data!==void 0&&(this.#p=this.#e),F(t,e))return;this.#t=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,a=typeof r=="function"?r():r;if(a==="all"||!a&&!this.#d.size)return!0;const o=new Set(a??this.#d);return this.options.throwOnError&&o.add("error"),Object.keys(this.#t).some(h=>{const v=h;return this.#t[v]!==e[v]&&o.has(v)})};this.#S({listeners:s()})}#x(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#f=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(e){J.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function me(e,t){return E(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function q(e,t){return me(e,t)||e.state.data!==void 0&&j(e,t,t.refetchOnMount)}function j(e,t,s){if(E(t.enabled,e)!==!1&&Q(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&N(e,t)}return!1}function V(e,t,s,r){return(e!==t||E(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&N(e,s)}function N(e,t){return E(t.enabled,e)!==!1&&e.isStaleByTime(Q(t.staleTime,e))}function ve(e,t){return!F(e.getCurrentResult(),t)}var ee=l.createContext(!1),Re=()=>l.useContext(ee);ee.Provider;function ye(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ce=l.createContext(ye()),be=()=>l.useContext(Ce),xe=(e,t,s)=>{const r=s?.state.error&&typeof e.throwOnError=="function"?Y(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(t.isReset()||(e.retryOnMount=!1))},Se=e=>{l.useEffect(()=>{e.clearReset()},[e])},Ee=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||Y(s,[e.error,r])),we=e=>{if(e.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>s(r(...a)):s(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Oe=(e,t)=>e.isLoading&&e.isFetching&&!t,Ie=(e,t)=>e?.suspense&&t.isPending,X=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Me(e,t,s){const r=Re(),a=be(),o=ae(),h=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(h);const v=o.getQueryCache().get(h.queryHash);h._optimisticResults=r?"isRestoring":"optimistic",we(h),xe(h,a,v),Se(a);const C=!o.getQueryCache().get(h.queryHash),[p]=l.useState(()=>new t(o,h)),c=p.getOptimisticResult(h),f=!r&&e.subscribed!==!1;if(l.useSyncExternalStore(l.useCallback(d=>{const R=f?p.subscribe(J.batchCalls(d)):L;return p.updateResult(),R},[p,f]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),l.useEffect(()=>{p.setOptions(h)},[h,p]),Ie(h,c))throw X(h,p,a);if(Ee({result:c,errorResetBoundary:a,throwOnError:h.throwOnError,query:v,suspense:h.suspense}))throw c.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(h,c),h.experimental_prefetchInRender&&!D&&Oe(c,r)&&(C?X(h,p,a):v?.promise)?.catch(L).finally(()=>{p.updateResult()}),h.notifyOnChangeProps?c:p.trackResult(c)}function Ae(e,t){return Me(e,ge)}function K(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Pe(...e){return t=>{let s=!1;const r=e.map(a=>{const o=K(a,t);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let a=0;a<r.length;a++){const o=r[a];typeof o=="function"?o():K(e[a],null)}}}}function Te(...e){return l.useCallback(Pe(...e),e)}class _e extends l.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const r=s.offsetParent,a=ce(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft,o.right=a-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function $e({children:e,isPresent:t,anchorX:s,root:r}){const a=l.useId(),o=l.useRef(null),h=l.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:v}=l.useContext(he),C=e.props?.ref??e?.ref,p=Te(o,C);return l.useInsertionEffect(()=>{const{width:c,height:f,top:d,left:R,right:b}=h.current;if(t||!o.current||!c||!f)return;const m=s==="left"?`left: ${R}`:`right: ${b}`;o.current.dataset.motionPopId=a;const y=document.createElement("style");v&&(y.nonce=v);const O=r??document.head;return O.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{O.contains(y)&&O.removeChild(y)}},[t]),P.jsx(_e,{isPresent:t,childRef:o,sizeRef:h,children:l.cloneElement(e,{ref:p})})}const Qe=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:o,mode:h,anchorX:v,root:C})=>{const p=Z(Ue),c=l.useId();let f=!0,d=l.useMemo(()=>(f=!1,{id:c,initial:t,isPresent:s,custom:a,onExitComplete:R=>{p.set(R,!0);for(const b of p.values())if(!b)return;r&&r()},register:R=>(p.set(R,!1),()=>p.delete(R))}),[s,p,r]);return o&&f&&(d={...d}),l.useMemo(()=>{p.forEach((R,b)=>p.set(b,!1))},[s]),l.useEffect(()=>{!s&&!p.size&&r&&r()},[s]),h==="popLayout"&&(e=P.jsx($e,{isPresent:s,anchorX:v,root:C,children:e})),P.jsx(ue.Provider,{value:d,children:e})};function Ue(){return new Map}const k=e=>e.key||"";function G(e){const t=[];return l.Children.forEach(e,s=>{l.isValidElement(s)&&t.push(s)}),t}const Ne=({children:e,custom:t,initial:s=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:o="sync",propagate:h=!1,anchorX:v="left",root:C})=>{const[p,c]=le(h),f=l.useMemo(()=>G(e),[e]),d=h&&!p?[]:f.map(k),R=l.useRef(!0),b=l.useRef(f),m=Z(()=>new Map),y=l.useRef(new Set),[O,T]=l.useState(f),[x,_]=l.useState(f);pe(()=>{R.current=!1,b.current=f;for(let g=0;g<x.length;g++){const u=k(x[g]);d.includes(u)?(m.delete(u),y.current.delete(u)):m.get(u)!==!0&&m.set(u,!1)}},[x,d.length,d.join("-")]);const M=[];if(f!==O){let g=[...f];for(let u=0;u<x.length;u++){const S=x[u],w=k(S);d.includes(w)||(g.splice(u,0,S),M.push(S))}return o==="wait"&&M.length&&(g=M),_(G(g)),T(f),null}const{forceRender:z}=l.useContext(de);return P.jsx(P.Fragment,{children:x.map(g=>{const u=k(g),S=h&&!p?!1:f===x||d.includes(u),w=()=>{if(y.current.has(u))return;if(y.current.add(u),m.has(u))m.set(u,!0);else return;let I=!0;m.forEach(te=>{te||(I=!1)}),I&&(z?.(),_(b.current),h&&c?.(),r&&r())};return P.jsx(Qe,{isPresent:S,initial:!R.current||s?void 0:!1,custom:t,presenceAffectsLayout:a,mode:o,root:C,onExitComplete:S?void 0:w,anchorX:v,children:g},u)})})};const ke=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ze=fe("Monitor",ke);let A=!1;async function Fe(){if(!A)try{await i.get("/sanctum/csrf-cookie"),A=!0}catch(e){throw console.error("Failed to initialize CSRF protection:",e),e}}function Le(){A=!1}const i=oe.create({headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},withCredentials:!0,withXSRFToken:!0});let $=null;i.interceptors.request.use(async e=>{const t=e.method?.toLowerCase()==="get",s=e.url?.includes("/sanctum/csrf-cookie"),r=e.url?.includes("/advertisements/active")||e.url?.includes("/news/active")||e.url?.includes("/institutions/active")||e.url?.includes("/exchange-rates")||e.url?.includes("/clients/verify-phone")||e.url?.includes("/clients/register");return!t&&!s&&!r&&($||($=Fe().catch(a=>{throw $=null,a})),await $),e},e=>Promise.reject(e));i.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(Le(),$=null,console.error("Authentication error (401):",{url:e.config?.url,method:e.config?.method,message:"Session expired or invalid. Please login again."})),Promise.reject(e)));const n=e=>e.data,He={entities:{Client:{create:e=>i.post("/api/clients",e).then(n),update:(e,t)=>i.put(`/api/clients/${e}`,t).then(n),list:(e,t)=>i.get("/api/clients",{params:{sort:e,limit:t}}).then(n),filter:(e,t,s)=>i.get("/api/clients",{params:{...e,sort:t,limit:s}}).then(n),verifyPhone:e=>i.post("/api/clients/verify-phone",{phone:e}).then(n),register:e=>i.post("/api/clients/register",e).then(n),addPhone:(e,t)=>i.post("/api/clients/add-phone",{client_id:e,phone_number:t}).then(n)},Transaction:{create:e=>i.post("/api/transactions",e).then(n),list:(e,t)=>i.get("/api/transactions",{params:{sort:e,limit:t}}).then(n)},ExchangeRate:{getAll:()=>i.get("/api/exchange-rates").then(n),create:e=>i.post("/api/exchange-rates",e).then(n),update:(e,t)=>i.put(`/api/exchange-rates/${e}`,t).then(n),delete:e=>i.delete(`/api/exchange-rates/${e}`).then(n),filter:(e,t,s)=>i.get("/api/exchange-rates",{params:{...e,sort:t,limit:s}}).then(n)},Institution:{list:e=>i.get("/api/institutions",{params:e}).then(n),active:()=>i.get("/api/institutions/active").then(n),create:e=>i.post("/api/institutions",e).then(n),update:(e,t)=>i.put(`/api/institutions/${e}`,t).then(n),delete:e=>i.delete(`/api/institutions/${e}`).then(n)},Session:{current:()=>i.get("/api/sessions/current").then(n),list:e=>i.get("/api/sessions",{params:e}).then(n),create:e=>i.post("/api/sessions",e).then(n),close:e=>i.post(`/api/sessions/${e}/close`).then(n),report:e=>i.get(`/api/sessions/${e}/report`).then(n)},ExchangeRateHistory:{list:e=>i.get("/api/exchange-rate-history",{params:e}).then(n),active:()=>i.get("/api/exchange-rate-history/active").then(n),create:e=>i.post("/api/exchange-rate-history",e).then(n),currentRate:(e,t)=>i.post("/api/exchange-rate-history/current-rate",{currency_from:e,currency_to:t}).then(n)},CashierActivity:{list:e=>i.get("/api/cashier-activities",{params:e}).then(n),create:e=>i.post("/api/cashier-activities",e).then(n),stats:e=>i.get("/api/cashier-activities/stats",{params:e}).then(n)},HelpRequest:{list:e=>i.get("/api/help-requests",{params:e}).then(n),create:e=>i.post("/api/help-requests",e).then(n),resolve:e=>i.post(`/api/help-requests/${e}/resolve`).then(n)},Advertisement:{list:()=>i.get("/api/advertisements").then(n),active:()=>i.get("/api/advertisements/active").then(n),create:e=>i.post("/api/advertisements",e).then(n),update:(e,t)=>i.put(`/api/advertisements/${e}`,t).then(n),delete:e=>i.delete(`/api/advertisements/${e}`).then(n)},News:{list:()=>i.get("/api/news").then(n),active:()=>i.get("/api/news/active").then(n),create:e=>i.post("/api/news",e).then(n),update:(e,t)=>i.put(`/api/news/${e}`,t).then(n),delete:e=>i.delete(`/api/news/${e}`).then(n)},User:{list:()=>i.get("/api/users").then(n),create:e=>i.post("/api/users",e).then(n),update:(e,t)=>i.put(`/api/users/${e}`,t).then(n),delete:e=>i.delete(`/api/users/${e}`).then(n)},Shop:{list:()=>i.get("/api/shops").then(n),create:e=>i.post("/api/shops",e).then(n),update:(e,t)=>i.put(`/api/shops/${e}`,t).then(n),delete:e=>i.delete(`/api/shops/${e}`).then(n),assignUsers:(e,t)=>i.post(`/api/shops/${e}/assign-users`,{user_ids:t}).then(n)},Counter:{list:e=>i.get(`/api/shops/${e}/counters`).then(n),create:(e,t)=>i.post(`/api/shops/${e}/counters`,t).then(n),update:(e,t)=>i.put(`/api/counters/${e}`,t).then(n),delete:e=>i.delete(`/api/counters/${e}`).then(n)}}};export{Ne as A,ze as M,He as b,i as c,Ae as u};
